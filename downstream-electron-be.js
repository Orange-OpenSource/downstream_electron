/*!
 * downstream-electron,0.4.0-o.1,2021-02-23 17:35:15.301,castlabs GmbH
 * 
 * Copyright (C) 2017 Castlabs GmbH.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(Q,F){if("object"==typeof exports&&"object"==typeof module)module.exports=F(require("electron"),require("underscore"),require("xmldom"),require("mkdirp"),require("jsonfile"),require("flake-idgen"),require("biguint-format"),require("moment/moment"),require("base64-js"),require("url-parse"),require("get-folder-size"));else if("function"==typeof define&&define.amd)define(["electron","underscore","xmldom","mkdirp","jsonfile","flake-idgen","biguint-format","moment/moment","base64-js","url-parse","get-folder-size"],F);else{var B="object"==typeof exports?F(require("electron"),require("underscore"),require("xmldom"),require("mkdirp"),require("jsonfile"),require("flake-idgen"),require("biguint-format"),require("moment/moment"),require("base64-js"),require("url-parse"),require("get-folder-size")):F(Q.electron,Q.underscore,Q.xmldom,Q.mkdirp,Q.jsonfile,Q["flake-idgen"],Q["biguint-format"],Q["moment/moment"],Q["base64-js"],Q["url-parse"],Q["get-folder-size"]);for(var U in B)("object"==typeof exports?exports:Q)[U]=B[U]}}(global,function(__WEBPACK_EXTERNAL_MODULE__2__,__WEBPACK_EXTERNAL_MODULE__5__,__WEBPACK_EXTERNAL_MODULE__10__,__WEBPACK_EXTERNAL_MODULE__13__,__WEBPACK_EXTERNAL_MODULE__29__,__WEBPACK_EXTERNAL_MODULE__40__,__WEBPACK_EXTERNAL_MODULE__41__,__WEBPACK_EXTERNAL_MODULE__50__,__WEBPACK_EXTERNAL_MODULE__52__,__WEBPACK_EXTERNAL_MODULE__58__,__WEBPACK_EXTERNAL_MODULE__100__){return f=[function(module,exports,__webpack_require__){"use strict";eval('\n\nfunction _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nvar errors = __webpack_require__(17);\n\nvar translations = __webpack_require__(18);\n\nvar CODES = __webpack_require__(6);\n\nvar REGEXP_KEYS = /%[A-Za-z0-9_-]+%/g;\n/**\n * @namespace <global>\n * @module util/translation\n * @property {translationErrors} e - {@link translationErrors}\n */\n\nvar translation = {};\n/**\n *\n * @param {object} key - translation object\n * @returns {*} key from translation object\n * @private\n */\n\nfunction _getCode(key) {\n  key = key || {};\n  var code = key.code;\n\n  if (!code) {\n    code = CODES.GENERAL;\n  }\n\n  return code;\n}\n/**\n *\n * @param {object} key - translation object\n * @param {array|object|string|number|boolean} values - translation values\n * @returns {*} all key values\n * @private\n */\n\n\nfunction _getKeyValues(key, values) {\n  var translation = key;\n  var keyValues = [];\n\n  if (_typeof(translation) === "object") {\n    translation = translation.msg;\n  }\n\n  if (translation) {\n    if (values instanceof Array) {\n      var groups = _getUniqueKeys(translation.match(REGEXP_KEYS));\n\n      for (var i = 0, j = Math.min(groups.length, values.length); i < j; i++) {\n        var keyValue = {};\n        keyValue[groups[i].replace(/%/g, "")] = values[i];\n        keyValues.push(keyValue);\n      }\n    } else if (_typeof(values) === "object") {\n      for (var _key in values) {\n        if (values.hasOwnProperty(_key)) {\n          var _keyValue = {};\n          _keyValue[_key] = values[_key];\n          keyValues.push(_keyValue);\n        }\n      }\n    } else if (typeof values === "string" || typeof values === "number" || typeof values === "boolean") {\n      var _groups = translation.match(REGEXP_KEYS) || [];\n\n      for (var _i = 0, _j = _groups.length; _i < _j; _i++) {\n        var _keyValue2 = {};\n        _keyValue2[_groups[_i].replace(/%/g, "")] = values;\n        keyValues.push(_keyValue2);\n      }\n    }\n  }\n\n  if (keyValues && !keyValues.length) {\n    keyValues = undefined;\n  }\n\n  return keyValues;\n}\n/**\n *\n * @param {object} key - translation object\n * @param {array|object|string|number|boolean} values - translation values\n * @returns {*} translated message with attached values\n * @private\n */\n\n\nfunction _getTranslation(key, values) {\n  var translation = key;\n\n  if (_typeof(translation) === "object") {\n    translation = translation.msg;\n  }\n\n  if (translation) {\n    translation = _parseValues(translation, values);\n  } else {\n    translation = "Internal Error";\n  }\n\n  return translation;\n}\n/**\n *\n * @param {array} args - arguments\n * @returns {array} array of all values except 1st one\n * @private\n */\n\n\nfunction _getValues(args) {\n  var values = [];\n\n  for (var i = 1, j = args.length; i < j; i++) {\n    values.push(args[i]);\n  }\n\n  if (values.length === 0) {\n    values = undefined;\n  } else if (values.length === 1) {\n    values = values[0];\n  }\n\n  return values;\n}\n/**\n *\n * @param {array} groups - matched groups\n * @returns {array} unique names\n * @private\n */\n\n\nfunction _getUniqueKeys(groups) {\n  var hashKey = {};\n  var uniqueNames = [];\n  groups = groups || [];\n\n  for (var i = 0, j = groups.length; i < j; i++) {\n    if (!hashKey[groups[i]]) {\n      hashKey[groups[i]] = true;\n      uniqueNames.push(groups[i]);\n    }\n  }\n\n  return uniqueNames;\n}\n/**\n *\n * @param {string} translation - text to be translated\n * @param {array|object|string|number|boolean} values - values to be parsed with translation\n * @returns {*} translation\n * @private\n */\n\n\nfunction _parseValues(translation, values) {\n  values = values || \'\';\n\n  if (values instanceof Array) {\n    var groups = _getUniqueKeys(translation.match(REGEXP_KEYS));\n\n    for (var i = 0, j = Math.min(groups.length, values.length); i < j; i++) {\n      translation = translation.replace(new RegExp(groups[i], "g"), values[i]);\n    }\n  } else if (_typeof(values) === "object") {\n    for (var key in values) {\n      if (values.hasOwnProperty(key)) {\n        translation = translation.replace(new RegExp("%" + key + "%", "g"), values[key]);\n      }\n    }\n\n    translation = translation.replace(REGEXP_KEYS, values);\n  } else if (typeof values === "string" || typeof values === "number" || typeof values === "boolean") {\n    translation = translation.replace(REGEXP_KEYS, values);\n  }\n\n  return translation;\n}\n/**\n * @alias module:util/translation.getError\n * @param {object} key - translation object\n * @returns {{code: *, msg: *, keys: *}} - error object with code, msg and keys\n */\n\n\nfunction getError(key) {\n  var values = _getValues(arguments);\n\n  var keyValues = _getKeyValues(key, values);\n\n  var msg = _getTranslation(key, values);\n\n  var code = _getCode(key);\n\n  return {\n    code: code,\n    msg: msg,\n    keys: keyValues\n  };\n}\n/**\n * @alias module:util/translation.getTranslation\n * @static\n * @param {object} key - translation object\n * @returns {*} - return translated string with correctly applied values\n */\n\n\nfunction getTranslation(key) {\n  var values = _getValues(arguments);\n\n  return _getTranslation(key, values);\n}\n\ntranslation.getError = getError;\ntranslation.getTranslation = getTranslation;\ntranslation.e = errors;\ntranslation.t = translations;\nmodule.exports = translation;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdHJhbnNsYXRpb24vaW5kZXguanM/ZjUyNyJdLCJuYW1lcyI6WyJlcnJvcnMiLCJyZXF1aXJlIiwidHJhbnNsYXRpb25zIiwiQ09ERVMiLCJSRUdFWFBfS0VZUyIsInRyYW5zbGF0aW9uIiwiX2dldENvZGUiLCJrZXkiLCJjb2RlIiwiR0VORVJBTCIsIl9nZXRLZXlWYWx1ZXMiLCJ2YWx1ZXMiLCJrZXlWYWx1ZXMiLCJtc2ciLCJBcnJheSIsImdyb3VwcyIsIl9nZXRVbmlxdWVLZXlzIiwibWF0Y2giLCJpIiwiaiIsIk1hdGgiLCJtaW4iLCJsZW5ndGgiLCJrZXlWYWx1ZSIsInJlcGxhY2UiLCJwdXNoIiwiaGFzT3duUHJvcGVydHkiLCJ1bmRlZmluZWQiLCJfZ2V0VHJhbnNsYXRpb24iLCJfcGFyc2VWYWx1ZXMiLCJfZ2V0VmFsdWVzIiwiYXJncyIsImhhc2hLZXkiLCJ1bmlxdWVOYW1lcyIsIlJlZ0V4cCIsImdldEVycm9yIiwiYXJndW1lbnRzIiwia2V5cyIsImdldFRyYW5zbGF0aW9uIiwiZSIsInQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7OztBQUViLElBQU1BLE1BQU0sR0FBR0MsbUJBQU8sQ0FBQyxFQUFELENBQXRCOztBQUNBLElBQU1DLFlBQVksR0FBR0QsbUJBQU8sQ0FBQyxFQUFELENBQTVCOztBQUNBLElBQU1FLEtBQUssR0FBR0YsbUJBQU8sQ0FBQyxDQUFELENBQXJCOztBQUVBLElBQU1HLFdBQVcsR0FBRyxtQkFBcEI7QUFFQTs7Ozs7O0FBS0EsSUFBSUMsV0FBVyxHQUFHLEVBQWxCO0FBR0E7Ozs7Ozs7QUFNQSxTQUFTQyxRQUFULENBQW1CQyxHQUFuQixFQUF3QjtBQUN0QkEsS0FBRyxHQUFHQSxHQUFHLElBQUksRUFBYjtBQUNBLE1BQUlDLElBQUksR0FBR0QsR0FBRyxDQUFDQyxJQUFmOztBQUNBLE1BQUksQ0FBQ0EsSUFBTCxFQUFXO0FBQ1RBLFFBQUksR0FBR0wsS0FB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b3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgZXJyb3JzID0gcmVxdWlyZShcIi4vX2Vycm9yc1wiKTtcbmNvbnN0IHRyYW5zbGF0aW9ucyA9IHJlcXVpcmUoXCIuL190cmFuc2xhdGlvbnNcIik7XG5jb25zdCBDT0RFUyA9IHJlcXVpcmUoXCIuLy4uL2Rvd25sb2Fkcy9jb2Rlc1wiKTtcblxuY29uc3QgUkVHRVhQX0tFWVMgPSAvJVtBLVphLXowLTlfLV0rJS9nO1xuXG4vKipcbiAqIEBuYW1lc3BhY2UgPGdsb2JhbD5cbiAqIEBtb2R1bGUgdXRpbC90cmFuc2xhdGlvblxuICogQHByb3BlcnR5IHt0cmFuc2xhdGlvbkVycm9yc30gZSAtIHtAbGluayB0cmFuc2xhdGlvbkVycm9yc31cbiAqL1xubGV0IHRyYW5zbGF0aW9uID0ge307XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGtleSAtIHRyYW5zbGF0aW9uIG9iamVjdFxuICogQHJldHVybnMgeyp9IGtleSBmcm9tIHRyYW5zbGF0aW9uIG9iamVjdFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2dldENvZGUgKGtleSkge1xuICBrZXkgPSBrZXkgfHwge307XG4gIGxldCBjb2RlID0ga2V5LmNvZGU7XG4gIGlmICghY29kZSkge1xuICAgIGNvZGUgPSBDT0RFUy5HRU5FUkFMXG4gIH1cbiAgcmV0dXJuIGNvZGU7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBrZXkgLSB0cmFuc2xhdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7YXJyYXl8b2JqZWN0fHN0cmluZ3xudW1iZXJ8Ym9vbGVhbn0gdmFsdWVzIC0gdHJhbnNsYXRpb24gdmFsdWVzXG4gKiBAcmV0dXJucyB7Kn0gYWxsIGtleSB2YWx1ZXNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9nZXRLZXlWYWx1ZXMgKGtleSwgdmFsdWVzKSB7XG4gIGxldCB0cmFuc2xhdGlvbiA9IGtleTtcbiAgbGV0IGtleVZhbHVlcyA9IFtdO1xuICBpZiAodHlwZW9mIHRyYW5zbGF0aW9uID09PSBcIm9iamVjdFwiKSB7XG4gICAgdHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvbi5tc2c7XG4gIH1cbiAgaWYgKHRyYW5zbGF0aW9uKSB7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBsZXQgZ3JvdXBzID0gX2dldFVuaXF1ZUtleXModHJhbnNsYXRpb24ubWF0Y2goUkVHRVhQX0tFWVMpKTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gTWF0aC5taW4oZ3JvdXBzLmxlbmd0aCwgdmFsdWVzLmxlbmd0aCk7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgbGV0IGtleVZhbHVlID0ge307XG4gICAgICAgIGtleVZhbHVlW2dyb3Vwc1tpXS5yZXBsYWNlKC8lL2csIFwiXCIpXSA9IHZhbHVlc1tpXTtcbiAgICAgICAga2V5VmFsdWVzLnB1c2goa2V5VmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlcyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChsZXQga2V5IGluIHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBsZXQga2V5VmFsdWUgPSB7fTtcbiAgICAgICAgICBrZXlWYWx1ZVtrZXldID0gdmFsdWVzW2tleV07XG4gICAgICAgICAga2V5VmFsdWVzLnB1c2goa2V5VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWVzID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWx1ZXMgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlcyA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHRyYW5zbGF0aW9uLm1hdGNoKFJFR0VYUF9LRVlTKSB8fCBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gZ3JvdXBzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICBsZXQga2V5VmFsdWUgPSB7fTtcbiAgICAgICAga2V5VmFsdWVbZ3JvdXBzW2ldLnJlcGxhY2UoLyUvZywgXCJcIildID0gdmFsdWVzO1xuICAgICAgICBrZXlWYWx1ZXMucHVzaChrZXlWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChrZXlWYWx1ZXMgJiYgIWtleVZhbHVlcy5sZW5ndGgpIHtcbiAgICBrZXlWYWx1ZXMgPSB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGtleVZhbHVlcztcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGtleSAtIHRyYW5zbGF0aW9uIG9iamVjdFxuICogQHBhcmFtIHthcnJheXxvYmplY3R8c3RyaW5nfG51bWJlcnxib29sZWFufSB2YWx1ZXMgLSB0cmFuc2xhdGlvbiB2YWx1ZXNcbiAqIEByZXR1cm5zIHsqfSB0cmFuc2xhdGVkIG1lc3NhZ2Ugd2l0aCBhdHRhY2hlZCB2YWx1ZXNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9nZXRUcmFuc2xhdGlvbiAoa2V5LCB2YWx1ZXMpIHtcbiAgbGV0IHRyYW5zbGF0aW9uID0ga2V5O1xuICBpZiAodHlwZW9mIHRyYW5zbGF0aW9uID09PSBcIm9iamVjdFwiKSB7XG4gICAgdHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvbi5tc2c7XG4gIH1cbiAgaWYgKHRyYW5zbGF0aW9uKSB7XG4gICAgdHJhbnNsYXRpb24gPSBfcGFyc2VWYWx1ZXModHJhbnNsYXRpb24sIHZhbHVlcyk7XG4gIH0gZWxzZSB7XG4gICAgdHJhbnNsYXRpb24gPSBcIkludGVybmFsIEVycm9yXCI7XG4gIH1cbiAgcmV0dXJuIHRyYW5zbGF0aW9uO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge2FycmF5fSBhcmdzIC0gYXJndW1lbnRzXG4gKiBAcmV0dXJucyB7YXJyYXl9IGFycmF5IG9mIGFsbCB2YWx1ZXMgZXhjZXB0IDFzdCBvbmVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9nZXRWYWx1ZXMgKGFyZ3MpIHtcbiAgbGV0IHZhbHVlcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMSwgaiA9IGFyZ3MubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgdmFsdWVzLnB1c2goYXJnc1tpXSk7XG4gIH1cbiAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICB2YWx1ZXMgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMSkge1xuICAgIHZhbHVlcyA9IHZhbHVlc1swXVxuICB9XG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7YXJyYXl9IGdyb3VwcyAtIG1hdGNoZWQgZ3JvdXBzXG4gKiBAcmV0dXJucyB7YXJyYXl9IHVuaXF1ZSBuYW1lc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2dldFVuaXF1ZUtleXMgKGdyb3Vwcykge1xuICBsZXQgaGFzaEtleSA9IHt9O1xuICBsZXQgdW5pcXVlTmFtZXMgPSBbXTtcbiAgZ3JvdXBzID0gZ3JvdXBzIHx8IFtdO1xuICBmb3IgKGxldCBpID0gMCwgaiA9IGdyb3Vwcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBpZiAoIWhhc2hLZXlbZ3JvdXBzW2ldXSkge1xuICAgICAgaGFzaEtleVtncm91cHNbaV1dID0gdHJ1ZTtcbiAgICAgIHVuaXF1ZU5hbWVzLnB1c2goZ3JvdXBzW2ldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuaXF1ZU5hbWVzO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNsYXRpb24gLSB0ZXh0IHRvIGJlIHRyYW5zbGF0ZWRcbiAqIEBwYXJhbSB7YXJyYXl8b2JqZWN0fHN0cmluZ3xudW1iZXJ8Ym9vbGVhbn0gdmFsdWVzIC0gdmFsdWVzIHRvIGJlIHBhcnNlZCB3aXRoIHRyYW5zbGF0aW9uXG4gKiBAcmV0dXJucyB7Kn0gdHJhbnNsYXRpb25cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9wYXJzZVZhbHVlcyAodHJhbnNsYXRpb24sIHZhbHVlcykge1xuICB2YWx1ZXMgPSB2YWx1ZXMgfHwgJyc7XG4gIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIGNvbnN0IGdyb3VwcyA9IF9nZXRVbmlxdWVLZXlzKHRyYW5zbGF0aW9uLm1hdGNoKFJFR0VYUF9LRVlTKSk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBNYXRoLm1pbihncm91cHMubGVuZ3RoLCB2YWx1ZXMubGVuZ3RoKTsgaSA8IGo7IGkrKykge1xuICAgICAgdHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvbi5yZXBsYWNlKG5ldyBSZWdFeHAoZ3JvdXBzW2ldLCBcImdcIiksIHZhbHVlc1tpXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZXMgPT09IFwib2JqZWN0XCIpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvbi5yZXBsYWNlKG5ldyBSZWdFeHAoXCIlXCIgKyBrZXkgKyBcIiVcIiwgXCJnXCIpLCB2YWx1ZXNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRyYW5zbGF0aW9uID0gdHJhbnNsYXRpb24ucmVwbGFjZShSRUdFWFBfS0VZUywgdmFsdWVzKTtcblxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZXMgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlcyA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgdmFsdWVzID09PSBcImJvb2xlYW5cIikge1xuICAgIHRyYW5zbGF0aW9uID0gdHJhbnNsYXRpb24ucmVwbGFjZShSRUdFWFBfS0VZUywgdmFsdWVzKTtcblxuICB9XG4gIHJldHVybiB0cmFuc2xhdGlvbjtcbn1cblxuLyoqXG4gKiBAYWxpYXMgbW9kdWxlOnV0aWwvdHJhbnNsYXRpb24uZ2V0RXJyb3JcbiAqIEBwYXJhbSB7b2JqZWN0fSBrZXkgLSB0cmFuc2xhdGlvbiBvYmplY3RcbiAqIEByZXR1cm5zIHt7Y29kZTogKiwgbXNnOiAqLCBrZXlzOiAqfX0gLSBlcnJvciBvYmplY3Qgd2l0aCBjb2RlLCBtc2cgYW5kIGtleXNcbiAqL1xuZnVuY3Rpb24gZ2V0RXJyb3IgKGtleSkge1xuICBjb25zdCB2YWx1ZXMgPSBfZ2V0VmFsdWVzKGFyZ3VtZW50cyk7XG4gIGNvbnN0IGtleVZhbHVlcyA9IF9nZXRLZXlWYWx1ZXMoa2V5LCB2YWx1ZXMpO1xuICBjb25zdCBtc2cgPSBfZ2V0VHJhbnNsYXRpb24oa2V5LCB2YWx1ZXMpO1xuICBjb25zdCBjb2RlID0gX2dldENvZGUoa2V5KTtcbiAgcmV0dXJuIHtcbiAgICBjb2RlOiBjb2RlLFxuICAgIG1zZzogbXNnLFxuICAgIGtleXM6IGtleVZhbHVlcyxcbiAgfTtcbn1cblxuLyoqXG4gKiBAYWxpYXMgbW9kdWxlOnV0aWwvdHJhbnNsYXRpb24uZ2V0VHJhbnNsYXRpb25cbiAqIEBzdGF0aWNcbiAqIEBwYXJhbSB7b2JqZWN0fSBrZXkgLSB0cmFuc2xhdGlvbiBvYmplY3RcbiAqIEByZXR1cm5zIHsqfSAtIHJldHVybiB0cmFuc2xhdGVkIHN0cmluZyB3aXRoIGNvcnJlY3RseSBhcHBsaWVkIHZhbHVlc1xuICovXG5mdW5jdGlvbiBnZXRUcmFuc2xhdGlvbiAoa2V5KSB7XG4gIGNvbnN0IHZhbHVlcyA9IF9nZXRWYWx1ZXMoYXJndW1lbnRzKTtcbiAgcmV0dXJuIF9nZXRUcmFuc2xhdGlvbihrZXksIHZhbHVlcyk7XG59XG5cbnRyYW5zbGF0aW9uLmdldEVycm9yID0gZ2V0RXJyb3I7XG50cmFuc2xhdGlvbi5nZXRUcmFuc2xhdGlvbiA9IGdldFRyYW5zbGF0aW9uO1xudHJhbnNsYXRpb24uZSA9IGVycm9ycztcbnRyYW5zbGF0aW9uLnQgPSB0cmFuc2xhdGlvbnM7XG5cbm1vZHVsZS5leHBvcnRzID0gdHJhbnNsYXRpb247XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')},function(module,exports,__webpack_require__){"use strict";eval('\n/**\n * @typedef Configuration\n * @property {string=} appDir main directory path, can be any valid path, default is electronApp.getPath(\'userData\')\n * @property {string=} settingsName - name of the folder in main directory path where to store settings\n * @property {string=} publicName - name of the folder in main directory path which will be served over http\n * @property {string=} downloadsName - name of the folder in main directory path and publicName where to store assets\n * @property {string=} offlineDomain - on which domain the content should be served, default is 127.0.0.1\n * @property {number=} offlineContentPortStart - on which port offline content should be served, default is 3010\n * @property {number=} maxOfflineContentPortRange - max range for offline port to on which content can be served\n *   It will try from {offlineContentPortStart} and if taken it will try next until it finds a free one\n * @property {number=} numberOfManifestsInParallel - max number of manifest that can be downloaded at the same time,\n *   the rest will go into queue.\n *   Be reasonable here, as it might slow down your computer, default value is 2. With 10 and very larges manifests\n *   it might go to hundreds of chunks (50 files can be downloaded at the same time per manifest). Also the highger number\n *   doesn\'t mean it will downloads all movies faster. You should find here some balance.\n *   Seems like 2-3 manifests gives the best results, 1 manifest limitation might work better for slower computers.\n * @property {regex | string=} customManifestIdFolderRegex - regex to use to validate custom manifest id - bear in mind that this\n * need to be also a valid folder name.<br>\n * By default it matches any letter or number or unicode characters (regional characters) or "-" or "_" as a first character<br>\n * Then it may have any letter or number or unicode characters (regional characters) or space or any of the following characters:\n * ,.;\'[]{}!@#$%&*()-_=+\n *\n * @property {string=} openingTagForInvalidCustomManifestIdCharacter - when customManifestId is being invalidated\n * against customManifestIdFolderRegex it will raise the error and include the customManifestId with marked invalid characters\n * this is the opening tag to be added before invalid character\n *\n * @property {string=} closingTagForInvalidCustomManifestIdCharacter - when customManifestId is being invalidated\n * against customManifestIdFolderRegex it will raise the error and include the customManifestId with marked invalid characters\n * this is the closing tag to be added after invalid character\n *\n * @namespace DownstreamElectronBE.configuration\n * @description\n * During initialization you can configure your app\n * @example\n * //somewhere in the main process\n * const downstreamElectron = require(\'downstream-electron\');\n * const userSettings = {\n *   appDir: "/Users/admin/myApp",\n *   settingsName: "settings",\n *   publicName: "public",\n *   downloadsName: "movies"\n *   numberOfManifestsInParallel: 3\n * };\n * function createWindow() {\n *   downstreamElectron.init(userSettings);\n *   const win = new BrowserWindow({\n *     width: 1200,\n *     height: 700,\n *     resizable: true,\n *     webPreferences: {\n *       plugins: true,\n *       nodeIntegration: true\n *     }\n *   });\n *   win.loadURL(\'file://index.html\');\n *   win.webContents.openDevTools();\n * }\n * app.on(\'ready\', createWindow);\n */\n\nvar electronApp = __webpack_require__(2).app;\n\nvar path = __webpack_require__(4);\n\nvar settings = {\n  downloadingThreadsRules: {\n    items: [{\n      max: 10,\n      files: 5\n    }, {\n      max: 100,\n      files: 10\n    }, {\n      max: 1000,\n      files: 30\n    }, {\n      max: 100000,\n      files: 50\n    }],\n    threads: [{\n      size: 10,\n      number: 1\n    }, {\n      size: 100,\n      number: 3\n    }, {\n      size: 1000,\n      number: 4\n    }, {\n      size: 100000,\n      number: 5\n    }]\n  },\n  MAX_ERRORS_DOWNLOAD_RETRY: 5,\n  MAX_INTERNET_ERRORS_DOWNLOAD_CHUNK_RETRY: 100,\n  MAX_ERRORS_DOWNLOAD_CHUNK_RETRY: 5,\n  offlineDomain: "http://127.0.0.1",\n  offlineContentPortStart: 3010,\n  maxOfflineContentPortRange: 3030,\n  numberOfManifestsInParallel: 2,\n  stopOnError: false,\n  stores: {\n    DOWNLOADS: {\n      "LEFT": "left",\n      "DOWNLOADING": "downloading",\n      "DOWNLOADED": "downloaded",\n      "ERRORS": "errors"\n    },\n    STATUS: "status",\n    PARAMS: "params",\n    MANIFEST: "manifest",\n    PERSISTENT: "persistent",\n    DATA: "data"\n  },\n  saveToDisk: true,\n  times: {\n    DOWNLOAD_TIMEOUT: 5000,\n    RETRY_TIMEOUT: 5000\n  },\n  useChunkedEncoding: false,\n  useHeadRequests: true,\n  noCache: false,\n  defaultManifestRequestOptions: {\n    headers: {\n      "Accept": "*/*",\n      // \'Accept-Encoding\': \'gzip, deflate, br\', // gzip doesn\'t work\n      // \'Accept-Language\': \'en-US,en;q=0.8,pl;q=0.6\',\n      // \'Cache-Control\': \'no-cache\',\n      // \'Connection\': \'keep-alive\', // @TODO investigate it\n      // \'Pragma\': \'no-cache\',\n      "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Electron/1.8.6 Safari/537.36"\n    },\n    timeout: 5000\n  },\n  // matches any letter or number or unicode characters (regional characters) or "-" or "_" as a start\n  // then it may have any letter or number or unicode characters (regional characters) or space or any of the following characters\n  // ,.;\'[]{}!@#$%&*()-_=+\n  // and is all case insensitive\n  customManifestIdFolderRegex: /^([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|\\-|\\_){1,1}([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|\\ |\\,|\\.|\\;|\\\'|\\[|\\]|\\{|\\}|\\!|\\@|\\#|\\$|\\%|\\&|\\*|\\(|\\)|\\-|\\_|\\=|\\+?){0,49}$/i,\n  openingTagForInvalidCustomManifestIdCharacter: \'<span style=\\\'background-color:blue;\\\'>\',\n  closingTagForInvalidCustomManifestIdCharacter: \'</span>\'\n};\n\nfunction loadUserSettings(jsonSettings) {\n  var appDir = electronApp.getPath("userData");\n  var settingsName = "settings";\n  var publicName = "public";\n  var downloadsName = "movies";\n\n  if (jsonSettings) {\n    if (jsonSettings.appDir) {\n      appDir = jsonSettings.appDir;\n    }\n\n    if (jsonSettings.settingsName) {\n      settingsName = jsonSettings.settingsName;\n    }\n\n    if (jsonSettings.publicName) {\n      publicName = jsonSettings.publicName;\n    }\n\n    if (jsonSettings.downloadsName) {\n      downloadsName = jsonSettings.downloadsName;\n    }\n\n    if (jsonSettings.offlineDomain) {\n      settings.offlineDomain = jsonSettings.offlineDomain;\n    }\n\n    if (jsonSettings.offlineContentPortStart) {\n      settings.offlineContentPortStart = jsonSettings.offlineContentPortStart;\n    }\n\n    if (jsonSettings.maxOfflineContentPortRange) {\n      settings.maxOfflineContentPortRange = jsonSettings.maxOfflineContentPortRange;\n    }\n\n    if (jsonSettings.numberOfManifestsInParallel) {\n      settings.numberOfManifestsInParallel = jsonSettings.numberOfManifestsInParallel;\n    }\n\n    if (jsonSettings.stopOnError !== undefined) {\n      settings.stopOnError = jsonSettings.stopOnError;\n    }\n\n    if (jsonSettings.customManifestIdFolderRegex) {\n      settings.customManifestIdFolderRegex = jsonSettings.customManifestIdFolderRegex;\n    }\n\n    if (jsonSettings.openingTagForInvalidCustomManifestIdCharacter) {\n      settings.openingTagForInvalidCustomManifestIdCharacter = jsonSettings.openingTagForInvalidCustomManifestIdCharacter;\n    }\n\n    if (jsonSettings.closingTagForInvalidCustomManifestIdCharacter) {\n      settings.closingTagForInvalidCustomManifestIdCharacter = jsonSettings.closingTagForInvalidCustomManifestIdCharacter;\n    }\n\n    if (jsonSettings.useHeadRequests !== undefined) {\n      settings.useHeadRequests = jsonSettings.useHeadRequests;\n    }\n\n    if (jsonSettings.times && jsonSettings.times.RETRY_TIMEOUT) {\n      settings.times.RETRY_TIMEOUT = jsonSettings.times.RETRY_TIMEOUT;\n    }\n\n    if (jsonSettings.MAX_ERRORS_DOWNLOAD_RETRY) {\n      settings.MAX_ERRORS_DOWNLOAD_RETRY = jsonSettings.MAX_ERRORS_DOWNLOAD_RETRY;\n    }\n\n    if (jsonSettings.MAX_INTERNET_ERRORS_DOWNLOAD_CHUNK_RETRY) {\n      settings.MAX_INTERNET_ERRORS_DOWNLOAD_CHUNK_RETRY = jsonSettings.MAX_INTERNET_ERRORS_DOWNLOAD_CHUNK_RETRY;\n    }\n\n    if (jsonSettings.MAX_ERRORS_DOWNLOAD_CHUNK_RETRY) {\n      settings.MAX_ERRORS_DOWNLOAD_CHUNK_RETRY = jsonSettings.MAX_ERRORS_DOWNLOAD_CHUNK_RETRY;\n    }\n\n    if (jsonSettings.noCache) {\n      settings.noCache = jsonSettings.noCache;\n    }\n  }\n\n  appDir = path.join(path.resolve(appDir), "/");\n  var settingsFolder = path.join(path.resolve(appDir + settingsName) + "/", "/");\n  var publicFolderPath = path.join(path.resolve(appDir + publicName) + "/", "/");\n  var downloadsFolderPath = path.join(path.resolve(publicFolderPath + downloadsName) + "/", "/");\n  settings.appDir = appDir;\n  settings.downloadsFolderPath = downloadsFolderPath;\n  settings.downloadsName = downloadsName;\n  settings.publicFolderPath = publicFolderPath;\n  settings.settingsFolder = settingsFolder; // console.log(\'appDir:\', appDir);\n}\n\nfunction getSettings() {\n  return settings;\n}\n\nexports.load = loadUserSettings;\nexports.getSettings = getSettings;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYXBwLXNldHRpbmdzLmpzP2M0MGMiXSwibmFtZXMiOlsiZWxlY3Ryb25BcHAiLCJyZXF1aXJlIiwiYXBwIiwicGF0aCIsInNldHRpbmdzIiwiZG93bmxvYWRpbmdUaHJlYWRzUnVsZXMiLCJpdGVtcyIsIm1heCIsImZpbGVzIiwidGhyZWFkcyIsInNpemUiLCJudW1iZXIiLCJNQVhfRVJST1JTX0RPV05MT0FEX1JFVFJZIiwiTUFYX0lOVEVSTkVUX0VSUk9SU19ET1dOTE9BRF9DSFVOS19SRVRSWSIsIk1BWF9FUlJPUlNfRE9XTkxPQURfQ0hVTktfUkVUUlkiLCJvZmZsaW5lRG9tYWluIiwib2ZmbGluZUNvbnRlbnRQb3J0U3RhcnQiLCJtYXhPZmZsaW5lQ29udGVudFBvcnRSYW5nZSIsIm51bWJlck9mTWFuaWZlc3RzSW5QYXJhbGxlbCIsInN0b3BPbkVycm9yIiwic3RvcmVzIiwiRE9XTkxPQURTIiwiU1RBVFVTIiwiUEFSQU1TIiwiTUFOSUZFU1QiLCJQRVJTSVNURU5UIiwiREFUQSIsInNhdmVUb0Rpc2siLCJ0aW1lcyIsIkRPV05MT0FEX1RJTUVPVVQiLCJSRVRSWV9USU1FT1VUIiwidXNlQ2h1bmtlZEVuY29kaW5nIiwidXNlSGVhZFJlcXVlc3RzIiwibm9DYWNoZSIsImRlZmF1bHRNYW5pZmVzdFJlcXVlc3RPcHRpb25zIiwiaGVhZGVycyIsInRpbWVvdXQiLCJjdXN0b21NYW5pZmVzdElkRm9sZGVyUmVnZXgiLCJvcGVuaW5nVGFnRm9ySW52YWxpZEN1c3RvbU1hbmlmZXN0SWRDaGFyYWN0ZXIiLCJjbG9zaW5nVGFnRm9ySW52YWxpZEN1c3RvbU1hbmlmZXN0SWRDaGFyYWN0ZXIiLCJsb2FkVXNlclNldHRpbmdzIiwianNvblNldHRpbmdzIiwiYXBwRGlyIiwiZ2V0UGF0aCIsInNldHRpbmdzTmFtZSIsInB1YmxpY05hbWUiLCJkb3dubG9hZHNOYW1lIiwidW5kZWZpbmVkIiwiam9pbiIsInJlc29sdmUiLCJzZXR0aW5nc0ZvbGRlciIsInB1YmxpY0ZvbGRlclBhdGgiLCJkb3dubG9hZHNGb2xkZXJQYXRoIiwiZ2V0U2V0dGluZ3MiLCJleHBvcnRzIiwibG9hZCJdLCJtYXBwaW5ncyI6IkFBQWE7QUFFYjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNERBLElBQU1BLFdBQVcsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQVAsQ0FBb0JDLEdBQXhDOztBQUNBLElBQU1DLElBQUksR0FBR0YsbUJBQU8sQ0FBQyxDQUFELENBQXBCOztBQUNBLElBQUlHLFFBQVEsR0FBRztBQUNiQyx5QkFBdUIsRUFBRTtBQUN2QkMsU0FBSyxFQUFFLENBQ0w7QUFBQ0MsU0FBRyxFQUFFLEVBQU47QUFBVUMsV0FBSyxFQUFFO0FBQWpCLEtBREssRUFFTDtBQUFDRCxTQUFHLEVBQUUsR0FBTjtBQUFXQyxXQUFLLEVBQUU7QUFBbEIsS0FGSyxFQUdMO0FBQUNELFNBQUcsRUFBRSxJQUFOO0FBQVlDLFdBQUssRUFBRTtBQUFuQixLQUhLLEVBSUw7QUFBQ0QsU0FBRyxFQUFFLE1BQU47QUFBY0MsV0FBSyxFQUFFO0FBQXJCLEtBSkssQ0FEZ0I7QUFPdkJDLFdBQU8sRUFBRSxDQUNQO0FBQUNDLFVBQUksRUFBRSxFQUFQO0FBQVdDLFlBQU0sRUFBRTtBQUFuQixLQURPLEVBRVA7QUFBQ0QsVUFBSSxFQUFFLEdBQVA7QUFBWUMsWUFBTSxFQUFFO0FBQXBCLEtBRk8sRUFHUDtBQUFDRCxVQUFJLEVBQUUsSUFBUDtBQUFhQyxZQUFNLEVBQUU7QUFBckIsS0FITyxFQUlQO0FBQUNELFVBQUksRUFBRSxNQUFQO0FBQWVDLFlBQU0sRUFBRTtBQUF2QixLQUpPO0FBUGMsR0FEWjtBQWViQywyQkFBeUIsRUFBRSxDQWZkO0FBZ0JiQywwQ0FBd0MsRUFBRSxHQWhCN0I7QUFpQmJDLGlDQUErQixFQUFFLENBakJwQjtBQWtCYkMsZUFBYSxFQUFFLGtCQWxCRjtBQW1CYkMseUJBQXVCLEVBQUUsSUFuQlo7QUFvQmJDLDRCQUEwQixFQUFFLElBcEJmO0FBcUJiQyw2QkFBMkIsRUFBRSxDQXJCaEI7QUFzQmJDLGFBQVcsRUFBRSxLQXRCQTtBQXVCYkMsUUFBTSxFQUFFO0FBQ05DLGFBQVMsRUFBRTtBQUNULGNBQVEsTUFEQztBQUVULHFCQUFlLGFBRk47QUFHVCxvQkFBYyxZQUhMO0FBSVQsZ0JBQVU7QUFKRCxLQURMO0FBT05DLFVBQU0sRUFBRSxRQVBGO0FBUU5DLFVBQU0sRUFBRSxRQVJGO0FBU05DLFlBQVEsRUFBRSxVQVRKO0FBVU5DLGNBQVUsRUFBRSxZQVZOO0FBV05DLFFBQUksRUFBRTtBQVhBLEdBdkJLO0FBb0NiQyxZQUFVLEVBQUUsSUFwQ0M7QUFxQ2JDLE9BQUssRUFBRTtBQUNMQyxvQkFBZ0IsRUFBRSxJQURiO0FBRUxDLGlCQUFhLEVBQUU7QUFGVixHQXJDTTtBQXlDYkMsb0JBQWtCLEVBQUUsS0F6Q1A7QUEwQ2JDLGlCQUFlLEVBQUUsSUExQ0o7QUEyQ2JDLFNBQU8sRUFBRSxLQTNDSTtBQTRDYkMsK0JBQTZCLEVBQUU7QUFDN0JDLFdBQU8sRUFBRTtBQUNQLGdCQUFVLEtBREg7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQWM7QUFQUCxLQURvQjtBQVU3QkMsV0FBTyxFQUFFO0FBVm9CLEdBNUNsQjtBQXdEYjtBQUNBO0FBQ0E7QUFDQTtBQUNBQyw2QkFBMkIsRUFBRSxpTUE1RGhCO0FBNkRiQywrQ0FBNkMsRUFBRSx5Q0E3RGxDO0FBOERiQywrQ0FBNkMsRUFBRTtBQTlEbEMsQ0FBZjs7QUFpRUEsU0FBU0MsZ0JBQVQsQ0FBMkJDLFlBQTNCLEVBQXlDO0FBQ3ZDLE1BQUlDLE1BQU0sR0FBRzFDLFdBQVcsQ0FBQzJDLE9BQVosQ0FBb0IsVUFBcEIsQ0FBYjtBQUVBLE1BQUlDLFlBQVksR0FBRyxVQUFuQjtBQUNBLE1BQUlDLFVBQVUsR0FBRyxRQUFqQjtBQUNBLE1BQUlDLGFBQWEsR0FBRyxRQUFwQjs7QUFFQSxNQUFJTCxZQUFKLEVBQWtCO0FBQ2hCLFFBQUlBLFlBQVksQ0FBQ0MsTUFBakIsRUFBeUI7QUFDdkJBLFlBQU0sR0FBR0QsWUFBWSxDQUFDQyxNQUF0QjtBQUNEOztBQUNELFFBQUlELFlBQVksQ0FBQ0csWUFBakIsRUFBK0I7QUFDN0JBLGtCQUFZLEdBQUdILFlBQVksQ0FBQ0csWUFBNUI7QUFDRDs7QUFDRCxRQUFJSCxZQUFZLENBQUNJLFVBQWpCLEVBQTZCO0FBQzNCQSxnQkFBVSxHQUFHSixZQUFZLENBQUNJLFVBQTFCO0FBQ0Q7O0FBQ0QsUUFBSUosWUFBWSxDQUFDSyxhQUFqQixFQUFnQztBQUM5QkEsbUJBQWEsR0FBR0wsWUFBWSxDQUFDSyxhQUE3QjtBQUNEOztBQUNELFFBQUlMLFlBQVksQ0FBQzFCLGFBQWpCLEVBQWdDO0FBQzlCWCxjQUFRLENBQUNXLGFBQVQsR0FBeUIwQixZQUFZLENBQUMxQixhQUF0QztBQUNEOztBQUNELFFBQUkwQixZQUFZLENBQUN6Qix1QkFBakIsRUFBMEM7QUFDeENaLGNBQVEsQ0FBQ1ksdUJBQVQsR0FBbUN5QixZQUFZLENBQUN6Qix1QkFBaEQ7QUFDRDs7QUFDRCxRQUFJeUIsWUFBWSxDQUFDeEIsMEJBQWpCLEVBQTZDO0FBQzNDYixjQUFRLENBQUNhLDBCQUFULEdBQXNDd0IsWUFBWSxDQUFDeEIsMEJBQW5EO0FBQ0Q7O0FBQ0QsUUFBSXdCLFlBQVksQ0FBQ3ZCLDJCQUFqQixFQUE4QztBQUM1Q2QsY0FBUSxDQUFDYywyQkFBVCxHQUF1Q3VCLFlBQVksQ0FBQ3ZCLDJCQUFwRDtBQUNEOztBQUNELFFBQUl1QixZQUFZLENBQUN0QixXQUFiLEtBQTZCNEIsU0FBakMsRUFBNEM7QUFDMUMzQyxjQUFRLENBQUNlLFdBQVQsR0FBdUJzQixZQUFZLENBQUN0QixXQUFwQztBQUNEOztBQUNELFFBQUlzQixZQUFZLENBQUNKLDJCQUFqQixFQUE4QztBQUM1Q2pDLGNBQVEsQ0FBQ2lDLDJCQUFULEdBQXVDSSxZQUFZLENBQUNKLDJCQUFwRDtBQUNEOztBQUNELFFBQUlJLFlBQVksQ0FBQ0gsNkNBQWpCLEVBQWdFO0FBQzlEbEMsY0FBUSxDQUFDa0MsNkNBQVQsR0FBeURHLFlBQVksQ0FBQ0gsNkNBQXRFO0FBQ0Q7O0FBQ0QsUUFBSUcsWUFBWSxDQUFDRiw2Q0FBakIsRUFBZ0U7QUFDOURuQyxjQUFRLENBQUNtQyw2Q0FBVCxHQUF5REUsWUFBWSxDQUFDRiw2Q0FBdEU7QUFDRDs7QUFDRCxRQUFJRSxZQUFZLENBQUNULGVBQWIsS0FBaUNlLFNBQXJDLEVBQWdEO0FBQzlDM0MsY0FBUSxDQUFDNEIsZUFBVCxHQUEyQlMsWUFBWSxDQUFDVCxlQUF4QztBQUNEOztBQUNELFFBQUlTLFlBQVksQ0FBQ2IsS0FBYixJQUFzQmEsWUFBWSxDQUFDYixLQUFiLENBQW1CRSxhQUE3QyxFQUE0RDtBQUMxRDFCLGNBQVEsQ0FBQ3dCLEtBQVQsQ0FBZUUsYUFBZixHQUErQlcsWUFBWSxDQUFDYixLQUFiLENBQW1CRSxhQUFsRDtBQUNEOztBQUNELFFBQUlXLFlBQVksQ0FBQzdCLHlCQUFqQixFQUE0QztBQUMxQ1IsY0FBUSxDQUFDUSx5QkFBVCxHQUFxQzZCLFlBQVksQ0FBQzdCLHlCQUFsRDtBQUNEOztBQUNELFFBQUk2QixZQUFZLENBQUM1Qix3Q0FBakIsRUFBMkQ7QUFDekRULGNBQVEsQ0FBQ1Msd0NBQVQsR0FBb0Q0QixZQUFZLENBQUM1Qix3Q0FBakU7QUFDRDs7QUFDRCxRQUFJNEIsWUFBWSxDQUFDM0IsK0JBQWpCLEVBQWtEO0FBQ2hEVixjQUFRLENBQUNVLCtCQUFULEdBQTJDMkIsWUFBWSxDQUFDM0IsK0JBQXhEO0FBQ0Q7O0FBQ0QsUUFBSTJCLFlBQVksQ0FBQ1IsT0FBakIsRUFBMEI7QUFDeEI3QixjQUFRLENBQUM2QixPQUFULEdBQW1CUSxZQUFZLENBQUNSLE9BQWhDO0FBQ0Q7QUFDRjs7QUFFRFMsUUFBTSxHQUFHdkMsSUFBSSxDQUFDNkMsSUFBTCxDQUFVN0MsSUFBSSxDQUFDOEMsT0FBTCxDQUFhUCxNQUFiLENBQVYsRUFBZ0MsR0FBaEMsQ0FBVDtBQUVBLE1BQUlRLGNBQWMsR0FBRy9DLElBQUksQ0FBQzZDLElBQUwsQ0FBVTdDLElBQUksQ0FBQzhDLE9BQUwsQ0FBYVAsTUFBTSxHQUFHRSxZQUF0QixJQUFzQyxHQUFoRCxFQUFxRCxHQUFyRCxDQUFyQjtBQUVBLE1BQUlPLGdCQUFnQixHQUFHaEQsSUFBSSxDQUFDNkMsSUFBTCxDQUFVN0MsSUFBSSxDQUFDOEMsT0FBTCxDQUFhUCxNQUFNLEdBQUdHLFVBQXRCLElBQW9DLEdBQTlDLEVBQW1ELEdBQW5ELENBQXZCO0FBRUEsTUFBSU8sbUJBQW1CLEdBQUdqRCxJQUFJLENBQUM2QyxJQUFMLENBQVU3QyxJQUFJLENBQUM4QyxPQUFMLENBQWFFLGdCQUFnQixHQUFHTCxhQUFoQyxJQUFpRCxHQUEzRCxFQUFnRSxHQUFoRSxDQUExQjtBQUVBMUMsVUFBUSxDQUFDc0MsTUFBVCxHQUFrQkEsTUFBbEI7QUFDQXRDLFVBQVEsQ0FBQ2dELG1CQUFULEdBQStCQSxtQkFBL0I7QUFDQWhELFVBQVEsQ0FBQzBDLGFBQVQsR0FBeUJBLGFBQXpCO0FBQ0ExQyxVQUFRLENBQUMrQyxnQkFBVCxHQUE0QkEsZ0JBQTVCO0FBQ0EvQyxVQUFRLENBQUM4QyxjQUFULEdBQTBCQSxjQUExQixDQTVFdUMsQ0E4RXZDO0FBQ0Q7O0FBRUQsU0FBU0csV0FBVCxHQUF3QjtBQUN0QixTQUFPakQsUUFBUDtBQUNEOztBQUVEa0QsT0FBTyxDQUFDQyxJQUFSLEdBQWVmLGdCQUFmO0FBQ0FjLE9BQU8sQ0FBQ0QsV0FBUixHQUFzQkEsV0FBdEIiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIEB0eXBlZGVmIENvbmZpZ3VyYXRpb25cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nPX0gYXBwRGlyIG1haW4gZGlyZWN0b3J5IHBhdGgsIGNhbiBiZSBhbnkgdmFsaWQgcGF0aCwgZGVmYXVsdCBpcyBlbGVjdHJvbkFwcC5nZXRQYXRoKCd1c2VyRGF0YScpXG4gKiBAcHJvcGVydHkge3N0cmluZz19IHNldHRpbmdzTmFtZSAtIG5hbWUgb2YgdGhlIGZvbGRlciBpbiBtYWluIGRpcmVjdG9yeSBwYXRoIHdoZXJlIHRvIHN0b3JlIHNldHRpbmdzXG4gKiBAcHJvcGVydHkge3N0cmluZz19IHB1YmxpY05hbWUgLSBuYW1lIG9mIHRoZSBmb2xkZXIgaW4gbWFpbiBkaXJlY3RvcnkgcGF0aCB3aGljaCB3aWxsIGJlIHNlcnZlZCBvdmVyIGh0dHBcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nPX0gZG93bmxvYWRzTmFtZSAtIG5hbWUgb2YgdGhlIGZvbGRlciBpbiBtYWluIGRpcmVjdG9yeSBwYXRoIGFuZCBwdWJsaWNOYW1lIHdoZXJlIHRvIHN0b3JlIGFzc2V0c1xuICogQHByb3BlcnR5IHtzdHJpbmc9fSBvZmZsaW5lRG9tYWluIC0gb24gd2hpY2ggZG9tYWluIHRoZSBjb250ZW50IHNob3VsZCBiZSBzZXJ2ZWQsIGRlZmF1bHQgaXMgMTI3LjAuMC4xXG4gKiBAcHJvcGVydHkge251bWJlcj19IG9mZmxpbmVDb250ZW50UG9ydFN0YXJ0IC0gb24gd2hpY2ggcG9ydCBvZmZsaW5lIGNvbnRlbnQgc2hvdWxkIGJlIHNlcnZlZCwgZGVmYXVsdCBpcyAzMDEwXG4gKiBAcHJvcGVydHkge251bWJlcj19IG1heE9mZmxpbmVDb250ZW50UG9ydFJhbmdlIC0gbWF4IHJhbmdlIGZvciBvZmZsaW5lIHBvcnQgdG8gb24gd2hpY2ggY29udGVudCBjYW4gYmUgc2VydmVkXG4gKiAgIEl0IHdpbGwgdHJ5IGZyb20ge29mZmxpbmVDb250ZW50UG9ydFN0YXJ0fSBhbmQgaWYgdGFrZW4gaXQgd2lsbCB0cnkgbmV4dCB1bnRpbCBpdCBmaW5kcyBhIGZyZWUgb25lXG4gKiBAcHJvcGVydHkge251bWJlcj19IG51bWJlck9mTWFuaWZlc3RzSW5QYXJhbGxlbCAtIG1heCBudW1iZXIgb2YgbWFuaWZlc3QgdGhhdCBjYW4gYmUgZG93bmxvYWRlZCBhdCB0aGUgc2FtZSB0aW1lLFxuICogICB0aGUgcmVzdCB3aWxsIGdvIGludG8gcXVldWUuXG4gKiAgIEJlIHJlYXNvbmFibGUgaGVyZSwgYXMgaXQgbWlnaHQgc2xvdyBkb3duIHlvdXIgY29tcHV0ZXIsIGRlZmF1bHQgdmFsdWUgaXMgMi4gV2l0aCAxMCBhbmQgdmVyeSBsYXJnZXMgbWFuaWZlc3RzXG4gKiAgIGl0IG1pZ2h0IGdvIHRvIGh1bmRyZWRzIG9mIGNodW5rcyAoNTAgZmlsZXMgY2FuIGJlIGRvd25sb2FkZWQgYXQgdGhlIHNhbWUgdGltZSBwZXIgbWFuaWZlc3QpLiBBbHNvIHRoZSBoaWdoZ2VyIG51bWJlclxuICogICBkb2Vzbid0IG1lYW4gaXQgd2lsbCBkb3dubG9hZHMgYWxsIG1vdmllcyBmYXN0ZXIuIFlvdSBzaG91bGQgZmluZCBoZXJlIHNvbWUgYmFsYW5jZS5cbiAqICAgU2VlbXMgbGlrZSAyLTMgbWFuaWZlc3RzIGdpdmVzIHRoZSBiZXN0IHJlc3VsdHMsIDEgbWFuaWZlc3QgbGltaXRhdGlvbiBtaWdodCB3b3JrIGJldHRlciBmb3Igc2xvd2VyIGNvbXB1dGVycy5cbiAqIEBwcm9wZXJ0eSB7cmVnZXggfCBzdHJpbmc9fSBjdXN0b21NYW5pZmVzdElkRm9sZGVyUmVnZXggLSByZWdleCB0byB1c2UgdG8gdmFsaWRhdGUgY3VzdG9tIG1hbmlmZXN0IGlkIC0gYmVhciBpbiBtaW5kIHRoYXQgdGhpc1xuICogbmVlZCB0byBiZSBhbHNvIGEgdmFsaWQgZm9sZGVyIG5hbWUuPGJyPlxuICogQnkgZGVmYXVsdCBpdCBtYXRjaGVzIGFueSBsZXR0ZXIgb3IgbnVtYmVyIG9yIHVuaWNvZGUgY2hhcmFjdGVycyAocmVnaW9uYWwgY2hhcmFjdGVycykgb3IgXCItXCIgb3IgXCJfXCIgYXMgYSBmaXJzdCBjaGFyYWN0ZXI8YnI+XG4gKiBUaGVuIGl0IG1heSBoYXZlIGFueSBsZXR0ZXIgb3IgbnVtYmVyIG9yIHVuaWNvZGUgY2hhcmFjdGVycyAocmVnaW9uYWwgY2hhcmFjdGVycykgb3Igc3BhY2Ugb3IgYW55IG9mIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVyczpcbiAqICwuOydbXXt9IUAjJCUmKigpLV89K1xuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nPX0gb3BlbmluZ1RhZ0ZvckludmFsaWRDdXN0b21NYW5pZmVzdElkQ2hhcmFjdGVyIC0gd2hlbiBjdXN0b21NYW5pZmVzdElkIGlzIGJlaW5nIGludmFsaWRhdGVkXG4gKiBhZ2FpbnN0IGN1c3RvbU1hbmlmZXN0SWRGb2xkZXJSZWdleCBpdCB3aWxsIHJhaXNlIHRoZSBlcnJvciBhbmQgaW5jbHVkZSB0aGUgY3VzdG9tTWFuaWZlc3RJZCB3aXRoIG1hcmtlZCBpbnZhbGlkIGNoYXJhY3RlcnNcbiAqIHRoaXMgaXMgdGhlIG9wZW5pbmcgdGFnIHRvIGJlIGFkZGVkIGJlZm9yZSBpbnZhbGlkIGNoYXJhY3RlclxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nPX0gY2xvc2luZ1RhZ0ZvckludmFsaWRDdXN0b21NYW5pZmVzdElkQ2hhcmFjdGVyIC0gd2hlbiBjdXN0b21NYW5pZmVzdElkIGlzIGJlaW5nIGludmFsaWRhdGVkXG4gKiBhZ2FpbnN0IGN1c3RvbU1hbmlmZXN0SWRGb2xkZXJSZWdleCBpdCB3aWxsIHJhaXNlIHRoZSBlcnJvciBhbmQgaW5jbHVkZSB0aGUgY3VzdG9tTWFuaWZlc3RJZCB3aXRoIG1hcmtlZCBpbnZhbGlkIGNoYXJhY3RlcnNcbiAqIHRoaXMgaXMgdGhlIGNsb3NpbmcgdGFnIHRvIGJlIGFkZGVkIGFmdGVyIGludmFsaWQgY2hhcmFjdGVyXG4gKlxuICogQG5hbWVzcGFjZSBEb3duc3RyZWFtRWxlY3Ryb25CRS5jb25maWd1cmF0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqIER1cmluZyBpbml0aWFsaXphdGlvbiB5b3UgY2FuIGNvbmZpZ3VyZSB5b3VyIGFwcFxuICogQGV4YW1wbGVcbiAqIC8vc29tZXdoZXJlIGluIHRoZSBtYWluIHByb2Nlc3NcbiAqIGNvbnN0IGRvd25zdHJlYW1FbGVjdHJvbiA9IHJlcXVpcmUoJ2Rvd25zdHJlYW0tZWxlY3Ryb24nKTtcbiAqIGNvbnN0IHVzZXJTZXR0aW5ncyA9IHtcbiAqICAgYXBwRGlyOiBcIi9Vc2Vycy9hZG1pbi9teUFwcFwiLFxuICogICBzZXR0aW5nc05hbWU6IFwic2V0dGluZ3NcIixcbiAqICAgcHVibGljTmFtZTogXCJwdWJsaWNcIixcbiAqICAgZG93bmxvYWRzTmFtZTogXCJtb3ZpZXNcIlxuICogICBudW1iZXJPZk1hbmlmZXN0c0luUGFyYWxsZWw6IDNcbiAqIH07XG4gKiBmdW5jdGlvbiBjcmVhdGVXaW5kb3coKSB7XG4gKiAgIGRvd25zdHJlYW1FbGVjdHJvbi5pbml0KHVzZXJTZXR0aW5ncyk7XG4gKiAgIGNvbnN0IHdpbiA9IG5ldyBCcm93c2VyV2luZG93KHtcbiAqICAgICB3aWR0aDogMTIwMCxcbiAqICAgICBoZWlnaHQ6IDcwMCxcbiAqICAgICByZXNpemFibGU6IHRydWUsXG4gKiAgICAgd2ViUHJlZmVyZW5jZXM6IHtcbiAqICAgICAgIHBsdWdpbnM6IHRydWUsXG4gKiAgICAgICBub2RlSW50ZWdyYXRpb246IHRydWVcbiAqICAgICB9XG4gKiAgIH0pO1xuICogICB3aW4ubG9hZFVSTCgnZmlsZTovL2luZGV4Lmh0bWwnKTtcbiAqICAgd2luLndlYkNvbnRlbnRzLm9wZW5EZXZUb29scygpO1xuICogfVxuICogYXBwLm9uKCdyZWFkeScsIGNyZWF0ZVdpbmRvdyk7XG4gKi9cblxuY29uc3QgZWxlY3Ryb25BcHAgPSByZXF1aXJlKFwiZWxlY3Ryb25cIikuYXBwO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xubGV0IHNldHRpbmdzID0ge1xuICBkb3dubG9hZGluZ1RocmVhZHNSdWxlczoge1xuICAgIGl0ZW1zOiBbXG4gICAgICB7bWF4OiAxMCwgZmlsZXM6IDV9LFxuICAgICAge21heDogMTAwLCBmaWxlczogMTB9LFxuICAgICAge21heDogMTAwMCwgZmlsZXM6IDMwfSxcbiAgICAgIHttYXg6IDEwMDAwMCwgZmlsZXM6IDUwfVxuICAgIF0sXG4gICAgdGhyZWFkczogW1xuICAgICAge3NpemU6IDEwLCBudW1iZXI6IDF9LFxuICAgICAge3NpemU6IDEwMCwgbnVtYmVyOiAzfSxcbiAgICAgIHtzaXplOiAxMDAwLCBudW1iZXI6IDR9LFxuICAgICAge3NpemU6IDEwMDAwMCwgbnVtYmVyOiA1fVxuICAgIF1cbiAgfSxcbiAgTUFYX0VSUk9SU19ET1dOTE9BRF9SRVRSWTogNSxcbiAgTUFYX0lOVEVSTkVUX0VSUk9SU19ET1dOTE9BRF9DSFVOS19SRVRSWTogMTAwLFxuICBNQVhfRVJST1JTX0RPV05MT0FEX0NIVU5LX1JFVFJZOiA1LFxuICBvZmZsaW5lRG9tYWluOiBcImh0dHA6Ly8xMjcuMC4wLjFcIixcbiAgb2ZmbGluZUNvbnRlbnRQb3J0U3RhcnQ6IDMwMTAsXG4gIG1heE9mZmxpbmVDb250ZW50UG9ydFJhbmdlOiAzMDMwLFxuICBudW1iZXJPZk1hbmlmZXN0c0luUGFyYWxsZWw6IDIsXG4gIHN0b3BPbkVycm9yOiBmYWxzZSxcbiAgc3RvcmVzOiB7XG4gICAgRE9XTkxPQURTOiB7XG4gICAgICBcIkxFRlRcIjogXCJsZWZ0XCIsXG4gICAgICBcIkRPV05MT0FESU5HXCI6IFwiZG93bmxvYWRpbmdcIixcbiAgICAgIFwiRE9XTkxPQURFRFwiOiBcImRvd25sb2FkZWRcIixcbiAgICAgIFwiRVJST1JTXCI6IFwiZXJyb3JzXCJcbiAgICB9LFxuICAgIFNUQVRVUzogXCJzdGF0dXNcIixcbiAgICBQQVJBTVM6IFwicGFyYW1zXCIsXG4gICAgTUFOSUZFU1Q6IFwibWFuaWZlc3RcIixcbiAgICBQRVJTSVNURU5UOiBcInBlcnNpc3RlbnRcIixcbiAgICBEQVRBOiBcImRhdGFcIlxuICB9LFxuICBzYXZlVG9EaXNrOiB0cnVlLFxuICB0aW1lczoge1xuICAgIERPV05MT0FEX1RJTUVPVVQ6IDUwMDAsXG4gICAgUkVUUllfVElNRU9VVDogNTAwMFxuICB9LFxuICB1c2VDaHVua2VkRW5jb2Rpbmc6IGZhbHNlLFxuICB1c2VIZWFkUmVxdWVzdHM6IHRydWUsXG4gIG5vQ2FjaGU6IGZhbHNlLFxuICBkZWZhdWx0TWFuaWZlc3RSZXF1ZXN0T3B0aW9uczoge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQWNjZXB0XCI6IFwiKi8qXCIsXG4gICAgICAvLyAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJywgLy8gZ3ppcCBkb2Vzbid0IHdvcmtcbiAgICAgIC8vICdBY2NlcHQtTGFuZ3VhZ2UnOiAnZW4tVVMsZW47cT0wLjgscGw7cT0wLjYnLFxuICAgICAgLy8gJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLFxuICAgICAgLy8gJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsIC8vIEBUT0RPIGludmVzdGlnYXRlIGl0XG4gICAgICAvLyAnUHJhZ21hJzogJ25vLWNhY2hlJyxcbiAgICAgIFwiVXNlci1BZ2VudFwiOiBcIk1vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzExXzYpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81OS4wLjMwNzEuMTE1IEVsZWN0cm9uLzEuOC42IFNhZmFyaS81MzcuMzZcIlxuICAgIH0sXG4gICAgdGltZW91dDogNTAwMFxuICB9LFxuICAvLyBtYXRjaGVzIGFueSBsZXR0ZXIgb3IgbnVtYmVyIG9yIHVuaWNvZGUgY2hhcmFjdGVycyAocmVnaW9uYWwgY2hhcmFjdGVycykgb3IgXCItXCIgb3IgXCJfXCIgYXMgYSBzdGFydFxuICAvLyB0aGVuIGl0IG1heSBoYXZlIGFueSBsZXR0ZXIgb3IgbnVtYmVyIG9yIHVuaWNvZGUgY2hhcmFjdGVycyAocmVnaW9uYWwgY2hhcmFjdGVycykgb3Igc3BhY2Ugb3IgYW55IG9mIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVyc1xuICAvLyAsLjsnW117fSFAIyQlJiooKS1fPStcbiAgLy8gYW5kIGlzIGFsbCBjYXNlIGluc2Vuc2l0aXZlXG4gIGN1c3RvbU1hbmlmZXN0SWRGb2xkZXJSZWdleDogL14oW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdfFxcLXxcXF8pezEsMX0oW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdfFxcIHxcXCx8XFwufFxcO3xcXCd8XFxbfFxcXXxcXHt8XFx9fFxcIXxcXEB8XFwjfFxcJHxcXCV8XFwmfFxcKnxcXCh8XFwpfFxcLXxcXF98XFw9fFxcKz8pezAsNDl9JC9pLFxuICBvcGVuaW5nVGFnRm9ySW52YWxpZEN1c3RvbU1hbmlmZXN0SWRDaGFyYWN0ZXI6ICc8c3BhbiBzdHlsZT1cXCdiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7XFwnPicsXG4gIGNsb3NpbmdUYWdGb3JJbnZhbGlkQ3VzdG9tTWFuaWZlc3RJZENoYXJhY3RlcjogJzwvc3Bhbj4nXG59O1xuXG5mdW5jdGlvbiBsb2FkVXNlclNldHRpbmdzIChqc29uU2V0dGluZ3MpIHtcbiAgbGV0IGFwcERpciA9IGVsZWN0cm9uQXBwLmdldFBhdGgoXCJ1c2VyRGF0YVwiKTtcblxuICBsZXQgc2V0dGluZ3NOYW1lID0gXCJzZXR0aW5nc1wiO1xuICBsZXQgcHVibGljTmFtZSA9IFwicHVibGljXCI7XG4gIGxldCBkb3dubG9hZHNOYW1lID0gXCJtb3ZpZXNcIjtcblxuICBpZiAoanNvblNldHRpbmdzKSB7XG4gICAgaWYgKGpzb25TZXR0aW5ncy5hcHBEaXIpIHtcbiAgICAgIGFwcERpciA9IGpzb25TZXR0aW5ncy5hcHBEaXI7XG4gICAgfVxuICAgIGlmIChqc29uU2V0dGluZ3Muc2V0dGluZ3NOYW1lKSB7XG4gICAgICBzZXR0aW5nc05hbWUgPSBqc29uU2V0dGluZ3Muc2V0dGluZ3NOYW1lO1xuICAgIH1cbiAgICBpZiAoanNvblNldHRpbmdzLnB1YmxpY05hbWUpIHtcbiAgICAgIHB1YmxpY05hbWUgPSBqc29uU2V0dGluZ3MucHVibGljTmFtZTtcbiAgICB9XG4gICAgaWYgKGpzb25TZXR0aW5ncy5kb3dubG9hZHNOYW1lKSB7XG4gICAgICBkb3dubG9hZHNOYW1lID0ganNvblNldHRpbmdzLmRvd25sb2Fkc05hbWU7XG4gICAgfVxuICAgIGlmIChqc29uU2V0dGluZ3Mub2ZmbGluZURvbWFpbikge1xuICAgICAgc2V0dGluZ3Mub2ZmbGluZURvbWFpbiA9IGpzb25TZXR0aW5ncy5vZmZsaW5lRG9tYWluO1xuICAgIH1cbiAgICBpZiAoanNvblNldHRpbmdzLm9mZmxpbmVDb250ZW50UG9ydFN0YXJ0KSB7XG4gICAgICBzZXR0aW5ncy5vZmZsaW5lQ29udGVudFBvcnRTdGFydCA9IGpzb25TZXR0aW5ncy5vZmZsaW5lQ29udGVudFBvcnRTdGFydDtcbiAgICB9XG4gICAgaWYgKGpzb25TZXR0aW5ncy5tYXhPZmZsaW5lQ29udGVudFBvcnRSYW5nZSkge1xuICAgICAgc2V0dGluZ3MubWF4T2ZmbGluZUNvbnRlbnRQb3J0UmFuZ2UgPSBqc29uU2V0dGluZ3MubWF4T2ZmbGluZUNvbnRlbnRQb3J0UmFuZ2U7XG4gICAgfVxuICAgIGlmIChqc29uU2V0dGluZ3MubnVtYmVyT2ZNYW5pZmVzdHNJblBhcmFsbGVsKSB7XG4gICAgICBzZXR0aW5ncy5udW1iZXJPZk1hbmlmZXN0c0luUGFyYWxsZWwgPSBqc29uU2V0dGluZ3MubnVtYmVyT2ZNYW5pZmVzdHNJblBhcmFsbGVsO1xuICAgIH1cbiAgICBpZiAoanNvblNldHRpbmdzLnN0b3BPbkVycm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHNldHRpbmdzLnN0b3BPbkVycm9yID0ganNvblNldHRpbmdzLnN0b3BPbkVycm9yO1xuICAgIH1cbiAgICBpZiAoanNvblNldHRpbmdzLmN1c3RvbU1hbmlmZXN0SWRGb2xkZXJSZWdleCkge1xuICAgICAgc2V0dGluZ3MuY3VzdG9tTWFuaWZlc3RJZEZvbGRlclJlZ2V4ID0ganNvblNldHRpbmdzLmN1c3RvbU1hbmlmZXN0SWRGb2xkZXJSZWdleDtcbiAgICB9XG4gICAgaWYgKGpzb25TZXR0aW5ncy5vcGVuaW5nVGFnRm9ySW52YWxpZEN1c3RvbU1hbmlmZXN0SWRDaGFyYWN0ZXIpIHtcbiAgICAgIHNldHRpbmdzLm9wZW5pbmdUYWdGb3JJbnZhbGlkQ3VzdG9tTWFuaWZlc3RJZENoYXJhY3RlciA9IGpzb25TZXR0aW5ncy5vcGVuaW5nVGFnRm9ySW52YWxpZEN1c3RvbU1hbmlmZXN0SWRDaGFyYWN0ZXI7XG4gICAgfVxuICAgIGlmIChqc29uU2V0dGluZ3MuY2xvc2luZ1RhZ0ZvckludmFsaWRDdXN0b21NYW5pZmVzdElkQ2hhcmFjdGVyKSB7XG4gICAgICBzZXR0aW5ncy5jbG9zaW5nVGFnRm9ySW52YWxpZEN1c3RvbU1hbmlmZXN0SWRDaGFyYWN0ZXIgPSBqc29uU2V0dGluZ3MuY2xvc2luZ1RhZ0ZvckludmFsaWRDdXN0b21NYW5pZmVzdElkQ2hhcmFjdGVyO1xuICAgIH1cbiAgICBpZiAoanNvblNldHRpbmdzLnVzZUhlYWRSZXF1ZXN0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZXR0aW5ncy51c2VIZWFkUmVxdWVzdHMgPSBqc29uU2V0dGluZ3MudXNlSGVhZFJlcXVlc3RzO1xuICAgIH1cbiAgICBpZiAoanNvblNldHRpbmdzLnRpbWVzICYmIGpzb25TZXR0aW5ncy50aW1lcy5SRVRSWV9USU1FT1VUKSB7XG4gICAgICBzZXR0aW5ncy50aW1lcy5SRVRSWV9USU1FT1VUID0ganNvblNldHRpbmdzLnRpbWVzLlJFVFJZX1RJTUVPVVQ7XG4gICAgfVxuICAgIGlmIChqc29uU2V0dGluZ3MuTUFYX0VSUk9SU19ET1dOTE9BRF9SRVRSWSkge1xuICAgICAgc2V0dGluZ3MuTUFYX0VSUk9SU19ET1dOTE9BRF9SRVRSWSA9IGpzb25TZXR0aW5ncy5NQVhfRVJST1JTX0RPV05MT0FEX1JFVFJZO1xuICAgIH1cbiAgICBpZiAoanNvblNldHRpbmdzLk1BWF9JTlRFUk5FVF9FUlJPUlNfRE9XTkxPQURfQ0hVTktfUkVUUlkpIHtcbiAgICAgIHNldHRpbmdzLk1BWF9JTlRFUk5FVF9FUlJPUlNfRE9XTkxPQURfQ0hVTktfUkVUUlkgPSBqc29uU2V0dGluZ3MuTUFYX0lOVEVSTkVUX0VSUk9SU19ET1dOTE9BRF9DSFVOS19SRVRSWTtcbiAgICB9XG4gICAgaWYgKGpzb25TZXR0aW5ncy5NQVhfRVJST1JTX0RPV05MT0FEX0NIVU5LX1JFVFJZKSB7XG4gICAgICBzZXR0aW5ncy5NQVhfRVJST1JTX0RPV05MT0FEX0NIVU5LX1JFVFJZID0ganNvblNldHRpbmdzLk1BWF9FUlJPUlNfRE9XTkxPQURfQ0hVTktfUkVUUlk7XG4gICAgfVxuICAgIGlmIChqc29uU2V0dGluZ3Mubm9DYWNoZSkge1xuICAgICAgc2V0dGluZ3Mubm9DYWNoZSA9IGpzb25TZXR0aW5ncy5ub0NhY2hlXG4gICAgfVxuICB9XG5cbiAgYXBwRGlyID0gcGF0aC5qb2luKHBhdGgucmVzb2x2ZShhcHBEaXIpLCBcIi9cIik7XG5cbiAgbGV0IHNldHRpbmdzRm9sZGVyID0gcGF0aC5qb2luKHBhdGgucmVzb2x2ZShhcHBEaXIgKyBzZXR0aW5nc05hbWUpICsgXCIvXCIsIFwiL1wiKTtcblxuICBsZXQgcHVibGljRm9sZGVyUGF0aCA9IHBhdGguam9pbihwYXRoLnJlc29sdmUoYXBwRGlyICsgcHVibGljTmFtZSkgKyBcIi9cIiwgXCIvXCIpO1xuXG4gIGxldCBkb3dubG9hZHNGb2xkZXJQYXRoID0gcGF0aC5qb2luKHBhdGgucmVzb2x2ZShwdWJsaWNGb2xkZXJQYXRoICsgZG93bmxvYWRzTmFtZSkgKyBcIi9cIiwgXCIvXCIpO1xuXG4gIHNldHRpbmdzLmFwcERpciA9IGFwcERpcjtcbiAgc2V0dGluZ3MuZG93bmxvYWRzRm9sZGVyUGF0aCA9IGRvd25sb2Fkc0ZvbGRlclBhdGg7XG4gIHNldHRpbmdzLmRvd25sb2Fkc05hbWUgPSBkb3dubG9hZHNOYW1lO1xuICBzZXR0aW5ncy5wdWJsaWNGb2xkZXJQYXRoID0gcHVibGljRm9sZGVyUGF0aDtcbiAgc2V0dGluZ3Muc2V0dGluZ3NGb2xkZXIgPSBzZXR0aW5nc0ZvbGRlcjtcblxuICAvLyBjb25zb2xlLmxvZygnYXBwRGlyOicsIGFwcERpcik7XG59XG5cbmZ1bmN0aW9uIGdldFNldHRpbmdzICgpIHtcbiAgcmV0dXJuIHNldHRpbmdzO1xufVxuXG5leHBvcnRzLmxvYWQgPSBsb2FkVXNlclNldHRpbmdzO1xuZXhwb3J0cy5nZXRTZXR0aW5ncyA9IGdldFNldHRpbmdzO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__2__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlbGVjdHJvblwiPzA0ZjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n")},function(module,exports){eval('module.exports = require("fs");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJmc1wiP2E0MGQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZzXCIpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n')},function(module,exports){eval('module.exports = require("path");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXRoXCI/NzRiYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGF0aFwiKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__5__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ1bmRlcnNjb3JlXCI/NmFlNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181X187Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar codes = {\n  GENERAL: -1,\n  ERRORS: {\n    INTERNAL_ERROR: 1,\n    BROKEN: 11,\n    FINISHED: 12,\n    UNFINISHED: 13,\n    STOPPED: 14,\n    CREATED: 15,\n    MISSING: 16,\n    RESUMED: 17,\n    STARTED: 18,\n    LOADING: 19,\n    REMOVED: 20,\n    INFO: 21,\n    EXISTS: 22,\n    NOT_FOUND: 100\n  }\n};\nmodule.exports = codes;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL2NvZGVzLmpzPzhlYzAiXSwibmFtZXMiOlsiY29kZXMiLCJHRU5FUkFMIiwiRVJST1JTIiwiSU5URVJOQUxfRVJST1IiLCJCUk9LRU4iLCJGSU5JU0hFRCIsIlVORklOSVNIRUQiLCJTVE9QUEVEIiwiQ1JFQVRFRCIsIk1JU1NJTkciLCJSRVNVTUVEIiwiU1RBUlRFRCIsIkxPQURJTkciLCJSRU1PVkVEIiwiSU5GTyIsIkVYSVNUUyIsIk5PVF9GT1VORCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLEtBQUssR0FBRztBQUNaQyxTQUFPLEVBQUUsQ0FBQyxDQURFO0FBRVpDLFFBQU0sRUFBRTtBQUNOQyxrQkFBYyxFQUFFLENBRFY7QUFFTkMsVUFBTSxFQUFFLEVBRkY7QUFHTkMsWUFBUSxFQUFFLEVBSEo7QUFJTkMsY0FBVSxFQUFFLEVBSk47QUFLTkMsV0FBTyxFQUFFLEVBTEg7QUFNTkMsV0FBTyxFQUFFLEVBTkg7QUFPTkMsV0FBTyxFQUFFLEVBUEg7QUFRTkMsV0FBTyxFQUFFLEVBUkg7QUFTTkMsV0FBTyxFQUFFLEVBVEg7QUFVTkMsV0FBTyxFQUFFLEVBVkg7QUFXTkMsV0FBTyxFQUFFLEVBWEg7QUFZTkMsUUFBSSxFQUFFLEVBWkE7QUFhTkMsVUFBTSxFQUFFLEVBYkY7QUFjTkMsYUFBUyxFQUFFO0FBZEw7QUFGSSxDQUFkO0FBbUJBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJsQixLQUFqQiIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBjb2RlcyA9IHtcbiAgR0VORVJBTDogLTEsXG4gIEVSUk9SUzoge1xuICAgIElOVEVSTkFMX0VSUk9SOiAxLFxuICAgIEJST0tFTjogMTEsXG4gICAgRklOSVNIRUQ6IDEyLFxuICAgIFVORklOSVNIRUQ6IDEzLFxuICAgIFNUT1BQRUQ6IDE0LFxuICAgIENSRUFURUQ6IDE1LFxuICAgIE1JU1NJTkc6IDE2LFxuICAgIFJFU1VNRUQ6IDE3LFxuICAgIFNUQVJURUQ6IDE4LFxuICAgIExPQURJTkc6IDE5LFxuICAgIFJFTU9WRUQ6IDIwLFxuICAgIElORk86IDIxLFxuICAgIEVYSVNUUzogMjIsXG4gICAgTk9UX0ZPVU5EOiAxMDAsXG4gIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IGNvZGVzO1xuXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n")},function(module,exports,__webpack_require__){eval('var fs = __webpack_require__(3);\n\nvar appSettings = __webpack_require__(1);\n/**\n *\n * @type {{start: number, end: null}}\n */\n\n\nvar defaultOptions = Object.assign({\n  start: 0,\n  end: null\n}, appSettings.getSettings().defaultManifestRequestOptions);\n/**\n *\n * @type {{CHUNK_ERROR: string, CHUNK_SIZE_ERROR: string, FILE_CREATING_ERROR: string, FILE_WRITING_ERROR: string,\n *     ABORTED: string}}\n */\n\nvar errors = {\n  ABORTED: "ABORTED",\n  CHUNK_ERROR: "CHUNK_ERROR",\n  CHUNK_SIZE_ERROR: "CHUNK_SIZE_ERROR",\n  FILE_CREATING_ERROR: "FILE_CREATING_ERROR",\n  FILE_WRITING_ERROR: "FILE_WRITING_ERROR",\n  NO_SPACE_LEFT_ERROR: "NO_SPACE_LEFT_ERROR",\n  INTERNET: "INTERNET",\n  TIMEOUT: "TIMEOUT"\n};\n/**\n * @param {string} fileUrl - file url\n * @param {function} callback - callback to be invoked when check for file has been done\n * @returns {void}\n */\n\nfunction checkForLocalFile(fileUrl, callback) {\n  fs.stat(fileUrl, function (error, stat) {\n    if (error) {\n      callback(false);\n    } else {\n      callback(true, stat.size);\n    }\n  });\n}\n\nmodule.exports = {\n  checkForLocalFile: checkForLocalFile,\n  defaultOptions: defaultOptions,\n  errors: errors\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL2Rvd25sb2FkLWZpbGUtdXRpbC5qcz8xYjhlIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsImFwcFNldHRpbmdzIiwiZGVmYXVsdE9wdGlvbnMiLCJPYmplY3QiLCJhc3NpZ24iLCJzdGFydCIsImVuZCIsImdldFNldHRpbmdzIiwiZGVmYXVsdE1hbmlmZXN0UmVxdWVzdE9wdGlvbnMiLCJlcnJvcnMiLCJBQk9SVEVEIiwiQ0hVTktfRVJST1IiLCJDSFVOS19TSVpFX0VSUk9SIiwiRklMRV9DUkVBVElOR19FUlJPUiIsIkZJTEVfV1JJVElOR19FUlJPUiIsIk5PX1NQQUNFX0xFRlRfRVJST1IiLCJJTlRFUk5FVCIsIlRJTUVPVVQiLCJjaGVja0ZvckxvY2FsRmlsZSIsImZpbGVVcmwiLCJjYWxsYmFjayIsInN0YXQiLCJlcnJvciIsInNpemUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxFQUFFLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUFsQjs7QUFDQSxJQUFNQyxXQUFXLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUEzQjtBQUVBOzs7Ozs7QUFJQSxJQUFNRSxjQUFjLEdBQUdDLE1BQU0sQ0FBQ0MsTUFBUCxDQUNyQjtBQUNFQyxPQUFLLEVBQUUsQ0FEVDtBQUVFQyxLQUFHLEVBQUU7QUFGUCxDQURxQixFQUtyQkwsV0FBVyxDQUFDTSxXQUFaLEdBQTBCQyw2QkFMTCxDQUF2QjtBQVFBOzs7Ozs7QUFLQSxJQUFNQyxNQUFNLEdBQUc7QUFDYkMsU0FBTyxFQUFFLFNBREk7QUFFYkMsYUFBVyxFQUFFLGFBRkE7QUFHYkMsa0JBQWdCLEVBQUUsa0JBSEw7QUFJYkMscUJBQW1CLEVBQUUscUJBSlI7QUFLYkMsb0JBQWtCLEVBQUUsb0JBTFA7QUFNYkMscUJBQW1CLEVBQUUscUJBTlI7QUFPYkMsVUFBUSxFQUFFLFVBUEc7QUFRYkMsU0FBTyxFQUFFO0FBUkksQ0FBZjtBQVdBOzs7Ozs7QUFLQSxTQUFTQyxpQkFBVCxDQUE0QkMsT0FBNUIsRUFBcUNDLFFBQXJDLEVBQStDO0FBQzdDckIsSUFBRSxDQUFDc0IsSUFBSCxDQUFRRixPQUFSLEVBQWlCLFVBQVVHLEtBQVYsRUFBaUJELElBQWpCLEVBQXVCO0FBQ3RDLFFBQUlDLEtBQUosRUFBVztBQUNURixjQUFRLENBQUMsS0FBRCxDQUFSO0FBQ0QsS0FGRCxNQUVPO0FBQ0xBLGNBQVEsQ0FBQyxJQUFELEVBQU9DLElBQUksQ0FBQ0UsSUFBWixDQUFSO0FBQ0Q7QUFDRixHQU5EO0FBT0Q7O0FBRURDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUNmUCxtQkFBaUIsRUFBRUEsaUJBREo7QUFFZmhCLGdCQUFjLEVBQUVBLGNBRkQ7QUFHZk8sUUFBTSxFQUFFQTtBQUhPLENBQWpCIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IGFwcFNldHRpbmdzID0gcmVxdWlyZSgnLi4vYXBwLXNldHRpbmdzJyk7XG5cbi8qKlxuICpcbiAqIEB0eXBlIHt7c3RhcnQ6IG51bWJlciwgZW5kOiBudWxsfX1cbiAqL1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICB7XG4gICAgc3RhcnQ6IDAsXG4gICAgZW5kOiBudWxsXG4gIH0sXG4gIGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuZGVmYXVsdE1hbmlmZXN0UmVxdWVzdE9wdGlvbnNcbik7XG5cbi8qKlxuICpcbiAqIEB0eXBlIHt7Q0hVTktfRVJST1I6IHN0cmluZywgQ0hVTktfU0laRV9FUlJPUjogc3RyaW5nLCBGSUxFX0NSRUFUSU5HX0VSUk9SOiBzdHJpbmcsIEZJTEVfV1JJVElOR19FUlJPUjogc3RyaW5nLFxuICogICAgIEFCT1JURUQ6IHN0cmluZ319XG4gKi9cbmNvbnN0IGVycm9ycyA9IHtcbiAgQUJPUlRFRDogXCJBQk9SVEVEXCIsXG4gIENIVU5LX0VSUk9SOiBcIkNIVU5LX0VSUk9SXCIsXG4gIENIVU5LX1NJWkVfRVJST1I6IFwiQ0hVTktfU0laRV9FUlJPUlwiLFxuICBGSUxFX0NSRUFUSU5HX0VSUk9SOiBcIkZJTEVfQ1JFQVRJTkdfRVJST1JcIixcbiAgRklMRV9XUklUSU5HX0VSUk9SOiBcIkZJTEVfV1JJVElOR19FUlJPUlwiLFxuICBOT19TUEFDRV9MRUZUX0VSUk9SOiBcIk5PX1NQQUNFX0xFRlRfRVJST1JcIixcbiAgSU5URVJORVQ6IFwiSU5URVJORVRcIixcbiAgVElNRU9VVDogXCJUSU1FT1VUXCIsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlVXJsIC0gZmlsZSB1cmxcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIGNoZWNrIGZvciBmaWxlIGhhcyBiZWVuIGRvbmVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBjaGVja0ZvckxvY2FsRmlsZSAoZmlsZVVybCwgY2FsbGJhY2spIHtcbiAgZnMuc3RhdChmaWxlVXJsLCBmdW5jdGlvbiAoZXJyb3IsIHN0YXQpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNhbGxiYWNrKGZhbHNlKVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayh0cnVlLCBzdGF0LnNpemUpO1xuICAgIH1cbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjaGVja0ZvckxvY2FsRmlsZTogY2hlY2tGb3JMb2NhbEZpbGUsXG4gIGRlZmF1bHRPcHRpb25zOiBkZWZhdWx0T3B0aW9ucyxcbiAgZXJyb3JzOiBlcnJvcnNcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar STATUSES = {\n  "CREATED": "CREATED",\n  "STARTED": "STARTED",\n  "ERROR": "ERROR",\n  "STOPPED": "STOPPED",\n  "FINISHED": "FINISHED",\n  "BROKEN": "BROKEN",\n  "QUEUED": "QUEUED"\n};\nmodule.exports = STATUSES;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL3N0YXR1c2VzLmpzPzljNTMiXSwibmFtZXMiOlsiU1RBVFVTRVMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxRQUFRLEdBQUc7QUFDZixhQUFXLFNBREk7QUFFZixhQUFXLFNBRkk7QUFHZixXQUFTLE9BSE07QUFJZixhQUFXLFNBSkk7QUFLZixjQUFZLFVBTEc7QUFNZixZQUFVLFFBTks7QUFPZixZQUFVO0FBUEssQ0FBakI7QUFVQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCRixRQUFqQiIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBTVEFUVVNFUyA9IHtcbiAgXCJDUkVBVEVEXCI6IFwiQ1JFQVRFRFwiLFxuICBcIlNUQVJURURcIjogXCJTVEFSVEVEXCIsXG4gIFwiRVJST1JcIjogXCJFUlJPUlwiLFxuICBcIlNUT1BQRURcIjogXCJTVE9QUEVEXCIsXG4gIFwiRklOSVNIRURcIjogXCJGSU5JU0hFRFwiLFxuICBcIkJST0tFTlwiOiBcIkJST0tFTlwiLFxuICBcIlFVRVVFRFwiOiBcIlFVRVVFRFwiXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNUQVRVU0VTOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar FlakeIdGen = __webpack_require__(40);\n\nvar intFormat = __webpack_require__(41);\n\nvar generator = new FlakeIdGen();\n\nvar SnowflakeId = function () {\n  function SnowflakeId() {}\n\n  SnowflakeId.getUUID = function () {\n    var id1 = generator.next();\n    var id3 = intFormat(id1, 'dec');\n    return id3;\n  };\n\n  return SnowflakeId;\n}();\n\nexports.SnowflakeId = SnowflakeId;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9zbm93Zmxha2UtaWQuanM/YjYzNSJdLCJuYW1lcyI6WyJGbGFrZUlkR2VuIiwicmVxdWlyZSIsImludEZvcm1hdCIsImdlbmVyYXRvciIsIlNub3dmbGFrZUlkIiwiZ2V0VVVJRCIsImlkMSIsIm5leHQiLCJpZDMiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxVQUFVLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUExQjs7QUFDQSxJQUFNQyxTQUFTLEdBQUdELG1CQUFPLENBQUMsRUFBRCxDQUF6Qjs7QUFDQSxJQUFNRSxTQUFTLEdBQUcsSUFBSUgsVUFBSixFQUFsQjs7QUFDQSxJQUFNSSxXQUFXLEdBQUksWUFBWTtBQUMvQixXQUFTQSxXQUFULEdBQXdCLENBQ3ZCOztBQUVEQSxhQUFXLENBQUNDLE9BQVosR0FBc0IsWUFBWTtBQUNoQyxRQUFNQyxHQUFHLEdBQUdILFNBQVMsQ0FBQ0ksSUFBVixFQUFaO0FBQ0EsUUFBTUMsR0FBRyxHQUFHTixTQUFTLENBQUNJLEdBQUQsRUFBTSxLQUFOLENBQXJCO0FBQ0EsV0FBT0UsR0FBUDtBQUNELEdBSkQ7O0FBS0EsU0FBT0osV0FBUDtBQUNELENBVm9CLEVBQXJCOztBQVdBSyxPQUFPLENBQUNMLFdBQVIsR0FBc0JBLFdBQXRCIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IEZsYWtlSWRHZW4gPSByZXF1aXJlKCdmbGFrZS1pZGdlbicpO1xuY29uc3QgaW50Rm9ybWF0ID0gcmVxdWlyZSgnYmlndWludC1mb3JtYXQnKTtcbmNvbnN0IGdlbmVyYXRvciA9IG5ldyBGbGFrZUlkR2VuO1xuY29uc3QgU25vd2ZsYWtlSWQgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTbm93Zmxha2VJZCAoKSB7XG4gIH1cblxuICBTbm93Zmxha2VJZC5nZXRVVUlEID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRvci5uZXh0KCk7XG4gICAgY29uc3QgaWQzID0gaW50Rm9ybWF0KGlkMSwgJ2RlYycpO1xuICAgIHJldHVybiBpZDM7XG4gIH07XG4gIHJldHVybiBTbm93Zmxha2VJZDtcbn0oKSk7XG5leHBvcnRzLlNub3dmbGFrZUlkID0gU25vd2ZsYWtlSWQ7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9\n")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__10__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ4bWxkb21cIj9kMmRhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xMF9fOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nmodule.exports = function fieldsPicker(obj, fields, attr) {\n  if (typeof attr === "undefined") {\n    return;\n  }\n\n  for (var i = 0, j = fields.length; i < j; i++) {\n    var field = fields[i];\n    var defaultValue = field.defaultValue;\n    var name = field.name || field;\n    obj[name] = typeof attr[name] !== "undefined" ? attr[name] : defaultValue;\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9maWVsZHMtcGlja2VyLmpzPzA2M2UiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsImZpZWxkc1BpY2tlciIsIm9iaiIsImZpZWxkcyIsImF0dHIiLCJpIiwiaiIsImxlbmd0aCIsImZpZWxkIiwiZGVmYXVsdFZhbHVlIiwibmFtZSJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWJBLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixTQUFTQyxZQUFULENBQXVCQyxHQUF2QixFQUE0QkMsTUFBNUIsRUFBb0NDLElBQXBDLEVBQTBDO0FBQ3pELE1BQUksT0FBT0EsSUFBUCxLQUFnQixXQUFwQixFQUFpQztBQUMvQjtBQUNEOztBQUNELE9BQUssSUFBSUMsQ0FBQyxHQUFHLENBQVIsRUFBV0MsQ0FBQyxHQUFHSCxNQUFNLENBQUNJLE1BQTNCLEVBQW1DRixDQUFDLEdBQUdDLENBQXZDLEVBQTBDRCxDQUFDLEVBQTNDLEVBQStDO0FBQzdDLFFBQU1HLEtBQUssR0FBR0wsTUFBTSxDQUFDRSxDQUFELENBQXBCO0FBQ0EsUUFBTUksWUFBWSxHQUFHRCxLQUFLLENBQUNDLFlBQTNCO0FBQ0EsUUFBTUMsSUFBSSxHQUFHRixLQUFLLENBQUNFLElBQU4sSUFBY0YsS0FBM0I7QUFDQU4sT0FBRyxDQUFDUSxJQUFELENBQUgsR0FBWSxPQUFPTixJQUFJLENBQUNNLElBQUQsQ0FBWCxLQUFzQixXQUF0QixHQUFvQ04sSUFBSSxDQUFDTSxJQUFELENBQXhDLEdBQWlERCxZQUE3RDtBQUNEO0FBQ0YsQ0FWRCIsImZpbGUiOiIxMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZpZWxkc1BpY2tlciAob2JqLCBmaWVsZHMsIGF0dHIpIHtcbiAgaWYgKHR5cGVvZiBhdHRyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAobGV0IGkgPSAwLCBqID0gZmllbGRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGNvbnN0IGZpZWxkID0gZmllbGRzW2ldO1xuICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGZpZWxkLmRlZmF1bHRWYWx1ZTtcbiAgICBjb25zdCBuYW1lID0gZmllbGQubmFtZSB8fCBmaWVsZDtcbiAgICBvYmpbbmFtZV0gPSB0eXBlb2YgYXR0cltuYW1lXSAhPT0gXCJ1bmRlZmluZWRcIiA/IGF0dHJbbmFtZV0gOiBkZWZhdWx0VmFsdWU7XG4gIH1cbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar mkdirp = __webpack_require__(13);\n\nvar appSettings = __webpack_require__(1);\n\nvar jsonfile = __webpack_require__(29);\n\nvar LinkSave = __webpack_require__(73);\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {string} storageKey - storage key\n * @param {object} items - storage items\n * @constructor\n */\n\n\nfunction FlushItem(manifestId, storageKey, items) {\n  this.manifestId = manifestId;\n  this.storageKey = storageKey;\n  this.items = items;\n}\n/**\n *\n * @param {function} resolve - callback to be invoked when save was successful\n * @param {function} reject - callback to be invoked when save failed\n * @private\n * @returns {void}\n */\n\n\nFlushItem.prototype._saveToDisk = function (resolve, reject) {\n  var self = this;\n  var path = appSettings.getSettings().settingsFolder + this.manifestId + "/";\n  var file = "" + this.storageKey + ".json";\n  var fileUrl = path + file;\n  mkdirp(path, function (err) {\n    if (err) {\n      reject(err);\n    } else {\n      var data = convertStorage(self.storageKey, self.items);\n      jsonfile.writeFile(fileUrl, data, function (err) {\n        if (!err) {\n          resolve();\n        } else {\n          reject(err);\n        }\n      });\n    }\n  });\n};\n/**\n *\n * @returns {Promise} promise\n */\n\n\nFlushItem.prototype.save = function () {\n  return new Promise(this._saveToDisk.bind(this));\n};\n\nmodule.exports = FlushItem;\n/**\n * Helper function\n * @param {string} storageKey - storage key\n * @param {object} items - storage items\n * @returns {*} data to be stored\n */\n\nvar convertStorage = function convertStorage(storageKey, items) {\n  var itemsA = [];\n  var data; //only for downloading we want to have an array\n\n  if (storageKey === "downloading") {\n    itemsA = [];\n\n    for (var key in items) {\n      itemsA.push(items[key]);\n    }\n\n    items = itemsA;\n  }\n\n  if (items instanceof Array) {\n    data = [];\n\n    for (var i = 0, j = items.length; i < j; i++) {\n      data.push(new LinkSave(items[i]));\n    }\n  } else {\n    data = items;\n  }\n\n  return data;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL2ZsdXNoLWl0ZW0uanM/NzE0YSJdLCJuYW1lcyI6WyJta2RpcnAiLCJyZXF1aXJlIiwiYXBwU2V0dGluZ3MiLCJqc29uZmlsZSIsIkxpbmtTYXZlIiwiRmx1c2hJdGVtIiwibWFuaWZlc3RJZCIsInN0b3JhZ2VLZXkiLCJpdGVtcyIsInByb3RvdHlwZSIsIl9zYXZlVG9EaXNrIiwicmVzb2x2ZSIsInJlamVjdCIsInNlbGYiLCJwYXRoIiwiZ2V0U2V0dGluZ3MiLCJzZXR0aW5nc0ZvbGRlciIsImZpbGUiLCJmaWxlVXJsIiwiZXJyIiwiZGF0YSIsImNvbnZlcnRTdG9yYWdlIiwid3JpdGVGaWxlIiwic2F2ZSIsIlByb21pc2UiLCJiaW5kIiwibW9kdWxlIiwiZXhwb3J0cyIsIml0ZW1zQSIsImtleSIsInB1c2giLCJBcnJheSIsImkiLCJqIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxNQUFNLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUF0Qjs7QUFFQSxJQUFNQyxXQUFXLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNRSxRQUFRLEdBQUdGLG1CQUFPLENBQUMsRUFBRCxDQUF4Qjs7QUFDQSxJQUFNRyxRQUFRLEdBQUdILG1CQUFPLENBQUMsRUFBRCxDQUF4QjtBQUVBOzs7Ozs7Ozs7QUFPQSxTQUFTSSxTQUFULENBQW9CQyxVQUFwQixFQUFnQ0MsVUFBaEMsRUFBNENDLEtBQTVDLEVBQW1EO0FBQ2pELE9BQUtGLFVBQUwsR0FBa0JBLFVBQWxCO0FBQ0EsT0FBS0MsVUFBTCxHQUFrQkEsVUFBbEI7QUFDQSxPQUFLQyxLQUFMLEdBQWFBLEtBQWI7QUFDRDtBQUVEOzs7Ozs7Ozs7QUFPQUgsU0FBUyxDQUFDSSxTQUFWLENBQW9CQyxXQUFwQixHQUFrQyxVQUFVQyxPQUFWLEVBQW1CQyxNQUFuQixFQUEyQjtBQUMzRCxNQUFNQyxJQUFJLEdBQUcsSUFBYjtBQUNBLE1BQU1DLElBQUksR0FBR1osV0FBVyxDQUFDYSxXQUFaLEdBQTBCQyxjQUExQixHQUEyQyxLQUFLVixVQUFoRCxHQUE2RCxHQUExRTtBQUNBLE1BQU1XLElBQUksR0FBRyxLQUFLLEtBQUtWLFVBQVYsR0FBdUIsT0FBcEM7QUFDQSxNQUFNVyxPQUFPLEdBQUdKLElBQUksR0FBR0csSUFBdkI7QUFDQWpCLFFBQU0sQ0FBQ2MsSUFBRCxFQUFPLFVBQVVLLEdBQVYsRUFBZTtBQUMxQixRQUFJQSxHQUFKLEVBQVM7QUFDUFAsWUFBTSxDQUFDTyxHQUFELENBQU47QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJQyxJQUFJLEdBQUdDLGNBQWMsQ0FBQ1IsSUFBSSxDQUFDTixVQUFOLEVBQWtCTSxJQUFJLENBQUNMLEtBQXZCLENBQXpCO0FBQ0FMLGNBQVEsQ0FBQ21CLFNBQVQsQ0FBbUJKLE9BQW5CLEVBQTRCRSxJQUE1QixFQUFrQyxVQUFVRCxHQUFWLEVBQWU7QUFDL0MsWUFBSSxDQUFDQSxHQUFMLEVBQVU7QUFDUlIsaUJBQU87QUFDUixTQUZELE1BRU87QUFDTEMsZ0JBQU0sQ0FBQ08sR0FBRCxDQUFOO0FBQ0Q7QUFDRixPQU5EO0FBT0Q7QUFDRixHQWJLLENBQU47QUFjRCxDQW5CRDtBQXFCQTs7Ozs7O0FBSUFkLFNBQVMsQ0FBQ0ksU0FBVixDQUFvQmMsSUFBcEIsR0FBMkIsWUFBWTtBQUNyQyxTQUFPLElBQUlDLE9BQUosQ0FBWSxLQUFLZCxXQUFMLENBQWlCZSxJQUFqQixDQUFzQixJQUF0QixDQUFaLENBQVA7QUFDRCxDQUZEOztBQUlBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJ0QixTQUFqQjtBQUVBOzs7Ozs7O0FBTUEsSUFBTWdCLGNBQWMsR0FBRyxTQUFTQSxjQUFULENBQXlCZCxVQUF6QixFQUFxQ0MsS0FBckMsRUFBNEM7QUFDakUsTUFBSW9CLE1BQU0sR0FBRyxFQUFiO0FBQ0EsTUFBSVIsSUFBSixDQUZpRSxDQUdqRTs7QUFDQSxNQUFJYixVQUFVLEtBQUssYUFBbkIsRUFBa0M7QUFDaENxQixVQUFNLEdBQUcsRUFBVDs7QUFDQSxTQUFLLElBQUlDLEdBQVQsSUFBZ0JyQixLQUFoQixFQUF1QjtBQUNyQm9CLFlBQU0sQ0FBQ0UsSUFBUCxDQUFZdEIsS0FBSyxDQUFDcUIsR0FBRCxDQUFqQjtBQUNEOztBQUNEckIsU0FBSyxHQUFHb0IsTUFBUjtBQUNEOztBQUNELE1BQUlwQixLQUFLLFlBQVl1QixLQUFyQixFQUE0QjtBQUMxQlgsUUFBSSxHQUFHLEVBQVA7O0FBQ0EsU0FBSyxJQUFJWSxDQUFDLEdBQUcsQ0FBUixFQUFXQyxDQUFDLEdBQUd6QixLQUFLLENBQUMwQixNQUExQixFQUFrQ0YsQ0FBQyxHQUFHQyxDQUF0QyxFQUF5Q0QsQ0FBQyxFQUExQyxFQUE4QztBQUM1Q1osVUFBSSxDQUFDVSxJQUFMLENBQVUsSUFBSTFCLFFBQUosQ0FBYUksS0FBSyxDQUFDd0IsQ0FBRCxDQUFsQixDQUFWO0FBQ0Q7QUFDRixHQUxELE1BS087QUFDTFosUUFBSSxHQUFHWixLQUFQO0FBQ0Q7O0FBQ0QsU0FBT1ksSUFBUDtBQUNELENBcEJEIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBta2RpcnAgPSByZXF1aXJlKCdta2RpcnAnKTtcblxuY29uc3QgYXBwU2V0dGluZ3MgPSByZXF1aXJlKCcuLi9hcHAtc2V0dGluZ3MnKTtcbmNvbnN0IGpzb25maWxlID0gcmVxdWlyZSgnanNvbmZpbGUnKTtcbmNvbnN0IExpbmtTYXZlID0gcmVxdWlyZSgnLi4vbWFuaWZlc3QvanNvbi9saW5rLXNhdmUnKTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RvcmFnZUtleSAtIHN0b3JhZ2Uga2V5XG4gKiBAcGFyYW0ge29iamVjdH0gaXRlbXMgLSBzdG9yYWdlIGl0ZW1zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRmx1c2hJdGVtIChtYW5pZmVzdElkLCBzdG9yYWdlS2V5LCBpdGVtcykge1xuICB0aGlzLm1hbmlmZXN0SWQgPSBtYW5pZmVzdElkO1xuICB0aGlzLnN0b3JhZ2VLZXkgPSBzdG9yYWdlS2V5O1xuICB0aGlzLml0ZW1zID0gaXRlbXM7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmUgLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gc2F2ZSB3YXMgc3VjY2Vzc2Z1bFxuICogQHBhcmFtIHtmdW5jdGlvbn0gcmVqZWN0IC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHNhdmUgZmFpbGVkXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkZsdXNoSXRlbS5wcm90b3R5cGUuX3NhdmVUb0Rpc2sgPSBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBjb25zdCBwYXRoID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5zZXR0aW5nc0ZvbGRlciArIHRoaXMubWFuaWZlc3RJZCArIFwiL1wiO1xuICBjb25zdCBmaWxlID0gXCJcIiArIHRoaXMuc3RvcmFnZUtleSArIFwiLmpzb25cIjtcbiAgY29uc3QgZmlsZVVybCA9IHBhdGggKyBmaWxlO1xuICBta2RpcnAocGF0aCwgZnVuY3Rpb24gKGVycikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJlamVjdChlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZGF0YSA9IGNvbnZlcnRTdG9yYWdlKHNlbGYuc3RvcmFnZUtleSwgc2VsZi5pdGVtcyk7XG4gICAgICBqc29uZmlsZS53cml0ZUZpbGUoZmlsZVVybCwgZGF0YSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKi9cbkZsdXNoSXRlbS5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHRoaXMuX3NhdmVUb0Rpc2suYmluZCh0aGlzKSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZsdXNoSXRlbTtcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yYWdlS2V5IC0gc3RvcmFnZSBrZXlcbiAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtcyAtIHN0b3JhZ2UgaXRlbXNcbiAqIEByZXR1cm5zIHsqfSBkYXRhIHRvIGJlIHN0b3JlZFxuICovXG5jb25zdCBjb252ZXJ0U3RvcmFnZSA9IGZ1bmN0aW9uIGNvbnZlcnRTdG9yYWdlIChzdG9yYWdlS2V5LCBpdGVtcykge1xuICBsZXQgaXRlbXNBID0gW107XG4gIGxldCBkYXRhO1xuICAvL29ubHkgZm9yIGRvd25sb2FkaW5nIHdlIHdhbnQgdG8gaGF2ZSBhbiBhcnJheVxuICBpZiAoc3RvcmFnZUtleSA9PT0gXCJkb3dubG9hZGluZ1wiKSB7XG4gICAgaXRlbXNBID0gW107XG4gICAgZm9yIChsZXQga2V5IGluIGl0ZW1zKSB7XG4gICAgICBpdGVtc0EucHVzaChpdGVtc1trZXldKTtcbiAgICB9XG4gICAgaXRlbXMgPSBpdGVtc0E7XG4gIH1cbiAgaWYgKGl0ZW1zIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBkYXRhID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBpdGVtcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGRhdGEucHVzaChuZXcgTGlua1NhdmUoaXRlbXNbaV0pKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZGF0YSA9IGl0ZW1zO1xuICB9XG4gIHJldHVybiBkYXRhO1xufTtcblxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__13__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJta2RpcnBcIj82YTBkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xM19fOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n")},function(module,exports){eval('module.exports = require("events");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJldmVudHNcIj83YTdlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZXZlbnRzXCIpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar ManifestLoader = __webpack_require__(44);\n\nvar ManifestLocalLoader = __webpack_require__(45); // const ManifestXML_1 = require(\"./../parser/manifest-xml\");\n\n\nvar ManifestXML_1 = __webpack_require__(46);\n\nvar AllAdaptationSets_1 = __webpack_require__(55);\n\nvar SnowflakeId_1 = __webpack_require__(9);\n\nvar jsonRepresentation = __webpack_require__(56);\n\nvar jsonRepresentationWithProtection = __webpack_require__(57);\n\nvar manifestLoader = new ManifestLoader.ManifestLoader();\n\nvar urlParse = __webpack_require__(58);\n\nvar encoding = __webpack_require__(59);\n\nvar Manifest = function () {\n  function Manifest(id) {\n    if (!id) {\n      this.id = String(SnowflakeId_1.SnowflakeId.getUUID());\n    } else {\n      this.id = id;\n    }\n  }\n\n  Manifest.prototype._setUpUrl = function (url) {\n    var pathName = urlParse(url).pathname;\n    this.url = url;\n    this.url_domain = url.substring(0, url.lastIndexOf('/') + 1);\n    this.manifest_name = pathName.substring(pathName.lastIndexOf('/') + 1, pathName.length);\n  };\n\n  Manifest.prototype.load = function (url) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      _this._setUpUrl(url);\n\n      var p = manifestLoader.load(url);\n      p.then(function (v) {\n        var isEncodingUTF16 = encoding.isUTF16(v.response);\n        v.response = v.response.toString(isEncodingUTF16 ? 'utf16le' : 'utf-8');\n        var xml = v.response;\n        _this.manifestXML = new ManifestXML_1.ManifestXML();\n\n        _this.manifestXML.parse(xml, function () {\n          resolve();\n        }, function (e) {\n          reject(e);\n          throw new Error(\"Manifest parsing error\");\n        });\n      }, function (e) {\n        reject(e);\n      });\n    });\n  };\n\n  Manifest.prototype.loadWithManifest = function (url, manifest) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      _this._setUpUrl(url);\n\n      _this.manifestXML = new ManifestXML_1.ManifestXML();\n\n      _this.manifestXML.parse(manifest, function () {\n        resolve();\n      }, function (e) {\n        reject(e);\n        throw new Error(\"Manifest parsing error\");\n      });\n    });\n  };\n\n  Manifest.prototype.loadFromLocal = function (localPath, url) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      if (!url || !localPath) {\n        reject('wrong parameter');\n        return;\n      }\n\n      ManifestLocalLoader(localPath).then(function (str) {\n        _this._setUpUrl(url);\n\n        _this.manifestXML = new ManifestXML_1.ManifestXML();\n\n        _this.manifestXML.parse(str, function () {\n          resolve();\n        }, function (e) {\n          reject(e);\n        });\n      }, function (e) {\n        reject(e);\n      });\n    });\n  };\n\n  Manifest.prototype.loadFromStr = function (str, url) {\n    this.url_domain = url.substring(0, url.lastIndexOf('/') + 1);\n    this.manifest_name = url.substring(url.lastIndexOf('/') + 1, url.length);\n    this.manifestXML = new ManifestXML_1.ManifestXML();\n    this.manifestXML.parse(str);\n  };\n\n  Manifest.prototype.getAdaptationSets = function () {\n    var vid = this.manifestXML.getVideoAdaptation();\n    var audio = this.manifestXML.getAudioAdaptation();\n    var text = this.manifestXML.getTextAdaptation();\n    var all = new AllAdaptationSets_1.AllAdaptationSets(vid, audio, text);\n    return all;\n  };\n\n  Manifest.prototype.getVideoRepresentations = function () {\n    return this.manifestXML.getVideoAdaptation();\n  };\n\n  Manifest.prototype.getAudioRepresentations = function () {\n    return this.manifestXML.getAudioAdaptation();\n  };\n\n  Manifest.prototype.getTextRepresentations = function () {\n    return this.manifestXML.getTextAdaptation();\n  };\n\n  Manifest.prototype.getProtections = function () {\n    var protections = {};\n    protections.video = jsonRepresentationWithProtection(this.getVideoRepresentations());\n    protections.audio = jsonRepresentationWithProtection(this.getAudioRepresentations());\n    protections.text = jsonRepresentationWithProtection(this.getTextRepresentations());\n    return protections;\n  };\n\n  Manifest.prototype.getRemoteDomain = function () {\n    return this.url_domain;\n  };\n\n  Manifest.prototype.getManifestName = function () {\n    return this.manifest_name;\n  };\n\n  Manifest.prototype.getManifestUrl = function () {\n    return this.url;\n  };\n\n  Manifest.prototype.getManifestXML = function () {\n    return this.manifestXML.getManifestXML();\n  };\n\n  Manifest.prototype.removeNode = function () {\n    this.manifestXML.removeNode();\n  };\n\n  Manifest.prototype.getJsonInfo = function () {\n    var json = {};\n    json.id = this.id;\n    json.audio = jsonRepresentation(this.getAudioRepresentations());\n    json.video = jsonRepresentation(this.getVideoRepresentations());\n    json.text = jsonRepresentation(this.getTextRepresentations());\n    json.protections = this.getProtections();\n    return json;\n  };\n\n  return Manifest;\n}();\n\nexports.Manifest = Manifest;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvbG9hZGVyL21hbmlmZXN0LmpzPzdiOTYiXSwibmFtZXMiOlsiTWFuaWZlc3RMb2FkZXIiLCJyZXF1aXJlIiwiTWFuaWZlc3RMb2NhbExvYWRlciIsIk1hbmlmZXN0WE1MXzEiLCJBbGxBZGFwdGF0aW9uU2V0c18xIiwiU25vd2ZsYWtlSWRfMSIsImpzb25SZXByZXNlbnRhdGlvbiIsImpzb25SZXByZXNlbnRhdGlvbldpdGhQcm90ZWN0aW9uIiwibWFuaWZlc3RMb2FkZXIiLCJ1cmxQYXJzZSIsImVuY29kaW5nIiwiTWFuaWZlc3QiLCJpZCIsIlN0cmluZyIsIlNub3dmbGFrZUlkIiwiZ2V0VVVJRCIsInByb3RvdHlwZSIsIl9zZXRVcFVybCIsInVybCIsInBhdGhOYW1lIiwicGF0aG5hbWUiLCJ1cmxfZG9tYWluIiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJtYW5pZmVzdF9uYW1lIiwibGVuZ3RoIiwibG9hZCIsIl90aGlzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwIiwidGhlbiIsInYiLCJpc0VuY29kaW5nVVRGMTYiLCJpc1VURjE2IiwicmVzcG9uc2UiLCJ0b1N0cmluZyIsInhtbCIsIm1hbmlmZXN0WE1MIiwiTWFuaWZlc3RYTUwiLCJwYXJzZSIsImUiLCJFcnJvciIsImxvYWRXaXRoTWFuaWZlc3QiLCJtYW5pZmVzdCIsImxvYWRGcm9tTG9jYWwiLCJsb2NhbFBhdGgiLCJzdHIiLCJsb2FkRnJvbVN0ciIsImdldEFkYXB0YXRpb25TZXRzIiwidmlkIiwiZ2V0VmlkZW9BZGFwdGF0aW9uIiwiYXVkaW8iLCJnZXRBdWRpb0FkYXB0YXRpb24iLCJ0ZXh0IiwiZ2V0VGV4dEFkYXB0YXRpb24iLCJhbGwiLCJBbGxBZGFwdGF0aW9uU2V0cyIsImdldFZpZGVvUmVwcmVzZW50YXRpb25zIiwiZ2V0QXVkaW9SZXByZXNlbnRhdGlvbnMiLCJnZXRUZXh0UmVwcmVzZW50YXRpb25zIiwiZ2V0UHJvdGVjdGlvbnMiLCJwcm90ZWN0aW9ucyIsInZpZGVvIiwiZ2V0UmVtb3RlRG9tYWluIiwiZ2V0TWFuaWZlc3ROYW1lIiwiZ2V0TWFuaWZlc3RVcmwiLCJnZXRNYW5pZmVzdFhNTCIsInJlbW92ZU5vZGUiLCJnZXRKc29uSW5mbyIsImpzb24iLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxjQUFjLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUE5Qjs7QUFDQSxJQUFNQyxtQkFBbUIsR0FBR0QsbUJBQU8sQ0FBQyxFQUFELENBQW5DLEMsQ0FDQTs7O0FBQ0EsSUFBTUUsYUFBYSxHQUFHRixtQkFBTyxDQUFDLEVBQUQsQ0FBN0I7O0FBQ0EsSUFBTUcsbUJBQW1CLEdBQUdILG1CQUFPLENBQUMsRUFBRCxDQUFuQzs7QUFDQSxJQUFNSSxhQUFhLEdBQUdKLG1CQUFPLENBQUMsQ0FBRCxDQUE3Qjs7QUFDQSxJQUFNSyxrQkFBa0IsR0FBR0wsbUJBQU8sQ0FBQyxFQUFELENBQWxDOztBQUNBLElBQU1NLGdDQUFnQyxHQUFHTixtQkFBTyxDQUFDLEVBQUQsQ0FBaEQ7O0FBQ0EsSUFBTU8sY0FBYyxHQUFHLElBQUlSLGNBQWMsQ0FBQ0EsY0FBbkIsRUFBdkI7O0FBQ0EsSUFBTVMsUUFBUSxHQUFHUixtQkFBTyxDQUFDLEVBQUQsQ0FBeEI7O0FBQ0EsSUFBTVMsUUFBUSxHQUFHVCxtQkFBTyxDQUFDLEVBQUQsQ0FBeEI7O0FBRUEsSUFBTVUsUUFBUSxHQUFJLFlBQVk7QUFDNUIsV0FBU0EsUUFBVCxDQUFtQkMsRUFBbkIsRUFBdUI7QUFDckIsUUFBSSxDQUFDQSxFQUFMLEVBQVM7QUFDUCxXQUFLQSxFQUFMLEdBQVVDLE1BQU0sQ0FBQ1IsYUFBYSxDQUFDUyxXQUFkLENBQTBCQyxPQUExQixFQUFELENBQWhCO0FBQ0QsS0FGRCxNQUVPO0FBQ0wsV0FBS0gsRUFBTCxHQUFVQSxFQUFWO0FBQ0Q7QUFDRjs7QUFFREQsVUFBUSxDQUFDSyxTQUFULENBQW1CQyxTQUFuQixHQUErQixVQUFV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ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgTWFuaWZlc3RMb2FkZXIgPSByZXF1aXJlKFwiLi9tYW5pZmVzdC1sb2FkZXJcIik7XG5jb25zdCBNYW5pZmVzdExvY2FsTG9hZGVyID0gcmVxdWlyZShcIi4vbWFuaWZlc3QtbG9jYWwtbG9hZGVyXCIpO1xuLy8gY29uc3QgTWFuaWZlc3RYTUxfMSA9IHJlcXVpcmUoXCIuLy4uL3BhcnNlci9tYW5pZmVzdC14bWxcIik7XG5jb25zdCBNYW5pZmVzdFhNTF8xID0gcmVxdWlyZShcIi4vLi4vcGFyc2VyL21zcy9tYW5pZmVzdC14bWxcIik7XG5jb25zdCBBbGxBZGFwdGF0aW9uU2V0c18xID0gcmVxdWlyZShcIi4uL3BhcnNlci9hbGwtYWRhcHRhdGlvbi1zZXRzXCIpO1xuY29uc3QgU25vd2ZsYWtlSWRfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL3Nub3dmbGFrZS1pZFwiKTtcbmNvbnN0IGpzb25SZXByZXNlbnRhdGlvbiA9IHJlcXVpcmUoXCIuLi9wYXJzZXIvanNvbi1yZXByZXNlbnRhdGlvblwiKTtcbmNvbnN0IGpzb25SZXByZXNlbnRhdGlvbldpdGhQcm90ZWN0aW9uID0gcmVxdWlyZShcIi4uL3BhcnNlci9qc29uLXJlcHJlc2VudGF0aW9uLXdpdGgtcHJvdGVjdGlvblwiKTtcbmNvbnN0IG1hbmlmZXN0TG9hZGVyID0gbmV3IE1hbmlmZXN0TG9hZGVyLk1hbmlmZXN0TG9hZGVyKCk7XG5jb25zdCB1cmxQYXJzZSA9IHJlcXVpcmUoXCJ1cmwtcGFyc2VcIik7XG5jb25zdCBlbmNvZGluZyA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL2VuY29kaW5nXCIpO1xuXG5jb25zdCBNYW5pZmVzdCA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE1hbmlmZXN0IChpZCkge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHRoaXMuaWQgPSBTdHJpbmcoU25vd2ZsYWtlSWRfMS5Tbm93Zmxha2VJZC5nZXRVVUlEKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICB9XG5cbiAgTWFuaWZlc3QucHJvdG90eXBlLl9zZXRVcFVybCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICBjb25zdCBwYXRoTmFtZSA9IHVybFBhcnNlKHVybCkucGF0aG5hbWU7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy51cmxfZG9tYWluID0gdXJsLnN1YnN0cmluZygwLCB1cmwubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgIHRoaXMubWFuaWZlc3RfbmFtZSA9IHBhdGhOYW1lLnN1YnN0cmluZyhwYXRoTmFtZS5sYXN0SW5kZXhPZignLycpICsgMSwgcGF0aE5hbWUubGVuZ3RoKTtcbiAgfTtcblxuICBNYW5pZmVzdC5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIF90aGlzLl9zZXRVcFVybCh1cmwpO1xuICAgICAgY29uc3QgcCA9IG1hbmlmZXN0TG9hZGVyLmxvYWQodXJsKTtcbiAgICAgIHAudGhlbihmdW5jdGlvbiAodikge1xuICAgICAgICB2YXIgaXNFbmNvZGluZ1VURjE2ID0gZW5jb2RpbmcuaXNVVEYxNih2LnJlc3BvbnNlKTtcbiAgICAgICAgdi5yZXNwb25zZSA9IHYucmVzcG9uc2UudG9TdHJpbmcoaXNFbmNvZGluZ1VURjE2ID8gJ3V0ZjE2bGUnIDogJ3V0Zi04Jyk7XG4gICAgICAgIGNvbnN0IHhtbCA9IHYucmVzcG9uc2U7XG4gICAgICAgIF90aGlzLm1hbmlmZXN0WE1MID0gbmV3IE1hbmlmZXN0WE1MXzEuTWFuaWZlc3RYTUwoKTtcbiAgICAgICAgX3RoaXMubWFuaWZlc3RYTUwucGFyc2UoeG1sLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYW5pZmVzdCBwYXJzaW5nIGVycm9yXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG5NYW5pZmVzdC5wcm90b3R5cGUubG9hZFdpdGhNYW5pZmVzdCA9IGZ1bmN0aW9uICh1cmwsIG1hbmlmZXN0KSB7XG4gICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIF90aGlzLl9zZXRVcFVybCh1cmwpO1xuICAgICAgICBfdGhpcy5tYW5pZmVzdFhNTCA9IG5ldyBNYW5pZmVzdFhNTF8xLk1hbmlmZXN0WE1MKCk7XG4gICAgICAgIF90aGlzLm1hbmlmZXN0WE1MLnBhcnNlKG1hbmlmZXN0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYW5pZmVzdCBwYXJzaW5nIGVycm9yXCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG4gIE1hbmlmZXN0LnByb3RvdHlwZS5sb2FkRnJvbUxvY2FsID0gZnVuY3Rpb24gKGxvY2FsUGF0aCwgdXJsKSB7XG4gICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZiAoIXVybCB8fCAhbG9jYWxQYXRoKSB7XG4gICAgICAgIHJlamVjdCgnd3JvbmcgcGFyYW1ldGVyJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIE1hbmlmZXN0TG9jYWxMb2FkZXIobG9jYWxQYXRoKS50aGVuKGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgX3RoaXMuX3NldFVwVXJsKHVybCk7XG4gICAgICAgIF90aGlzLm1hbmlmZXN0WE1MID0gbmV3IE1hbmlmZXN0WE1MXzEuTWFuaWZlc3RYTUwoKTtcbiAgICAgICAgX3RoaXMubWFuaWZlc3RYTUwucGFyc2Uoc3RyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICB9O1xuXG4gIE1hbmlmZXN0LnByb3RvdHlwZS5sb2FkRnJvbVN0ciA9IGZ1bmN0aW9uIChzdHIsIHVybCkge1xuICAgIHRoaXMudXJsX2RvbWFpbiA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICB0aGlzLm1hbmlmZXN0X25hbWUgPSB1cmwuc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZignLycpICsgMSwgdXJsLmxlbmd0aCk7XG4gICAgdGhpcy5tYW5pZmVzdFhNTCA9IG5ldyBNYW5pZmVzdFhNTF8xLk1hbmlmZXN0WE1MKCk7XG4gICAgdGhpcy5tYW5pZmVzdFhNTC5wYXJzZShzdHIpO1xuICB9O1xuXG4gIE1hbmlmZXN0LnByb3RvdHlwZS5nZXRBZGFwdGF0aW9uU2V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB2aWQgPSB0aGlzLm1hbmlmZXN0WE1MLmdldFZpZGVvQWRhcHRhdGlvbigpO1xuICAgIGNvbnN0IGF1ZGlvID0gdGhpcy5tYW5pZmVzdFhNTC5nZXRBdWRpb0FkYXB0YXRpb24oKTtcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5tYW5pZmVzdFhNTC5nZXRUZXh0QWRhcHRhdGlvbigpO1xuICAgIGNvbnN0IGFsbCA9IG5ldyBBbGxBZGFwdGF0aW9uU2V0c18xLkFsbEFkYXB0YXRpb25TZXRzKHZpZCwgYXVkaW8sIHRleHQpO1xuICAgIHJldHVybiBhbGw7XG4gIH07XG4gIE1hbmlmZXN0LnByb3RvdHlwZS5nZXRWaWRlb1JlcHJlc2VudGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tYW5pZmVzdFhNTC5nZXRWaWRlb0FkYXB0YXRpb24oKTtcbiAgfTtcbiAgTWFuaWZlc3QucHJvdG90eXBlLmdldEF1ZGlvUmVwcmVzZW50YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1hbmlmZXN0WE1MLmdldEF1ZGlvQWRhcHRhdGlvbigpO1xuICB9O1xuICBNYW5pZmVzdC5wcm90b3R5cGUuZ2V0VGV4dFJlcHJlc2VudGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tYW5pZmVzdFhNTC5nZXRUZXh0QWRhcHRhdGlvbigpO1xuICB9O1xuICBNYW5pZmVzdC5wcm90b3R5cGUuZ2V0UHJvdGVjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHByb3RlY3Rpb25zID0ge307XG4gICAgcHJvdGVjdGlvbnMudmlkZW8gPSBqc29uUmVwcmVzZW50YXRpb25XaXRoUHJvdGVjdGlvbih0aGlzLmdldFZpZGVvUmVwcmVzZW50YXRpb25zKCkpO1xuICAgIHByb3RlY3Rpb25zLmF1ZGlvID0ganNvblJlcHJlc2VudGF0aW9uV2l0aFByb3RlY3Rpb24odGhpcy5nZXRBdWRpb1JlcHJlc2VudGF0aW9ucygpKTtcbiAgICBwcm90ZWN0aW9ucy50ZXh0ID0ganNvblJlcHJlc2VudGF0aW9uV2l0aFByb3RlY3Rpb24odGhpcy5nZXRUZXh0UmVwcmVzZW50YXRpb25zKCkpO1xuICAgIHJldHVybiBwcm90ZWN0aW9ucztcbiAgfTtcbiAgTWFuaWZlc3QucHJvdG90eXBlLmdldFJlbW90ZURvbWFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51cmxfZG9tYWluO1xuICB9O1xuICBNYW5pZmVzdC5wcm90b3R5cGUuZ2V0TWFuaWZlc3ROYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1hbmlmZXN0X25hbWU7XG4gIH07XG4gIE1hbmlmZXN0LnByb3RvdHlwZS5nZXRNYW5pZmVzdFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy51cmw7XG4gIH07XG4gIE1hbmlmZXN0LnByb3RvdHlwZS5nZXRNYW5pZmVzdFhNTCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tYW5pZmVzdFhNTC5nZXRNYW5pZmVzdFhNTCgpO1xuICB9O1xuICBNYW5pZmVzdC5wcm90b3R5cGUucmVtb3ZlTm9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1hbmlmZXN0WE1MLnJlbW92ZU5vZGUoKTtcbiAgfTtcbiAgTWFuaWZlc3QucHJvdG90eXBlLmdldEpzb25JbmZvID0gZnVuY3Rpb24gKCkge1xuICAgIGxldCBqc29uID0ge307XG4gICAganNvbi5pZCA9IHRoaXMuaWQ7XG4gICAganNvbi5hdWRpbyA9IGpzb25SZXByZXNlbnRhdGlvbih0aGlzLmdldEF1ZGlvUmVwcmVzZW50YXRpb25zKCkpO1xuICAgIGpzb24udmlkZW8gPSBqc29uUmVwcmVzZW50YXRpb24odGhpcy5nZXRWaWRlb1JlcHJlc2VudGF0aW9ucygpKTtcbiAgICBqc29uLnRleHQgPSBqc29uUmVwcmVzZW50YXRpb24odGhpcy5nZXRUZXh0UmVwcmVzZW50YXRpb25zKCkpO1xuICAgIGpzb24ucHJvdGVjdGlvbnMgPSB0aGlzLmdldFByb3RlY3Rpb25zKCk7XG4gICAgcmV0dXJuIGpzb247XG4gIH07XG4gIHJldHVybiBNYW5pZmVzdDtcbn0oKSk7XG5leHBvcnRzLk1hbmlmZXN0ID0gTWFuaWZlc3Q7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///15\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar SnowflakeId_1 = __webpack_require__(9);\n\nvar ManifestNode = function () {\n  function ManifestNode(node, xml) {\n    this.childCollection = [];\n    this.attributeList = {};\n    this.setCurrentNode(node);\n    this.setChildCollection(node.childNodes);\n    this.buildAttributeList(node, this.attributeList);\n    this.setParentNode(node.parentNode);\n    this.xml = xml;\n    this.id = SnowflakeId_1.SnowflakeId.getUUID();\n  }\n\n  ManifestNode.prototype.setParentNode = function (node) {\n    this.parentNode = node;\n  };\n\n  ManifestNode.prototype.setChildCollection = function (coll) {\n    this.childCollection = coll;\n  };\n\n  ManifestNode.prototype.setCurrentNode = function (node) {\n    this.currentNode = node;\n  };\n\n  ManifestNode.prototype.buildAttributeList = function (node, list) {\n    this.writeAttributesToList(node, list);\n  };\n\n  ManifestNode.prototype.writeAttributesToList = function (node, list) {\n    var attrList = node.attributes;\n\n    for (var attr in attrList) {\n      if (!list[attrList[attr].nodeName]) {\n        list[attrList[attr].nodeName] = attrList[attr].nodeValue;\n      }\n    }\n\n    if (node.parentNode !== null) {\n      this.buildAttributeList(node.parentNode, list);\n    }\n  };\n\n  ManifestNode.prototype.getCurrentNode = function () {\n    return this.currentNode;\n  };\n\n  ManifestNode.prototype.markNodeForDownload = function (value) {\n    var newAtt = this.xml.createAttribute('markForDownload');\n\n    if (!value) {\n      this.currentNode.removeAttribute('markForDownload');\n    } else {\n      newAtt.value = value.toString();\n      this.currentNode.setAttributeNode(newAtt);\n    }\n  };\n\n  ManifestNode.prototype.getAttributeList = function () {\n    return this.attributeList;\n  };\n\n  return ManifestNode;\n}();\n\nexports.ManifestNode = ManifestNode;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL21hbmlmZXN0LW5vZGUuanM/MzFiNCJdLCJuYW1lcyI6WyJTbm93Zmxha2VJZF8xIiwicmVxdWlyZSIsIk1hbmlmZXN0Tm9kZSIsIm5vZGUiLCJ4bWwiLCJjaGlsZENvbGxlY3Rpb24iLCJhdHRyaWJ1dGVMaXN0Iiwic2V0Q3VycmVudE5vZGUiLCJzZXRDaGlsZENvbGxlY3Rpb24iLCJjaGlsZE5vZGVzIiwiYnVpbGRBdHRyaWJ1dGVMaXN0Iiwic2V0UGFyZW50Tm9kZSIsInBhcmVudE5vZGUiLCJpZCIsIlNub3dmbGFrZUlkIiwiZ2V0VVVJRCIsInByb3RvdHlwZSIsImNvbGwiLCJjdXJyZW50Tm9kZSIsImxpc3QiLCJ3cml0ZUF0dHJpYnV0ZXNUb0xpc3QiLCJhdHRyTGlzdCIsImF0dHJpYnV0ZXMiLCJhdHRyIiwibm9kZU5hbWUiLCJub2RlVmFsdWUiLCJnZXRDdXJyZW50Tm9kZSIsIm1hcmtOb2RlRm9yRG93bmxvYWQiLCJ2YWx1ZSIsIm5ld0F0dCIsImNyZWF0ZUF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInRvU3RyaW5nIiwic2V0QXR0cmlidXRlTm9kZSIsImdldEF0dHJpYnV0ZUxpc3QiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxhQUFhLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUE3Qjs7QUFDQSxJQUFNQyxZQUFZLEdBQUksWUFBWTtBQUNoQyxXQUFTQSxZQUFULENBQXVCQyxJQUF2QixFQUE2QkMsR0FBN0IsRUFBa0M7QUFDaEMsU0FBS0MsZUFBTCxHQUF1QixFQUF2QjtBQUNBLFNBQUtDLGFBQUwsR0FBcUIsRUFBckI7QUFDQSxTQUFLQyxjQUFMLENBQW9CSixJQUFwQjtBQUNBLFNBQUtLLGtCQUFMLENBQXdCTCxJQUFJLENBQUNNLFVBQTdCO0FBQ0EsU0FBS0Msa0JBQUwsQ0FBd0JQLElBQXhCLEVBQThCLEtBQUtHLGFBQW5DO0FBQ0EsU0FBS0ssYUFBTCxDQUFtQlIsSUFBSSxDQUFDUyxVQUF4QjtBQUNBLFNBQUtSLEdBQUwsR0FBV0EsR0FBWDtBQUNBLFNBQUtTLEVBQUwsR0FBVWIsYUFBYSxDQUFDYyxXQUFkLENBQTBCQyxPQUExQixFQUFWO0FBQ0Q7O0FBRURiLGNBQVksQ0FBQ2MsU0FBYixDQUF1QkwsYUFBdkIsR0FBdUMsVUFBVVIsSUFBVixFQUFnQjtBQUNyRCxTQUFLUyxVQUFMLEdBQWtCVCxJQUFsQjtBQUNELEdBRkQ7O0FBR0FELGNBQVksQ0FBQ2MsU0FBYixDQUF1QlIsa0JBQXZCLEdBQTRDLFVBQVVTLElBQVYsRUFBZ0I7QUFDMUQsU0FBS1osZUFBTCxHQUF1QlksSUFBdkI7QUFDRCxHQUZEOztBQUdBZixjQUFZLENBQUNjLFNBQWIsQ0FBdUJULGNBQXZCLEdBQXdDLFVBQVVKLElBQVYsRUFBZ0I7QUFDdEQsU0FBS2UsV0FBTCxHQUFtQmYsSUFBbkI7QUFDRCxHQUZEOztBQUdBRCxjQUFZLENBQUNjLFNBQWIsQ0FBdUJOLGtCQUF2QixHQUE0QyxVQUFVUCxJQUFWLEVBQWdCZ0IsSUFBaEIsRUFBc0I7QUFDaEUsU0FBS0MscUJBQUwsQ0FBMkJqQixJQUEzQixFQUFpQ2dCLElBQWpDO0FBQ0QsR0FGRDs7QUFHQWpCLGNBQVksQ0FBQ2MsU0FBYixDQUF1QkkscUJBQXZCLEdBQStDLFVBQVVqQixJQUFWLEVBQWdCZ0IsSUFBaEIsRUFBc0I7QUFDbkUsUUFBTUUsUUFBUSxHQUFHbEIsSUFBSSxDQUFDbUIsVUFBdEI7O0FBQ0EsU0FBSyxJQUFJQyxJQUFULElBQWlCRixRQUFqQixFQUEyQjtBQUN6QixVQUFJLENBQUNGLElBQUksQ0FBQ0UsUUFBUSxDQUFDRSxJQUFELENBQVIsQ0FBZUMsUUFBaEIsQ0FBVCxFQUFvQztBQUNsQ0wsWUFBSSxDQUFDRSxRQUFRLENBQUNFLElBQUQsQ0FBUixDQUFlQyxRQUFoQixDQUFKLEdBQWdDSCxRQUFRLENBQUNFLElBQUQsQ0FBUixDQUFlRSxTQUEvQztBQUNEO0FBQ0Y7O0FBQ0QsUUFBSXRCLElBQUksQ0FBQ1MsVUFBTCxLQUFvQixJQUF4QixFQUE4QjtBQUM1QixXQUFLRixrQkFBTCxDQUF3QlAsSUFBSSxDQUFDUyxVQUE3QixFQUF5Q08sSUFBekM7QUFDRDtBQUNGLEdBVkQ7O0FBV0FqQixjQUFZLENBQUNjLFNBQWIsQ0FBdUJVLGNBQXZCLEdBQXdDLFlBQVk7QUFDbEQsV0FBTyxLQUFLUixXQUFaO0FBQ0QsR0FGRDs7QUFHQWhCLGNBQVksQ0FBQ2MsU0FBYixDQUF1QlcsbUJBQXZCLEdBQTZDLFVBQVVDLEtBQVYsRUFBaUI7QUFDNUQsUUFBTUMsTUFBTSxHQUFHLEtBQUt6QixHQUFMLENBQVMwQixlQUFULENBQXlCLGlCQUF6QixDQUFmOztBQUNBLFFBQUksQ0FBQ0YsS0FBTCxFQUFZO0FBQ1YsV0FBS1YsV0FBTCxDQUFpQmEsZUFBakIsQ0FBaUMsaUJBQWpDO0FBQ0QsS0FGRCxNQUVPO0FBQ0xGLFlBQU0sQ0FBQ0QsS0FBUCxHQUFlQSxLQUFLLENBQUNJLFFBQU4sRUFBZjtBQUNBLFdBQUtkLFdBQUwsQ0FBaUJlLGdCQUFqQixDQUFrQ0osTUFBbEM7QUFDRDtBQUNGLEdBUkQ7O0FBU0EzQixjQUFZLENBQUNjLFNBQWIsQ0FBdUJrQixnQkFBdkIsR0FBMEMsWUFBWTtBQUNwRCxXQUFPLEtBQUs1QixhQUFaO0FBQ0QsR0FGRDs7QUFHQSxTQUFPSixZQUFQO0FBQ0QsQ0FuRHFCLEVBQXRCOztBQW9EQWlDLE9BQU8sQ0FBQ2pDLFlBQVIsR0FBdUJBLFlBQXZCIiwiZmlsZSI6IjE2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBTbm93Zmxha2VJZF8xID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvc25vd2ZsYWtlLWlkXCIpO1xuY29uc3QgTWFuaWZlc3ROb2RlID0gKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTWFuaWZlc3ROb2RlIChub2RlLCB4bWwpIHtcbiAgICB0aGlzLmNoaWxkQ29sbGVjdGlvbiA9IFtdO1xuICAgIHRoaXMuYXR0cmlidXRlTGlzdCA9IHt9O1xuICAgIHRoaXMuc2V0Q3VycmVudE5vZGUobm9kZSk7XG4gICAgdGhpcy5zZXRDaGlsZENvbGxlY3Rpb24obm9kZS5jaGlsZE5vZGVzKTtcbiAgICB0aGlzLmJ1aWxkQXR0cmlidXRlTGlzdChub2RlLCB0aGlzLmF0dHJpYnV0ZUxpc3QpO1xuICAgIHRoaXMuc2V0UGFyZW50Tm9kZShub2RlLnBhcmVudE5vZGUpO1xuICAgIHRoaXMueG1sID0geG1sO1xuICAgIHRoaXMuaWQgPSBTbm93Zmxha2VJZF8xLlNub3dmbGFrZUlkLmdldFVVSUQoKTtcbiAgfVxuXG4gIE1hbmlmZXN0Tm9kZS5wcm90b3R5cGUuc2V0UGFyZW50Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdGhpcy5wYXJlbnROb2RlID0gbm9kZTtcbiAgfTtcbiAgTWFuaWZlc3ROb2RlLnByb3RvdHlwZS5zZXRDaGlsZENvbGxlY3Rpb24gPSBmdW5jdGlvbiAoY29sbCkge1xuICAgIHRoaXMuY2hpbGRDb2xsZWN0aW9uID0gY29sbDtcbiAgfTtcbiAgTWFuaWZlc3ROb2RlLnByb3RvdHlwZS5zZXRDdXJyZW50Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdGhpcy5jdXJyZW50Tm9kZSA9IG5vZGU7XG4gIH07XG4gIE1hbmlmZXN0Tm9kZS5wcm90b3R5cGUuYnVpbGRBdHRyaWJ1dGVMaXN0ID0gZnVuY3Rpb24gKG5vZGUsIGxpc3QpIHtcbiAgICB0aGlzLndyaXRlQXR0cmlidXRlc1RvTGlzdChub2RlLCBsaXN0KTtcbiAgfTtcbiAgTWFuaWZlc3ROb2RlLnByb3RvdHlwZS53cml0ZUF0dHJpYnV0ZXNUb0xpc3QgPSBmdW5jdGlvbiAobm9kZSwgbGlzdCkge1xuICAgIGNvbnN0IGF0dHJMaXN0ID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgIGZvciAobGV0IGF0dHIgaW4gYXR0ckxpc3QpIHtcbiAgICAgIGlmICghbGlzdFthdHRyTGlzdFthdHRyXS5ub2RlTmFtZV0pIHtcbiAgICAgICAgbGlzdFthdHRyTGlzdFthdHRyXS5ub2RlTmFtZV0gPSBhdHRyTGlzdFthdHRyXS5ub2RlVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChub2RlLnBhcmVudE5vZGUgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuYnVpbGRBdHRyaWJ1dGVMaXN0KG5vZGUucGFyZW50Tm9kZSwgbGlzdCk7XG4gICAgfVxuICB9O1xuICBNYW5pZmVzdE5vZGUucHJvdG90eXBlLmdldEN1cnJlbnROb2RlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnROb2RlO1xuICB9O1xuICBNYW5pZmVzdE5vZGUucHJvdG90eXBlLm1hcmtOb2RlRm9yRG93bmxvYWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBjb25zdCBuZXdBdHQgPSB0aGlzLnhtbC5jcmVhdGVBdHRyaWJ1dGUoJ21hcmtGb3JEb3dubG9hZCcpO1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHRoaXMuY3VycmVudE5vZGUucmVtb3ZlQXR0cmlidXRlKCdtYXJrRm9yRG93bmxvYWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3QXR0LnZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIHRoaXMuY3VycmVudE5vZGUuc2V0QXR0cmlidXRlTm9kZShuZXdBdHQpO1xuICAgIH1cbiAgfTtcbiAgTWFuaWZlc3ROb2RlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZUxpc3Q7XG4gIH07XG4gIHJldHVybiBNYW5pZmVzdE5vZGU7XG59KCkpO1xuZXhwb3J0cy5NYW5pZmVzdE5vZGUgPSBNYW5pZmVzdE5vZGU7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar CODES = __webpack_require__(6);\n\nvar translationErrors = {\n  downloads: {\n    _GENERAL: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Sorry we are unable to process your request - some internal error occurred"\n    },\n    ALREADY_FINISHED: {\n      code: CODES.ERRORS.FINISHED,\n      msg: "This download \'%manifestId%\' has been already finished."\n    },\n    ALREADY_REMOVED_ALL_UNFINISHED: {\n      code: CODES.ERRORS.REMOVED,\n      msg: "All unfinished downloads have been already removed, nothing left."\n    },\n    ALREADY_RESUMED: {\n      code: CODES.ERRORS.RESUMED,\n      msg: "This download \'%manifestId%\' has been already resumed."\n    },\n    ALREADY_STOPPED: {\n      code: CODES.ERRORS.STOPPED,\n      msg: "This download \'%manifestId%\' has been already stopped or has been already downloaded."\n    },\n    ALREADY_STOPPED_ALL: {\n      code: CODES.ERRORS.STOPPED,\n      msg: "There are no downloads to be stopped."\n    },\n    ALREADY_STARTED: {\n      code: CODES.ERRORS.STARTED,\n      msg: "This download \'%manifestId%\' has been already started."\n    },\n    BROKEN_CANNOT_BE_RESUMED: {\n      code: CODES.ERRORS.BROKEN,\n      msg: "This download \'%manifestId%\' is broken and cannot be resumed."\n    },\n    INFO_FAILED: {\n      code: CODES.ERRORS.INFO,\n      msg: "Gettting info of download \'%manifestId%\' failed."\n    },\n    REMOVING_ALL_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Removing of all downloads failed."\n    },\n    REMOVING_ALL_UNFINISHED_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Removing of all unfinished downloads failed."\n    },\n    REMOVING_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Removing of download \'%manifestId%\' failed."\n    },\n    RESUMING_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Resuming of download \'%manifestId%\' failed."\n    },\n    UPDATE_DOWNLOAD_FOLDER_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Updating of download folder for \'%manifestId%\' failed."\n    },\n    STOPPING_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Stopping of download \'%manifestId%\' failed."\n    },\n    SAVING_PERSISTENT_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Saving persistent info for download \'%manifestId%\' failed."\n    },\n    SAVING_DATA_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Saving data for download \'%manifestId%\' failed."\n    },\n    STOPPING_ALL_FAILED: {\n      code: CODES.ERRORS.INTERNAL_ERROR,\n      msg: "Stopping all downloads failed."\n    },\n    UNFINISHED: {\n      code: CODES.ERRORS.UNFINISHED,\n      msg: "This download is not ready yet."\n    }\n  },\n  manifests: {\n    NOT_FOUND: {\n      code: CODES.ERRORS.NOT_FOUND,\n      msg: "Manifest with id=\'%manifestId%\' not found."\n    },\n    LOADING_FAILED: {\n      code: CODES.ERRORS.LOADING,\n      msg: "Could not load manifest from url \'%manifestUrl%\'."\n    },\n    LIST_LOADING_FAILED: {\n      code: CODES.ERRORS.LOADING,\n      msg: "Could not load list of manifests."\n    },\n    FOLDER_ALREADY_EXISTS: {\n      code: CODES.ERRORS.EXISTS,\n      msg: "Folder for manifest with id =\'%manifestId%\' already exists."\n    },\n    INVALID_ID: {\n      code: CODES.ERRORS.BROKEN,\n      msg: "Provided custom id for manifest is not valid: (\'%invalid%\')"\n    }\n  }\n};\nmodule.exports = translationErrors;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdHJhbnNsYXRpb24vX2Vycm9ycy5qcz9jYmRmIl0sIm5hbWVzIjpbIkNPREVTIiwicmVxdWlyZSIsInRyYW5zbGF0aW9uRXJyb3JzIiwiZG93bmxvYWRzIiwiX0dFTkVSQUwiLCJjb2RlIiwiRVJST1JTIiwiSU5URVJOQUxfRVJST1IiLCJtc2ciLCJBTFJFQURZX0ZJTklTSEVEIiwiRklOSVNIRUQiLCJBTFJFQURZX1JFTU9WRURfQUxMX1VORklOSVNIRUQiLCJSRU1PVkVEIiwiQUxSRUFEWV9SRVNVTUVEIiwiUkVTVU1FRCIsIkFMUkVBRFlfU1RPUFBFRCIsIlNUT1BQRUQiLCJBTFJFQURZX1NUT1BQRURfQUxMIiwiQUxSRUFEWV9TVEFSVEVEIiwiU1RBUlRFRCIsIkJST0tFTl9DQU5OT1RfQkVfUkVTVU1FRCIsIkJST0tFTiIsIklORk9fRkFJTEVEIiwiSU5GTyIsIlJFTU9WSU5HX0FMTF9GQUlMRUQiLCJSRU1PVklOR19BTExfVU5GSU5JU0hFRF9GQUlMRUQiLCJSRU1PVklOR19GQUlMRUQiLCJSRVNVTUlOR19GQUlMRUQiLCJVUERBVEVfRE9XTkxPQURfRk9MREVSX0ZBSUxFRCIsIlNUT1BQSU5HX0ZBSUxFRCIsIlNBVklOR19QRVJTSVNURU5UX0ZBSUxFRCIsIlNBVklOR19EQVRBX0ZBSUxFRCIsIlNUT1BQSU5HX0FMTF9GQUlMRUQiLCJVTkZJTklTSEVEIiwibWFuaWZlc3RzIiwiTk9UX0ZPVU5EIiwiTE9BRElOR19GQUlMRUQiLCJMT0FESU5HIiwiTElTVF9MT0FESU5HX0ZBSUxFRCIsIkZPTERFUl9BTFJFQURZX0VYSVNUUyIsIkVYSVNUUyIsIklOVkFMSURfSUQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxLQUFLLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUFyQjs7QUFFQSxJQUFNQyxpQkFBaUIsR0FBRztBQUN4QkMsV0FBUyxFQUFFO0FBQ1RDLFlBQVEsRUFBRTtBQUNSQyxVQUFJLEVBQUVMLEtBQUssQ0FBQ00sTUFBTixDQUFhQyxjQURYO0FBRVJDLFNBQUcsRUFBRTtBQUZHLEtBREQ7QUFLVEMsb0JBQWdCLEVBQUU7QUFDaEJKLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWFJLFFBREg7QUFFaEJGLFNBQUcsRUFBRTtBQUZXLEtBTFQ7QUFTVEcsa0NBQThCLEVBQUU7QUFDOUJOLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWFNLE9BRFc7QUFFOUJKLFNBQUcsRUFBRTtBQUZ5QixLQVR2QjtBQWFUSyxtQkFBZSxFQUFFO0FBQ2ZSLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWFRLE9BREo7QUFFZk4sU0FBRyxFQUFFO0FBRlUsS0FiUjtBQWlCVE8sbUJBQWUsRUFBRTtBQUNmVixVQUFJLEVBQUVMLEtBQUssQ0FBQ00sTUFBTixDQUFhVSxPQURKO0FBRWZSLFNBQUcsRUFBRTtBQUZVLEtBakJSO0FBcUJUUyx1QkFBbUIsRUFBRTtBQUNuQlosVUFBSSxFQUFFTCxLQUFLLENBQUNNLE1BQU4sQ0FBYVUsT0FEQTtBQUVuQlIsU0FBRyxFQUFFO0FBRmMsS0FyQlo7QUF5QlRVLG1CQUFlLEVBQUU7QUFDZmIsVUFBSSxFQUFFTCxLQUFLLENBQUNNLE1BQU4sQ0FBYWEsT0FESjtBQUVmWCxTQUFHLEVBQUU7QUFGVSxLQXpCUjtBQTZCVFksNEJBQXdCLEVBQUU7QUFDeEJmLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWFlLE1BREs7QUFFeEJiLFNBQUcsRUFBRTtBQUZtQixLQTdCakI7QUFpQ1RjLGVBQVcsRUFBRTtBQUNYakIsVUFBSSxFQUFFTCxLQUFLLENBQUNNLE1BQU4sQ0FBYWlCLElBRFI7QUFFWGYsU0FBRyxFQUFFO0FBRk0sS0FqQ0o7QUFxQ1RnQix1QkFBbUIsRUFBRTtBQUNuQm5CLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWFDLGNBREE7QUFFbkJDLFNBQUcsRUFBRTtBQUZjLEtBckNaO0FBeUNUaUIsa0NBQThCLEVBQUU7QUFDOUJwQixVQUFJLEVBQUVMLEtBQUssQ0FBQ00sTUFBTixDQUFhQyxjQURXO0FBRTlCQyxTQUFHLEVBQUU7QUFGeUIsS0F6Q3ZCO0FBNkNUa0IsbUJBQWUsRUFBRTtBQUNmckIsVUFBSSxFQUFFTCxLQUFLLENBQUNNLE1BQU4sQ0FBYUMsY0FESjtBQUVmQyxTQUFHLEVBQUU7QUFGVSxLQTdDUjtBQWlEVG1CLG1CQUFlLEVBQUU7QUFDZnRCLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWFDLGNBREo7QUFFZkMsU0FBRyxFQUFFO0FBRlUsS0FqRFI7QUFxRFRvQixpQ0FBNkIsRUFBRTtBQUM3QnZCLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWFDLGNBRFU7QUFFN0JDLFNBQUcsRUFBRTtBQUZ3QixLQXJEdEI7QUF5RFRxQixtQkFBZSxFQUFFO0FBQ2Z4QixVQUFJLEVBQUVMLEtBQUssQ0FBQ00sTUFBTixDQUFhQyxjQURKO0FBRWZDLFNBQUcsRUFBRTtBQUZVLEtBekRSO0FBNkRUc0IsNEJBQXdCLEVBQUU7QUFDeEJ6QixVQUFJLEVBQUVMLEtBQUssQ0FBQ00sTUFBTixDQUFhQyxjQURLO0FBRXhCQyxTQUFHLEVBQUU7QUFGbUIsS0E3RGpCO0FBaUVUdUIsc0JBQWtCLEVBQUU7QUFDbEIxQixVQUFJLEVBQUVMLEtBQUssQ0FBQ00sTUFBTixDQUFhQyxjQUREO0FBRWxCQyxTQUFHLEVBQUU7QUFGYSxLQWpFWDtBQXFFVHdCLHVCQUFtQixFQUFFO0FBQ25CM0IsVUFBSSxFQUFFTCxLQUFLLENBQUNNLE1BQU4sQ0FBYUMsY0FEQTtBQUVuQkMsU0FBRyxFQUFFO0FBRmMsS0FyRVo7QUF5RVR5QixjQUFVLEVBQUU7QUFDVjVCLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWEyQixVQURUO0FBRVZ6QixTQUFHLEVBQUU7QUFGSztBQXpFSCxHQURhO0FBK0V4QjBCLFdBQVMsRUFBRTtBQUNUQyxhQUFTLEVBQUU7QUFDVDlCLFVBQUksRUFBRUwsS0FBSyxDQUFDTSxNQUFOLENBQWE2QixTQURWO0FBRVQzQixTQUFHLEVBQUU7QUFGSSxLQURGO0FBS1Q0QixrQkFBYyxFQUFFO0FBQ2QvQixVQUFJLEVBQUVMLEtBQUssQ0FBQ00sTUFBTixDQUFhK0IsT0FETDtBQUVkN0IsU0FBRyxFQUFFO0FBRlMsS0FMUDtBQVNUOEIsdUJBQW1CLEVBQUU7QUFDbkJqQyxVQUFJLEVBQUVMLEtBQUssQ0FBQ00sTUFBTixDQUFhK0IsT0FEQTtBQUVuQjdCLFNBQUcsRUFBRTtBQUZjLEtBVFo7QUFhVCtCLHlCQUFxQixFQUFFO0FBQ3JCbEMsVUFBSSxFQUFFTCxLQUFLLENBQUNNLE1BQU4sQ0FBYWtDLE1BREU7QUFFckJoQyxTQUFHLEVBQUU7QUFGZ0IsS0FiZDtBQWlCVGlDLGNBQVUsRUFBRTtBQUNWcEMsVUFBSSxFQUFFTCxLQUFLLENBQUNNLE1BQU4sQ0FBYWUsTUFEVDtBQUVWYixTQUFHLEVBQUU7QUFGSztBQWpCSDtBQS9FYSxDQUExQjtBQXVHQWtDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnpDLGlCQUFqQiIsImZpbGUiOiIxNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgQ09ERVMgPSByZXF1aXJlKFwiLi8uLi9kb3dubG9hZHMvY29kZXNcIik7XG5cbmNvbnN0IHRyYW5zbGF0aW9uRXJyb3JzID0ge1xuICBkb3dubG9hZHM6IHtcbiAgICBfR0VORVJBTDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLklOVEVSTkFMX0VSUk9SLFxuICAgICAgbXNnOiBcIlNvcnJ5IHdlIGFyZSB1bmFibGUgdG8gcHJvY2VzcyB5b3VyIHJlcXVlc3QgLSBzb21lIGludGVybmFsIGVycm9yIG9jY3VycmVkXCIsXG4gICAgfSxcbiAgICBBTFJFQURZX0ZJTklTSEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuRklOSVNIRUQsXG4gICAgICBtc2c6IFwiVGhpcyBkb3dubG9hZCAnJW1hbmlmZXN0SWQlJyBoYXMgYmVlbiBhbHJlYWR5IGZpbmlzaGVkLlwiLFxuICAgIH0sXG4gICAgQUxSRUFEWV9SRU1PVkVEX0FMTF9VTkZJTklTSEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuUkVNT1ZFRCxcbiAgICAgIG1zZzogXCJBbGwgdW5maW5pc2hlZCBkb3dubG9hZHMgaGF2ZSBiZWVuIGFscmVhZHkgcmVtb3ZlZCwgbm90aGluZyBsZWZ0LlwiLFxuICAgIH0sXG4gICAgQUxSRUFEWV9SRVNVTUVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuUkVTVU1FRCxcbiAgICAgIG1zZzogXCJUaGlzIGRvd25sb2FkICclbWFuaWZlc3RJZCUnIGhhcyBiZWVuIGFscmVhZHkgcmVzdW1lZC5cIixcbiAgICB9LFxuICAgIEFMUkVBRFlfU1RPUFBFRDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLlNUT1BQRUQsXG4gICAgICBtc2c6IFwiVGhpcyBkb3dubG9hZCAnJW1hbmlmZXN0SWQlJyBoYXMgYmVlbiBhbHJlYWR5IHN0b3BwZWQgb3IgaGFzIGJlZW4gYWxyZWFkeSBkb3dubG9hZGVkLlwiLFxuICAgIH0sXG4gICAgQUxSRUFEWV9TVE9QUEVEX0FMTDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLlNUT1BQRUQsXG4gICAgICBtc2c6IFwiVGhlcmUgYXJlIG5vIGRvd25sb2FkcyB0byBiZSBzdG9wcGVkLlwiLFxuICAgIH0sXG4gICAgQUxSRUFEWV9TVEFSVEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuU1RBUlRFRCxcbiAgICAgIG1zZzogXCJUaGlzIGRvd25sb2FkICclbWFuaWZlc3RJZCUnIGhhcyBiZWVuIGFscmVhZHkgc3RhcnRlZC5cIixcbiAgICB9LFxuICAgIEJST0tFTl9DQU5OT1RfQkVfUkVTVU1FRDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLkJST0tFTixcbiAgICAgIG1zZzogXCJUaGlzIGRvd25sb2FkICclbWFuaWZlc3RJZCUnIGlzIGJyb2tlbiBhbmQgY2Fubm90IGJlIHJlc3VtZWQuXCIsXG4gICAgfSxcbiAgICBJTkZPX0ZBSUxFRDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLklORk8sXG4gICAgICBtc2c6IFwiR2V0dHRpbmcgaW5mbyBvZiBkb3dubG9hZCAnJW1hbmlmZXN0SWQlJyBmYWlsZWQuXCIsXG4gICAgfSxcbiAgICBSRU1PVklOR19BTExfRkFJTEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuSU5URVJOQUxfRVJST1IsXG4gICAgICBtc2c6IFwiUmVtb3Zpbmcgb2YgYWxsIGRvd25sb2FkcyBmYWlsZWQuXCIsXG4gICAgfSxcbiAgICBSRU1PVklOR19BTExfVU5GSU5JU0hFRF9GQUlMRUQ6IHtcbiAgICAgIGNvZGU6IENPREVTLkVSUk9SUy5JTlRFUk5BTF9FUlJPUixcbiAgICAgIG1zZzogXCJSZW1vdmluZyBvZiBhbGwgdW5maW5pc2hlZCBkb3dubG9hZHMgZmFpbGVkLlwiLFxuICAgIH0sXG4gICAgUkVNT1ZJTkdfRkFJTEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuSU5URVJOQUxfRVJST1IsXG4gICAgICBtc2c6IFwiUmVtb3Zpbmcgb2YgZG93bmxvYWQgJyVtYW5pZmVzdElkJScgZmFpbGVkLlwiLFxuICAgIH0sXG4gICAgUkVTVU1JTkdfRkFJTEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuSU5URVJOQUxfRVJST1IsXG4gICAgICBtc2c6IFwiUmVzdW1pbmcgb2YgZG93bmxvYWQgJyVtYW5pZmVzdElkJScgZmFpbGVkLlwiLFxuICAgIH0sXG4gICAgVVBEQVRFX0RPV05MT0FEX0ZPTERFUl9GQUlMRUQ6IHtcbiAgICAgIGNvZGU6IENPREVTLkVSUk9SUy5JTlRFUk5BTF9FUlJPUixcbiAgICAgIG1zZzogXCJVcGRhdGluZyBvZiBkb3dubG9hZCBmb2xkZXIgZm9yICclbWFuaWZlc3RJZCUnIGZhaWxlZC5cIixcbiAgICB9LFxuICAgIFNUT1BQSU5HX0ZBSUxFRDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLklOVEVSTkFMX0VSUk9SLFxuICAgICAgbXNnOiBcIlN0b3BwaW5nIG9mIGRvd25sb2FkICclbWFuaWZlc3RJZCUnIGZhaWxlZC5cIixcbiAgICB9LFxuICAgIFNBVklOR19QRVJTSVNURU5UX0ZBSUxFRDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLklOVEVSTkFMX0VSUk9SLFxuICAgICAgbXNnOiBcIlNhdmluZyBwZXJzaXN0ZW50IGluZm8gZm9yIGRvd25sb2FkICclbWFuaWZlc3RJZCUnIGZhaWxlZC5cIixcbiAgICB9LFxuICAgIFNBVklOR19EQVRBX0ZBSUxFRDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLklOVEVSTkFMX0VSUk9SLFxuICAgICAgbXNnOiBcIlNhdmluZyBkYXRhIGZvciBkb3dubG9hZCAnJW1hbmlmZXN0SWQlJyBmYWlsZWQuXCIsXG4gICAgfSxcbiAgICBTVE9QUElOR19BTExfRkFJTEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuSU5URVJOQUxfRVJST1IsXG4gICAgICBtc2c6IFwiU3RvcHBpbmcgYWxsIGRvd25sb2FkcyBmYWlsZWQuXCIsXG4gICAgfSxcbiAgICBVTkZJTklTSEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuVU5GSU5JU0hFRCxcbiAgICAgIG1zZzogXCJUaGlzIGRvd25sb2FkIGlzIG5vdCByZWFkeSB5ZXQuXCIsXG4gICAgfSxcbiAgfSxcbiAgbWFuaWZlc3RzOiB7XG4gICAgTk9UX0ZPVU5EOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuTk9UX0ZPVU5ELFxuICAgICAgbXNnOiBcIk1hbmlmZXN0IHdpdGggaWQ9JyVtYW5pZmVzdElkJScgbm90IGZvdW5kLlwiXG4gICAgfSxcbiAgICBMT0FESU5HX0ZBSUxFRDoge1xuICAgICAgY29kZTogQ09ERVMuRVJST1JTLkxPQURJTkcsXG4gICAgICBtc2c6IFwiQ291bGQgbm90IGxvYWQgbWFuaWZlc3QgZnJvbSB1cmwgJyVtYW5pZmVzdFVybCUnLlwiXG4gICAgfSxcbiAgICBMSVNUX0xPQURJTkdfRkFJTEVEOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuTE9BRElORyxcbiAgICAgIG1zZzogXCJDb3VsZCBub3QgbG9hZCBsaXN0IG9mIG1hbmlmZXN0cy5cIlxuICAgIH0sXG4gICAgRk9MREVSX0FMUkVBRFlfRVhJU1RTOiB7XG4gICAgICBjb2RlOiBDT0RFUy5FUlJPUlMuRVhJU1RTLFxuICAgICAgbXNnOiBcIkZvbGRlciBmb3IgbWFuaWZlc3Qgd2l0aCBpZCA9JyVtYW5pZmVzdElkJScgYWxyZWFkeSBleGlzdHMuXCJcbiAgICB9LFxuICAgIElOVkFMSURfSUQ6IHtcbiAgICAgIGNvZGU6IENPREVTLkVSUk9SUy5CUk9LRU4sXG4gICAgICBtc2c6IFwiUHJvdmlkZWQgY3VzdG9tIGlkIGZvciBtYW5pZmVzdCBpcyBub3QgdmFsaWQ6ICgnJWludmFsaWQlJylcIlxuICAgIH0sXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdHJhbnNsYXRpb25FcnJvcnM7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///17\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nmodule.exports = {\n  test: "Hello world"\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdHJhbnNsYXRpb24vX3RyYW5zbGF0aW9ucy5qcz82ZWIwIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJ0ZXN0Il0sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYkEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZDLE1BQUksRUFBRTtBQURTLENBQWpCIiwiZmlsZSI6IjE4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB0ZXN0OiBcIkhlbGxvIHdvcmxkXCJcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///18\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = {\n  regexpProtocolRemove: /^https{0,1}\\:\\/\\//i\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvY29uc3RhbnRzLmpzP2Q5OWEiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsInJlZ2V4cFByb3RvY29sUmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYkEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZDLHNCQUFvQixFQUFFO0FBRFAsQ0FBakIiLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlZ2V4cFByb3RvY29sUmVtb3ZlOiAvXmh0dHBzezAsMX1cXDpcXC9cXC8vaVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) {\n    if (b.hasOwnProperty(p)) {\n      d[p] = b[p];\n    }\n  }\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar ManifestNode_1 = __webpack_require__(16);\n\nvar RepresentationNode_1 = __webpack_require__(48);\n\nvar AdaptationSetNode = function (_super) {\n  __extends(AdaptationSetNode, _super);\n\n  function AdaptationSetNode(node, xml) {\n    _super.call(this, node, xml);\n\n    this.representationColl = [];\n    this.contentProtections = [];\n    this.parse();\n  }\n\n  AdaptationSetNode.prototype.parse = function () {\n    var rep = this.currentNode.getElementsByTagName('Representation');\n\n    for (var i = 0; i < rep.length; i++) {\n      var repNode = new RepresentationNode_1.RepresentationNode(rep[i], this.xml);\n      this.representationColl[i] = repNode;\n\n      if (this.representationColl[0].hasMimeType()) {\n        {\n          this.attributeList['mimeType'] = this.representationColl[0].getMimeType();\n        }\n      }\n    }\n\n    var contentProtections = this.currentNode.getElementsByTagName('ContentProtection');\n\n    for (var _i = 0; _i < contentProtections.length; _i++) {\n      var attrs = contentProtections[_i].attributes;\n\n      var cenc = contentProtections[_i].getElementsByTagName(\"cenc:pssh\");\n\n      if (attrs.getNamedItem(\"schemeIdUri\") && cenc.length) {\n        var contentProtection = {\n          schemeIdUri: attrs.getNamedItem(\"schemeIdUri\").value,\n          cencPSSH: cenc[0].childNodes[0].data\n        };\n        this.contentProtections.push(contentProtection);\n      }\n    }\n  };\n\n  AdaptationSetNode.prototype.getContentProtections = function () {\n    return this.contentProtections;\n  };\n\n  AdaptationSetNode.prototype.getWidevineProtection = function () {\n    return this.contentProtections.filter(function (item) {\n      return item.schemeIdUri === \"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\";\n    });\n  };\n\n  AdaptationSetNode.prototype.isMimeType = function (str) {\n    return this.attributeList['mimeType'].indexOf(str) != -1 ? true : false;\n  };\n\n  AdaptationSetNode.prototype.isContentType = function (str) {\n    return this.attributeList['contentType'] && this.attributeList['contentType'].indexOf(str) != -1 ? true : false;\n  };\n\n  return AdaptationSetNode;\n}(ManifestNode_1.ManifestNode);\n\nexports.AdaptationSetNode = AdaptationSetNode;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL2FkYXB0YXRpb24tc2V0LW5vZGUuanM/M2M1MSJdLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJkIiwiYiIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJNYW5pZmVzdE5vZGVfMSIsInJlcXVpcmUiLCJSZXByZXNlbnRhdGlvbk5vZGVfMSIsIkFkYXB0YXRpb25TZXROb2RlIiwiX3N1cGVyIiwibm9kZSIsInhtbCIsImNhbGwiLCJyZXByZXNlbnRhdGlvbkNvbGwiLCJjb250ZW50UHJvdGVjdGlvbnMiLCJwYXJzZSIsInJlcCIsImN1cnJlbnROb2RlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpIiwibGVuZ3RoIiwicmVwTm9kZSIsIlJlcHJlc2VudGF0aW9uTm9kZSIsImhhc01pbWVUeXBlIiwiYXR0cmlidXRlTGlzdCIsImdldE1pbWVUeXBlIiwiYXR0cnMiLCJhdHRyaWJ1dGVzIiwiY2VuYyIsImdldE5hbWVkSXRlbSIsImNvbnRlbnRQcm90ZWN0aW9uIiwic2NoZW1lSWRVcmkiLCJ2YWx1ZSIsImNlbmNQU1NIIiwiY2hpbGROb2RlcyIsImRhdGEiLCJwdXNoIiwiZ2V0Q29udGVudFByb3RlY3Rpb25zIiwiZ2V0V2lkZXZpbmVQcm90ZWN0aW9uIiwiZmlsdGVyIiwiaXRlbSIsImlzTWltZVR5cGUiLCJzdHIiLCJpbmRleE9mIiwiaXNDb250ZW50VHlwZSIsIk1hbmlmZXN0Tm9kZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLFNBQVMsR0FBSSxRQUFRLEtBQUtBLFNBQWQsSUFBNEIsVUFBVUMsQ0FBVixFQUFhQyxDQUFiLEVBQWdCO0FBQ3hELE9BQUssSUFBSUMsQ0FBVCxJQUFjRCxDQUFkLEVBQWlCO0FBQ2YsUUFBSUEsQ0FBQyxDQUFDRSxjQUFGLENBQWlCRCxDQUFqQixDQUFKLEVB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QUE1QixHQUFvRCxZQUFZO0FBQzlELFdBQU8sS0FBS3ZCLGtCQUFaO0FBQ0QsR0FGRDs7QUFJQU4sbUJBQWlCLENBQUNOLFNBQWxCLENBQTRCb0MscUJBQTVCLEdBQW9ELFlBQVk7QUFDOUQsV0FBTyxLQUFLeEIsa0JBQUwsQ0FBd0J5QixNQUF4QixDQUErQixVQUFVQyxJQUFWLEVBQWdCO0FBQ3BELGFBQU9BLElBQUksQ0FBQ1QsV0FBTCxLQUFxQiwrQ0FBNUI7QUFDRCxLQUZNLENBQVA7QUFHRCxHQUpEOztBQU1BdkIsbUJBQWlCLENBQUNOLFNBQWxCLENBQTRCdUMsVUFBNUIsR0FBeUMsVUFBVUMsR0FBVixFQUFlO0FBQ3RELFdBQU8sS0FBS2xCLGFBQUwsQ0FBbUIsVUFBbkIsRUFBK0JtQixPQUEvQixDQUF1Q0QsR0FBdkMsS0FBK0MsQ0FBQyxDQUFoRCxHQUFvRCxJQUFwRCxHQUEyRCxLQUFsRTtBQUNELEdBRkQ7O0FBSUFsQyxtQkFBaUIsQ0FBQ04sU0FBbEIsQ0FBNEIwQyxhQUE1QixHQUE0QyxVQUFVRixHQUFWLEVBQWU7QUFDekQsV0FBTyxLQUFLbEIsYUFBTCxDQUFtQixhQUFuQixLQUFxQyxLQUFLQSxhQUFMLENBQW1CLGFBQW5CLEVBQWtDbUIsT0FBbEMsQ0FBMENELEdBQTFDLEtBQWtELENBQUMsQ0FBeEYsR0FBNEYsSUFBNUYsR0FBbUcsS0FBMUc7QUFDRCxHQUZEOztBQUdBLFNBQU9sQyxpQkFBUDtBQUNELENBckQwQixDQXFEekJILGNBQWMsQ0FBQ3dDLFlBckRVLENBQTNCOztBQXNEQUMsT0FBTyxDQUFDdEMsaUJBQVIsR0FBNEJBLGlCQUE1QiIsImZpbGUiOiIyMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICBmb3IgKGxldCBwIGluIGIpIHtcbiAgICAgICAgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgICBkW3BdID0gYltwXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZnVuY3Rpb24gX18gKCkge1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gZDtcbiAgICAgIH1cblxuICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG5jb25zdCBNYW5pZmVzdE5vZGVfMSA9IHJlcXVpcmUoXCIuL21hbmlmZXN0LW5vZGVcIik7XG5jb25zdCBSZXByZXNlbnRhdGlvbk5vZGVfMSA9IHJlcXVpcmUoXCIuL3JlcHJlc2VudGF0aW9uLW5vZGVcIik7XG5jb25zdCBBZGFwdGF0aW9uU2V0Tm9kZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhBZGFwdGF0aW9uU2V0Tm9kZSwgX3N1cGVyKTtcbiAgZnVuY3Rpb24gQWRhcHRhdGlvblNldE5vZGUgKG5vZGUsIHhtbCkge1xuICAgIF9zdXBlci5jYWxsKHRoaXMsIG5vZGUsIHhtbCk7XG4gICAgdGhpcy5yZXByZXNlbnRhdGlvbkNvbGwgPSBbXTtcbiAgICB0aGlzLmNvbnRlbnRQcm90ZWN0aW9ucyA9IFtdO1xuICAgIHRoaXMucGFyc2UoKTtcbiAgfVxuXG4gIEFkYXB0YXRpb25TZXROb2RlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCByZXAgPSB0aGlzLmN1cnJlbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdSZXByZXNlbnRhdGlvbicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVwLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByZXBOb2RlID0gbmV3IFJlcHJlc2VudGF0aW9uTm9kZV8xLlJlcHJlc2VudGF0aW9uTm9kZShyZXBbaV0sIHRoaXMueG1sKTtcbiAgICAgIHRoaXMucmVwcmVzZW50YXRpb25Db2xsW2ldID0gcmVwTm9kZTtcbiAgICAgIGlmICh0aGlzLnJlcHJlc2VudGF0aW9uQ29sbFswXS5oYXNNaW1lVHlwZSgpKSB7XG4gICAgICAgIHtcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZUxpc3RbJ21pbWVUeXBlJ10gPSB0aGlzLnJlcHJlc2VudGF0aW9uQ29sbFswXS5nZXRNaW1lVHlwZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudFByb3RlY3Rpb25zID0gdGhpcy5jdXJyZW50Tm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnQ29udGVudFByb3RlY3Rpb24nKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnRQcm90ZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXR0cnMgPSBjb250ZW50UHJvdGVjdGlvbnNbaV0uYXR0cmlidXRlcztcbiAgICAgIGNvbnN0IGNlbmMgPSBjb250ZW50UHJvdGVjdGlvbnNbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjZW5jOnBzc2hcIik7XG4gICAgICBpZiAoYXR0cnMuZ2V0TmFtZWRJdGVtKFwic2NoZW1lSWRVcmlcIikgJiYgY2VuYy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY29udGVudFByb3RlY3Rpb24gPSB7XG4gICAgICAgICAgc2NoZW1lSWRVcmk6IGF0dHJzLmdldE5hbWVkSXRlbShcInNjaGVtZUlkVXJpXCIpLnZhbHVlLFxuICAgICAgICAgIGNlbmNQU1NIOiBjZW5jWzBdLmNoaWxkTm9kZXNbMF0uZGF0YVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbnRlbnRQcm90ZWN0aW9ucy5wdXNoKGNvbnRlbnRQcm90ZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgQWRhcHRhdGlvblNldE5vZGUucHJvdG90eXBlLmdldENvbnRlbnRQcm90ZWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50UHJvdGVjdGlvbnM7XG4gIH07XG5cbiAgQWRhcHRhdGlvblNldE5vZGUucHJvdG90eXBlLmdldFdpZGV2aW5lUHJvdGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50UHJvdGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5zY2hlbWVJZFVyaSA9PT0gXCJ1cm46dXVpZDplZGVmOGJhOS03OWQ2LTRhY2UtYTNjOC0yN2RjZDUxZDIxZWRcIjtcbiAgICB9KTtcbiAgfTtcblxuICBBZGFwdGF0aW9uU2V0Tm9kZS5wcm90b3R5cGUuaXNNaW1lVHlwZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVMaXN0WydtaW1lVHlwZSddLmluZGV4T2Yoc3RyKSAhPSAtMSA/IHRydWUgOiBmYWxzZTtcbiAgfTtcblxuICBBZGFwdGF0aW9uU2V0Tm9kZS5wcm90b3R5cGUuaXNDb250ZW50VHlwZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVMaXN0Wydjb250ZW50VHlwZSddICYmIHRoaXMuYXR0cmlidXRlTGlzdFsnY29udGVudFR5cGUnXS5pbmRleE9mKHN0cikgIT0gLTEgPyB0cnVlIDogZmFsc2U7XG4gIH07XG4gIHJldHVybiBBZGFwdGF0aW9uU2V0Tm9kZTtcbn0oTWFuaWZlc3ROb2RlXzEuTWFuaWZlc3ROb2RlKSk7XG5leHBvcnRzLkFkYXB0YXRpb25TZXROb2RlID0gQWRhcHRhdGlvblNldE5vZGU7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar ZeroPadding_1 = __webpack_require__(49);\n\nvar MediaUrl_1 = __webpack_require__(22);\n\nvar CREATE_URL;\n\n(function (CREATE_URL) {\n  CREATE_URL[CREATE_URL["FROM_TEMPLATE"] = 0] = "FROM_TEMPLATE";\n  CREATE_URL[CREATE_URL["FROM_TIMELINE"] = 1] = "FROM_TIMELINE";\n  CREATE_URL[CREATE_URL["FROM_SEGMENTLIST"] = 2] = "FROM_SEGMENTLIST";\n  CREATE_URL[CREATE_URL["FROM_SEGMENT_BASE"] = 3] = "FROM_SEGMENT_BASE";\n})(CREATE_URL || (CREATE_URL = {}));\n\nvar SegmentInformation = function () {\n  function SegmentInformation(presentationDuration, bandwidth, baseUrl, representationID, mimeType, segmentBase, segmentTemplate, segmentTimeline, timelineItemList, segmentList, segmentUrlList) {\n    this.hasSegmentBase = false;\n    this.baseUrl = \'\';\n    this.presentationDuration = 0;\n    this.bandwidth = 0;\n    this.startNumber = 0;\n    this.mediaUrls = [];\n    this.whichUseCase = -1;\n    this.mimeType = \'\';\n    SegmentInformation.count += 1;\n    this.presentationDuration = presentationDuration;\n    this.mimeType = mimeType;\n\n    if (baseUrl) {\n      this.baseUrl = baseUrl;\n    }\n\n    if (bandwidth) {\n      this.bandwidth = bandwidth;\n    }\n\n    if (representationID) {\n      this.representationID = representationID;\n    }\n\n    if (segmentBase) {\n      this.segmentBase = segmentBase;\n      this.hasSegmentBase = true;\n      this.whichUseCase = CREATE_URL.FROM_SEGMENT_BASE;\n    }\n\n    if (segmentTemplate) {\n      this.segmentTemplate = segmentTemplate;\n      this.mediaTemplate = this.segmentTemplate.attributes.getNamedItem("media").nodeValue;\n      this.mediaTemplate = this.replace$RepresentationID$(this.mediaTemplate, this.representationID);\n      this.mediaTemplate = this.replace$Bandwidth$(this.mediaTemplate, this.bandwidth);\n      this.startNumber = this.segmentTemplate.attributes.getNamedItem("startNumber") ? parseInt(this.segmentTemplate.attributes.getNamedItem("startNumber").nodeValue) : 0;\n      this.whichUseCase = CREATE_URL.FROM_TEMPLATE;\n    }\n\n    if (segmentTimeline) {\n      this.segmentTimeline = segmentTimeline;\n    }\n\n    if (timelineItemList) {\n      this.timelineItemList = timelineItemList;\n      this.whichUseCase = CREATE_URL.FROM_TIMELINE;\n    }\n\n    if (segmentList) {\n      this.segmentList = segmentList;\n    }\n\n    if (segmentUrlList) {\n      this.segmentUrlList = segmentUrlList;\n      this.whichUseCase = CREATE_URL.FROM_SEGMENTLIST;\n    }\n\n    var hasFileExtension = false;\n    var initSegment = \'\';\n\n    switch (this.whichUseCase) {\n      case CREATE_URL.FROM_SEGMENTLIST:\n        this.createFragmentFromUrlList(this.segmentUrlList);\n        initSegment = this.createInitSegment(this.segmentList.getElementsByTagName(\'Initialization\')[0].attributes.getNamedItem("sourceURL").nodeValue);\n        this.mediaUrls.unshift(new MediaUrl_1.MediaUrl(this.baseUrl, initSegment, this.mimeType));\n\n        if (SegmentInformation.count == 0) {// console.log(\'CREATE_URL.FROM_SEGMENTLIST\', this.mediaUrls, this);\n        }\n\n        break;\n\n      case CREATE_URL.FROM_SEGMENT_BASE:\n        try {\n          hasFileExtension = this.baseUrl.indexOf(\'.\') !== -1 ? true : false;\n        } catch (e) {}\n\n        if (hasFileExtension) {\n          this.mediaUrls.push(new MediaUrl_1.MediaUrl(this.baseUrl, this.baseUrl, this.mimeType));\n        }\n\n        if (SegmentInformation.count == 0) {// console.log(\'CREATE_URL.FROM_SEGMENT_BASE\', this.mediaUrls, this);\n        }\n\n        break;\n\n      case CREATE_URL.FROM_TEMPLATE:\n        this.createFragmentsFromTemplate();\n        initSegment = this.createInitSegment(this.segmentTemplate.attributes.getNamedItem("initialization").nodeValue);\n        this.mediaUrls.unshift(new MediaUrl_1.MediaUrl(this.baseUrl, initSegment, this.mimeType));\n        break;\n\n      default:\n        try {\n          hasFileExtension = this.baseUrl.indexOf(\'.\') !== -1 ? true : false;\n        } catch (e) {}\n\n        if (hasFileExtension) {\n          this.mediaUrls.push(new MediaUrl_1.MediaUrl("", this.baseUrl, this.mimeType));\n        }\n\n    }\n  }\n\n  SegmentInformation.prototype.createFragmentUrlsFromTimeline = function (segmentNodes) {\n    var currentTime = this.segmentTemplate.attributes.getNamedItem("presentationTimeOffset");\n\n    if (currentTime) {\n      currentTime = parseInt(currentTime.nodeValue, 10);\n    } else {\n      currentTime = 0;\n    }\n\n    var hasCurrentTime = false;\n    var time = 0;\n\n    for (var i = 0; i < segmentNodes.length; i++) {\n      if (i > 0 && segmentNodes[i].attributes.getNamedItem("t") && segmentNodes[i].attributes.getNamedItem("t").nodeValue !== undefined) {\n        hasCurrentTime = true;\n        time = parseInt(segmentNodes[i].attributes.getNamedItem("t").nodeValue);\n      } else {\n        hasCurrentTime = false;\n      }\n\n      var duration = segmentNodes[i].attributes.getNamedItem("d") && segmentNodes[i].attributes.getNamedItem("d").nodeValue !== undefined ? parseInt(segmentNodes[i].attributes.getNamedItem("d").nodeValue) : 0;\n      var repeat = segmentNodes[i].attributes.getNamedItem("r") && segmentNodes[i].attributes.getNamedItem("r").nodeValue !== undefined ? parseInt(segmentNodes[i].attributes.getNamedItem("r").nodeValue) : 0;\n\n      for (var k = 1; k <= repeat; k++) {\n        var fragment_1 = this.segmentTemplate.attributes.getNamedItem("media").nodeValue;\n        fragment_1 = this.replace$RepresentationID$(fragment_1, this.representationID);\n        fragment_1 = this.replace$Time$(fragment_1, currentTime);\n        fragment_1 = this.replace$Bandwidth$(fragment_1, this.bandwidth);\n        this.mediaUrls.push(new MediaUrl_1.MediaUrl(this.baseUrl, fragment_1, this.mimeType));\n\n        if (!hasCurrentTime) {\n          currentTime += duration;\n        } else {\n          currentTime = time;\n        }\n      }\n\n      var fragment = this.segmentTemplate.attributes.getNamedItem("media").nodeValue;\n      fragment = this.replace$RepresentationID$(fragment, this.representationID);\n      fragment = this.replace$Time$(fragment, currentTime);\n      fragment = this.replace$Bandwidth$(fragment, this.bandwidth);\n      this.mediaUrls.push(new MediaUrl_1.MediaUrl(this.baseUrl, fragment, this.mimeType));\n\n      if (!hasCurrentTime) {\n        currentTime += duration;\n      } else {\n        currentTime = time;\n      }\n    }\n  };\n\n  SegmentInformation.prototype.createFragmentFromUrlList = function (urlListNodes) {\n    for (var i = 0; i < urlListNodes.length; i++) {\n      var fragment = urlListNodes[i].attributes.getNamedItem("media").nodeValue;\n      this.mediaUrls.push(new MediaUrl_1.MediaUrl(this.baseUrl, fragment, this.mimeType));\n    }\n  };\n\n  SegmentInformation.prototype.createFragmentsFromTemplate = function () {\n    var segmentDuration = parseInt(this.segmentTemplate.attributes.getNamedItem("duration").nodeValue);\n    var segmentTimescale = this.segmentTemplate.attributes.getNamedItem("timescale") ? parseInt(this.segmentTemplate.attributes.getNamedItem("timescale").nodeValue) : 1;\n    var numSegments = Math.ceil(this.presentationDuration / (segmentDuration / segmentTimescale) / 1000);\n    var mediaTemplateStringSegment = this.mediaTemplate.split(\'$\');\n    var templateReplaceableIndex;\n    var startNumber = this.startNumber || 0;\n\n    for (var k = 0; k < mediaTemplateStringSegment.length; k++) {\n      if (mediaTemplateStringSegment[k].indexOf(\'Number\') != -1) {\n        templateReplaceableIndex = \'$\' + mediaTemplateStringSegment[k] + \'$\';\n      }\n    }\n\n    var paddingAmount = ZeroPadding_1.ZeroPadding.getPaddingAmount(templateReplaceableIndex);\n\n    for (var i = startNumber; i < numSegments + startNumber; i++) {\n      var segmentIndex = ZeroPadding_1.ZeroPadding.addPadding(i, paddingAmount);\n      var fragment = void 0;\n\n      if (paddingAmount === 0) {\n        fragment = this.replace$Number$(this.mediaTemplate, i);\n      } else {\n        fragment = this.mediaTemplate.replace(templateReplaceableIndex, segmentIndex);\n      }\n\n      this.mediaUrls.push(new MediaUrl_1.MediaUrl(this.baseUrl, fragment, this.mimeType));\n    }\n  };\n\n  SegmentInformation.prototype.replace$RepresentationID$ = function (fragment, id) {\n    return fragment.replace(new RegExp(\'\\\\$RepresentationID\\\\$\', \'g\'), id);\n  };\n\n  SegmentInformation.prototype.replace$Number$ = function (fragment, num) {\n    return fragment.replace(new RegExp(\'\\\\$Number\\\\$\', \'g\'), num.toString());\n  };\n\n  SegmentInformation.prototype.replace$Bandwidth$ = function (fragment, bandwidth) {\n    return fragment.replace(new RegExp(\'\\\\$Bandwidth\\\\$\', \'g\'), bandwidth.toString());\n  };\n\n  SegmentInformation.prototype.replace$Time$ = function (fragment, currentIndex) {\n    return fragment.replace(new RegExp(\'\\\\$Time\\\\$\', \'g\'), currentIndex.toString());\n  };\n\n  SegmentInformation.prototype.createInitSegment = function (fragment) {\n    fragment = this.replace$Bandwidth$(fragment, this.bandwidth);\n    fragment = this.replace$RepresentationID$(fragment, this.representationID);\n    return fragment;\n  };\n\n  SegmentInformation.prototype.getMediaUrlList = function () {\n    return this.mediaUrls;\n  };\n\n  SegmentInformation.count = -1;\n  return SegmentInformation;\n}();\n\nexports.SegmentInformation = SegmentInformation;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL3NlZ21lbnQtaW5mb3JtYXRpb24uanM/MGY1NSJdLCJuYW1lcyI6WyJaZXJvUGFkZGluZ18xIiwicmVxdWlyZSIsIk1lZGlhVXJsXzEiLCJDUkVBVEVfVVJMIiwiU2VnbWVudEluZm9ybWF0aW9uIiwicHJlc2VudGF0aW9uRHVyYXRpb24iLCJiYW5kd2lkdGgiLCJiYXNlVXJsIiwicmVwcmVzZW50YXRpb25JRCIsIm1pbWVUeXBlIiwic2VnbWVudEJhc2UiLCJzZWdtZW50VGVtcGxhdGUiLCJzZWdtZW50VGltZWxpbmUiLCJ0aW1lbGluZUl0ZW1MaXN0Iiwic2VnbWVudExpc3QiLCJzZWdtZW50VXJsTGlzdCIsImhhc1NlZ21lbnRCYXNlIiwic3RhcnROdW1iZXIiLCJtZWRpYVVybHMiLCJ3aGljaFVzZUNhc2UiLCJjb3VudCIsIkZST01fU0VHTUVOVF9CQVNFIiwibWVkaWFUZW1wbGF0ZSIsImF0dHJpYnV0ZXMiLCJnZXROYW1lZEl0ZW0iLCJub2RlVmFsdWUiLCJyZXBsYWNlJFJlcHJlc2VudGF0aW9uSUQkIiwicmVwbGFjZSRCYW5kd2lkdGgkIiwicGFyc2VJbnQiLCJGUk9NX1RFTVBMQVRFIiwiRlJPTV9USU1FTElORSIsIkZST01fU0VHTUVOVExJU1QiLCJoYXNGaWxlRXh0ZW5zaW9uIiwiaW5pdFNlZ21lbnQiLCJjcmVhdGVGcmFnbWVudEZyb21VcmxMaXN0IiwiY3JlYXRlSW5pdFNlZ21lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInVuc2hpZnQiLCJNZWRpYVVybCIsImluZGV4T2YiLCJlIiwicHVzaCIsImNyZWF0ZUZyYWdtZW50c0Zyb21UZW1wbGF0ZSIsInByb3RvdHlwZSIsImNyZWF0ZUZyYWdtZW50VXJsc0Zyb21UaW1lbGluZSIsInNlZ21lbnROb2RlcyIsImN1cnJlbnRUaW1lIiwiaGFzQ3VycmVudFRpbWUiLCJ0aW1lIiwiaSIsImxlbmd0aCIsInVuZGVmaW5lZCIsImR1cmF0aW9uIiwicmVwZWF0IiwiayIsImZyYWdtZW50XzEiLCJyZXBsYWNlJFRpbWUkIiwiZnJhZ21lbnQiLCJ1cmxMaXN0Tm9kZXMiLCJzZWdtZW50RHVyYXRpb24iLCJzZWdtZW50VGltZXNjYWxlIiwibnVtU2VnbWVudHMiLCJNYXRoIiwiY2VpbCIsIm1lZGlhVGVtcGxhdGVTdHJpbmdTZWdtZW50Iiwic3BsaXQiLCJ0ZW1wbGF0ZVJlcGxhY2VhYmxlSW5kZXgiLCJwYWRkaW5nQW1vdW50IiwiWmVyb1BhZGRpbmciLCJnZXRQYWRkaW5nQW1vdW50Iiwic2VnbWVudEluZGV4IiwiYWRkUGFkZGluZyIsInJlcGxhY2UkTnVtYmVyJCIsInJlcGxhY2UiLCJpZCIsIlJlZ0V4cCIsIm51bSIsInRvU3RyaW5nIiwiY3VycmVudEluZGV4IiwiZ2V0TWVkaWFVcmxMaXN0IiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsYUFBYSxHQUFHQyxtQkFBTyxDQUFDLEVBQUQsQ0FBN0I7O0FBQ0EsSUFBTUMsVUFBVSxHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBMUI7O0FBQ0EsSUFBSUUsVUFBSjs7QUFDQSxDQUFDLFVBQVVBLFVBQVYsRUFBc0I7QUFDckJBLFlBQVUsQ0FBQ0EsVUFBVSxDQUFDLGVBQUQsQ0FBVixHQUE4QixDQUEvQixDQUFWLEdBQThDLGVBQTlDO0FBQ0FBLFlBQVUsQ0FBQ0EsVUFBVSxDQUFDLGVBQUQsQ0FBVixHQUE4QixDQUEvQixDQUFWLEdBQThDLGVBQTlDO0FBQ0FBLFlBQVUsQ0FBQ0EsVUFBVSxDQUFDLGtCQUFELENBQVYsR0FBaUMsQ0FBbEMsQ0FBVixHQUFpRCxrQkFBakQ7QUFDQUEsWUFBVSxDQUFDQSxVQUFVLENBQUMsbUJBQUQsQ0FBVixHQUFrQyxDQUFuQyxDQUFWLEdBQWtELG1CQUFsRDtBQUNELENBTEQsRUFLR0EsVUFBVSxLQUFLQSxVQUFVLEdBQUcsRUFBbEIsQ0FMYjs7QUFNQSxJQUFNQyxrQkFBa0IsR0FBSSxZQUFZO0FBQ3RDLFdBQVNBLGtCQUFU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LEdBRkQ7O0FBR0F6RSxvQkFBa0IsQ0FBQ3VDLFNBQW5CLENBQTZCUixpQkFBN0IsR0FBaUQsVUFBVXNCLFFBQVYsRUFBb0I7QUFDbkVBLFlBQVEsR0FBRyxLQUFLOUIsa0JBQUwsQ0FBd0I4QixRQUF4QixFQUFrQyxLQUFLbkQsU0FBdkMsQ0FBWDtBQUNBbUQsWUFBUSxHQUFHLEtBQUsvQix5QkFBTCxDQUErQitCLFFBQS9CLEVBQXlDLEtBQUtqRCxnQkFBOUMsQ0FBWDtBQUNBLFdBQU9pRCxRQUFQO0FBQ0QsR0FKRDs7QUFLQXJELG9CQUFrQixDQUFDdUMsU0FBbkIsQ0FBNkJvQyxlQUE3QixHQUErQyxZQUFZO0FBQ3pELFdBQU8sS0FBSzdELFNBQVo7QUFDRCxHQUZEOztBQUdBZCxvQkFBa0IsQ0FBQ2dCLEtBQW5CLEdBQTJCLENBQUMsQ0FBNUI7QUFDQSxTQUFPaEIsa0JBQVA7QUFDRCxDQWpNMkIsRUFBNUI7O0FBa01BNEUsT0FBTyxDQUFDNUUsa0JBQVIsR0FBNkJBLGtCQUE3QiIsImZpbGUiOiIyMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgWmVyb1BhZGRpbmdfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL3plcm8tcGFkZGluZ1wiKTtcbmNvbnN0IE1lZGlhVXJsXzEgPSByZXF1aXJlKFwiLi9tZWRpYS11cmxcIik7XG5sZXQgQ1JFQVRFX1VSTDtcbihmdW5jdGlvbiAoQ1JFQVRFX1VSTCkge1xuICBDUkVBVEVfVVJMW0NSRUFURV9VUkxbXCJGUk9NX1RFTVBMQVRFXCJdID0gMF0gPSBcIkZST01fVEVNUExBVEVcIjtcbiAgQ1JFQVRFX1VSTFtDUkVBVEVfVVJMW1wiRlJPTV9USU1FTElORVwiXSA9IDFdID0gXCJGUk9NX1RJTUVMSU5FXCI7XG4gIENSRUFURV9VUkxbQ1JFQVRFX1VSTFtcIkZST01fU0VHTUVOVExJU1RcIl0gPSAyXSA9IFwiRlJPTV9TRUdNRU5UTElTVFwiO1xuICBDUkVBVEVfVVJMW0NSRUFURV9VUkxbXCJGUk9NX1NFR01FTlRfQkFTRVwiXSA9IDNdID0gXCJGUk9NX1NFR01FTlRfQkFTRVwiO1xufSkoQ1JFQVRFX1VSTCB8fCAoQ1JFQVRFX1VSTCA9IHt9KSk7XG5jb25zdCBTZWdtZW50SW5mb3JtYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTZWdtZW50SW5mb3JtYXRpb24gKHByZXNlbnRhdGlvbkR1cmF0aW9uLCBiYW5kd2lkdGgsIGJhc2VVcmwsIHJlcHJlc2VudGF0aW9uSUQsIG1pbWVUeXBlLCBzZWdtZW50QmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50VGVtcGxhdGUsIHNlZ21lbnRUaW1lbGluZSwgdGltZWxpbmVJdGVtTGlzdCwgc2VnbWVudExpc3QsIHNlZ21lbnRVcmxMaXN0KSB7XG4gICAgdGhpcy5oYXNTZWdtZW50QmFzZSA9IGZhbHNlO1xuICAgIHRoaXMuYmFzZVVybCA9ICcnO1xuICAgIHRoaXMucHJlc2VudGF0aW9uRHVyYXRpb24gPSAwO1xuICAgIHRoaXMuYmFuZHdpZHRoID0gMDtcbiAgICB0aGlzLnN0YXJ0TnVtYmVyID0gMDtcbiAgICB0aGlzLm1lZGlhVXJscyA9IFtdO1xuICAgIHRoaXMud2hpY2hVc2VDYXNlID0gLTE7XG4gICAgdGhpcy5taW1lVHlwZSA9ICcnO1xuICAgIFNlZ21lbnRJbmZvcm1hdGlvbi5jb3VudCArPSAxO1xuICAgIHRoaXMucHJlc2VudGF0aW9uRHVyYXRpb24gPSBwcmVzZW50YXRpb25EdXJhdGlvbjtcbiAgICB0aGlzLm1pbWVUeXBlID0gbWltZVR5cGU7XG4gICAgaWYgKGJhc2VVcmwpIHtcbiAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgfVxuXG4gICAgaWYgKGJhbmR3aWR0aCkge1xuICAgICAgdGhpcy5iYW5kd2lkdGggPSBiYW5kd2lkdGg7XG4gICAgfVxuICAgIGlmIChyZXByZXNlbnRhdGlvbklEKSB7XG4gICAgICB0aGlzLnJlcHJlc2VudGF0aW9uSUQgPSByZXByZXNlbnRhdGlvbklEO1xuICAgIH1cbiAgICBpZiAoc2VnbWVudEJhc2UpIHtcbiAgICAgIHRoaXMuc2VnbWVudEJhc2UgPSBzZWdtZW50QmFzZTtcbiAgICAgIHRoaXMuaGFzU2VnbWVudEJhc2UgPSB0cnVlO1xuICAgICAgdGhpcy53aGljaFVzZUNhc2UgPSBDUkVBVEVfVVJMLkZST01fU0VHTUVOVF9CQVNFO1xuICAgIH1cbiAgICBpZiAoc2VnbWVudFRlbXBsYXRlKSB7XG4gICAgICB0aGlzLnNlZ21lbnRUZW1wbGF0ZSA9IHNlZ21lbnRUZW1wbGF0ZTtcbiAgICAgIHRoaXMubWVkaWFUZW1wbGF0ZSA9IHRoaXMuc2VnbWVudFRlbXBsYXRlLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwibWVkaWFcIikubm9kZVZhbHVlO1xuICAgICAgdGhpcy5tZWRpYVRlbXBsYXRlID0gdGhpcy5yZXBsYWNlJFJlcHJlc2VudGF0aW9uSUQkKHRoaXMubWVkaWFUZW1wbGF0ZSwgdGhpcy5yZXByZXNlbnRhdGlvbklEKTtcbiAgICAgIHRoaXMubWVkaWFUZW1wbGF0ZSA9IHRoaXMucmVwbGFjZSRCYW5kd2lkdGgkKHRoaXMubWVkaWFUZW1wbGF0ZSwgdGhpcy5iYW5kd2lkdGgpO1xuICAgICAgdGhpcy5zdGFydE51bWJlciA9ICh0aGlzLnNlZ21lbnRUZW1wbGF0ZS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInN0YXJ0TnVtYmVyXCIpKSA/IHBhcnNlSW50KFxuICAgICAgICAgIHRoaXMuc2VnbWVudFRlbXBsYXRlLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwic3RhcnROdW1iZXJcIikubm9kZVZhbHVlKSA6IDA7XG4gICAgICB0aGlzLndoaWNoVXNlQ2FzZSA9IENSRUFURV9VUkwuRlJPTV9URU1QTEFURTtcbiAgICB9XG4gICAgaWYgKHNlZ21lbnRUaW1lbGluZSkge1xuICAgICAgdGhpcy5zZWdtZW50VGltZWxpbmUgPSBzZWdtZW50VGltZWxpbmU7XG4gICAgfVxuICAgIGlmICh0aW1lbGluZUl0ZW1MaXN0KSB7XG4gICAgICB0aGlzLnRpbWVsaW5lSXRlbUxpc3QgPSB0aW1lbGluZUl0ZW1MaXN0O1xuICAgICAgdGhpcy53aGljaFVzZUNhc2UgPSBDUkVBVEVfVVJMLkZST01fVElNRUxJTkU7XG4gICAgfVxuICAgIGlmIChzZWdtZW50TGlzdCkge1xuICAgICAgdGhpcy5zZWdtZW50TGlzdCA9IHNlZ21lbnRMaXN0O1xuICAgIH1cbiAgICBpZiAoc2VnbWVudFVybExpc3QpIHtcbiAgICAgIHRoaXMuc2VnbWVudFVybExpc3QgPSBzZWdtZW50VXJsTGlzdDtcbiAgICAgIHRoaXMud2hpY2hVc2VDYXNlID0gQ1JFQVRFX1VSTC5GUk9NX1NFR01FTlRMSVNUO1xuICAgIH1cbiAgICBsZXQgaGFzRmlsZUV4dGVuc2lvbiA9IGZhbHNlO1xuICAgIGxldCBpbml0U2VnbWVudCA9ICcnO1xuICAgIHN3aXRjaCAodGhpcy53aGljaFVzZUNhc2UpIHtcbiAgICAgIGNhc2UgQ1JFQVRFX1VSTC5GUk9NX1NFR01FTlRMSVNUOlxuICAgICAgICB0aGlzLmNyZWF0ZUZyYWdtZW50RnJvbVVybExpc3QodGhpcy5zZWdtZW50VXJsTGlzdCk7XG4gICAgICAgIGluaXRTZWdtZW50ID0gdGhpcy5jcmVhdGVJbml0U2VnbWVudChcbiAgICAgICAgICAgIHRoaXMuc2VnbWVudExpc3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0luaXRpYWxpemF0aW9uJylbMF0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJzb3VyY2VVUkxcIikubm9kZVZhbHVlKTtcbiAgICAgICAgdGhpcy5tZWRpYVVybHMudW5zaGlmdChuZXcgTWVkaWFVcmxfMS5NZWRpYVVybCh0aGlzLmJhc2VVcmwsIGluaXRTZWdtZW50LCB0aGlzLm1pbWVUeXBlKSk7XG4gICAgICAgIGlmIChTZWdtZW50SW5mb3JtYXRpb24uY291bnQgPT0gMCkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdDUkVBVEVfVVJMLkZST01fU0VHTUVOVExJU1QnLCB0aGlzLm1lZGlhVXJscywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ1JFQVRFX1VSTC5GUk9NX1NFR01FTlRfQkFTRTpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBoYXNGaWxlRXh0ZW5zaW9uID0gKHRoaXMuYmFzZVVybC5pbmRleE9mKCcuJykgIT09IC0xKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgaWYgKGhhc0ZpbGVFeHRlbnNpb24pIHtcbiAgICAgICAgICB0aGlzLm1lZGlhVXJscy5wdXNoKG5ldyBNZWRpYVVybF8xLk1lZGlhVXJsKHRoaXMuYmFzZVVybCwgdGhpcy5iYXNlVXJsLCB0aGlzLm1pbWVUeXBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFNlZ21lbnRJbmZvcm1hdGlvbi5jb3VudCA9PSAwKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ0NSRUFURV9VUkwuRlJPTV9TRUdNRU5UX0JBU0UnLCB0aGlzLm1lZGlhVXJscywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ1JFQVRFX1VSTC5GUk9NX1RFTVBMQVRFOlxuICAgICAgICB0aGlzLmNyZWF0ZUZyYWdtZW50c0Zyb21UZW1wbGF0ZSgpO1xuICAgICAgICBpbml0U2VnbWVudCA9IHRoaXMuY3JlYXRlSW5pdFNlZ21lbnQodGhpcy5zZWdtZW50VGVtcGxhdGUuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJpbml0aWFsaXphdGlvblwiKS5ub2RlVmFsdWUpO1xuICAgICAgICB0aGlzLm1lZGlhVXJscy51bnNoaWZ0KG5ldyBNZWRpYVVybF8xLk1lZGlhVXJsKHRoaXMuYmFzZVVybCwgaW5pdFNlZ21lbnQsIHRoaXMubWltZVR5cGUpKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaGFzRmlsZUV4dGVuc2lvbiA9ICh0aGlzLmJhc2VVcmwuaW5kZXhPZignLicpICE9PSAtMSkgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIGlmIChoYXNGaWxlRXh0ZW5zaW9uKSB7XG4gICAgICAgICAgdGhpcy5tZWRpYVVybHMucHVzaChuZXcgTWVkaWFVcmxfMS5NZWRpYVVybChcIlwiLCB0aGlzLmJhc2VVcmwsIHRoaXMubWltZVR5cGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIFNlZ21lbnRJbmZvcm1hdGlvbi5wcm90b3R5cGUuY3JlYXRlRnJhZ21lbnRVcmxzRnJvbVRpbWVsaW5lID0gZnVuY3Rpb24gKHNlZ21lbnROb2Rlcykge1xuICAgIGxldCBjdXJyZW50VGltZSA9IHRoaXMuc2VnbWVudFRlbXBsYXRlLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwicHJlc2VudGF0aW9uVGltZU9mZnNldFwiKTtcbiAgICBpZiAoY3VycmVudFRpbWUpIHtcbiAgICAgIGN1cnJlbnRUaW1lID0gcGFyc2VJbnQoY3VycmVudFRpbWUubm9kZVZhbHVlLCAxMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRUaW1lID0gMDtcbiAgICB9XG4gICAgbGV0IGhhc0N1cnJlbnRUaW1lID0gZmFsc2U7XG4gICAgbGV0IHRpbWUgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSA+IDAgJiYgc2VnbWVudE5vZGVzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwidFwiKSAmJiBzZWdtZW50Tm9kZXNbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXG4gICAgICAgICAgICAgIFwidFwiKS5ub2RlVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBoYXNDdXJyZW50VGltZSA9IHRydWU7XG4gICAgICAgIHRpbWUgPSBwYXJzZUludChzZWdtZW50Tm9kZXNbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJ0XCIpLm5vZGVWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoYXNDdXJyZW50VGltZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgZHVyYXRpb24gPSAoc2VnbWVudE5vZGVzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiZFwiKSAmJiBzZWdtZW50Tm9kZXNbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXG4gICAgICAgICAgXCJkXCIpLm5vZGVWYWx1ZSAhPT0gdW5kZWZpbmVkKSA/IHBhcnNlSW50KHNlZ21lbnROb2Rlc1tpXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImRcIikubm9kZVZhbHVlKSA6IDA7XG4gICAgICBjb25zdCByZXBlYXQgPSAoc2VnbWVudE5vZGVzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiclwiKSAmJiBzZWdtZW50Tm9kZXNbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXG4gICAgICAgICAgXCJyXCIpLm5vZGVWYWx1ZSAhPT0gdW5kZWZpbmVkKSA/IHBhcnNlSW50KHNlZ21lbnROb2Rlc1tpXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInJcIikubm9kZVZhbHVlKSA6IDA7XG4gICAgICBmb3IgKGxldCBrID0gMTsgayA8PSByZXBlYXQ7IGsrKykge1xuICAgICAgICBsZXQgZnJhZ21lbnRfMSA9IHRoaXMuc2VnbWVudFRlbXBsYXRlLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwibWVkaWFcIikubm9kZVZhbHVlO1xuICAgICAgICBmcmFnbWVudF8xID0gdGhpcy5yZXBsYWNlJFJlcHJlc2VudGF0aW9uSUQkKGZyYWdtZW50XzEsIHRoaXMucmVwcmVzZW50YXRpb25JRCk7XG4gICAgICAgIGZyYWdtZW50XzEgPSB0aGlzLnJlcGxhY2UkVGltZSQoZnJhZ21lbnRfMSwgY3VycmVudFRpbWUpO1xuICAgICAgICBmcmFnbWVudF8xID0gdGhpcy5yZXBsYWNlJEJhbmR3aWR0aCQoZnJhZ21lbnRfMSwgdGhpcy5iYW5kd2lkdGgpO1xuXG4gICAgICAgIHRoaXMubWVkaWFVcmxzLnB1c2gobmV3IE1lZGlhVXJsXzEuTWVkaWFVcmwodGhpcy5iYXNlVXJsLCBmcmFnbWVudF8xLCB0aGlzLm1pbWVUeXBlKSk7XG4gICAgICAgIGlmICghaGFzQ3VycmVudFRpbWUpIHtcbiAgICAgICAgICBjdXJyZW50VGltZSArPSBkdXJhdGlvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50VGltZSA9IHRpbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCBmcmFnbWVudCA9IHRoaXMuc2VnbWVudFRlbXBsYXRlLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwibWVkaWFcIikubm9kZVZhbHVlO1xuICAgICAgZnJhZ21lbnQgPSB0aGlzLnJlcGxhY2UkUmVwcmVzZW50YXRpb25JRCQoZnJhZ21lbnQsIHRoaXMucmVwcmVzZW50YXRpb25JRCk7XG4gICAgICBmcmFnbWVudCA9IHRoaXMucmVwbGFjZSRUaW1lJChmcmFnbWVudCwgY3VycmVudFRpbWUpO1xuICAgICAgZnJhZ21lbnQgPSB0aGlzLnJlcGxhY2UkQmFuZHdpZHRoJChmcmFnbWVudCwgdGhpcy5iYW5kd2lkdGgpO1xuXG4gICAgICB0aGlzLm1lZGlhVXJscy5wdXNoKG5ldyBNZWRpYVVybF8xLk1lZGlhVXJsKHRoaXMuYmFzZVVybCwgZnJhZ21lbnQsIHRoaXMubWltZVR5cGUpKTtcbiAgICAgIGlmICghaGFzQ3VycmVudFRpbWUpIHtcbiAgICAgICAgY3VycmVudFRpbWUgKz0gZHVyYXRpb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50VGltZSA9IHRpbWU7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBTZWdtZW50SW5mb3JtYXRpb24ucHJvdG90eXBlLmNyZWF0ZUZyYWdtZW50RnJvbVVybExpc3QgPSBmdW5jdGlvbiAodXJsTGlzdE5vZGVzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cmxMaXN0Tm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gdXJsTGlzdE5vZGVzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwibWVkaWFcIikubm9kZVZhbHVlO1xuICAgICAgdGhpcy5tZWRpYVVybHMucHVzaChuZXcgTWVkaWFVcmxfMS5NZWRpYVVybCh0aGlzLmJhc2VVcmwsIGZyYWdtZW50LCB0aGlzLm1pbWVUeXBlKSk7XG4gICAgfVxuICB9O1xuICBTZWdtZW50SW5mb3JtYXRpb24ucHJvdG90eXBlLmNyZWF0ZUZyYWdtZW50c0Zyb21UZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzZWdtZW50RHVyYXRpb24gPSBwYXJzZUludCh0aGlzLnNlZ21lbnRUZW1wbGF0ZS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImR1cmF0aW9uXCIpLm5vZGVWYWx1ZSk7XG4gICAgY29uc3Qgc2VnbWVudFRpbWVzY2FsZSA9ICh0aGlzLnNlZ21lbnRUZW1wbGF0ZS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInRpbWVzY2FsZVwiKSkgPyBwYXJzZUludChcbiAgICAgICAgdGhpcy5zZWdtZW50VGVtcGxhdGUuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJ0aW1lc2NhbGVcIikubm9kZVZhbHVlKSA6IDE7XG4gICAgY29uc3QgbnVtU2VnbWVudHMgPSBNYXRoLmNlaWwodGhpcy5wcmVzZW50YXRpb25EdXJhdGlvbiAvIChzZWdtZW50RHVyYXRpb24gLyBzZWdtZW50VGltZXNjYWxlKSAvIDEwMDApO1xuICAgIGNvbnN0IG1lZGlhVGVtcGxhdGVTdHJpbmdTZWdtZW50ID0gdGhpcy5tZWRpYVRlbXBsYXRlLnNwbGl0KCckJyk7XG4gICAgbGV0IHRlbXBsYXRlUmVwbGFjZWFibGVJbmRleDtcbiAgICBjb25zdCBzdGFydE51bWJlciA9IHRoaXMuc3RhcnROdW1iZXIgfHwgMDtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IG1lZGlhVGVtcGxhdGVTdHJpbmdTZWdtZW50Lmxlbmd0aDsgaysrKSB7XG4gICAgICBpZiAobWVkaWFUZW1wbGF0ZVN0cmluZ1NlZ21lbnRba10uaW5kZXhPZignTnVtYmVyJykgIT0gLTEpIHtcbiAgICAgICAgdGVtcGxhdGVSZXBsYWNlYWJsZUluZGV4ID0gJyQnICsgbWVkaWFUZW1wbGF0ZVN0cmluZ1NlZ21lbnRba10gKyAnJCc7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhZGRpbmdBbW91bnQgPSBaZXJvUGFkZGluZ18xLlplcm9QYWRkaW5nLmdldFBhZGRpbmdBbW91bnQodGVtcGxhdGVSZXBsYWNlYWJsZUluZGV4KTtcbiAgICBmb3IgKGxldCBpID0gc3RhcnROdW1iZXI7IGkgPCBudW1TZWdtZW50cyArIHN0YXJ0TnVtYmVyOyBpKyspIHtcbiAgICAgIGNvbnN0IHNlZ21lbnRJbmRleCA9IFplcm9QYWRkaW5nXzEuWmVyb1BhZGRpbmcuYWRkUGFkZGluZyhpLCBwYWRkaW5nQW1vdW50KTtcbiAgICAgIGxldCBmcmFnbWVudDtcbiAgICAgIGlmIChwYWRkaW5nQW1vdW50ID09PSAwKSB7XG4gICAgICAgIGZyYWdtZW50ID0gdGhpcy5yZXBsYWNlJE51bWJlciQodGhpcy5tZWRpYVRlbXBsYXRlLCBpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyYWdtZW50ID0gdGhpcy5tZWRpYVRlbXBsYXRlLnJlcGxhY2UodGVtcGxhdGVSZXBsYWNlYWJsZUluZGV4LCBzZWdtZW50SW5kZXgpO1xuICAgICAgfVxuICAgICAgdGhpcy5tZWRpYVVybHMucHVzaChuZXcgTWVkaWFVcmxfMS5NZWRpYVVybCh0aGlzLmJhc2VVcmwsIGZyYWdtZW50LCB0aGlzLm1pbWVUeXBlKSk7XG4gICAgfVxuICB9O1xuICBTZWdtZW50SW5mb3JtYXRpb24ucHJvdG90eXBlLnJlcGxhY2UkUmVwcmVzZW50YXRpb25JRCQgPSBmdW5jdGlvbiAoZnJhZ21lbnQsIGlkKSB7XG4gICAgcmV0dXJuIGZyYWdtZW50LnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXCRSZXByZXNlbnRhdGlvbklEXFxcXCQnLCAnZycpLCBpZCk7XG4gIH07XG4gIFNlZ21lbnRJbmZvcm1hdGlvbi5wcm90b3R5cGUucmVwbGFjZSROdW1iZXIkID0gZnVuY3Rpb24gKGZyYWdtZW50LCBudW0pIHtcbiAgICByZXR1cm4gZnJhZ21lbnQucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcJE51bWJlclxcXFwkJywgJ2cnKSwgbnVtLnRvU3RyaW5nKCkpO1xuICB9O1xuICBTZWdtZW50SW5mb3JtYXRpb24ucHJvdG90eXBlLnJlcGxhY2UkQmFuZHdpZHRoJCA9IGZ1bmN0aW9uIChmcmFnbWVudCwgYmFuZHdpZHRoKSB7XG4gICAgcmV0dXJuIGZyYWdtZW50LnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXCRCYW5kd2lkdGhcXFxcJCcsICdnJyksIGJhbmR3aWR0aC50b1N0cmluZygpKTtcbiAgfTtcbiAgU2VnbWVudEluZm9ybWF0aW9uLnByb3RvdHlwZS5yZXBsYWNlJFRpbWUkID0gZnVuY3Rpb24gKGZyYWdtZW50LCBjdXJyZW50SW5kZXgpIHtcbiAgICByZXR1cm4gZnJhZ21lbnQucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcJFRpbWVcXFxcJCcsICdnJyksIGN1cnJlbnRJbmRleC50b1N0cmluZygpKTtcbiAgfTtcbiAgU2VnbWVudEluZm9ybWF0aW9uLnByb3RvdHlwZS5jcmVhdGVJbml0U2VnbWVudCA9IGZ1bmN0aW9uIChmcmFnbWVudCkge1xuICAgIGZyYWdtZW50ID0gdGhpcy5yZXBsYWNlJEJhbmR3aWR0aCQoZnJhZ21lbnQsIHRoaXMuYmFuZHdpZHRoKTtcbiAgICBmcmFnbWVudCA9IHRoaXMucmVwbGFjZSRSZXByZXNlbnRhdGlvbklEJChmcmFnbWVudCwgdGhpcy5yZXByZXNlbnRhdGlvbklEKTtcbiAgICByZXR1cm4gZnJhZ21lbnQ7XG4gIH07XG4gIFNlZ21lbnRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0TWVkaWFVcmxMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1lZGlhVXJscztcbiAgfTtcbiAgU2VnbWVudEluZm9ybWF0aW9uLmNvdW50ID0gLTE7XG4gIHJldHVybiBTZWdtZW50SW5mb3JtYXRpb247XG59KCkpO1xuZXhwb3J0cy5TZWdtZW50SW5mb3JtYXRpb24gPSBTZWdtZW50SW5mb3JtYXRpb247XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar MediaUrl = function () {\n  function MediaUrl(baseURL, mediaFile, mimeType, url_domain) {\n    if (url_domain === void 0) {\n      url_domain = '';\n    }\n\n    this.baseURL = '';\n\n    if (baseURL.startsWith('http') === false) {\n      this.baseURL = baseURL;\n    }\n\n    this.mediaFile = mediaFile.indexOf('/') !== -1 ? this.truncateMediaFilePath(mediaFile) : mediaFile;\n    this.url_domain = url_domain;\n    this.mimeType = mimeType;\n  }\n\n  MediaUrl.prototype.truncateMediaFilePath = function (mediaFile) {\n    var startIndex = mediaFile.lastIndexOf('/');\n    var front = mediaFile.substring(0, startIndex);\n    var end = mediaFile.substring(startIndex + 1, mediaFile.length);\n    this.baseURL += front;\n    return end;\n  };\n\n  MediaUrl.prototype.getFileAddress = function () {\n    return this.baseURL + this.mediaFile;\n  };\n\n  return MediaUrl;\n}();\n\nexports.MediaUrl = MediaUrl;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL21lZGlhLXVybC5qcz8xMTdjIl0sIm5hbWVzIjpbIk1lZGlhVXJsIiwiYmFzZVVSTCIsIm1lZGlhRmlsZSIsIm1pbWVUeXBlIiwidXJsX2RvbWFpbiIsInN0YXJ0c1dpdGgiLCJpbmRleE9mIiwidHJ1bmNhdGVNZWRpYUZpbGVQYXRoIiwicHJvdG90eXBlIiwic3RhcnRJbmRleCIsImxhc3RJbmRleE9mIiwiZnJvbnQiLCJzdWJzdHJpbmciLCJlbmQiLCJsZW5ndGgiLCJnZXRGaWxlQWRkcmVzcyIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLFFBQVEsR0FBSSxZQUFZO0FBQzVCLFdBQVNBLFFBQVQsQ0FBbUJDLE9BQW5CLEVBQTRCQyxTQUE1QixFQUF1Q0MsUUFBdkMsRUFBaURDLFVBQWpELEVBQTZEO0FBQzNELFFBQUlBLFVBQVUsS0FBSyxLQUFLLENBQXhCLEVBQTJCO0FBQ3pCQSxnQkFBVSxHQUFHLEVBQWI7QUFDRDs7QUFDRCxTQUFLSCxPQUFMLEdBQWUsRUFBZjs7QUFDQSxRQUFJQSxPQUFPLENBQUNJLFVBQVIsQ0FBbUIsTUFBbkIsTUFBK0IsS0FBbkMsRUFBMEM7QUFDeEMsV0FBS0osT0FBTCxHQUFlQSxPQUFmO0FBQ0Q7O0FBQ0QsU0FBS0MsU0FBTCxHQUFrQkEsU0FBUyxDQUFDSSxPQUFWLENBQWtCLEdBQWxCLE1BQTJCLENBQUMsQ0FBN0IsR0FBa0MsS0FBS0MscUJBQUwsQ0FBMkJMLFNBQTNCLENBQWxDLEdBQTBFQSxTQUEzRjtBQUNBLFNBQUtFLFVBQUwsR0FBa0JBLFVBQWxCO0FBQ0EsU0FBS0QsUUFBTCxHQUFnQkEsUUFBaEI7QUFDRDs7QUFFREgsVUFBUSxDQUFDUSxTQUFULENBQW1CRCxxQkFBbkIsR0FBMkMsVUFBVUwsU0FBVixFQUFxQjtBQUM5RCxRQUFNTyxVQUFVLEdBQUdQLFNBQVMsQ0FBQ1EsV0FBVixDQUFzQixHQUF0QixDQUFuQjtBQUNBLFFBQU1DLEtBQUssR0FBR1QsU0FBUyxDQUFDVSxTQUFWLENBQW9CLENBQXBCLEVBQXVCSCxVQUF2QixDQUFkO0FBQ0EsUUFBTUksR0FBRyxHQUFHWCxTQUFTLENBQUNVLFNBQVYsQ0FBb0JILFVBQVUsR0FBRyxDQUFqQyxFQUFvQ1AsU0FBUyxDQUFDWSxNQUE5QyxDQUFaO0FBQ0EsU0FBS2IsT0FBTCxJQUFnQlUsS0FBaEI7QUFDQSxXQUFPRSxHQUFQO0FBQ0QsR0FORDs7QUFPQWIsVUFBUSxDQUFDUSxTQUFULENBQW1CTyxjQUFuQixHQUFvQyxZQUFZO0FBQzlDLFdBQU8sS0FBS2QsT0FBTCxHQUFlLEtBQUtDLFNBQTNCO0FBQ0QsR0FGRDs7QUFHQSxTQUFPRixRQUFQO0FBQ0QsQ0F6QmlCLEVBQWxCOztBQTBCQWdCLE9BQU8sQ0FBQ2hCLFFBQVIsR0FBbUJBLFFBQW5CIiwiZmlsZSI6IjIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBNZWRpYVVybCA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE1lZGlhVXJsIChiYXNlVVJMLCBtZWRpYUZpbGUsIG1pbWVUeXBlLCB1cmxfZG9tYWluKSB7XG4gICAgaWYgKHVybF9kb21haW4gPT09IHZvaWQgMCkge1xuICAgICAgdXJsX2RvbWFpbiA9ICcnO1xuICAgIH1cbiAgICB0aGlzLmJhc2VVUkwgPSAnJztcbiAgICBpZiAoYmFzZVVSTC5zdGFydHNXaXRoKCdodHRwJykgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLmJhc2VVUkwgPSBiYXNlVVJMO1xuICAgIH1cbiAgICB0aGlzLm1lZGlhRmlsZSA9IChtZWRpYUZpbGUuaW5kZXhPZignLycpICE9PSAtMSkgPyB0aGlzLnRydW5jYXRlTWVkaWFGaWxlUGF0aChtZWRpYUZpbGUpIDogbWVkaWFGaWxlO1xuICAgIHRoaXMudXJsX2RvbWFpbiA9IHVybF9kb21haW47XG4gICAgdGhpcy5taW1lVHlwZSA9IG1pbWVUeXBlO1xuICB9XG5cbiAgTWVkaWFVcmwucHJvdG90eXBlLnRydW5jYXRlTWVkaWFGaWxlUGF0aCA9IGZ1bmN0aW9uIChtZWRpYUZpbGUpIHtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gbWVkaWFGaWxlLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgY29uc3QgZnJvbnQgPSBtZWRpYUZpbGUuc3Vic3RyaW5nKDAsIHN0YXJ0SW5kZXgpO1xuICAgIGNvbnN0IGVuZCA9IG1lZGlhRmlsZS5zdWJzdHJpbmcoc3RhcnRJbmRleCArIDEsIG1lZGlhRmlsZS5sZW5ndGgpO1xuICAgIHRoaXMuYmFzZVVSTCArPSBmcm9udDtcbiAgICByZXR1cm4gZW5kO1xuICB9O1xuICBNZWRpYVVybC5wcm90b3R5cGUuZ2V0RmlsZUFkZHJlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFzZVVSTCArIHRoaXMubWVkaWFGaWxlO1xuICB9O1xuICByZXR1cm4gTWVkaWFVcmw7XG59KCkpO1xuZXhwb3J0cy5NZWRpYVVybCA9IE1lZGlhVXJsO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///22\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar moment = __webpack_require__(50);\n\nvar IsoDurationParser = function () {\n  function IsoDurationParser() {}\n\n  IsoDurationParser.getDuration = function (val) {\n    var dur = moment.duration(val);\n    return dur.asMilliseconds();\n  };\n\n  IsoDurationParser.getDurationAsS = function (val) {\n    var dur = moment.duration(val);\n    return dur.asSeconds();\n  };\n\n  IsoDurationParser.getMoment = function () {\n    return moment;\n  };\n\n  return IsoDurationParser;\n}();\n\nexports.IsoDurationParser = IsoDurationParser;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9Jc28tZHVyYXRpb24tcGFyc2VyLmpzP2NjODAiXSwibmFtZXMiOlsibW9tZW50IiwicmVxdWlyZSIsIklzb0R1cmF0aW9uUGFyc2VyIiwiZ2V0RHVyYXRpb24iLCJ2YWwiLCJkdXIiLCJkdXJhdGlvbiIsImFzTWlsbGlzZWNvbmRzIiwiZ2V0RHVyYXRpb25Bc1MiLCJhc1NlY29uZHMiLCJnZXRNb21lbnQiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxNQUFNLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUF0Qjs7QUFDQSxJQUFNQyxpQkFBaUIsR0FBSSxZQUFZO0FBQ3JDLFdBQVNBLGlCQUFULEdBQThCLENBQzdCOztBQUVEQSxtQkFBaUIsQ0FBQ0MsV0FBbEIsR0FBZ0MsVUFBVUMsR0FBVixFQUFlO0FBQzdDLFFBQU1DLEdBQUcsR0FBR0wsTUFBTSxDQUFDTSxRQUFQLENBQWdCRixHQUFoQixDQUFaO0FBQ0EsV0FBT0MsR0FBRyxDQUFDRSxjQUFKLEVBQVA7QUFDRCxHQUhEOztBQUlBTCxtQkFBaUIsQ0FBQ00sY0FBbEIsR0FBbUMsVUFBVUosR0FBVixFQUFlO0FBQ2hELFFBQU1DLEdBQUcsR0FBR0wsTUFBTSxDQUFDTSxRQUFQLENBQWdCRixHQUFoQixDQUFaO0FBQ0EsV0FBT0MsR0FBRyxDQUFDSSxTQUFKLEVBQVA7QUFDRCxHQUhEOztBQUlBUCxtQkFBaUIsQ0FBQ1EsU0FBbEIsR0FBOEIsWUFBWTtBQUN4QyxXQUFPVixNQUFQO0FBQ0QsR0FGRDs7QUFHQSxTQUFPRSxpQkFBUDtBQUNELENBaEIwQixFQUEzQjs7QUFpQkFTLE9BQU8sQ0FBQ1QsaUJBQVIsR0FBNEJBLGlCQUE1QiIsImZpbGUiOiIyMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZShcIm1vbWVudC9tb21lbnRcIik7XG5jb25zdCBJc29EdXJhdGlvblBhcnNlciA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIElzb0R1cmF0aW9uUGFyc2VyICgpIHtcbiAgfVxuXG4gIElzb0R1cmF0aW9uUGFyc2VyLmdldER1cmF0aW9uID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIGNvbnN0IGR1ciA9IG1vbWVudC5kdXJhdGlvbih2YWwpO1xuICAgIHJldHVybiBkdXIuYXNNaWxsaXNlY29uZHMoKTtcbiAgfTtcbiAgSXNvRHVyYXRpb25QYXJzZXIuZ2V0RHVyYXRpb25Bc1MgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgY29uc3QgZHVyID0gbW9tZW50LmR1cmF0aW9uKHZhbCk7XG4gICAgcmV0dXJuIGR1ci5hc1NlY29uZHMoKTtcbiAgfTtcbiAgSXNvRHVyYXRpb25QYXJzZXIuZ2V0TW9tZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBtb21lbnQ7XG4gIH07XG4gIHJldHVybiBJc29EdXJhdGlvblBhcnNlcjtcbn0oKSk7XG5leHBvcnRzLklzb0R1cmF0aW9uUGFyc2VyID0gSXNvRHVyYXRpb25QYXJzZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///23\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar fieldsPicker = __webpack_require__(11);\n\nmodule.exports = function AudioRepresentation(attr) {\n  fieldsPicker(this, ["audioSamplingRate", "bandwidth", "id", "lang", "durationInS"], attr);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvanNvbi9hdWRpby1yZXByZXNlbnRhdGlvbi5qcz9lMzM0Il0sIm5hbWVzIjpbImZpZWxkc1BpY2tlciIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiQXVkaW9SZXByZXNlbnRhdGlvbiIsImF0dHIiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLFlBQVksR0FBR0MsbUJBQU8sQ0FBQyxFQUFELENBQTVCOztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsU0FBU0MsbUJBQVQsQ0FBOEJDLElBQTlCLEVBQW9DO0FBQ25ETCxjQUFZLENBQUMsSUFBRCxFQUFPLENBQ2pCLG1CQURpQixFQUVqQixXQUZpQixFQUdqQixJQUhpQixFQUlqQixNQUppQixFQUtqQixhQUxpQixDQUFQLEVBTVRLLElBTlMsQ0FBWjtBQU9ELENBUkQiLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IGZpZWxkc1BpY2tlciA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL2ZpZWxkcy1waWNrZXJcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gQXVkaW9SZXByZXNlbnRhdGlvbiAoYXR0cikge1xuICBmaWVsZHNQaWNrZXIodGhpcywgW1xuICAgIFwiYXVkaW9TYW1wbGluZ1JhdGVcIixcbiAgICBcImJhbmR3aWR0aFwiLFxuICAgIFwiaWRcIixcbiAgICBcImxhbmdcIixcbiAgICBcImR1cmF0aW9uSW5TXCJcbiAgXSwgYXR0cik7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///24\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar fieldsPicker = __webpack_require__(11);\n\nmodule.exports = function VideoRepresentation(attr) {\n  fieldsPicker(this, ["bandwidth", "id", "height", "lang", "width", "durationInS"], attr);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvanNvbi92aWRlby1yZXByZXNlbnRhdGlvbi5qcz81MWE4Il0sIm5hbWVzIjpbImZpZWxkc1BpY2tlciIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiVmlkZW9SZXByZXNlbnRhdGlvbiIsImF0dHIiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLFlBQVksR0FBR0MsbUJBQU8sQ0FBQyxFQUFELENBQTVCOztBQUNBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsU0FBU0MsbUJBQVQsQ0FBOEJDLElBQTlCLEVBQW9DO0FBQ25ETCxjQUFZLENBQUMsSUFBRCxFQUFPLENBQ2pCLFdBRGlCLEVBRWpCLElBRmlCLEVBR2pCLFFBSGlCLEVBSWpCLE1BSmlCLEVBS2pCLE9BTGlCLEVBTWpCLGFBTmlCLENBQVAsRUFPVEssSUFQUyxDQUFaO0FBUUQsQ0FURCIsImZpbGUiOiIyNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgZmllbGRzUGlja2VyID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvZmllbGRzLXBpY2tlclwiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gVmlkZW9SZXByZXNlbnRhdGlvbiAoYXR0cikge1xuICBmaWVsZHNQaWNrZXIodGhpcywgW1xuICAgIFwiYmFuZHdpZHRoXCIsXG4gICAgXCJpZFwiLFxuICAgIFwiaGVpZ2h0XCIsXG4gICAgXCJsYW5nXCIsXG4gICAgXCJ3aWR0aFwiLFxuICAgIFwiZHVyYXRpb25JblNcIlxuICBdLCBhdHRyKTtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///25\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar fieldsPicker = __webpack_require__(11);\n\nmodule.exports = function TextRepresentation(attr) {\n  fieldsPicker(this, ["bandwidth", "id", "lang", "durationInS"], attr);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvanNvbi90ZXh0LXJlcHJlc2VudGF0aW9uLmpzP2UwMGIiXSwibmFtZXMiOlsiZmllbGRzUGlja2VyIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJUZXh0UmVwcmVzZW50YXRpb24iLCJhdHRyIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxZQUFZLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUE1Qjs7QUFDQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFNBQVNDLGtCQUFULENBQTZCQyxJQUE3QixFQUFtQztBQUNsREwsY0FBWSxDQUFDLElBQUQsRUFBTyxDQUNqQixXQURpQixFQUVqQixJQUZpQixFQUdqQixNQUhpQixFQUlqQixhQUppQixDQUFQLEVBS1RLLElBTFMsQ0FBWjtBQU1ELENBUEQiLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IGZpZWxkc1BpY2tlciA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL2ZpZWxkcy1waWNrZXJcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIFRleHRSZXByZXNlbnRhdGlvbiAoYXR0cikge1xuICBmaWVsZHNQaWNrZXIodGhpcywgW1xuICAgIFwiYmFuZHdpZHRoXCIsXG4gICAgXCJpZFwiLFxuICAgIFwibGFuZ1wiLFxuICAgIFwiZHVyYXRpb25JblNcIlxuICBdLCBhdHRyKTtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///26\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar fs = __webpack_require__(3);\n\nvar path = __webpack_require__(4);\n\nvar appSettings = __webpack_require__(1);\n/**\n *\n * @param {string} manifestId - manifest Id\n * @param {string} downloadFolder - donwload folder\n * @returns {Promise} promise\n */\n\n\nmodule.exports = function (manifestId, downloadFolder) {\n  var settingsPath = path.resolve(appSettings.getSettings().settingsFolder + "/" + manifestId + "/");\n  var moviePath = path.resolve(appSettings.getSettings().downloadsFolderPath + "/" + manifestId + "/");\n\n  if (downloadFolder) {\n    moviePath = path.resolve(downloadFolder + "/" + manifestId + "/");\n  }\n\n  function dirNotExists(dirToCheck) {\n    return new Promise(function (resolve\n    /* , reject */\n    ) {\n      fs.stat(dirToCheck, function (er, stat) {\n        if (er) {\n          resolve();\n        } else {\n          if (stat.isDirectory()) {\n            resolve(\'Folder already exists\');\n          } else {\n            resolve();\n          }\n        }\n      });\n    });\n  }\n\n  return new Promise(function (resolve, reject) {\n    Promise.all([dirNotExists(settingsPath), dirNotExists(moviePath)]).then(function (results) {\n      results = results || [];\n      var errors = results.filter(function (result) {\n        return typeof result !== \'undefined\';\n      });\n\n      if (errors.length) {\n        reject(results);\n      } else {\n        resolve();\n      }\n    }, reject);\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9jYW4tY3JlYXRlLW1hbmlmZXN0LmpzP2I3NmUiXSwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicGF0aCIsImFwcFNldHRpbmdzIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1hbmlmZXN0SWQiLCJkb3dubG9hZEZvbGRlciIsInNldHRpbmdzUGF0aCIsInJlc29sdmUiLCJnZXRTZXR0aW5ncyIsInNldHRpbmdzRm9sZGVyIiwibW92aWVQYXRoIiwiZG93bmxvYWRzRm9sZGVyUGF0aCIsImRpck5vdEV4aXN0cyIsImRpclRvQ2hlY2siLCJQcm9taXNlIiwic3RhdCIsImVyIiwiaXNEaXJlY3RvcnkiLCJyZWplY3QiLCJhbGwiLCJ0aGVuIiwicmVzdWx0cyIsImVycm9ycyIsImZpbHRlciIsInJlc3VsdCIsImxlbmd0aCJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsRUFBRSxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBbEI7O0FBQ0EsSUFBTUMsSUFBSSxHQUFHRCxtQkFBTyxDQUFDLENBQUQsQ0FBcEI7O0FBQ0EsSUFBTUUsV0FBVyxHQUFHRixtQkFBTyxDQUFDLENBQUQsQ0FBM0I7QUFFQTs7Ozs7Ozs7QUFNQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLFVBQVYsRUFBc0JDLGNBQXRCLEVBQXNDO0FBQ3JELE1BQU1DLFlBQVksR0FBR04sSUFBSSxDQUFDTyxPQUFMLENBQWFOLFdBQVcsQ0FBQ08sV0FBWixHQUEwQkMsY0FBMUIsR0FBMkMsR0FBM0MsR0FBaURMLFVBQWpELEdBQThELEdBQTNFLENBQXJCO0FBRUEsTUFBSU0sU0FBUyxHQUFHVixJQUFJLENBQUNPLE9BQUwsQ0FBYU4sV0FBVyxDQUFDTyxXQUFaLEdBQTBCRyxtQkFBMUIsR0FBZ0QsR0FBaEQsR0FBc0RQLFVBQXRELEdBQW1FLEdBQWhGLENBQWhCOztBQUNBLE1BQUlDLGNBQUosRUFBb0I7QUFDbEJLLGFBQVMsR0FBR1YsSUFBSSxDQUFDTyxPQUFMLENBQWFGLGNBQWMsR0FBRyxHQUFqQixHQUF1QkQsVUFBdkIsR0FBb0MsR0FBakQsQ0FBWjtBQUNEOztBQUVELFdBQVNRLFlBQVQsQ0FBdUJDLFVBQXZCLEVBQW1DO0FBQ2pDLFdBQU8sSUFBSUMsT0FBSixDQUFZLFVBQVVQO0FBQVE7QUFBbEIsTUFBa0M7QUFDbkRULFFBQUUsQ0FBQ2lCLElBQUgsQ0FBUUYsVUFBUixFQUFvQixVQUFVRyxFQUFWLEVBQWNELElBQWQsRUFBb0I7QUFDdEMsWUFBSUMsRUFBSixFQUFRO0FBQ05ULGlCQUFPO0FBQ1IsU0FGRCxNQUVPO0FBQ0wsY0FBSVEsSUFBSSxDQUFDRSxXQUFMLEVBQUosRUFBd0I7QUFDdEJWLG1CQUFPLENBQUMsdUJBQUQsQ0FBUDtBQUNELFdBRkQsTUFFTztBQUNMQSxtQkFBTztBQUNSO0FBQ0Y7QUFDRixPQVZEO0FBV0QsS0FaTSxDQUFQO0FBYUQ7O0FBRUQsU0FBTyxJQUFJTyxPQUFKLENBQVksVUFBVVAsT0FBVixFQUFtQlcsTUFBbkIsRUFBMkI7QUFDNUNKLFdBQU8sQ0FBQ0ssR0FBUixDQUFZLENBQ1ZQLFlBQVksQ0FBQ04sWUFBRCxDQURGLEVBRVZNLFlBQVksQ0FBQ0YsU0FBRCxDQUZGLENBQVosRUFHR1UsSUFISCxDQUdRLFVBQVVDLE9BQVYsRUFBbUI7QUFDekJBLGFBQU8sR0FBR0EsT0FBTyxJQUFJLEVBQXJCO0FBQ0EsVUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUNFLE1BQVIsQ0FBZSxVQUFVQyxNQUFWLEVBQWtCO0FBQzlDLGVBQU8sT0FBT0EsTUFBUCxLQUFrQixXQUF6QjtBQUNELE9BRmMsQ0FBZjs7QUFHQSxVQUFJRixNQUFNLENBQUNHLE1BQVgsRUFBbUI7QUFDakJQLGNBQU0sQ0FBQ0csT0FBRCxDQUFOO0FBQ0QsT0FGRCxNQUVPO0FBQ0xkLGVBQU87QUFDUjtBQUNGLEtBYkQsRUFhR1csTUFiSDtBQWNELEdBZk0sQ0FBUDtBQWdCRCxDQXhDRCIsImZpbGUiOiIyNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCBhcHBTZXR0aW5ncyA9IHJlcXVpcmUoXCIuLi9hcHAtc2V0dGluZ3NcIik7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgSWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBkb3dubG9hZEZvbGRlciAtIGRvbndsb2FkIGZvbGRlclxuICogQHJldHVybnMge1Byb21pc2V9IHByb21pc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgZG93bmxvYWRGb2xkZXIpIHtcbiAgY29uc3Qgc2V0dGluZ3NQYXRoID0gcGF0aC5yZXNvbHZlKGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc2V0dGluZ3NGb2xkZXIgKyBcIi9cIiArIG1hbmlmZXN0SWQgKyBcIi9cIik7XG5cbiAgbGV0IG1vdmllUGF0aCA9IHBhdGgucmVzb2x2ZShhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLmRvd25sb2Fkc0ZvbGRlclBhdGggKyBcIi9cIiArIG1hbmlmZXN0SWQgKyBcIi9cIik7XG4gIGlmIChkb3dubG9hZEZvbGRlcikge1xuICAgIG1vdmllUGF0aCA9IHBhdGgucmVzb2x2ZShkb3dubG9hZEZvbGRlciArIFwiL1wiICsgbWFuaWZlc3RJZCArIFwiL1wiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpck5vdEV4aXN0cyAoZGlyVG9DaGVjaykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSAvKiAsIHJlamVjdCAqLykge1xuICAgICAgZnMuc3RhdChkaXJUb0NoZWNrLCBmdW5jdGlvbiAoZXIsIHN0YXQpIHtcbiAgICAgICAgaWYgKGVyKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzdGF0LmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgICAgIHJlc29sdmUoJ0ZvbGRlciBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgUHJvbWlzZS5hbGwoW1xuICAgICAgZGlyTm90RXhpc3RzKHNldHRpbmdzUGF0aCksXG4gICAgICBkaXJOb3RFeGlzdHMobW92aWVQYXRoKVxuICAgIF0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgIHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuICAgICAgY29uc3QgZXJyb3JzID0gcmVzdWx0cy5maWx0ZXIoZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHJlc3VsdCAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICB9KTtcbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHJlamVjdChyZXN1bHRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9LCByZWplY3QpO1xuICB9KTtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///27\n')},function(module,exports,__webpack_require__){"use strict";eval('/*eslint no-console: ["error", { allow: ["warn", "error", "info"] }] */\n\n\nvar fs = __webpack_require__(3);\n\nvar path = __webpack_require__(4);\n\nvar downloadFileUtil = __webpack_require__(7);\n\nfunction removeDir(dir, cb, ENOTEMPTY_attempts) {\n  ENOTEMPTY_attempts = ENOTEMPTY_attempts || 0;\n  var ENOTEMPTY_maxAttempts = 10;\n  var ENOTEMPTY_TIMEOUT = 500;\n\n  if (typeof dir !== \'string\') {\n    throw new Error(\'directory path required\');\n  }\n\n  if (cb !== undefined && typeof cb !== \'function\') {\n    throw new Error(\'callback must be function\');\n  }\n\n  var self = this;\n  var called, results;\n  downloadFileUtil.checkForLocalFile(dir, function existsCallback(exists) {\n    if (!exists) {\n      return removeDirCallback(null);\n    }\n\n    fs.stat(dir, function statCallback(err, stat) {\n      if (err) {\n        return removeDirCallback(err);\n      }\n\n      if (!stat.isDirectory()) {\n        return fs.unlink(dir, removeDirCallback);\n      }\n\n      fs.readdir(dir, readdirCallback);\n    });\n\n    function readdirCallback(err, files) {\n      if (err) {\n        return removeDirCallback(err);\n      }\n\n      var n = files.length;\n\n      if (n === 0) {\n        return fs.rmdir(dir, removeDirCallback);\n      }\n\n      files.forEach(function (name) {\n        removeDir(path.resolve(dir, name), function (err) {\n          if (err) {\n            return removeDirCallback(err);\n          }\n\n          if (--n === 0) {\n            return fs.rmdir(dir, removeDirCallback);\n          }\n        });\n      });\n    }\n  });\n\n  function removeDirCallback(err) {\n    if (err && err.code === "ENOTEMPTY") {\n      if (ENOTEMPTY_attempts < ENOTEMPTY_maxAttempts) {\n        ENOTEMPTY_attempts++;\n        console.error("ERROR ENOTEMPTY", dir, ENOTEMPTY_attempts);\n        setTimeout(function () {\n          removeDir(dir, cb, ENOTEMPTY_attempts);\n        }, ENOTEMPTY_TIMEOUT);\n        return;\n      }\n    }\n\n    if (err && err.code === \'ENOENT\') {\n      arguments[0] = null;\n    }\n\n    if (!results) {\n      results = arguments;\n    }\n\n    if (!cb || called) {\n      return;\n    }\n\n    called = true;\n    cb.apply(self, results);\n  }\n}\n\nmodule.exports = removeDir;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9yZW1vdmUtZGlyLmpzP2YyOTQiXSwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicGF0aCIsImRvd25sb2FkRmlsZVV0aWwiLCJyZW1vdmVEaXIiLCJkaXIiLCJjYiIsIkVOT1RFTVBUWV9hdHRlbXB0cyIsIkVOT1RFTVBUWV9tYXhBdHRlbXB0cyIsIkVOT1RFTVBUWV9USU1FT1VUIiwiRXJyb3IiLCJ1bmRlZmluZWQiLCJzZWxmIiwiY2FsbGVkIiwicmVzdWx0cyIsImNoZWNrRm9yTG9jYWxGaWxlIiwiZXhpc3RzQ2FsbGJhY2siLCJleGlzdHMiLCJyZW1vdmVEaXJDYWxsYmFjayIsInN0YXQiLCJzdGF0Q2FsbGJhY2siLCJlcnIiLCJpc0RpcmVjdG9yeSIsInVubGluayIsInJlYWRkaXIiLCJyZWFkZGlyQ2FsbGJhY2siLCJmaWxlcyIsIm4iLCJsZW5ndGgiLCJybWRpciIsImZvckVhY2giLCJuYW1lIiwicmVzb2x2ZSIsImNvZGUiLCJjb25zb2xlIiwiZXJyb3IiLCJzZXRUaW1lb3V0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNhOztBQUViLElBQU1BLEVBQUUsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQWxCOztBQUNBLElBQU1DLElBQUksR0FBR0QsbUJBQU8sQ0FBQyxDQUFELENBQXBCOztBQUNBLElBQU1FLGdCQUFnQixHQUFHRixtQkFBTyxDQUFDLENBQUQsQ0FBaEM7O0FBRUEsU0FBU0csU0FBVCxDQUFvQkMsR0FBcEIsRUFBeUJDLEVBQXpCLEVBQTZCQyxrQkFBN0IsRUFBaUQ7QUFDL0NBLG9CQUFrQixHQUFHQSxrQkFBa0IsSUFBSSxDQUEzQztBQUNBLE1BQU1DLHFCQUFxQixHQUFHLEVBQTlCO0FBQ0EsTUFBTUMsaUJBQWlCLEdBQUcsR0FBMUI7O0FBRUEsTUFBSSxPQUFPSixHQUFQLEtBQWUsUUFBbkIsRUFBNkI7QUFDM0IsVUFBTSxJ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Q2dDLEtBQUgsQ0FBUzFCLElBQVQsRUFBZUUsT0FBZjtBQUNEO0FBQ0Y7O0FBRUR5QixNQUFNLENBQUNDLE9BQVAsR0FBaUJwQyxTQUFqQiIsImZpbGUiOiIyOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qZXNsaW50IG5vLWNvbnNvbGU6IFtcImVycm9yXCIsIHsgYWxsb3c6IFtcIndhcm5cIiwgXCJlcnJvclwiLCBcImluZm9cIl0gfV0gKi9cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGRvd25sb2FkRmlsZVV0aWwgPSByZXF1aXJlKFwiLi4vZG93bmxvYWRzL2Rvd25sb2FkLWZpbGUtdXRpbFwiKTtcblxuZnVuY3Rpb24gcmVtb3ZlRGlyIChkaXIsIGNiLCBFTk9URU1QVFlfYXR0ZW1wdHMpIHtcbiAgRU5PVEVNUFRZX2F0dGVtcHRzID0gRU5PVEVNUFRZX2F0dGVtcHRzIHx8IDA7XG4gIGNvbnN0IEVOT1RFTVBUWV9tYXhBdHRlbXB0cyA9IDEwO1xuICBjb25zdCBFTk9URU1QVFlfVElNRU9VVCA9IDUwMDtcblxuICBpZiAodHlwZW9mIGRpciAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RpcmVjdG9yeSBwYXRoIHJlcXVpcmVkJyk7XG4gIH1cblxuICBpZiAoY2IgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxiYWNrIG11c3QgYmUgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gIGxldCBjYWxsZWQsIHJlc3VsdHM7XG5cbiAgZG93bmxvYWRGaWxlVXRpbC5jaGVja0ZvckxvY2FsRmlsZShkaXIsIGZ1bmN0aW9uIGV4aXN0c0NhbGxiYWNrIChleGlzdHMpIHtcbiAgICBpZiAoIWV4aXN0cykge1xuICAgICAgcmV0dXJuIHJlbW92ZURpckNhbGxiYWNrKG51bGwpO1xuICAgIH1cbiAgICBmcy5zdGF0KGRpciwgZnVuY3Rpb24gc3RhdENhbGxiYWNrIChlcnIsIHN0YXQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZURpckNhbGxiYWNrKGVycik7XG4gICAgICB9XG4gICAgICBpZiAoIXN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICByZXR1cm4gZnMudW5saW5rKGRpciwgcmVtb3ZlRGlyQ2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgZnMucmVhZGRpcihkaXIsIHJlYWRkaXJDYWxsYmFjayk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiByZWFkZGlyQ2FsbGJhY2sgKGVyciwgZmlsZXMpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZURpckNhbGxiYWNrKGVycik7XG4gICAgICB9XG5cbiAgICAgIGxldCBuID0gZmlsZXMubGVuZ3RoO1xuICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZzLnJtZGlyKGRpciwgcmVtb3ZlRGlyQ2FsbGJhY2spO1xuICAgICAgfVxuXG4gICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJlbW92ZURpcihwYXRoLnJlc29sdmUoZGlyLCBuYW1lKSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiByZW1vdmVEaXJDYWxsYmFjayhlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoLS1uID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZnMucm1kaXIoZGlyLCByZW1vdmVEaXJDYWxsYmFjayk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gcmVtb3ZlRGlyQ2FsbGJhY2sgKGVycikge1xuICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgPT09IFwiRU5PVEVNUFRZXCIpIHtcbiAgICAgIGlmIChFTk9URU1QVFlfYXR0ZW1wdHMgPCBFTk9URU1QVFlfbWF4QXR0ZW1wdHMpIHtcbiAgICAgICAgRU5PVEVNUFRZX2F0dGVtcHRzKys7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUiBFTk9URU1QVFlcIiwgZGlyLCBFTk9URU1QVFlfYXR0ZW1wdHMpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZW1vdmVEaXIoZGlyLCBjYiwgRU5PVEVNUFRZX2F0dGVtcHRzKTtcbiAgICAgICAgfSwgRU5PVEVNUFRZX1RJTUVPVVQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgICBhcmd1bWVudHNbMF0gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghcmVzdWx0cykge1xuICAgICAgcmVzdWx0cyA9IGFyZ3VtZW50cztcbiAgICB9XG4gICAgaWYgKCFjYiB8fCBjYWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbGVkID0gdHJ1ZTtcbiAgICBjYi5hcHBseShzZWxmLCByZXN1bHRzKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlbW92ZURpcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///28\n')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__29__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqc29uZmlsZVwiPzczNDUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzI5X187Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///29\n")},function(module,exports){eval('module.exports = require("util");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ1dGlsXCI/YmUwYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIzMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInV0aWxcIik7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///30\n')},function(module,exports,__webpack_require__){"use strict";eval("\n/**\n * @constructor\n */\n\nfunction ArrayStorage() {\n  this._items = [];\n}\n/**\n * @returns {void}\n */\n\n\nArrayStorage.prototype.clear = function () {\n  this._items = [];\n};\n/**\n *\n * @param {array} items - array items\n * @returns {void}\n */\n\n\nArrayStorage.prototype.concat = function (items) {\n  this._items = this._items.concat(items);\n};\n/**\n *\n * @returns {number} - number of items\n */\n\n\nArrayStorage.prototype.count = function () {\n  return this._items.length;\n};\n/**\n *\n * @returns {array} - items\n */\n\n\nArrayStorage.prototype.getItems = function () {\n  return this._items;\n};\n/**\n *\n * @param {object} item - new item\n * @returns {void}\n */\n\n\nArrayStorage.prototype.push = function (item) {\n  this._items.push(item);\n};\n/**\n * removes first element and returns it\n * @returns {*} - item\n */\n\n\nArrayStorage.prototype.shift = function () {\n  return this._items.shift();\n};\n/**\n * add elements to the beginning of array\n * @returns {*} - new length of an array\n */\n\n\nArrayStorage.prototype.unshift = function () {\n  return this._items.unshift.apply(this, arguments);\n};\n\nmodule.exports = ArrayStorage;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9hcnJheS1zdG9yYWdlLmpzPzc1OGIiXSwibmFtZXMiOlsiQXJyYXlTdG9yYWdlIiwiX2l0ZW1zIiwicHJvdG90eXBlIiwiY2xlYXIiLCJjb25jYXQiLCJpdGVtcyIsImNvdW50IiwibGVuZ3RoIiwiZ2V0SXRlbXMiLCJwdXNoIiwiaXRlbSIsInNoaWZ0IiwidW5zaGlmdCIsImFwcGx5IiwiYXJndW1lbnRzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7QUFFYjs7OztBQUdBLFNBQVNBLFlBQVQsR0FBeUI7QUFDdkIsT0FBS0MsTUFBTCxHQUFjLEVBQWQ7QUFDRDtBQUVEOzs7OztBQUdBRCxZQUFZLENBQUNFLFNBQWIsQ0FBdUJDLEtBQXZCLEdBQStCLFlBQVk7QUFDekMsT0FBS0YsTUFBTCxHQUFjLEVBQWQ7QUFDRCxDQUZEO0FBSUE7Ozs7Ozs7QUFLQUQsWUFBWSxDQUFDRSxTQUFiLENBQXVCRSxNQUF2QixHQUFnQyxVQUFVQyxLQUFWLEVBQWlCO0FBQy9DLE9BQUtKLE1BQUwsR0FBYyxLQUFLQSxNQUFMLENBQVlHLE1BQVosQ0FBbUJDLEtBQW5CLENBQWQ7QUFDRCxDQUZEO0FBSUE7Ozs7OztBQUlBTCxZQUFZLENBQUNFLFNBQWIsQ0FBdUJJLEtBQXZCLEdBQStCLFlBQVk7QUFDekMsU0FBTyxLQUFLTCxNQUFMLENBQVlNLE1BQW5CO0FBQ0QsQ0FGRDtBQUlBOzs7Ozs7QUFJQVAsWUFBWSxDQUFDRSxTQUFiLENBQXVCTSxRQUF2QixHQUFrQyxZQUFZO0FBQzVDLFNBQU8sS0FBS1AsTUFBWjtBQUNELENBRkQ7QUFJQTs7Ozs7OztBQUtBRCxZQUFZLENBQUNFLFNBQWIsQ0FBdUJPLElBQXZCLEdBQThCLFVBQVVDLElBQVYsRUFBZ0I7QUFDNUMsT0FBS1QsTUFBTCxDQUFZUSxJQUFaLENBQWlCQyxJQUFqQjtBQUNELENBRkQ7QUFJQTs7Ozs7O0FBSUFWLFlBQVksQ0FBQ0UsU0FBYixDQUF1QlMsS0FBdkIsR0FBK0IsWUFBWTtBQUN6QyxTQUFPLEtBQUtWLE1BQUwsQ0FBWVUsS0FBWixFQUFQO0FBQ0QsQ0FGRDtBQUlBOzs7Ozs7QUFJQVgsWUFBWSxDQUFDRSxTQUFiLENBQXVCVSxPQUF2QixHQUFpQyxZQUFZO0FBQzNDLFNBQU8sS0FBS1gsTUFBTCxDQUFZVyxPQUFaLENBQW9CQyxLQUFwQixDQUEwQixJQUExQixFQUFnQ0MsU0FBaEMsQ0FBUDtBQUNELENBRkQ7O0FBSUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmhCLFlBQWpCIiwiZmlsZSI6IjMxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEFycmF5U3RvcmFnZSAoKSB7XG4gIHRoaXMuX2l0ZW1zID0gW107XG59XG5cbi8qKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkFycmF5U3RvcmFnZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2l0ZW1zID0gW107XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge2FycmF5fSBpdGVtcyAtIGFycmF5IGl0ZW1zXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuQXJyYXlTdG9yYWdlLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgdGhpcy5faXRlbXMgPSB0aGlzLl9pdGVtcy5jb25jYXQoaXRlbXMpO1xufTtcblxuLyoqXG4gKlxuICogQHJldHVybnMge251bWJlcn0gLSBudW1iZXIgb2YgaXRlbXNcbiAqL1xuQXJyYXlTdG9yYWdlLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aDtcbn07XG5cbi8qKlxuICpcbiAqIEByZXR1cm5zIHthcnJheX0gLSBpdGVtc1xuICovXG5BcnJheVN0b3JhZ2UucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5faXRlbXM7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gaXRlbSAtIG5ldyBpdGVtXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuQXJyYXlTdG9yYWdlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgdGhpcy5faXRlbXMucHVzaChpdGVtKTtcbn07XG5cbi8qKlxuICogcmVtb3ZlcyBmaXJzdCBlbGVtZW50IGFuZCByZXR1cm5zIGl0XG4gKiBAcmV0dXJucyB7Kn0gLSBpdGVtXG4gKi9cbkFycmF5U3RvcmFnZS5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9pdGVtcy5zaGlmdCgpO1xufTtcblxuLyoqXG4gKiBhZGQgZWxlbWVudHMgdG8gdGhlIGJlZ2lubmluZyBvZiBhcnJheVxuICogQHJldHVybnMgeyp9IC0gbmV3IGxlbmd0aCBvZiBhbiBhcnJheVxuICovXG5BcnJheVN0b3JhZ2UucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9pdGVtcy51bnNoaWZ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5U3RvcmFnZTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///31\n")},function(module,exports,__webpack_require__){"use strict";eval('\n/**\n * the idea is to copy the methods from storage so that they can be triggered from parent object and then propagated back\n * to the storage object.\n * for example:\n *    someController.storage.status.setItem(manifestId, someKey, someValue);\n *    someController.storage.downloads.setItem(manifestId, someKey, someValue);\n * @param {object} scope - parent object where the method "From" object will be bridged to\n * @param {object} From - object where the original method was declared\n * @returns {void}\n */\n\nfunction createBridgeMethods(scope, From) {\n  function action() {\n    var args = [],\n        i,\n        j;\n\n    for (i = 0, j = arguments.length; i < j; i++) {\n      args.push(arguments[i]);\n    }\n\n    args.unshift(this._storageKey);\n    return this._parent._itemAction.apply(this._parent, args);\n  }\n\n  for (var methodName in From.prototype) {\n    if (From.prototype.hasOwnProperty(methodName)) {\n      scope[methodName] = action.bind(scope, methodName);\n    }\n  }\n}\n\nmodule.exports = createBridgeMethods;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9jcmVhdGUtYnJpZGdlLW1ldGhvZHMuanM/OTcwOSJdLCJuYW1lcyI6WyJjcmVhdGVCcmlkZ2VNZXRob2RzIiwic2NvcGUiLCJGcm9tIiwiYWN0aW9uIiwiYXJncyIsImkiLCJqIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicHVzaCIsInVuc2hpZnQiLCJfc3RvcmFnZUtleSIsIl9wYXJlbnQiLCJfaXRlbUFjdGlvbiIsImFwcGx5IiwibWV0aG9kTmFtZSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiYmluZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhO0FBRWI7Ozs7Ozs7Ozs7O0FBVUEsU0FBU0EsbUJBQVQsQ0FBOEJDLEtBQTlCLEVBQXFDQyxJQUFyQyxFQUEyQztBQUN6QyxXQUFTQyxNQUFULEdBQW1CO0FBQ2pCLFFBQUlDLElBQUksR0FBRyxFQUFYO0FBQUEsUUFBZUMsQ0FBZjtBQUFBLFFBQWtCQyxDQUFsQjs7QUFDQSxTQUFLRCxDQUFDLEdBQUcsQ0FBSixFQUFPQyxDQUFDLEdBQUdDLFNBQVMsQ0FBQ0MsTUFBMUIsRUFBa0NILENBQUMsR0FBR0MsQ0FBdEMsRUFBeUNELENBQUMsRUFBMUMsRUFBOEM7QUFDNUNELFVBQUksQ0FBQ0ssSUFBTCxDQUFVRixTQUFTLENBQUNGLENBQUQsQ0FBbkI7QUFDRDs7QUFDREQsUUFBSSxDQUFDTSxPQUFMLENBQWEsS0FBS0MsV0FBbEI7QUFDQSxXQUFPLEtBQUtDLE9BQUwsQ0FBYUMsV0FBYixDQUF5QkMsS0FBekIsQ0FBK0IsS0FBS0YsT0FBcEMsRUFBNkNSLElBQTdDLENBQVA7QUFDRDs7QUFFRCxPQUFLLElBQUlXLFVBQVQsSUFBdUJiLElBQUksQ0FBQ2MsU0FBNUIsRUFBdUM7QUFDckMsUUFBSWQsSUFBSSxDQUFDYyxTQUFMLENBQWVDLGNBQWYsQ0FBOEJGLFVBQTlCLENBQUosRUFBK0M7QUFDN0NkLFdBQUssQ0FBQ2MsVUFBRCxDQUFMLEdBQW9CWixNQUFNLENBQUNlLElBQVAsQ0FBWWpCLEtBQVosRUFBbUJjLFVBQW5CLENBQXBCO0FBQ0Q7QUFDRjtBQUNGOztBQUVESSxNQUFNLENBQUNDLE9BQVAsR0FBaUJwQixtQkFBakIiLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiB0aGUgaWRlYSBpcyB0byBjb3B5IHRoZSBtZXRob2RzIGZyb20gc3RvcmFnZSBzbyB0aGF0IHRoZXkgY2FuIGJlIHRyaWdnZXJlZCBmcm9tIHBhcmVudCBvYmplY3QgYW5kIHRoZW4gcHJvcGFnYXRlZCBiYWNrXG4gKiB0byB0aGUgc3RvcmFnZSBvYmplY3QuXG4gKiBmb3IgZXhhbXBsZTpcbiAqICAgIHNvbWVDb250cm9sbGVyLnN0b3JhZ2Uuc3RhdHVzLnNldEl0ZW0obWFuaWZlc3RJZCwgc29tZUtleSwgc29tZVZhbHVlKTtcbiAqICAgIHNvbWVDb250cm9sbGVyLnN0b3JhZ2UuZG93bmxvYWRzLnNldEl0ZW0obWFuaWZlc3RJZCwgc29tZUtleSwgc29tZVZhbHVlKTtcbiAqIEBwYXJhbSB7b2JqZWN0fSBzY29wZSAtIHBhcmVudCBvYmplY3Qgd2hlcmUgdGhlIG1ldGhvZCBcIkZyb21cIiBvYmplY3Qgd2lsbCBiZSBicmlkZ2VkIHRvXG4gKiBAcGFyYW0ge29iamVjdH0gRnJvbSAtIG9iamVjdCB3aGVyZSB0aGUgb3JpZ2luYWwgbWV0aG9kIHdhcyBkZWNsYXJlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJyaWRnZU1ldGhvZHMgKHNjb3BlLCBGcm9tKSB7XG4gIGZ1bmN0aW9uIGFjdGlvbiAoKSB7XG4gICAgbGV0IGFyZ3MgPSBbXSwgaSwgajtcbiAgICBmb3IgKGkgPSAwLCBqID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgfVxuICAgIGFyZ3MudW5zaGlmdCh0aGlzLl9zdG9yYWdlS2V5KTtcbiAgICByZXR1cm4gdGhpcy5fcGFyZW50Ll9pdGVtQWN0aW9uLmFwcGx5KHRoaXMuX3BhcmVudCwgYXJncyk7XG4gIH1cblxuICBmb3IgKGxldCBtZXRob2ROYW1lIGluIEZyb20ucHJvdG90eXBlKSB7XG4gICAgaWYgKEZyb20ucHJvdG90eXBlLmhhc093blByb3BlcnR5KG1ldGhvZE5hbWUpKSB7XG4gICAgICBzY29wZVttZXRob2ROYW1lXSA9IGFjdGlvbi5iaW5kKHNjb3BlLCBtZXRob2ROYW1lKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVCcmlkZ2VNZXRob2RzOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///32\n')},function(module,exports,__webpack_require__){"use strict";eval('\n/**\n *\n * @constructor\n */\n\nfunction Storage() {\n  this._items = {};\n}\n/**\n * @returns {void}\n */\n\n\nStorage.prototype.clear = function () {\n  this._items = {};\n};\n/**\n * @returns {number} number of items\n */\n\n\nStorage.prototype.count = function () {\n  return this.getKeys().length;\n};\n/**\n * @param {string} id - item identifier\n * @returns {void}\n */\n\n\nStorage.prototype.decrease = function (id) {\n  if (typeof this._items[id] !== "number") {\n    this._items[id] = 0;\n  }\n\n  this._items[id]--;\n};\n/**\n * @param {string} id - item identifier\n * @returns {object} item\n */\n\n\nStorage.prototype.getItem = function (id) {\n  return this._items[id];\n};\n/**\n * @returns {object} items\n */\n\n\nStorage.prototype.getItems = function () {\n  return this._items;\n};\n/**\n * @returns {string[]} keys of all items\n */\n\n\nStorage.prototype.getKeys = function () {\n  return Object.keys(this._items);\n};\n/**\n * @param {string} id - item identifier\n * @returns {void}\n */\n\n\nStorage.prototype.increase = function (id) {\n  if (typeof this._items[id] !== "number") {\n    this._items[id] = 0;\n  }\n\n  this._items[id]++;\n};\n/**\n * @param {string} id - item identifier\n * @returns {void}\n */\n\n\nStorage.prototype.removeItem = function (id) {\n  delete this._items[id];\n};\n/**\n *\n * @param {string} id - item identifier\n * @param {object} item - item to be saved\n * @returns {void}\n */\n\n\nStorage.prototype.setItem = function (id, item) {\n  this._items[id] = item;\n};\n/**\n *\n * @param {object} items - items to be saved\n * @returns {void}\n */\n\n\nStorage.prototype.setItems = function (items) {\n  for (var key in items) {\n    if (items.hasOwnProperty(key)) {\n      this.setItem(key, items[key]);\n    }\n  }\n};\n\nmodule.exports = Storage;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9zdG9yYWdlLmpzPzRiYWIiXSwibmFtZXMiOlsiU3RvcmFnZSIsIl9pdGVtcyIsInByb3RvdHlwZSIsImNsZWFyIiwiY291bnQiLCJnZXRLZXlzIiwibGVuZ3RoIiwiZGVjcmVhc2UiLCJpZCIsImdldEl0ZW0iLCJnZXRJdGVtcyIsIk9iamVjdCIsImtleXMiLCJpbmNyZWFzZSIsInJlbW92ZUl0ZW0iLCJzZXRJdGVtIiwiaXRlbSIsInNldEl0ZW1zIiwiaXRlbXMiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhO0FBRWI7Ozs7O0FBSUEsU0FBU0EsT0FBVCxHQUFvQjtBQUNsQixPQUFLQyxNQUFMLEdBQWMsRUFBZDtBQUNEO0FBRUQ7Ozs7O0FBR0FELE9BQU8sQ0FBQ0UsU0FBUixDQUFrQkMsS0FBbEIsR0FBMEIsWUFBWTtBQUNwQyxPQUFLRixNQUFMLEdBQWMsRUFBZDtBQUNELENBRkQ7QUFJQTs7Ozs7QUFHQUQsT0FBTyxDQUFDRSxTQUFSLENBQWtCRSxLQUFsQixHQUEwQixZQUFZO0FBQ3BDLFNBQU8sS0FBS0MsT0FBTCxHQUFlQyxNQUF0QjtBQUNELENBRkQ7QUFJQTs7Ozs7O0FBSUFOLE9BQU8sQ0FBQ0UsU0FBUixDQUFrQkssUUFBbEIsR0FBNkIsVUFBVUMsRUFBVixFQUFjO0FBQ3pDLE1BQUksT0FBTyxLQUFLUCxNQUFMLENBQVlPLEVBQVosQ0FBUCxLQUEyQixRQUEvQixFQUF5QztBQUN2QyxTQUFLUCxNQUFMLENBQVlPLEVBQVosSUFBa0IsQ0FBbEI7QUFDRDs7QUFDRCxPQUFLUCxNQUFMLENBQVlPLEVBQVo7QUFDRCxDQUxEO0FBT0E7Ozs7OztBQUlBUixPQUFPLENBQUNFLFNBQVIsQ0FBa0JPLE9BQWxCLEdBQTRCLFVBQVVELEVBQVYsRUFBYztBQUN4QyxTQUFPLEtBQUtQLE1BQUwsQ0FBWU8sRUFBWixDQUFQO0FBQ0QsQ0FGRDtBQUlBOzs7OztBQUdBUixPQUFPLENBQUNFLFNBQVIsQ0FBa0JRLFFBQWxCLEdBQTZCLFlBQVk7QUFDdkMsU0FBTyxLQUFLVCxNQUFaO0FBQ0QsQ0FGRDtBQUlBOzs7OztBQUdBRCxPQUFPLENBQUNFLFNBQVIsQ0FBa0JHLE9BQWxCLEdBQTRCLFlBQVk7QUFDdEMsU0FBT00sTUFBTSxDQUFDQyxJQUFQLENBQVksS0FBS1gsTUFBakIsQ0FBUDtBQUNELENBRkQ7QUFJQTs7Ozs7O0FBSUFELE9BQU8sQ0FBQ0UsU0FBUixDQUFrQlcsUUFBbEIsR0FBNkIsVUFBVUwsRUFBVixFQUFjO0FBQ3pDLE1BQUksT0FBTyxLQUFLUCxNQUFMLENBQVlPLEVBQVosQ0FBUCxLQUEyQixRQUEvQixFQUF5QztBQUN2QyxTQUFLUCxNQUFMLENBQVlPLEVBQVosSUFBa0IsQ0FBbEI7QUFDRDs7QUFDRCxPQUFLUCxNQUFMLENBQVlPLEVBQVo7QUFDRCxDQUxEO0FBT0E7Ozs7OztBQUlBUixPQUFPLENBQUNFLFNBQVIsQ0FBa0JZLFVBQWxCLEdBQStCLFVBQVVOLEVBQVYsRUFBYztBQUMzQyxTQUFPLEtBQUtQLE1BQUwsQ0FBWU8sRUFBWixDQUFQO0FBQ0QsQ0FGRDtBQUlBOzs7Ozs7OztBQU1BUixPQUFPLENBQUNFLFNBQVIsQ0FBa0JhLE9BQWxCLEdBQTRCLFVBQVVQLEVBQVYsRUFBY1EsSUFBZCxFQUFvQjtBQUM5QyxPQUFLZixNQUFMLENBQVlPLEVBQVosSUFBa0JRLElBQWxCO0FBQ0QsQ0FGRDtBQUlBOzs7Ozs7O0FBS0FoQixPQUFPLENBQUNFLFNBQVIsQ0FBa0JlLFFBQWxCLEdBQTZCLFVBQVVDLEtBQVYsRUFBaUI7QUFDNUMsT0FBSyxJQUFJQyxHQUFULElBQWdCRCxLQUFoQixFQUF1QjtBQUNyQixRQUFJQSxLQUFLLENBQUNFLGNBQU4sQ0FBcUJELEdBQXJCLENBQUosRUFBK0I7QUFDN0IsV0FBS0osT0FBTCxDQUFhSSxHQUFiLEVBQWtCRCxLQUFLLENBQUNDLEdBQUQsQ0FBdkI7QUFDRDtBQUNGO0FBQ0YsQ0FORDs7QUFRQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCdEIsT0FBakIiLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFN0b3JhZ2UgKCkge1xuICB0aGlzLl9pdGVtcyA9IHt9O1xufVxuXG4vKipcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5TdG9yYWdlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5faXRlbXMgPSB7fTtcbn07XG5cbi8qKlxuICogQHJldHVybnMge251bWJlcn0gbnVtYmVyIG9mIGl0ZW1zXG4gKi9cblN0b3JhZ2UucHJvdG90eXBlLmNvdW50ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5nZXRLZXlzKCkubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBpdGVtIGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5TdG9yYWdlLnByb3RvdHlwZS5kZWNyZWFzZSA9IGZ1bmN0aW9uIChpZCkge1xuICBpZiAodHlwZW9mIHRoaXMuX2l0ZW1zW2lkXSAhPT0gXCJudW1iZXJcIikge1xuICAgIHRoaXMuX2l0ZW1zW2lkXSA9IDA7XG4gIH1cbiAgdGhpcy5faXRlbXNbaWRdLS07XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIGl0ZW0gaWRlbnRpZmllclxuICogQHJldHVybnMge29iamVjdH0gaXRlbVxuICovXG5TdG9yYWdlLnByb3RvdHlwZS5nZXRJdGVtID0gZnVuY3Rpb24gKGlkKSB7XG4gIHJldHVybiB0aGlzLl9pdGVtc1tpZF07XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHtvYmplY3R9IGl0ZW1zXG4gKi9cblN0b3JhZ2UucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5faXRlbXM7XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHtzdHJpbmdbXX0ga2V5cyBvZiBhbGwgaXRlbXNcbiAqL1xuU3RvcmFnZS5wcm90b3R5cGUuZ2V0S2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2l0ZW1zKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gaXRlbSBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuU3RvcmFnZS5wcm90b3R5cGUuaW5jcmVhc2UgPSBmdW5jdGlvbiAoaWQpIHtcbiAgaWYgKHR5cGVvZiB0aGlzLl9pdGVtc1tpZF0gIT09IFwibnVtYmVyXCIpIHtcbiAgICB0aGlzLl9pdGVtc1tpZF0gPSAwO1xuICB9XG4gIHRoaXMuX2l0ZW1zW2lkXSsrO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBpdGVtIGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5TdG9yYWdlLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGlkKSB7XG4gIGRlbGV0ZSB0aGlzLl9pdGVtc1tpZF07XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBpdGVtIGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtIC0gaXRlbSB0byBiZSBzYXZlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblN0b3JhZ2UucHJvdG90eXBlLnNldEl0ZW0gPSBmdW5jdGlvbiAoaWQsIGl0ZW0pIHtcbiAgdGhpcy5faXRlbXNbaWRdID0gaXRlbTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtcyAtIGl0ZW1zIHRvIGJlIHNhdmVkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuU3RvcmFnZS5wcm90b3R5cGUuc2V0SXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgZm9yIChsZXQga2V5IGluIGl0ZW1zKSB7XG4gICAgaWYgKGl0ZW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHRoaXMuc2V0SXRlbShrZXksIGl0ZW1zW2tleV0pXG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0b3JhZ2U7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///33\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nfunction join() {\n  var pathString = "",\n      arg;\n\n  for (var i = 0, j = arguments.length; i < j; i++) {\n    arg = arguments[i].replace(/^\\.\\//g, "/"); // don\'t add to the last one\n\n    pathString += arg;\n\n    if (i < j - 1) {\n      pathString += "/";\n    }\n  }\n\n  pathString = pathString.replace(/\\/{2,}/g, "/");\n  pathString = pathString.replace("https:/", "https://");\n  pathString = pathString.replace("http:/", "http://");\n  pathString = pathString.replace("file:/", "file://");\n  return pathString;\n}\n\nfunction joinPath() {\n  return join.apply(null, arguments) + "/";\n}\n\nfunction joinPathWithFile() {\n  return join.apply(null, arguments);\n}\n\nmodule.exports = {\n  joinPath: joinPath,\n  joinPathWithFile: joinPathWithFile\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC91cmwuanM/NWFkOCJdLCJuYW1lcyI6WyJqb2luIiwicGF0aFN0cmluZyIsImFyZyIsImkiLCJqIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicmVwbGFjZSIsImpvaW5QYXRoIiwiYXBwbHkiLCJqb2luUGF0aFdpdGhGaWxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsU0FBU0EsSUFBVCxHQUFpQjtBQUNmLE1BQUlDLFVBQVUsR0FBRyxFQUFqQjtBQUFBLE1BQXFCQyxHQUFyQjs7QUFDQSxPQUFLLElBQUlDLENBQUMsR0FBRyxDQUFSLEVBQVdDLENBQUMsR0FBR0MsU0FBUyxDQUFDQyxNQUE5QixFQUFzQ0gsQ0FBQyxHQUFHQyxDQUExQyxFQUE2Q0QsQ0FBQyxFQUE5QyxFQUFrRDtBQUNoREQsT0FBRyxHQUFHRyxTQUFTLENBQUNGLENBQUQsQ0FBVCxDQUFhSSxPQUFiLENBQXFCLFFBQXJCLEVBQStCLEdBQS9CLENBQU4sQ0FEZ0QsQ0FFaEQ7O0FBQ0FOLGNBQVUsSUFBSUMsR0FBZDs7QUFDQSxRQUFJQyxDQUFDLEdBQUdDLENBQUMsR0FBRyxDQUFaLEVBQWU7QUFDYkgsZ0JBQVUsSUFBSSxHQUFkO0FBQ0Q7QUFDRjs7QUFDREEsWUFBVSxHQUFHQSxVQUFVLENBQUNNLE9BQVgsQ0FBbUIsU0FBbkIsRUFBOEIsR0FBOUIsQ0FBYjtBQUNBTixZQUFVLEdBQUdBLFVBQVUsQ0FBQ00sT0FBWCxDQUFtQixTQUFuQixFQUE4QixVQUE5QixDQUFiO0FBQ0FOLFlBQVUsR0FBR0EsVUFBVSxDQUFDTSxPQUFYLENBQW1CLFFBQW5CLEVBQTZCLFNBQTdCLENBQWI7QUFDQU4sWUFBVSxHQUFHQSxVQUFVLENBQUNNLE9BQVgsQ0FBbUIsUUFBbkIsRUFBNkIsU0FBN0IsQ0FBYjtBQUNBLFNBQU9OLFVBQVA7QUFDRDs7QUFFRCxTQUFTTyxRQUFULEdBQXFCO0FBQ25CLFNBQU9SLElBQUksQ0FBQ1MsS0FBTCxDQUFXLElBQVgsRUFBaUJKLFNBQWpCLElBQThCLEdBQXJDO0FBQ0Q7O0FBRUQsU0FBU0ssZ0JBQVQsR0FBNkI7QUFDM0IsU0FBT1YsSUFBSSxDQUFDUyxLQUFMLENBQVcsSUFBWCxFQUFpQkosU0FBakIsQ0FBUDtBQUNEOztBQUVETSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZkosVUFBUSxFQUFFQSxRQURLO0FBRWZFLGtCQUFnQixFQUFFQTtBQUZILENBQWpCIiwiZmlsZSI6IjM0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIGpvaW4gKCkge1xuICBsZXQgcGF0aFN0cmluZyA9IFwiXCIsIGFyZztcbiAgZm9yIChsZXQgaSA9IDAsIGogPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgYXJnID0gYXJndW1lbnRzW2ldLnJlcGxhY2UoL15cXC5cXC8vZywgXCIvXCIpO1xuICAgIC8vIGRvbid0IGFkZCB0byB0aGUgbGFzdCBvbmVcbiAgICBwYXRoU3RyaW5nICs9IGFyZztcbiAgICBpZiAoaSA8IGogLSAxKSB7XG4gICAgICBwYXRoU3RyaW5nICs9IFwiL1wiO1xuICAgIH1cbiAgfVxuICBwYXRoU3RyaW5nID0gcGF0aFN0cmluZy5yZXBsYWNlKC9cXC97Mix9L2csIFwiL1wiKTtcbiAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZShcImh0dHBzOi9cIiwgXCJodHRwczovL1wiKTtcbiAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZShcImh0dHA6L1wiLCBcImh0dHA6Ly9cIik7XG4gIHBhdGhTdHJpbmcgPSBwYXRoU3RyaW5nLnJlcGxhY2UoXCJmaWxlOi9cIiwgXCJmaWxlOi8vXCIpO1xuICByZXR1cm4gcGF0aFN0cmluZztcbn1cblxuZnVuY3Rpb24gam9pblBhdGggKCkge1xuICByZXR1cm4gam9pbi5hcHBseShudWxsLCBhcmd1bWVudHMpICsgXCIvXCI7XG59XG5cbmZ1bmN0aW9uIGpvaW5QYXRoV2l0aEZpbGUgKCkge1xuICByZXR1cm4gam9pbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgam9pblBhdGg6IGpvaW5QYXRoLFxuICBqb2luUGF0aFdpdGhGaWxlOiBqb2luUGF0aFdpdGhGaWxlXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///34\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar jsonfile = __webpack_require__(29);\n\nvar path = __webpack_require__(4);\n\nvar appSettings = __webpack_require__(1);\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {string} itemName - item name\n * @returns {Promise} promise\n * @constructor\n */\n\n\nfunction ReadItem(manifestId, itemName) {\n  if (!manifestId) {\n    throw new Error("manifestId is missing");\n  }\n\n  this._manifestId = manifestId;\n  this._itemName = itemName;\n  return new Promise(this._read.bind(this));\n}\n/**\n *\n * @param {function} resolve - callback to be invoked on finish\n * @private\n * @returns {void}\n */\n\n\nReadItem.prototype._read = function (resolve) {\n  var fileUrl = path.resolve(appSettings.getSettings().settingsFolder + "/" + this._manifestId + "/" + this._itemName + ".json");\n  jsonfile.readFile(fileUrl, function (err, data) {\n    if (err) {\n      resolve();\n    } else {\n      resolve(data);\n    }\n  });\n};\n\nmodule.exports = ReadItem;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL3JlYWQtaXRlbS5qcz9kMWExIl0sIm5hbWVzIjpbImpzb25maWxlIiwicmVxdWlyZSIsInBhdGgiLCJhcHBTZXR0aW5ncyIsIlJlYWRJdGVtIiwibWFuaWZlc3RJZCIsIml0ZW1OYW1lIiwiRXJyb3IiLCJfbWFuaWZlc3RJZCIsIl9pdGVtTmFtZSIsIlByb21pc2UiLCJfcmVhZCIsImJpbmQiLCJwcm90b3R5cGUiLCJyZXNvbHZlIiwiZmlsZVVybCIsImdldFNldHRpbmdzIiwic2V0dGluZ3NGb2xkZXIiLCJyZWFkRmlsZSIsImVyciIsImRhdGEiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxRQUFRLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUF4Qjs7QUFDQSxJQUFNQyxJQUFJLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUFwQjs7QUFFQSxJQUFNRSxXQUFXLEdBQUdGLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjtBQUVBOzs7Ozs7Ozs7QUFPQSxTQUFTRyxRQUFULENBQW1CQyxVQUFuQixFQUErQkMsUUFBL0IsRUFBeUM7QUFDdkMsTUFBSSxDQUFDRCxVQUFMLEVBQWlCO0FBQ2YsVUFBTSxJQUFJRSxLQUFKLENBQVUsdUJBQVYsQ0FBTjtBQUNEOztBQUNELE9BQUtDLFdBQUwsR0FBbUJILFVBQW5CO0FBQ0EsT0FBS0ksU0FBTCxHQUFpQkgsUUFBakI7QUFDQSxTQUFPLElBQUlJLE9BQUosQ0FBWSxLQUFLQyxLQUFMLENBQVdDLElBQVgsQ0FBZ0IsSUFBaEIsQ0FBWixDQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7QUFNQVIsUUFBUSxDQUFDUyxTQUFULENBQW1CRixLQUFuQixHQUEyQixVQUFVRyxPQUFWLEVBQW1CO0FBQzVDLE1BQU1DLE9BQU8sR0FBR2IsSUFBSSxDQUFDWSxPQUFMLENBQWFYLFdBQVcsQ0FBQ2EsV0FBWixHQUEwQkMsY0FBMUIsR0FBMkMsR0FBM0MsR0FBaUQsS0FBS1QsV0FBdEQsR0FBb0UsR0FBcEUsR0FBMEUsS0FBS0MsU0FBL0UsR0FBMkYsT0FBeEcsQ0FBaEI7QUFDQVQsVUFBUSxDQUFDa0IsUUFBVCxDQUFrQkgsT0FBbEIsRUFBMkIsVUFBVUksR0FBVixFQUFlQyxJQUFmLEVBQXFCO0FBQzlDLFFBQUlELEdBQUosRUFBUztBQUNQTCxhQUFPO0FBQ1IsS0FGRCxNQUVPO0FBQ0xBLGFBQU8sQ0FBQ00sSUFBRCxDQUFQO0FBQ0Q7QUFDRixHQU5EO0FBT0QsQ0FURDs7QUFXQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCbEIsUUFBakIiLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IGpzb25maWxlID0gcmVxdWlyZSgnanNvbmZpbGUnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcblxuY29uc3QgYXBwU2V0dGluZ3MgPSByZXF1aXJlKCcuLi9hcHAtc2V0dGluZ3MnKTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gaXRlbU5hbWUgLSBpdGVtIG5hbWVcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gUmVhZEl0ZW0gKG1hbmlmZXN0SWQsIGl0ZW1OYW1lKSB7XG4gIGlmICghbWFuaWZlc3RJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIm1hbmlmZXN0SWQgaXMgbWlzc2luZ1wiKTtcbiAgfVxuICB0aGlzLl9tYW5pZmVzdElkID0gbWFuaWZlc3RJZDtcbiAgdGhpcy5faXRlbU5hbWUgPSBpdGVtTmFtZTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHRoaXMuX3JlYWQuYmluZCh0aGlzKSk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmUgLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIG9uIGZpbmlzaFxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5SZWFkSXRlbS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAocmVzb2x2ZSkge1xuICBjb25zdCBmaWxlVXJsID0gcGF0aC5yZXNvbHZlKGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc2V0dGluZ3NGb2xkZXIgKyBcIi9cIiArIHRoaXMuX21hbmlmZXN0SWQgKyBcIi9cIiArIHRoaXMuX2l0ZW1OYW1lICsgXCIuanNvblwiKTtcbiAganNvbmZpbGUucmVhZEZpbGUoZmlsZVVybCwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICB9XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFkSXRlbTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///35\n')},,,function(Q,F,B){Q.exports=B(39)},function(module,exports,__webpack_require__){"use strict";eval('/*eslint no-console: ["error", { allow: ["warn", "error", "info"] }] */\n\n\nvar _ = __webpack_require__(5);\n\nvar Snowflake = __webpack_require__(9);\n\nvar appSettings = __webpack_require__(1);\n\nvar beMethods = __webpack_require__(42);\n\nvar DownloadsController = __webpack_require__(83);\n\nvar ManifestController = __webpack_require__(96);\n\nvar OfflineController = __webpack_require__(99);\n\nvar SubscribersController = __webpack_require__(102);\n\nvar Server = __webpack_require__(103);\n\nvar DownstreamElectronBE;\n\nfunction deserialize(serializedJavascript) {\n  try {\n    return JSON.parse(serializedJavascript);\n  } catch (err) {\n    return {};\n  }\n}\n/**\n * @constructor\n * @namespace DownstreamElectronBE\n * @param {object} configParams - configuration\n * @property {DownstreamElectronBE.init} init - initialize api in main process\n * @description\n * During initialization you can configure your app, [click here]{@link DownstreamElectronBE.configuration}\n *\n * @example\n * //somewhere in the main process\n * const { BrowserWindow, app } = require(\'electron\');\n * const downstreamElectron = require(\'downstream-electron\');\n *\n * const userSettings = {\n *   "appDir": "/Users/admin/myApp",\n *   "settingsName": "settings",\n *   "publicName": "public",\n *   "downloadsName": "movies"\n * };\n *\n * let downstreamInstance;\n * function createWindow() {\n *   downstreamInstance = downstreamElectron.init(userSettings);\n *   const win = new BrowserWindow({\n *     width: 1200,\n *     height: 700,\n *     resizable: true,\n *     webPreferences: {\n *       plugins: true,\n *       nodeIntegration: true\n *     }\n *   });\n *   win.loadURL(\'file://index.html\');\n *   win.webContents.openDevTools();\n * }\n *\n * function onWillQuit() {\n *  downstreamInstance.stop();\n * }\n *\n * app.on(\'ready\', createWindow);\n * app.on(\'will-quit\', onWillQuit);\n * app.on(\'window-all-closed\', function () {\n *  console.log("window-all-closed");\n *  app.quit();\n * });\n */\n\n\nDownstreamElectronBE = function DownstreamElectronBE() {\n  this._offlineContentPort = appSettings.getSettings().offlineContentPortStart;\n\n  _.bindAll(this, "_onApiRequest", "processSubscriber");\n\n  this._createControllers();\n\n  this._serveOfflineContent();\n\n  this._attachEvents(); // this.offlineController.restoreLocalManifest("6163760572308389888");\n\n};\n\nDownstreamElectronBE.prototype.stop = function () {\n  this.server.stop();\n};\n/**\n *\n * @param {string} methodName - api function\n * @param {string} promiseId - promise identifier\n * @param {object} args - arguments\n * @param {number} target - target window id\n * @private\n * @returns {void}\n */\n\n\nDownstreamElectronBE.prototype._apiMethods = function (methodName, promiseId, args, target) {\n  var self = this;\n  var manifestId = args[0];\n  var response = {};\n  response.promiseId = promiseId;\n\n  var onSuccess = function onSuccess(result, subscribersId) {\n    response.subscribersId = subscribersId;\n    response.status = "OK";\n    response.result = result;\n    response.manifestId = manifestId;\n\n    self._send(response, target);\n  };\n\n  var onFailure = function onFailure(err, internalError) {\n    var errorId = String(Snowflake.SnowflakeId.getUUID());\n\n    var errorInfo = _.clone({\n      errorId: errorId,\n      methodName: methodName,\n      args: args.slice(4),\n      err: err,\n      internalError: internalError\n    });\n\n    response.manifestId = manifestId;\n    response.status = "ERROR";\n    response.error = err || {};\n    response.error.errorId = errorId;\n    response.error.details = internalError;\n\n    self._send(response, target); // @TODO log all errors that user have seen, the errorId will help to find stack\n\n\n    try {\n      console.error(new Date(), "Error occurred", JSON.stringify(errorInfo));\n    } catch (e) {//do nothing\n    }\n  };\n\n  args = args || [];\n  args.unshift(target);\n  args.unshift(onFailure);\n  args.unshift(onSuccess);\n  args.unshift(this);\n\n  var method = this._getMethod(methodName);\n\n  if (typeof method === "function") {\n    method.apply(null, args);\n  } else {\n    response.status = "ERROR";\n    response.error = "Provided method \'" + methodName + "\' doesn\'t exists";\n\n    this._send(response, target);\n\n    console.error("ERROR", "Provided method \'" + methodName + "\' doesn\'t exists");\n  }\n};\n/**\n *\n * @private\n * @returns {void}\n */\n\n\nDownstreamElectronBE.prototype._attachEvents = function () {\n  var ipcMain = __webpack_require__(2).ipcMain;\n\n  ipcMain.on("downstreamElectronBE", this._onApiRequest);\n};\n/**\n *\n * @private\n * @returns {void}\n */\n\n\nDownstreamElectronBE.prototype._createControllers = function () {\n  this.manifestController = new ManifestController();\n  this.offlineController = new OfflineController(this.manifestController);\n  this.downloadsController = new DownloadsController(this.manifestController, this.offlineController);\n  this.subscribersController = new SubscribersController();\n};\n/**\n *\n * @param {string} methodName - method name\n * @returns {*} - method\n * @private\n */\n\n\nDownstreamElectronBE.prototype._getMethod = function (methodName) {\n  var names = methodName.split(".");\n  var i, j, method;\n  method = beMethods[names[0]];\n\n  for (i = 1, j = names.length; i < j; i++) {\n    method = method[names[i]];\n  }\n\n  return method;\n};\n/**\n *\n * @param {object} evt - event\n * @param {object} data - data from renderer\n * @param {number} target - target window id\n * @private\n * @returns {void}\n */\n\n\nDownstreamElectronBE.prototype._onApiRequest = function (evt, data, target) {\n  var promiseId = data.promiseId;\n  var argsObj = deserialize(data.args) || {};\n  var method = data.method;\n  var windowId = data.windowId;\n  target = windowId;\n  var args = [];\n  var i = 0;\n\n  while (argsObj.hasOwnProperty(i)) {\n    args.push(argsObj[i]);\n    i++;\n  }\n\n  this._apiMethods(method, promiseId, args, target);\n};\n/**\n * @private\n * @param {object} response - response\n * @param {number} target - window target id\n * @returns {void}\n */\n\n\nDownstreamElectronBE.prototype._send = function (response, target) {\n  try {\n    var windows = __webpack_require__(2).BrowserWindow.getAllWindows();\n\n    for (var i = 0, j = windows.length; i < j; i++) {\n      if (windows[i].id === target) {\n        windows[i].webContents.send(\'downstreamElectronFE\', response);\n        break;\n      }\n    }\n  } catch (err) {\n    console.error("internal error ocurred", err);\n  }\n};\n/**\n * @private\n * @returns {void}\n */\n\n\nDownstreamElectronBE.prototype._serveOfflineContent = function () {\n  var self = this;\n  var maxOfflineContentPortRange = appSettings.getSettings().maxOfflineContentPortRange;\n  this.server = new Server(this.offlineController, this.downloadsController, maxOfflineContentPortRange, this._offlineContentPort);\n  this.server.serveOfflineContent(function (offlinePort) {\n    self._offlineContentPort = offlinePort;\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {string} - offline path\n */\n\n\nDownstreamElectronBE.prototype.getOfflinePath = function (manifestId) {\n  var offlinePath = appSettings.getSettings().offlineDomain;\n  var offlineContentPort = this._offlineContentPort;\n\n  if (offlineContentPort) {\n    offlinePath += ":" + offlineContentPort;\n  }\n\n  offlinePath += "/" + encodeURIComponent(appSettings.getSettings().downloadsName) + "/" + encodeURIComponent(manifestId) + "/";\n  return offlinePath;\n};\n/**\n *\n * @param {string} subscriberId - subscriber identifier\n * @param {object} err - error\n * @param {object} result - result\n * @param {number} target - window target id\n * @param {boolean} subscriberFinished - download finished\n * @returns {void}\n */\n\n\nDownstreamElectronBE.prototype.processSubscriber = function (subscriberId, err, result, target, subscriberFinished) {\n  var response = {};\n  response.subscriberId = subscriberId;\n  response.status = err ? "ERROR" : "OK";\n  response.err = err;\n  response.result = result;\n  response.subscriberFinished = subscriberFinished;\n\n  this._send(response, target);\n\n  if (subscriberFinished) {\n    this.subscribersController.removeAllManifestSubscribersById(subscriberId);\n  }\n}; //---------------------------\n\n\nmodule.exports = {\n  init: function init(userSettings) {\n    appSettings.load(userSettings);\n    return new DownstreamElectronBE();\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bnN0cmVhbS1lbGVjdHJvbi1iZS5qcz8wOGYwIl0sIm5hbWVzIjpbIl8iLCJyZXF1aXJlIiwiU25vd2ZsYWtlIiwiYXBwU2V0dGluZ3MiLCJiZU1ldGhvZHMiLCJEb3dubG9hZHNDb250cm9sbGVyIiwiTWFuaWZlc3RDb250cm9sbGVyIiwiT2ZmbGluZUNvbnRyb2xsZXIiLCJTdWJzY3JpYmVyc0NvbnRyb2xsZXIiLCJTZXJ2ZXIiLCJEb3duc3RyZWFtRWxlY3Ryb25CRSIsImRlc2VyaWFsaXplIiwic2VyaWFsaXplZEphdmFzY3JpcHQiLCJKU09OIiwicGFyc2UiLCJlcnIiLCJfb2ZmbGluZUNvbnRlbnRQb3J0IiwiZ2V0U2V0dGluZ3MiLCJvZmZsaW5lQ29udGVudFBvcnRTdGFydCIsImJpbmRBbGwiLCJfY3JlYXRlQ29udHJvbGxlcnMiLCJfc2VydmVPZmZsaW5lQ29udGVudCIsIl9hdHRhY2hFdmVudHMiLCJwcm90b3R5cGUiLCJzdG9wIiwic2VydmVyIiwiX2FwaU1ldGhvZHMiLCJtZXRob2ROYW1lIiwicHJvbWlzZUlkIiwiYXJncyIsInRhcmdldCIsInNlbGYiLCJtYW5pZmVzdElkIiwicmVzcG9uc2UiLCJvblN1Y2Nlc3MiLCJyZXN1bHQiLCJzdWJzY3JpYmVyc0lkIiwic3RhdHVzIiwiX3NlbmQiLCJvbkZhaWx1cmUiLCJpbnRlcm5hbEVycm9yIiwiZXJyb3JJZCIsIlN0cmluZyIsIlNub3dmbGFrZUlkIiwiZ2V0VVVJRCIsImVycm9ySW5mbyIsImNsb25lIiwic2xpY2UiLCJlcnJvciIsImRldGFpbHMiLCJjb25zb2xlIiwiRGF0ZSIsInN0cmluZ2lmeSIsImUiLCJ1bnNoaWZ0IiwibWV0aG9kIiwiX2dldE1ldGhvZCIsImFwcGx5IiwiaXBjTWFpbiIsIm9uIiwiX29uQXBpUmVxdWVzdCIsIm1hbmlmZXN0Q29udHJvbGxlciIsIm9mZmxpbmVDb250cm9sbGVyIiwiZG93bmxvYWRzQ29udHJvbGxlciIsInN1YnNjcmliZXJzQ29udHJvbGxlciIsIm5hbWVzIiwic3BsaXQiLCJpIiwiaiIsImxlbmd0aCIsImV2dCIsImRhdGEiLCJhcmdzT2JqIiwid2luZG93SWQiLCJoYXNPd25Qcm9wZXJ0eSIsInB1c2giLCJ3aW5kb3dzIiwiQnJvd3NlcldpbmRvdyIsImdldEFsbFdpbmRvd3MiLCJpZCIsIndlYkNvbnRlbnRzIiwic2VuZCIsIm1heE9mZmxpbmVDb250ZW50UG9ydFJhbmdlIiwic2VydmVPZmZsaW5lQ29udGVudCIsIm9mZmxpbmVQb3J0IiwiZ2V0T2ZmbGluZVBhdGgiLCJvZmZsaW5lUGF0aCIsIm9mZmxpbmVEb21haW4iLCJvZmZsaW5lQ29udGVudFBvcnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJkb3dubG9hZHNOYW1lIiwicHJvY2Vzc1N1YnNjcmliZXIiLCJzdWJzY3JpYmVySWQiLCJzdWJzY3JpYmVyRmluaXNoZWQiLCJyZW1vdmVBbGxNYW5pZmVzdFN1YnNjcmliZXJzQnlJZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJpbml0IiwidXNlclNldHRpbmdzIiwibG9hZCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDYTs7QUFDYixJQUFNQSxDQUFDLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUFqQjs7QUFDQSxJQUFNQyxTQUFTLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUF6Qjs7QUFFQSxJQUFNRSxXQUFXLEdBQUdGLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNRyxTQUFTLEdBQUdILG1CQUFPLENBQUMsRUFBRCxDQUF6Qjs7QUFDQSxJQUFNSSxtQkFBbUIsR0FBR0osbUJBQU8sQ0FBQyxFQUFELENBQW5DOztBQUNBLElBQU1LLGtCQUFrQixHQUFHTCxtQkFBTyxDQUFDLEVBQUQsQ0FBbEM7O0FBQ0EsSUFBTU0saUJBQWlCLEdBQUdOLG1CQUFPLENBQUMsRUFBRCxDQUFqQzs7QUFDQSxJQUFNTyxxQkFBcUIsR0FBR1AsbUJBQU8sQ0FBQyxHQUFELENBQXJDOztBQUNBLElBQU1RLE1BQU0sR0FBR1IsbUJBQU8sQ0FBQyxHQUFELENBQXRCOztBQUVBLElBQUlTLG9CQUFKOztBQUVBLFNBQVNDLFdBQVQsQ0FBc0JDLG9CQUF0QixFQUE0QztBQUMxQyxNQUFJO0FBQ0YsV0FBT0MsSUFBSSxDQUFDQyxLQUFMLENBQVdGLG9CQUFYLENBQVA7QUFDRCxHQUZELENBRUUsT0FBT0csR0FBUCxFQUFZO0FBQ1osV0FBTyxFQUFQO0FBQ0Q7QUFDRjtBQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBK0NBTCxvQkFBb0IsR0FBRyxnQ0FBWTtBQUNqQyxPQUFLTSxtQkFBTCxHQUEyQmIsV0FBVyxDQUFDYyxXQUFaLEdBQTBCQyx1QkFBckQ7O0FBQ0FsQixHQUFDLENBQUNtQixPQUFGLENBQVUsSUFBVixFQUFnQixlQUFoQixFQUFpQyxtQkFBakM7O0FBQ0EsT0FBS0Msa0JBQUw7O0FBQ0EsT0FBS0Msb0JBQUw7O0FBQ0EsT0FBS0MsYUFBTCxHQUxpQyxDQU1qQzs7QUFDRCxDQVBEOztBQVNBWixvQkFBb0IsQ0FBQ2EsU0FBckIsQ0FBK0JDLElBQS9CLEdBQXNDLFlBQVk7QUFDaEQsT0FBS0MsTUFBTCxDQUFZRCxJQUFaO0FBQ0QsQ0FGRDtBQUlBOzs7Ozs7Ozs7OztBQVNBZCxvQkFBb0IsQ0FBQ2EsU0FBckIsQ0FBK0JHLFdBQS9CLEdBQTZDLFVBQVVDLFVBQVYsRUFBc0JDLFNBQXRCLEVBQWlDQyxJQUFqQyxFQUF1Q0MsTUFBdkMsRUFBK0M7QUFDMUYsTUFBTUMsSUFBSSxHQUFHLElBQWI7QUFDQSxNQUFNQyxVQUFVLEdBQUdILElBQUksQ0FBQyxDQUFELENBQXZCO0FBQ0EsTUFBSUksUUFBUSxHQUFHLEVBQWY7QUFDQUEsVUFBUSxDQUFDTCxTQUFULEdBQXFCQSxTQUFyQjs7QUFDQSxNQUFNTSxTQUFTLEdBQUcsU0FBWkEsU0FBWSxDQUFVQyxNQUFWLEVBQWtCQyxhQUFsQixFQUFpQztBQUNqREgsWUFBUSxDQUFDRyxhQUFULEdBQXlCQSxhQUF6QjtBQUNBSCxZQUFRLENBQUNJLE1BQVQsR0FBa0IsSUFBbEI7QUFDQUosWUFBUSxDQUFDRSxNQUFULEdBQWtCQSxNQUFsQjtBQUNBRixZQUFRLENBQUNELFVBQVQsR0FBc0JBLFVBQXRCOztBQUNBRCxRQUFJLENBQUNPLEtBQUwsQ0FBV0wsUUFBWCxFQUFxQkgsTUFBckI7QUFDRCxHQU5EOztBQU9BLE1BQU1TLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQVV4QixHQUFWLEVBQWV5QixhQUFmLEVBQThCO0FBQzlDLFFBQU1DLE9BQU8sR0FBR0MsTUFBTSxDQUFDeEMsU0FBUyxDQUFDeUMsV0FBVixDQUFzQkMsT0FBdEIsRUFBRCxDQUF0Qjs7QUFDQSxRQUFNQyxTQUFTLEdBQUc3QyxDQUFDLENBQUM4QyxLQUFGLENBQVE7QUFDeEJMLGFBQU8sRUFBRUEsT0FEZTtBQUV4QmQsZ0JBQVUsRUFBRUEsVUFGWTtBQUd4QkUsVUFBSSxFQUFFQSxJQUFJLENBQUNrQixLQUFMLENBQVcsQ0FBWCxDQUhrQjtBQUl4QmhDLFNBQUcsRUFBRUEsR0FKbUI7QUFLeEJ5QixtQkFBYSxFQUFFQTtBQUxTLEtBQVIsQ0FBbEI7O0FBT0FQLFlBQVEsQ0FBQ0QsVUFBVCxHQUFzQkEsVUFBdEI7QUFDQUMsWUFBUSxDQUFDSSxNQUFULEdBQWtCLE9BQWxCO0FBQ0FKLFlBQVEsQ0FBQ2UsS0FBVCxHQUFpQmpDLEdBQUcsSUFBSSxFQUF4QjtBQUNBa0IsWUFBUSxDQUFDZSxLQUFULENBQWVQLE9BQWYsR0FBeUJBLE9BQXpCO0FBQ0FSLFlBQVEsQ0FBQ2UsS0FBVCxDQUFlQyxPQUFmLEdBQXlCVCxhQUF6Qjs7QUFFQVQsUUFBSSxDQUFDTyxLQUFMLENBQVdMLFFBQVgsRUFBcUJILE1BQXJCLEVBZjhDLENBaUI5Qzs7O0FBQ0EsUUFBSTtBQUNGb0IsYUFBTyxDQUFDRixLQUFSLENBQWMsSUFBSUcsSUFBSixFQUFkLEVBQTBCLGdCQUExQixFQUE0Q3RDLElBQUksQ0FBQ3VDLFNBQUwsQ0FBZVAsU0FBZixDQUE1QztBQUNELEtBRkQsQ0FFRSxPQUFPUSxDQUFQLEVBQVUsQ0FDVjtBQUNEO0FBQ0YsR0F2QkQ7O0FBd0JBeEIsTUFBSSxHQUFHQSxJQUFJLElBQUksRUFBZjtBQUNBQSxNQUFJLENBQUN5QixPQUFMLENBQWF4QixNQUFiO0FBQ0FELE1BQUksQ0FBQ3lCLE9BQUwsQ0FBYWYsU0FBYjtBQUNBVixNQUFJLENBQUN5QixPQUFMLENBQWFwQixTQUFiO0FBQ0FMLE1BQUksQ0FBQ3lCLE9BQUwsQ0FBYSxJQUFiOztBQUNBLE1BQU1DLE1BQU0sR0FBRyxLQUFLQyxVQUFMLENBQWdCN0IsVUFBaEIsQ0FBZjs7QUFDQSxNQUFJLE9BQU80QixNQUFQLEtBQWtCLFVBQXRCLEVBQWtDO0FBQ2hDQSxVQUFNLENBQUNFLEtBQVAsQ0FBYSxJQUFiLEVBQW1CNUIsSUFBbkI7QUFDRCxHQUZELE1BRU87QUFDTEksWUFBUSxDQUFDSSxNQUFULEdBQWtCLE9BQWxCO0FBQ0FKLFlBQVEsQ0FBQ2UsS0FBVCxHQUFpQixzQkFBc0JyQixVQUF0QixHQUFtQyxrQkFBcEQ7O0FBQ0EsU0FBS1csS0FBTCxDQUFXTCxRQUFYLEVBQXFCSCxNQUFyQjs7QUFDQW9CLFdBQU8sQ0FBQ0YsS0FBUixDQUFjLE9BQWQsRUFBdUIsc0JBQXNCckIsVUFBdEIsR0FBbUMsa0JBQTFEO0FBQ0Q7QUFDRixDQWxERDtBQW9EQTs7Ozs7OztBQUtBakIsb0JBQW9CLENBQUNhLFNBQXJCLENBQStCRCxhQUEvQixHQUErQyxZQUFZO0FBQ3pELE1BQU1vQyxPQUFPLEdBQUd6RCxtQkFBTyxDQUFDLENBQUQsQ0FBUCxDQUFvQnlELE9BQXBDOztBQUNBQSxTQUFPLENBQUNDLEVBQVIsQ0FBVyxzQkFBWCxFQUFtQyxLQUFLQyxhQUF4QztBQUNELENBSEQ7QUFLQTs7Ozs7OztBQUtBbEQsb0JBQW9CLENBQUNhLFNBQXJCLENBQStCSCxrQkFBL0IsR0FBb0QsWUFBWTtBQUM5RCxPQUFLeUMsa0JBQUwsR0FBMEIsSUFBSXZELGtCQUFKLEVBQTFCO0FBQ0EsT0FBS3dELGlCQUFMLEdBQXlCLElBQUl2RCxpQkFBSixDQUFzQixLQUFLc0Qsa0JBQTNCLENBQXpCO0FBQ0EsT0FBS0UsbUJBQUwsR0FBMkIsSUFBSTFELG1CQUFKLENBQXdCLEtBQUt3RCxrQkFBN0IsRUFBaUQsS0FBS0MsaUJBQXRELENBQTNCO0FBQ0EsT0FBS0UscUJBQUwsR0FBNkIsSUFBSXhELHFCQUFKLEVBQTdCO0FBQ0QsQ0FMRDtBQU9BOzs7Ozs7OztBQU1BRSxvQkFBb0IsQ0FBQ2EsU0FBckIsQ0FBK0JpQyxVQUEvQixHQUE0QyxVQUFVN0IsVUFBVixFQUFzQjtBQUNoRSxNQUFNc0MsS0FBSyxHQUFHdEMsVUFBVSxDQUFDdUMsS0FBWCxDQUFpQixHQUFqQixDQUFkO0FBQ0EsTUFBSUMsQ0FBSixFQUFPQyxDQUFQLEVBQVViLE1BQVY7QUFDQUEsUUFBTSxHQUFHbkQsU0FBUyxDQUFDNkQsS0FBSyxDQUFDLENBQUQsQ0FBTixDQUFsQjs7QUFDQSxPQUFLRSxDQUFDLEdBQUcsQ0FBSixFQUFPQyxDQUFDLEdBQUdILEtBQUssQ0FBQ0ksTUFBdEIsRUFBOEJGLENBQUMsR0FBR0MsQ0FBbEMsRUFBcUNELENBQUMsRUFBdEMsRUFBMEM7QUFDeENaLFVBQU0sR0FBR0EsTUFBTSxDQUFDVSxLQUFLLENBQUNFLENBQUQsQ0FBTixDQUFmO0FBQ0Q7O0FBQ0QsU0FBT1osTUFBUDtBQUNELENBUkQ7QUFVQTs7Ozs7Ozs7OztBQVFBN0Msb0JBQW9CLENBQUNhLFNBQXJCLENBQStCcUMsYUFBL0IsR0FBK0MsVUFBVVUsR0FBVixFQUFlQyxJQUFmLEVBQXFCekMsTUFBckIsRUFBNkI7QUFDMUUsTUFBTUYsU0FBUyxHQUFHMkMsSUFBSSxDQUFDM0MsU0FBdkI7QUFDQSxNQUFNNEMsT0FBTyxHQUFHN0QsV0FBVyxDQUFDNEQsSUFBSSxDQUFDMUMsSUFBTixDQUFYLElBQTBCLEVBQTFDO0FBQ0EsTUFBTTBCLE1BQU0sR0FBR2dCLElBQUksQ0FBQ2hCLE1BQXBCO0FBQ0EsTUFBTWtCLFFBQVEsR0FBR0YsSUFBSSxDQUFDRSxRQUF0QjtBQUNBM0MsUUFBTSxHQUFHMkMsUUFBVDtBQUNBLE1BQUk1QyxJQUFJLEdBQUcsRUFBWDtBQUNBLE1BQUlzQyxDQUFDLEdBQUcsQ0FBUjs7QUFDQSxTQUFPSyxPQUFPLENBQUNFLGNBQVIsQ0FBdUJQLENBQXZCLENBQVAsRUFBa0M7QUFDaEN0QyxRQUFJLENBQUM4QyxJQUFMLENBQVVILE9BQU8sQ0FBQ0wsQ0FBRCxDQUFqQjtBQUNBQSxLQUFDO0FBQ0Y7O0FBQ0QsT0FBS3pDLFdBQUwsQ0FBaUI2QixNQUFqQixFQUF5QjNCLFNBQXpCLEVBQW9DQyxJQUFwQyxFQUEwQ0MsTUFBMUM7QUFDRCxDQWJEO0FBZUE7Ozs7Ozs7O0FBTUFwQixvQkFBb0IsQ0FBQ2EsU0FBckIsQ0FBK0JlLEtBQS9CLEdBQXVDLFVBQVVMLFFBQVYsRUFBb0JILE1BQXBCLEVBQTRCO0FBQ2pFLE1BQUk7QUFDRixRQUFNOEMsT0FBTyxHQUFHM0UsbUJBQU8sQ0FBQyxDQUFELENBQVAsQ0FBb0I0RSxhQUFwQixDQUFrQ0MsYUFBbEMsRUFBaEI7O0FBQ0EsU0FBSyxJQUFJWCxDQUFDLEdBQUcsQ0FBUixFQUFXQyxDQUFDLEdBQUdRLE9BQU8sQ0FBQ1AsTUFBNUIsRUFBb0NGLENBQUMsR0FBR0MsQ0FBeEMsRUFBMkNELENBQUMsRUFBNUMsRUFBZ0Q7QUFDOUMsVUFBSVMsT0FBTyxDQUFDVCxDQUFELENBQVAsQ0FBV1ksRUFBWCxLQUFrQmpELE1BQXRCLEVBQThCO0FBQzVCOEMsZUFBTyxDQUFDVCxDQUFELENBQVAsQ0FBV2EsV0FBWCxDQUF1QkMsSUFBdkIsQ0FBNEIsc0JBQTVCLEVBQW9EaEQsUUFBcEQ7QUFDQTtBQUNEO0FBQ0Y7QUFDRixHQVJELENBUUUsT0FBT2xCLEdBQVAsRUFBWTtBQUNabUMsV0FBTyxDQUFDRixLQUFSLENBQWMsd0JBQWQsRUFBd0NqQyxHQUF4QztBQUNEO0FBQ0YsQ0FaRDtBQWNBOzs7Ozs7QUFJQUwsb0JBQW9CLENBQUNhLFNBQXJCLENBQStCRixvQkFBL0IsR0FBc0QsWUFBWTtBQUNoRSxNQUFNVSxJQUFJLEdBQUcsSUFBYjtBQUNBLE1BQU1tRCwwQkFBMEIsR0FBRy9FLFdBQVcsQ0FBQ2MsV0FBWixHQUEwQmlFLDBCQUE3RDtBQUVBLE9BQUt6RCxNQUFMLEdBQWMsSUFBSWhCLE1BQUosQ0FBVyxLQUFLcUQsaUJBQWhCLEVBQW1DLEtBQUtDLG1CQUF4QyxFQUE2RG1CLDBCQUE3RCxFQUF5RixLQUFLbEUsbUJBQTlGLENBQWQ7QUFDQSxPQUFLUyxNQUFMLENBQVkwRCxtQkFBWixDQUFpQyxVQUFVQyxXQUFWLEVBQXVCO0FBQ3REckQsUUFBSSxDQUFDZixtQkFBTCxHQUEyQm9FLFdBQTNCO0FBQ0QsR0FGRDtBQUlELENBVEQ7QUFXQTs7Ozs7OztBQUtBMUUsb0JBQW9CLENBQUNhLFNBQXJCLENBQStCOEQsY0FBL0IsR0FBZ0QsVUFBVXJELFVBQVYsRUFBc0I7QUFDcEUsTUFBSXNELFdBQVcsR0FBR25GLFdBQVcsQ0FBQ2MsV0FBWixHQUEwQnNFLGFBQTVDO0FBQ0EsTUFBSUMsa0JBQWtCLEdBQUcsS0FBS3hFLG1CQUE5Qjs7QUFDQSxNQUFJd0Usa0JBQUosRUFBd0I7QUFDdEJGLGVBQVcsSUFBSSxNQUFNRSxrQkFBckI7QUFDRDs7QUFDREYsYUFBVyxJQUFJLE1BQU1HLGtCQUFrQixDQUFDdEYsV0FBVyxDQUFDYyxXQUFaLEdBQTBCeUUsYUFBM0IsQ0FBeEIsR0FBb0UsR0FBcEUsR0FBMEVELGtCQUFrQixDQUFDekQsVUFBRCxDQUE1RixHQUEyRyxHQUExSDtBQUNBLFNBQU9zRCxXQUFQO0FBQ0QsQ0FSRDtBQVVBOzs7Ozs7Ozs7OztBQVNBNUUsb0JBQW9CLENBQUNhLFNBQXJCLENBQStCb0UsaUJBQS9CLEdBQW1ELFVBQVVDLFlBQVYsRUFBd0I3RSxHQUF4QixFQUE2Qm9CLE1BQTdCLEVBQXFDTCxNQUFyQyxFQUE2QytELGtCQUE3QyxFQUFpRTtBQUNsSCxNQUFJNUQsUUFBUSxHQUFHLEVBQWY7QUFDQUEsVUFBUSxDQUFDMkQsWUFBVCxHQUF3QkEsWUFBeEI7QUFDQTNELFVBQVEsQ0FBQ0ksTUFBVCxHQUFrQnRCLEdBQUcsR0FBRyxPQUFILEdBQWEsSUFBbEM7QUFDQWtCLFVBQVEsQ0FBQ2xCLEdBQVQsR0FBZUEsR0FBZjtBQUNBa0IsVUFBUSxDQUFDRSxNQUFULEdBQWtCQSxNQUFsQjtBQUNBRixVQUFRLENBQUM0RCxrQkFBVCxHQUE4QkEsa0JBQTlCOztBQUNBLE9BQUt2RCxLQUFMLENBQVdMLFFBQVgsRUFBcUJILE1BQXJCOztBQUNBLE1BQUkrRCxrQkFBSixFQUF3QjtBQUN0QixTQUFLN0IscUJBQUwsQ0FBMkI4QixnQ0FBM0IsQ0FBNERGLFlBQTVEO0FBQ0Q7QUFDRixDQVhELEMsQ0FhQTs7O0FBQ0FHLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUNmQyxNQUFJLEVBQUUsY0FBVUMsWUFBVixFQUF3QjtBQUM1Qi9GLGVBQVcsQ0FBQ2dHLElBQVosQ0FBaUJELFlBQWpCO0FBQ0EsV0FBTyxJQUFJeEYsb0JBQUosRUFBUDtBQUNEO0FBSmMsQ0FBakIiLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmVzbGludCBuby1jb25zb2xlOiBbXCJlcnJvclwiLCB7IGFsbG93OiBbXCJ3YXJuXCIsIFwiZXJyb3JcIiwgXCJpbmZvXCJdIH1dICovXG5cInVzZSBzdHJpY3RcIjtcbmNvbnN0IF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG5jb25zdCBTbm93Zmxha2UgPSByZXF1aXJlKFwiLi91dGlsL3Nub3dmbGFrZS1pZFwiKTtcblxuY29uc3QgYXBwU2V0dGluZ3MgPSByZXF1aXJlKCcuL2FwcC1zZXR0aW5ncycpO1xuY29uc3QgYmVNZXRob2RzID0gcmVxdWlyZSgnLi9iZS1tZXRob2RzLWFsbCcpO1xuY29uc3QgRG93bmxvYWRzQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vY29udHJvbGxlcnMvZG93bmxvYWRzLWNvbnRyb2xsZXInKTtcbmNvbnN0IE1hbmlmZXN0Q29udHJvbGxlciA9IHJlcXVpcmUoJy4vY29udHJvbGxlcnMvbWFuaWZlc3QtY29udHJvbGxlcicpO1xuY29uc3QgT2ZmbGluZUNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2NvbnRyb2xsZXJzL29mZmxpbmUtY29udHJvbGxlcicpO1xuY29uc3QgU3Vic2NyaWJlcnNDb250cm9sbGVyID0gcmVxdWlyZSgnLi9jb250cm9sbGVycy9zdWJzY3JpYmVycy1jb250cm9sbGVyJyk7XG5jb25zdCBTZXJ2ZXIgPSByZXF1aXJlKCcuL3NlcnZlci9zZXJ2ZXIuanMnKTtcblxubGV0IERvd25zdHJlYW1FbGVjdHJvbkJFO1xuXG5mdW5jdGlvbiBkZXNlcmlhbGl6ZSAoc2VyaWFsaXplZEphdmFzY3JpcHQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzZXJpYWxpemVkSmF2YXNjcmlwdCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7fTtcbiAgfVxufVxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQG5hbWVzcGFjZSBEb3duc3RyZWFtRWxlY3Ryb25CRVxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZ1BhcmFtcyAtIGNvbmZpZ3VyYXRpb25cbiAqIEBwcm9wZXJ0eSB7RG93bnN0cmVhbUVsZWN0cm9uQkUuaW5pdH0gaW5pdCAtIGluaXRpYWxpemUgYXBpIGluIG1haW4gcHJvY2Vzc1xuICogQGRlc2NyaXB0aW9uXG4gKiBEdXJpbmcgaW5pdGlhbGl6YXRpb24geW91IGNhbiBjb25maWd1cmUgeW91ciBhcHAsIFtjbGljayBoZXJlXXtAbGluayBEb3duc3RyZWFtRWxlY3Ryb25CRS5jb25maWd1cmF0aW9ufVxuICpcbiAqIEBleGFtcGxlXG4gKiAvL3NvbWV3aGVyZSBpbiB0aGUgbWFpbiBwcm9jZXNzXG4gKiBjb25zdCB7IEJyb3dzZXJXaW5kb3csIGFwcCB9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKTtcbiAqIGNvbnN0IGRvd25zdHJlYW1FbGVjdHJvbiA9IHJlcXVpcmUoJ2Rvd25zdHJlYW0tZWxlY3Ryb24nKTtcbiAqXG4gKiBjb25zdCB1c2VyU2V0dGluZ3MgPSB7XG4gKiAgIFwiYXBwRGlyXCI6IFwiL1VzZXJzL2FkbWluL215QXBwXCIsXG4gKiAgIFwic2V0dGluZ3NOYW1lXCI6IFwic2V0dGluZ3NcIixcbiAqICAgXCJwdWJsaWNOYW1lXCI6IFwicHVibGljXCIsXG4gKiAgIFwiZG93bmxvYWRzTmFtZVwiOiBcIm1vdmllc1wiXG4gKiB9O1xuICpcbiAqIGxldCBkb3duc3RyZWFtSW5zdGFuY2U7XG4gKiBmdW5jdGlvbiBjcmVhdGVXaW5kb3coKSB7XG4gKiAgIGRvd25zdHJlYW1JbnN0YW5jZSA9IGRvd25zdHJlYW1FbGVjdHJvbi5pbml0KHVzZXJTZXR0aW5ncyk7XG4gKiAgIGNvbnN0IHdpbiA9IG5ldyBCcm93c2VyV2luZG93KHtcbiAqICAgICB3aWR0aDogMTIwMCxcbiAqICAgICBoZWlnaHQ6IDcwMCxcbiAqICAgICByZXNpemFibGU6IHRydWUsXG4gKiAgICAgd2ViUHJlZmVyZW5jZXM6IHtcbiAqICAgICAgIHBsdWdpbnM6IHRydWUsXG4gKiAgICAgICBub2RlSW50ZWdyYXRpb246IHRydWVcbiAqICAgICB9XG4gKiAgIH0pO1xuICogICB3aW4ubG9hZFVSTCgnZmlsZTovL2luZGV4Lmh0bWwnKTtcbiAqICAgd2luLndlYkNvbnRlbnRzLm9wZW5EZXZUb29scygpO1xuICogfVxuICpcbiAqIGZ1bmN0aW9uIG9uV2lsbFF1aXQoKSB7XG4gKiAgZG93bnN0cmVhbUluc3RhbmNlLnN0b3AoKTtcbiAqIH1cbiAqXG4gKiBhcHAub24oJ3JlYWR5JywgY3JlYXRlV2luZG93KTtcbiAqIGFwcC5vbignd2lsbC1xdWl0Jywgb25XaWxsUXVpdCk7XG4gKiBhcHAub24oJ3dpbmRvdy1hbGwtY2xvc2VkJywgZnVuY3Rpb24gKCkge1xuICogIGNvbnNvbGUubG9nKFwid2luZG93LWFsbC1jbG9zZWRcIik7XG4gKiAgYXBwLnF1aXQoKTtcbiAqIH0pO1xuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25CRSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fb2ZmbGluZUNvbnRlbnRQb3J0ID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5vZmZsaW5lQ29udGVudFBvcnRTdGFydDtcbiAgXy5iaW5kQWxsKHRoaXMsIFwiX29uQXBpUmVxdWVzdFwiLCBcInByb2Nlc3NTdWJzY3JpYmVyXCIpO1xuICB0aGlzLl9jcmVhdGVDb250cm9sbGVycygpO1xuICB0aGlzLl9zZXJ2ZU9mZmxpbmVDb250ZW50KCk7XG4gIHRoaXMuX2F0dGFjaEV2ZW50cygpO1xuICAvLyB0aGlzLm9mZmxpbmVDb250cm9sbGVyLnJlc3RvcmVMb2NhbE1hbmlmZXN0KFwiNjE2Mzc2MDU3MjMwODM4OTg4OFwiKTtcbn07XG5cbkRvd25zdHJlYW1FbGVjdHJvbkJFLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnNlcnZlci5zdG9wKCk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIC0gYXBpIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvbWlzZUlkIC0gcHJvbWlzZSBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge29iamVjdH0gYXJncyAtIGFyZ3VtZW50c1xuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCAtIHRhcmdldCB3aW5kb3cgaWRcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uQkUucHJvdG90eXBlLl9hcGlNZXRob2RzID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIHByb21pc2VJZCwgYXJncywgdGFyZ2V0KSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBjb25zdCBtYW5pZmVzdElkID0gYXJnc1swXTtcbiAgbGV0IHJlc3BvbnNlID0ge307XG4gIHJlc3BvbnNlLnByb21pc2VJZCA9IHByb21pc2VJZDtcbiAgY29uc3Qgb25TdWNjZXNzID0gZnVuY3Rpb24gKHJlc3VsdCwgc3Vic2NyaWJlcnNJZCkge1xuICAgIHJlc3BvbnNlLnN1YnNjcmliZXJzSWQgPSBzdWJzY3JpYmVyc0lkO1xuICAgIHJlc3BvbnNlLnN0YXR1cyA9IFwiT0tcIjtcbiAgICByZXNwb25zZS5yZXN1bHQgPSByZXN1bHQ7XG4gICAgcmVzcG9uc2UubWFuaWZlc3RJZCA9IG1hbmlmZXN0SWQ7XG4gICAgc2VsZi5fc2VuZChyZXNwb25zZSwgdGFyZ2V0KTtcbiAgfTtcbiAgY29uc3Qgb25GYWlsdXJlID0gZnVuY3Rpb24gKGVyciwgaW50ZXJuYWxFcnJvcikge1xuICAgIGNvbnN0IGVycm9ySWQgPSBTdHJpbmcoU25vd2ZsYWtlLlNub3dmbGFrZUlkLmdldFVVSUQoKSk7XG4gICAgY29uc3QgZXJyb3JJbmZvID0gXy5jbG9uZSh7XG4gICAgICBlcnJvcklkOiBlcnJvcklkLFxuICAgICAgbWV0aG9kTmFtZTogbWV0aG9kTmFtZSxcbiAgICAgIGFyZ3M6IGFyZ3Muc2xpY2UoNCksXG4gICAgICBlcnI6IGVycixcbiAgICAgIGludGVybmFsRXJyb3I6IGludGVybmFsRXJyb3JcbiAgICB9KTtcbiAgICByZXNwb25zZS5tYW5pZmVzdElkID0gbWFuaWZlc3RJZDtcbiAgICByZXNwb25zZS5zdGF0dXMgPSBcIkVSUk9SXCI7XG4gICAgcmVzcG9uc2UuZXJyb3IgPSBlcnIgfHwge307XG4gICAgcmVzcG9uc2UuZXJyb3IuZXJyb3JJZCA9IGVycm9ySWQ7XG4gICAgcmVzcG9uc2UuZXJyb3IuZGV0YWlscyA9IGludGVybmFsRXJyb3I7XG5cbiAgICBzZWxmLl9zZW5kKHJlc3BvbnNlLCB0YXJnZXQpO1xuXG4gICAgLy8gQFRPRE8gbG9nIGFsbCBlcnJvcnMgdGhhdCB1c2VyIGhhdmUgc2VlbiwgdGhlIGVycm9ySWQgd2lsbCBoZWxwIHRvIGZpbmQgc3RhY2tcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5lcnJvcihuZXcgRGF0ZSgpLCBcIkVycm9yIG9jY3VycmVkXCIsIEpTT04uc3RyaW5naWZ5KGVycm9ySW5mbykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vZG8gbm90aGluZ1xuICAgIH1cbiAgfTtcbiAgYXJncyA9IGFyZ3MgfHwgW107XG4gIGFyZ3MudW5zaGlmdCh0YXJnZXQpO1xuICBhcmdzLnVuc2hpZnQob25GYWlsdXJlKTtcbiAgYXJncy51bnNoaWZ0KG9uU3VjY2Vzcyk7XG4gIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgY29uc3QgbWV0aG9kID0gdGhpcy5fZ2V0TWV0aG9kKG1ldGhvZE5hbWUpO1xuICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgbWV0aG9kLmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHJlc3BvbnNlLnN0YXR1cyA9IFwiRVJST1JcIjtcbiAgICByZXNwb25zZS5lcnJvciA9IFwiUHJvdmlkZWQgbWV0aG9kICdcIiArIG1ldGhvZE5hbWUgKyBcIicgZG9lc24ndCBleGlzdHNcIjtcbiAgICB0aGlzLl9zZW5kKHJlc3BvbnNlLCB0YXJnZXQpO1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUlwiLCBcIlByb3ZpZGVkIG1ldGhvZCAnXCIgKyBtZXRob2ROYW1lICsgXCInIGRvZXNuJ3QgZXhpc3RzXCIpO1xuICB9XG59O1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkJFLnByb3RvdHlwZS5fYXR0YWNoRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBpcGNNYWluID0gcmVxdWlyZSgnZWxlY3Ryb24nKS5pcGNNYWluO1xuICBpcGNNYWluLm9uKFwiZG93bnN0cmVhbUVsZWN0cm9uQkVcIiwgdGhpcy5fb25BcGlSZXF1ZXN0KTtcbn07XG5cbi8qKlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uQkUucHJvdG90eXBlLl9jcmVhdGVDb250cm9sbGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5tYW5pZmVzdENvbnRyb2xsZXIgPSBuZXcgTWFuaWZlc3RDb250cm9sbGVyKCk7XG4gIHRoaXMub2ZmbGluZUNvbnRyb2xsZXIgPSBuZXcgT2ZmbGluZUNvbnRyb2xsZXIodGhpcy5tYW5pZmVzdENvbnRyb2xsZXIpO1xuICB0aGlzLmRvd25sb2Fkc0NvbnRyb2xsZXIgPSBuZXcgRG93bmxvYWRzQ29udHJvbGxlcih0aGlzLm1hbmlmZXN0Q29udHJvbGxlciwgdGhpcy5vZmZsaW5lQ29udHJvbGxlcik7XG4gIHRoaXMuc3Vic2NyaWJlcnNDb250cm9sbGVyID0gbmV3IFN1YnNjcmliZXJzQ29udHJvbGxlcigpO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZE5hbWUgLSBtZXRob2QgbmFtZVxuICogQHJldHVybnMgeyp9IC0gbWV0aG9kXG4gKiBAcHJpdmF0ZVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25CRS5wcm90b3R5cGUuX2dldE1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gIGNvbnN0IG5hbWVzID0gbWV0aG9kTmFtZS5zcGxpdChcIi5cIik7XG4gIGxldCBpLCBqLCBtZXRob2Q7XG4gIG1ldGhvZCA9IGJlTWV0aG9kc1tuYW1lc1swXV07XG4gIGZvciAoaSA9IDEsIGogPSBuYW1lcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBtZXRob2QgPSBtZXRob2RbbmFtZXNbaV1dO1xuICB9XG4gIHJldHVybiBtZXRob2Q7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZXZ0IC0gZXZlbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIC0gZGF0YSBmcm9tIHJlbmRlcmVyXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0IC0gdGFyZ2V0IHdpbmRvdyBpZFxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25CRS5wcm90b3R5cGUuX29uQXBpUmVxdWVzdCA9IGZ1bmN0aW9uIChldnQsIGRhdGEsIHRhcmdldCkge1xuICBjb25zdCBwcm9taXNlSWQgPSBkYXRhLnByb21pc2VJZDtcbiAgY29uc3QgYXJnc09iaiA9IGRlc2VyaWFsaXplKGRhdGEuYXJncykgfHwge307XG4gIGNvbnN0IG1ldGhvZCA9IGRhdGEubWV0aG9kO1xuICBjb25zdCB3aW5kb3dJZCA9IGRhdGEud2luZG93SWQ7XG4gIHRhcmdldCA9IHdpbmRvd0lkO1xuICBsZXQgYXJncyA9IFtdO1xuICBsZXQgaSA9IDA7XG4gIHdoaWxlIChhcmdzT2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgYXJncy5wdXNoKGFyZ3NPYmpbaV0pO1xuICAgIGkrKztcbiAgfVxuICB0aGlzLl9hcGlNZXRob2RzKG1ldGhvZCwgcHJvbWlzZUlkLCBhcmdzLCB0YXJnZXQpO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIC0gcmVzcG9uc2VcbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXQgLSB3aW5kb3cgdGFyZ2V0IGlkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uQkUucHJvdG90eXBlLl9zZW5kID0gZnVuY3Rpb24gKHJlc3BvbnNlLCB0YXJnZXQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB3aW5kb3dzID0gcmVxdWlyZSgnZWxlY3Ryb24nKS5Ccm93c2VyV2luZG93LmdldEFsbFdpbmRvd3MoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IHdpbmRvd3MubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBpZiAod2luZG93c1tpXS5pZCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgIHdpbmRvd3NbaV0ud2ViQ29udGVudHMuc2VuZCgnZG93bnN0cmVhbUVsZWN0cm9uRkUnLCByZXNwb25zZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcImludGVybmFsIGVycm9yIG9jdXJyZWRcIiwgZXJyKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25zdHJlYW1FbGVjdHJvbkJFLnByb3RvdHlwZS5fc2VydmVPZmZsaW5lQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIGNvbnN0IG1heE9mZmxpbmVDb250ZW50UG9ydFJhbmdlID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5tYXhPZmZsaW5lQ29udGVudFBvcnRSYW5nZTtcblxuICB0aGlzLnNlcnZlciA9IG5ldyBTZXJ2ZXIodGhpcy5vZmZsaW5lQ29udHJvbGxlciwgdGhpcy5kb3dubG9hZHNDb250cm9sbGVyLCBtYXhPZmZsaW5lQ29udGVudFBvcnRSYW5nZSwgdGhpcy5fb2ZmbGluZUNvbnRlbnRQb3J0KTtcbiAgdGhpcy5zZXJ2ZXIuc2VydmVPZmZsaW5lQ29udGVudCggZnVuY3Rpb24gKG9mZmxpbmVQb3J0KSB7XG4gICAgc2VsZi5fb2ZmbGluZUNvbnRlbnRQb3J0ID0gb2ZmbGluZVBvcnQ7XG4gIH0pXG5cbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHJldHVybnMge3N0cmluZ30gLSBvZmZsaW5lIHBhdGhcbiAqL1xuRG93bnN0cmVhbUVsZWN0cm9uQkUucHJvdG90eXBlLmdldE9mZmxpbmVQYXRoID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgbGV0IG9mZmxpbmVQYXRoID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5vZmZsaW5lRG9tYWluO1xuICBsZXQgb2ZmbGluZUNvbnRlbnRQb3J0ID0gdGhpcy5fb2ZmbGluZUNvbnRlbnRQb3J0O1xuICBpZiAob2ZmbGluZUNvbnRlbnRQb3J0KSB7XG4gICAgb2ZmbGluZVBhdGggKz0gXCI6XCIgKyBvZmZsaW5lQ29udGVudFBvcnQ7XG4gIH1cbiAgb2ZmbGluZVBhdGggKz0gXCIvXCIgKyBlbmNvZGVVUklDb21wb25lbnQoYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5kb3dubG9hZHNOYW1lKSArIFwiL1wiICsgZW5jb2RlVVJJQ29tcG9uZW50KG1hbmlmZXN0SWQpICsgXCIvXCI7XG4gIHJldHVybiBvZmZsaW5lUGF0aDtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpYmVySWQgLSBzdWJzY3JpYmVyIGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBlcnIgLSBlcnJvclxuICogQHBhcmFtIHtvYmplY3R9IHJlc3VsdCAtIHJlc3VsdFxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCAtIHdpbmRvdyB0YXJnZXQgaWRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc3Vic2NyaWJlckZpbmlzaGVkIC0gZG93bmxvYWQgZmluaXNoZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3duc3RyZWFtRWxlY3Ryb25CRS5wcm90b3R5cGUucHJvY2Vzc1N1YnNjcmliZXIgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcklkLCBlcnIsIHJlc3VsdCwgdGFyZ2V0LCBzdWJzY3JpYmVyRmluaXNoZWQpIHtcbiAgbGV0IHJlc3BvbnNlID0ge307XG4gIHJlc3BvbnNlLnN1YnNjcmliZXJJZCA9IHN1YnNjcmliZXJJZDtcbiAgcmVzcG9uc2Uuc3RhdHVzID0gZXJyID8gXCJFUlJPUlwiIDogXCJPS1wiO1xuICByZXNwb25zZS5lcnIgPSBlcnI7XG4gIHJlc3BvbnNlLnJlc3VsdCA9IHJlc3VsdDtcbiAgcmVzcG9uc2Uuc3Vic2NyaWJlckZpbmlzaGVkID0gc3Vic2NyaWJlckZpbmlzaGVkO1xuICB0aGlzLl9zZW5kKHJlc3BvbnNlLCB0YXJnZXQpO1xuICBpZiAoc3Vic2NyaWJlckZpbmlzaGVkKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVyc0NvbnRyb2xsZXIucmVtb3ZlQWxsTWFuaWZlc3RTdWJzY3JpYmVyc0J5SWQoc3Vic2NyaWJlcklkKTtcbiAgfVxufTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpbml0OiBmdW5jdGlvbiAodXNlclNldHRpbmdzKSB7XG4gICAgYXBwU2V0dGluZ3MubG9hZCh1c2VyU2V0dGluZ3MpO1xuICAgIHJldHVybiBuZXcgRG93bnN0cmVhbUVsZWN0cm9uQkUoKTtcbiAgfVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///39\n')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__40__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJmbGFrZS1pZGdlblwiPzQ2YmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzQwX187Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///40\n")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__41__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJiaWd1aW50LWZvcm1hdFwiPzM0ZTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzQxX187Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///41\n")},function(module,exports,__webpack_require__){"use strict";eval('\n/**\n * @typedef manifestObject\n * @property {Object} video - video representations\n * @property {Object} audio - audio representations\n * @property {Object} text - text representations\n * @property {String} id - manifest id\n */\n\n/**\n * @memberOf DownstreamElectronFE\n * @namespace DownstreamElectronFE.downloads\n */\n\nvar downloads = {};\n/**\n * create a new download, if success the result will contain "id" which should be used for other calls\n * @method create\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestUrl - manifest url\n * @param {string} customManifestId - custom manifest id, if empty, null or \'\'\n * the id will be generated automatically.<br>\n * The manifestId is used to also store information about movie under the same folder so if you overwrite it,\n * it will be also used as a name for folder where movie content will be stored\n * customManifestId will be validated against default regex\n * {@link DownstreamElectronBE.configuration|customManifestIdFolderRegex}\n * @example\n * var url = "http://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd";\n * DownstreamElectronFE.downloads.create(url)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * DownstreamElectronFE.downloads.create(url, \'<myCustomId>\')\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.create = __webpack_require__(43);\n/**\n * create a persistent session\n * @method createPersistent\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @param {PersistentConfig} config - persistent configuration\n * @param {boolean} [forced=false] - replace existing persistent session, if true\n * @example\n * var config = {\n *   licenseUrl: \'https://lic.staging.drmtoday.com/license-proxy-widevine/cenc/\',\n *   serverCertificate: new Uint8Array(<server_certificate>),\n *   customData: {\n *     userId: \'<user_id>\',\n *     sessionId: \'<session_id>\',\n *     merchant: \'<merchant>\'\n *   }\n * };\n * DownstreamElectronFE.downloads.createPersistent(manifestId, config)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.createPersistent = __webpack_require__(61);\n/**\n * Get info about manifest folder\n * @method getFolderInfo\n * @memberOf DownstreamElectronFE.downloads\n * @example\n * DownstreamElectronFE.downloads.getFolderInfo()\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.getFolderInfo = __webpack_require__(62);\n/**\n * get ids of all downloads\n * @method getList\n * @memberOf DownstreamElectronFE.downloads\n * @example\n * DownstreamElectronFE.downloads.getList()\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.getList = __webpack_require__(63);\n/**\n * get list of all downloads with additional info {@link manifestObject}\n * @method getListWithInfo\n * @memberOf DownstreamElectronFE.downloads\n * @example\n * DownstreamElectronFE.downloads.getListWithInfo()\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.getListWithInfo = __webpack_require__(64);\n/**\n * get offline link for download which can be used by any player to play movie\n * @method getOfflineLink\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @example\n * DownstreamElectronFE.downloads.getOfflineLink(manifestId)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.getOfflineLink = __webpack_require__(65);\n/**\n * get info for download\n * @method info\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @example\n * DownstreamElectronFE.downloads.info(manifestId)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.info = __webpack_require__(66);\n/**\n * removes download\n * @method remove\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @example\n * DownstreamElectronFE.downloads.remove(manifestId)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.remove = __webpack_require__(67);\n/**\n * removes all downloads\n * @method removeAll\n * @memberOf DownstreamElectronFE.downloads\n * @example\n * DownstreamElectronFE.downloads.removeAll()\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.removeAll = __webpack_require__(68);\n/**\n * removes all unfinished downloads\n * @method removeAllUnfinished\n * @memberOf DownstreamElectronFE.downloads\n * @example\n * DownstreamElectronFE.downloads.removeAllUnfinished()\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.removeAllUnfinished = __webpack_require__(69);\n/**\n * removes persistent information previously stored\n * @method removePersistent\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @example\n * DownstreamElectronFE.downloads.removePersistent(manifestId)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.removePersistent = __webpack_require__(70);\n/**\n * resumes download which could be previously stopped or is broken\n * @method resume\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @example\n * DownstreamElectronFE.downloads.resume(manifestId)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.resume = __webpack_require__(71);\n/**\n * Saves some user data this might be a string or json object.\n * This data will be available as "data" property for info of download\n * @method saveData\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @param {string|json} data - user data\n * @example\n * DownstreamElectronFE.downloads.saveData(manifestId, data)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.saveData = __webpack_require__(72);\n/**\n * saves persistent session identifier\n * @method savePersistent\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @param {string} persistentSessionId - persistent session identifier\n * @example\n * DownstreamElectronFE.downloads.savePersistent(manifestId, persistentSessionId)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.savePersistent = __webpack_require__(74);\n/**\n * starts download\n * @method start\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @param {object} representations - representations to be downloaded, available options: \'video\', \'audio\', \'text\'.\n * For each option please provide an array of representations id to be downloaded\n * @example\n * DownstreamElectronFE.downloads.start(manifestId, {video: [\'video=400000\', \'video=795000\'], audio: [\'audio=128000\']})\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.start = __webpack_require__(75);\n/**\n * stops download\n * @method stop\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @example\n * DownstreamElectronFE.downloads.stop(manifestId)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.stop = __webpack_require__(76);\n/**\n * stops all downloads\n * @method stopAll\n * @memberOf DownstreamElectronFE.downloads\n * @example\n * DownstreamElectronFE.downloads.stopAll()\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.stopAll = __webpack_require__(77);\n/**\n * subscribe to download progress\n * @method subscribe\n * @memberOf DownstreamElectronFE.downloads\n * @param {string|array} manifestId - manifest identifier, or the array of the manifests identifier.\n * @param {number} interval - in milliseconds - how often callback onProgress should be invoked\n * @param {function} onProgress - callback to be invoked as often as defined by interval with [stats information]{@link DownloadStats}\n * @param {function} onFinish - callback to be invoked when download is finished\n * @example\n * function onProgress (err, stats) {\n *   if (err) {\n *     console.logs(stats);\n *   }\n * };\n * function onFinish (err, info) {\n *   if (err) {\n *     console.log("error", err);\n *   } else {\n *     console.log("success", info);\n *   }\n * };\n * DownstreamElectronFE.downloads.subscribe(manifestId, 1000, onProgress, onFinish)\n *    .then(\n *      function onSuccess() {console.log("subscribed successfully");},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.subscribe = __webpack_require__(78);\n/**\n * removes callbacks from subscribe process\n * @method unsubscribe\n * @memberOf DownstreamElectronFE.downloads\n * @param {string|array} manifestId - manifest identifier, or the array of the manifests identifier.\n * @example\n * DownstreamElectronFE.downloads.unsubscribe(manifestId)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.unsubscribe = __webpack_require__(80);\n/**\n * update download folder info for manifest id\n * this can be usefule when user has copied download folder\n * @method updateDownloadFolder\n * @memberOf DownstreamElectronFE.downloads\n * @param {string} manifestId - manifest identifier\n * @param {string} downloadFolder - new download folder path\n * @example\n * DownstreamElectronFE.downloads.updateDownloadFolder(manifestId, downloadFolder)\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\ndownloads.updateDownloadFolder = __webpack_require__(81);\n/**\n * remove all subscribers\n * @private\n * @method removeSubscribers\n * @memberOf DownstreamElectronFE\n * @example\n * DownstreamElectronFE.removeSubscribers()\n *    .then(\n *      function onSuccess(result) {console.log("success", result);},\n *      function onError(err) {console.log("error", err);\n *    })\n * @returns {Promise} - promise\n */\n\nvar removeSubscribers = __webpack_require__(82);\n\nmodule.exports = {\n  downloads: downloads,\n  removeSubscribers: removeSubscribers\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy1hbGwuanM/YjBkYSJdLCJuYW1lcyI6WyJkb3dubG9hZHMiLCJjcmVhdGUiLCJyZXF1aXJlIiwiY3JlYXRlUGVyc2lzdGVudCIsImdldEZvbGRlckluZm8iLCJnZXRMaXN0IiwiZ2V0TGlzdFdpdGhJbmZvIiwiZ2V0T2ZmbGluZUxpbmsiLCJpbmZvIiwicmVtb3ZlIiwicmVtb3ZlQWxsIiwicmVtb3ZlQWxsVW5maW5pc2hlZCIsInJlbW92ZVBlcnNpc3RlbnQiLCJyZXN1bWUiLCJzYXZlRGF0YSIsInNhdmVQZXJzaXN0ZW50Iiwic3RhcnQiLCJzdG9wIiwic3RvcEFsbCIsInN1YnNjcmliZSIsInVuc3Vic2NyaWJlIiwidXBkYXRlRG93bmxvYWRGb2xkZXIiLCJyZW1vdmVTdWJzY3JpYmVycyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhO0FBRWI7Ozs7Ozs7O0FBU0E7Ozs7O0FBSUEsSUFBSUEsU0FBUyxHQUFHLEVBQWhCO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBQSxTQUFTLENBQUNDLE1BQVYsR0FBbUJDLG1CQUFPLENBQUMsRUFBRCxDQUExQjtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0JBRixTQUFTLENBQUNHLGdCQUFWLEdBQTZCRCxtQkFBTyxDQUFDLEVBQUQsQ0FBcEM7QUFFQTs7Ozs7Ozs7Ozs7OztBQVlBRixTQUFTLENBQUNJLGFBQVYsR0FBMEJGLG1CQUFPLENBQUMsRUFBRCxDQUFqQztBQUVBOzs7Ozs7Ozs7Ozs7O0FBWUFGLFNBQVMsQ0FBQ0ssT0FBVixHQUFvQkgsbUJBQU8sQ0FBQyxFQUFELENBQTNCO0FBRUE7Ozs7Ozs7Ozs7Ozs7QUFZQUYsU0FBUyxDQUFDTSxlQUFWLEdBQTRCSixtQkFBTyxDQUFDLEVBQUQsQ0FBbkM7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUFhQUYsU0FBUyxDQUFDTyxjQUFWLEdBQTJCTCxtQkFBTyxDQUFDLEVBQUQsQ0FBbEM7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUFhQUYsU0FBUyxDQUFDUSxJQUFWLEdBQWlCTixtQkFBTyxDQUFDLEVBQUQsQ0FBeEI7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUFhQUYsU0FBUyxDQUFDUyxNQUFWLEdBQW1CUCxtQkFBTyxDQUFDLEVBQUQsQ0FBMUI7QUFFQTs7Ozs7Ozs7Ozs7OztBQVlBRixTQUFTLENBQUNVLFNBQVYsR0FBc0JSLG1CQUFPLENBQUMsRUFBRCxDQUE3QjtBQUVBOzs7Ozs7Ozs7Ozs7O0FBWUFGLFNBQVMsQ0FBQ1csbUJBQVYsR0FBZ0NULG1CQUFPLENBQUMsRUFBRCxDQUF2QztBQUVBOzs7Ozs7Ozs7Ozs7OztBQWFBRixTQUFTLENBQUNZLGdCQUFWLEdBQTZCVixtQkFBTyxDQUFDLEVBQUQsQ0FBcEM7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUFhQUYsU0FBUyxDQUFDYSxNQUFWLEdBQW1CWCxtQkFBTyxDQUFDLEVBQUQsQ0FBMUI7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztBQWVBRixTQUFTLENBQUNjLFFBQVYsR0FBcUJaLG1CQUFPLENBQUMsRUFBRCxDQUE1QjtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7QUFjQUYsU0FBUyxDQUFDZSxjQUFWLEdBQTJCYixtQkFBTyxDQUFDLEVBQUQsQ0FBbEM7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztBQWVBRixTQUFTLENBQUNnQixLQUFWLEdBQWtCZCxtQkFBTyxDQUFDLEVBQUQsQ0FBekI7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUFhQUYsU0FBUyxDQUFDaUIsSUFBVixHQUFpQmYsbUJBQU8sQ0FBQyxFQUFELENBQXhCO0FBRUE7Ozs7Ozs7Ozs7Ozs7QUFZQUYsU0FBUyxDQUFDa0IsT0FBVixHQUFvQmhCLG1CQUFPLENBQUMsRUFBRCxDQUEzQjtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTRCQUYsU0FBUyxDQUFDbUIsU0FBVixHQUFzQmpCLG1CQUFPLENBQUMsRUFBRCxDQUE3QjtBQUVBOzs7Ozs7Ozs7Ozs7OztBQWFBRixTQUFTLENBQUNvQixXQUFWLEdBQXdCbEIsbUJBQU8sQ0FBQyxFQUFELENBQS9CO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFlQUYsU0FBUyxDQUFDcUIsb0JBQVYsR0FBaUNuQixtQkFBTyxDQUFDLEVBQUQsQ0FBeEM7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUFhQSxJQUFNb0IsaUJBQWlCLEdBQUdwQixtQkFBTyxDQUFDLEVBQUQsQ0FBakM7O0FBRUFxQixNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZnhCLFdBQVMsRUFBRUEsU0FESTtBQUVmc0IsbUJBQWlCLEVBQUVBO0FBRkosQ0FBakIiLCJmaWxlIjoiNDIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBAdHlwZWRlZiBtYW5pZmVzdE9iamVjdFxuICogQHByb3BlcnR5IHtPYmplY3R9IHZpZGVvIC0gdmlkZW8gcmVwcmVzZW50YXRpb25zXG4gKiBAcHJvcGVydHkge09iamVjdH0gYXVkaW8gLSBhdWRpbyByZXByZXNlbnRhdGlvbnNcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSB0ZXh0IC0gdGV4dCByZXByZXNlbnRhdGlvbnNcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBpZCAtIG1hbmlmZXN0IGlkXG4gKi9cblxuXG4vKipcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRVxuICogQG5hbWVzcGFjZSBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqL1xubGV0IGRvd25sb2FkcyA9IHt9O1xuXG4vKipcbiAqIGNyZWF0ZSBhIG5ldyBkb3dubG9hZCwgaWYgc3VjY2VzcyB0aGUgcmVzdWx0IHdpbGwgY29udGFpbiBcImlkXCIgd2hpY2ggc2hvdWxkIGJlIHVzZWQgZm9yIG90aGVyIGNhbGxzXG4gKiBAbWV0aG9kIGNyZWF0ZVxuICogQG1lbWJlck9mIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc1xuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0VXJsIC0gbWFuaWZlc3QgdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VzdG9tTWFuaWZlc3RJZCAtIGN1c3RvbSBtYW5pZmVzdCBpZCwgaWYgZW1wdHksIG51bGwgb3IgJydcbiAqIHRoZSBpZCB3aWxsIGJlIGdlbmVyYXRlZCBhdXRvbWF0aWNhbGx5Ljxicj5cbiAqIFRoZSBtYW5pZmVzdElkIGlzIHVzZWQgdG8gYWxzbyBzdG9yZSBpbmZvcm1hdGlvbiBhYm91dCBtb3ZpZSB1bmRlciB0aGUgc2FtZSBmb2xkZXIgc28gaWYgeW91IG92ZXJ3cml0ZSBpdCxcbiAqIGl0IHdpbGwgYmUgYWxzbyB1c2VkIGFzIGEgbmFtZSBmb3IgZm9sZGVyIHdoZXJlIG1vdmllIGNvbnRlbnQgd2lsbCBiZSBzdG9yZWRcbiAqIGN1c3RvbU1hbmlmZXN0SWQgd2lsbCBiZSB2YWxpZGF0ZWQgYWdhaW5zdCBkZWZhdWx0IHJlZ2V4XG4gKiB7QGxpbmsgRG93bnN0cmVhbUVsZWN0cm9uQkUuY29uZmlndXJhdGlvbnxjdXN0b21NYW5pZmVzdElkRm9sZGVyUmVnZXh9XG4gKiBAZXhhbXBsZVxuICogdmFyIHVybCA9IFwiaHR0cDovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vc2hha2EtZGVtby1hc3NldHMvYW5nZWwtb25lL2Rhc2gubXBkXCI7XG4gKiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHMuY3JlYXRlKHVybClcbiAqICAgIC50aGVuKFxuICogICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzdWx0KSB7Y29uc29sZS5sb2coXCJzdWNjZXNzXCIsIHJlc3VsdCk7fSxcbiAqICAgICAgZnVuY3Rpb24gb25FcnJvcihlcnIpIHtjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycik7XG4gKiAgICB9KVxuICogRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzLmNyZWF0ZSh1cmwsICc8bXlDdXN0b21JZD4nKVxuICogICAgLnRoZW4oXG4gKiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIiwgcmVzdWx0KTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy5jcmVhdGUgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL2NyZWF0ZScpO1xuXG4vKipcbiAqIGNyZWF0ZSBhIHBlcnNpc3RlbnQgc2Vzc2lvblxuICogQG1ldGhvZCBjcmVhdGVQZXJzaXN0ZW50XG4gKiBAbWVtYmVyT2YgRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7UGVyc2lzdGVudENvbmZpZ30gY29uZmlnIC0gcGVyc2lzdGVudCBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZWQ9ZmFsc2VdIC0gcmVwbGFjZSBleGlzdGluZyBwZXJzaXN0ZW50IHNlc3Npb24sIGlmIHRydWVcbiAqIEBleGFtcGxlXG4gKiB2YXIgY29uZmlnID0ge1xuICogICBsaWNlbnNlVXJsOiAnaHR0cHM6Ly9saWMuc3RhZ2luZy5kcm10b2RheS5jb20vbGljZW5zZS1wcm94eS13aWRldmluZS9jZW5jLycsXG4gKiAgIHNlcnZlckNlcnRpZmljYXRlOiBuZXcgVWludDhBcnJheSg8c2VydmVyX2NlcnRpZmljYXRlPiksXG4gKiAgIGN1c3RvbURhdGE6IHtcbiAqICAgICB1c2VySWQ6ICc8dXNlcl9pZD4nLFxuICogICAgIHNlc3Npb25JZDogJzxzZXNzaW9uX2lkPicsXG4gKiAgICAgbWVyY2hhbnQ6ICc8bWVyY2hhbnQ+J1xuICogICB9XG4gKiB9O1xuICogRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzLmNyZWF0ZVBlcnNpc3RlbnQobWFuaWZlc3RJZCwgY29uZmlnKVxuICogICAgLnRoZW4oXG4gKiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIiwgcmVzdWx0KTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy5jcmVhdGVQZXJzaXN0ZW50ID0gcmVxdWlyZSgnLi9iZS1tZXRob2RzL2Rvd25sb2Fkcy9jcmVhdGVQZXJzaXN0ZW50Jyk7XG5cbi8qKlxuICogR2V0IGluZm8gYWJvdXQgbWFuaWZlc3QgZm9sZGVyXG4gKiBAbWV0aG9kIGdldEZvbGRlckluZm9cbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBleGFtcGxlXG4gKiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHMuZ2V0Rm9sZGVySW5mbygpXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuZG93bmxvYWRzLmdldEZvbGRlckluZm8gPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL2ZvbGRlci1pbmZvJyk7XG5cbi8qKlxuICogZ2V0IGlkcyBvZiBhbGwgZG93bmxvYWRzXG4gKiBAbWV0aG9kIGdldExpc3RcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBleGFtcGxlXG4gKiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHMuZ2V0TGlzdCgpXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuZG93bmxvYWRzLmdldExpc3QgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL2dldC1saXN0Jyk7XG5cbi8qKlxuICogZ2V0IGxpc3Qgb2YgYWxsIGRvd25sb2FkcyB3aXRoIGFkZGl0aW9uYWwgaW5mbyB7QGxpbmsgbWFuaWZlc3RPYmplY3R9XG4gKiBAbWV0aG9kIGdldExpc3RXaXRoSW5mb1xuICogQG1lbWJlck9mIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc1xuICogQGV4YW1wbGVcbiAqIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkcy5nZXRMaXN0V2l0aEluZm8oKVxuICogICAgLnRoZW4oXG4gKiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIiwgcmVzdWx0KTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy5nZXRMaXN0V2l0aEluZm8gPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL2dldC1saXN0LXdpdGgtaW5mbycpO1xuXG4vKipcbiAqIGdldCBvZmZsaW5lIGxpbmsgZm9yIGRvd25sb2FkIHdoaWNoIGNhbiBiZSB1c2VkIGJ5IGFueSBwbGF5ZXIgdG8gcGxheSBtb3ZpZVxuICogQG1ldGhvZCBnZXRPZmZsaW5lTGlua1xuICogQG1lbWJlck9mIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc1xuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAZXhhbXBsZVxuICogRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzLmdldE9mZmxpbmVMaW5rKG1hbmlmZXN0SWQpXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuZG93bmxvYWRzLmdldE9mZmxpbmVMaW5rID0gcmVxdWlyZSgnLi9iZS1tZXRob2RzL2Rvd25sb2Fkcy9nZXQtb2ZmbGluZS1saW5rJyk7XG5cbi8qKlxuICogZ2V0IGluZm8gZm9yIGRvd25sb2FkXG4gKiBAbWV0aG9kIGluZm9cbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQGV4YW1wbGVcbiAqIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkcy5pbmZvKG1hbmlmZXN0SWQpXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuZG93bmxvYWRzLmluZm8gPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL2luZm8nKTtcblxuLyoqXG4gKiByZW1vdmVzIGRvd25sb2FkXG4gKiBAbWV0aG9kIHJlbW92ZVxuICogQG1lbWJlck9mIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc1xuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAZXhhbXBsZVxuICogRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzLnJlbW92ZShtYW5pZmVzdElkKVxuICogICAgLnRoZW4oXG4gKiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIiwgcmVzdWx0KTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy5yZW1vdmUgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL3JlbW92ZScpO1xuXG4vKipcbiAqIHJlbW92ZXMgYWxsIGRvd25sb2Fkc1xuICogQG1ldGhvZCByZW1vdmVBbGxcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBleGFtcGxlXG4gKiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHMucmVtb3ZlQWxsKClcbiAqICAgIC50aGVuKFxuICogICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzdWx0KSB7Y29uc29sZS5sb2coXCJzdWNjZXNzXCIsIHJlc3VsdCk7fSxcbiAqICAgICAgZnVuY3Rpb24gb25FcnJvcihlcnIpIHtjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycik7XG4gKiAgICB9KVxuICogQHJldHVybnMge1Byb21pc2V9IC0gcHJvbWlzZVxuICovXG5kb3dubG9hZHMucmVtb3ZlQWxsID0gcmVxdWlyZSgnLi9iZS1tZXRob2RzL2Rvd25sb2Fkcy9yZW1vdmUtYWxsJyk7XG5cbi8qKlxuICogcmVtb3ZlcyBhbGwgdW5maW5pc2hlZCBkb3dubG9hZHNcbiAqIEBtZXRob2QgcmVtb3ZlQWxsVW5maW5pc2hlZFxuICogQG1lbWJlck9mIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc1xuICogQGV4YW1wbGVcbiAqIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkcy5yZW1vdmVBbGxVbmZpbmlzaGVkKClcbiAqICAgIC50aGVuKFxuICogICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzdWx0KSB7Y29uc29sZS5sb2coXCJzdWNjZXNzXCIsIHJlc3VsdCk7fSxcbiAqICAgICAgZnVuY3Rpb24gb25FcnJvcihlcnIpIHtjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycik7XG4gKiAgICB9KVxuICogQHJldHVybnMge1Byb21pc2V9IC0gcHJvbWlzZVxuICovXG5kb3dubG9hZHMucmVtb3ZlQWxsVW5maW5pc2hlZCA9IHJlcXVpcmUoJy4vYmUtbWV0aG9kcy9kb3dubG9hZHMvcmVtb3ZlLWFsbC11bmZpbmlzaGVkJyk7XG5cbi8qKlxuICogcmVtb3ZlcyBwZXJzaXN0ZW50IGluZm9ybWF0aW9uIHByZXZpb3VzbHkgc3RvcmVkXG4gKiBAbWV0aG9kIHJlbW92ZVBlcnNpc3RlbnRcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQGV4YW1wbGVcbiAqIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkcy5yZW1vdmVQZXJzaXN0ZW50KG1hbmlmZXN0SWQpXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuZG93bmxvYWRzLnJlbW92ZVBlcnNpc3RlbnQgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL3JlbW92ZS1wZXJzaXN0ZW50Jyk7XG5cbi8qKlxuICogcmVzdW1lcyBkb3dubG9hZCB3aGljaCBjb3VsZCBiZSBwcmV2aW91c2x5IHN0b3BwZWQgb3IgaXMgYnJva2VuXG4gKiBAbWV0aG9kIHJlc3VtZVxuICogQG1lbWJlck9mIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc1xuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAZXhhbXBsZVxuICogRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzLnJlc3VtZShtYW5pZmVzdElkKVxuICogICAgLnRoZW4oXG4gKiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIiwgcmVzdWx0KTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy5yZXN1bWUgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL3Jlc3VtZScpO1xuXG4vKipcbiAqIFNhdmVzIHNvbWUgdXNlciBkYXRhIHRoaXMgbWlnaHQgYmUgYSBzdHJpbmcgb3IganNvbiBvYmplY3QuXG4gKiBUaGlzIGRhdGEgd2lsbCBiZSBhdmFpbGFibGUgYXMgXCJkYXRhXCIgcHJvcGVydHkgZm9yIGluZm8gb2YgZG93bmxvYWRcbiAqIEBtZXRob2Qgc2F2ZURhdGFcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtzdHJpbmd8anNvbn0gZGF0YSAtIHVzZXIgZGF0YVxuICogQGV4YW1wbGVcbiAqIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkcy5zYXZlRGF0YShtYW5pZmVzdElkLCBkYXRhKVxuICogICAgLnRoZW4oXG4gKiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIiwgcmVzdWx0KTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy5zYXZlRGF0YSA9IHJlcXVpcmUoJy4vYmUtbWV0aG9kcy9kb3dubG9hZHMvc2F2ZS1kYXRhJyk7XG5cbi8qKlxuICogc2F2ZXMgcGVyc2lzdGVudCBzZXNzaW9uIGlkZW50aWZpZXJcbiAqIEBtZXRob2Qgc2F2ZVBlcnNpc3RlbnRcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtzdHJpbmd9IHBlcnNpc3RlbnRTZXNzaW9uSWQgLSBwZXJzaXN0ZW50IHNlc3Npb24gaWRlbnRpZmllclxuICogQGV4YW1wbGVcbiAqIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkcy5zYXZlUGVyc2lzdGVudChtYW5pZmVzdElkLCBwZXJzaXN0ZW50U2Vzc2lvbklkKVxuICogICAgLnRoZW4oXG4gKiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIiwgcmVzdWx0KTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy5zYXZlUGVyc2lzdGVudCA9IHJlcXVpcmUoJy4vYmUtbWV0aG9kcy9kb3dubG9hZHMvc2F2ZS1wZXJzaXN0ZW50Jyk7XG5cbi8qKlxuICogc3RhcnRzIGRvd25sb2FkXG4gKiBAbWV0aG9kIHN0YXJ0XG4gKiBAbWVtYmVyT2YgRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXByZXNlbnRhdGlvbnMgLSByZXByZXNlbnRhdGlvbnMgdG8gYmUgZG93bmxvYWRlZCwgYXZhaWxhYmxlIG9wdGlvbnM6ICd2aWRlbycsICdhdWRpbycsICd0ZXh0Jy5cbiAqIEZvciBlYWNoIG9wdGlvbiBwbGVhc2UgcHJvdmlkZSBhbiBhcnJheSBvZiByZXByZXNlbnRhdGlvbnMgaWQgdG8gYmUgZG93bmxvYWRlZFxuICogQGV4YW1wbGVcbiAqIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkcy5zdGFydChtYW5pZmVzdElkLCB7dmlkZW86IFsndmlkZW89NDAwMDAwJywgJ3ZpZGVvPTc5NTAwMCddLCBhdWRpbzogWydhdWRpbz0xMjgwMDAnXX0pXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuZG93bmxvYWRzLnN0YXJ0ID0gcmVxdWlyZSgnLi9iZS1tZXRob2RzL2Rvd25sb2Fkcy9zdGFydCcpO1xuXG4vKipcbiAqIHN0b3BzIGRvd25sb2FkXG4gKiBAbWV0aG9kIHN0b3BcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQGV4YW1wbGVcbiAqIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkcy5zdG9wKG1hbmlmZXN0SWQpXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuZG93bmxvYWRzLnN0b3AgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL3N0b3AnKTtcblxuLyoqXG4gKiBzdG9wcyBhbGwgZG93bmxvYWRzXG4gKiBAbWV0aG9kIHN0b3BBbGxcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBleGFtcGxlXG4gKiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHMuc3RvcEFsbCgpXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuZG93bmxvYWRzLnN0b3BBbGwgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL3N0b3AtYWxsJyk7XG5cbi8qKlxuICogc3Vic2NyaWJlIHRvIGRvd25sb2FkIHByb2dyZXNzXG4gKiBAbWV0aG9kIHN1YnNjcmliZVxuICogQG1lbWJlck9mIERvd25zdHJlYW1FbGVjdHJvbkZFLmRvd25sb2Fkc1xuICogQHBhcmFtIHtzdHJpbmd8YXJyYXl9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyLCBvciB0aGUgYXJyYXkgb2YgdGhlIG1hbmlmZXN0cyBpZGVudGlmaWVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGludGVydmFsIC0gaW4gbWlsbGlzZWNvbmRzIC0gaG93IG9mdGVuIGNhbGxiYWNrIG9uUHJvZ3Jlc3Mgc2hvdWxkIGJlIGludm9rZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uUHJvZ3Jlc3MgLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIGFzIG9mdGVuIGFzIGRlZmluZWQgYnkgaW50ZXJ2YWwgd2l0aCBbc3RhdHMgaW5mb3JtYXRpb25de0BsaW5rIERvd25sb2FkU3RhdHN9XG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbkZpbmlzaCAtIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbiBkb3dubG9hZCBpcyBmaW5pc2hlZFxuICogQGV4YW1wbGVcbiAqIGZ1bmN0aW9uIG9uUHJvZ3Jlc3MgKGVyciwgc3RhdHMpIHtcbiAqICAgaWYgKGVycikge1xuICogICAgIGNvbnNvbGUubG9ncyhzdGF0cyk7XG4gKiAgIH1cbiAqIH07XG4gKiBmdW5jdGlvbiBvbkZpbmlzaCAoZXJyLCBpbmZvKSB7XG4gKiAgIGlmIChlcnIpIHtcbiAqICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycik7XG4gKiAgIH0gZWxzZSB7XG4gKiAgICAgY29uc29sZS5sb2coXCJzdWNjZXNzXCIsIGluZm8pO1xuICogICB9XG4gKiB9O1xuICogRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzLnN1YnNjcmliZShtYW5pZmVzdElkLCAxMDAwLCBvblByb2dyZXNzLCBvbkZpbmlzaClcbiAqICAgIC50aGVuKFxuICogICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MoKSB7Y29uc29sZS5sb2coXCJzdWJzY3JpYmVkIHN1Y2Nlc3NmdWxseVwiKTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy5zdWJzY3JpYmUgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL3N1YnNjcmliZScpO1xuXG4vKipcbiAqIHJlbW92ZXMgY2FsbGJhY2tzIGZyb20gc3Vic2NyaWJlIHByb2Nlc3NcbiAqIEBtZXRob2QgdW5zdWJzY3JpYmVcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBwYXJhbSB7c3RyaW5nfGFycmF5fSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllciwgb3IgdGhlIGFycmF5IG9mIHRoZSBtYW5pZmVzdHMgaWRlbnRpZmllci5cbiAqIEBleGFtcGxlXG4gKiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHMudW5zdWJzY3JpYmUobWFuaWZlc3RJZClcbiAqICAgIC50aGVuKFxuICogICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzdWx0KSB7Y29uc29sZS5sb2coXCJzdWNjZXNzXCIsIHJlc3VsdCk7fSxcbiAqICAgICAgZnVuY3Rpb24gb25FcnJvcihlcnIpIHtjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycik7XG4gKiAgICB9KVxuICogQHJldHVybnMge1Byb21pc2V9IC0gcHJvbWlzZVxuICovXG5kb3dubG9hZHMudW5zdWJzY3JpYmUgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvZG93bmxvYWRzL3Vuc3Vic2NyaWJlJyk7XG5cbi8qKlxuICogdXBkYXRlIGRvd25sb2FkIGZvbGRlciBpbmZvIGZvciBtYW5pZmVzdCBpZFxuICogdGhpcyBjYW4gYmUgdXNlZnVsZSB3aGVuIHVzZXIgaGFzIGNvcGllZCBkb3dubG9hZCBmb2xkZXJcbiAqIEBtZXRob2QgdXBkYXRlRG93bmxvYWRGb2xkZXJcbiAqIEBtZW1iZXJPZiBEb3duc3RyZWFtRWxlY3Ryb25GRS5kb3dubG9hZHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtzdHJpbmd9IGRvd25sb2FkRm9sZGVyIC0gbmV3IGRvd25sb2FkIGZvbGRlciBwYXRoXG4gKiBAZXhhbXBsZVxuICogRG93bnN0cmVhbUVsZWN0cm9uRkUuZG93bmxvYWRzLnVwZGF0ZURvd25sb2FkRm9sZGVyKG1hbmlmZXN0SWQsIGRvd25sb2FkRm9sZGVyKVxuICogICAgLnRoZW4oXG4gKiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIiwgcmVzdWx0KTt9LFxuICogICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge2NvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAqICAgIH0pXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbmRvd25sb2Fkcy51cGRhdGVEb3dubG9hZEZvbGRlciA9IHJlcXVpcmUoJy4vYmUtbWV0aG9kcy9kb3dubG9hZHMvdXBkYXRlLWRvd25sb2FkLWZvbGRlcicpO1xuXG4vKipcbiAqIHJlbW92ZSBhbGwgc3Vic2NyaWJlcnNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIHJlbW92ZVN1YnNjcmliZXJzXG4gKiBAbWVtYmVyT2YgRG93bnN0cmVhbUVsZWN0cm9uRkVcbiAqIEBleGFtcGxlXG4gKiBEb3duc3RyZWFtRWxlY3Ryb25GRS5yZW1vdmVTdWJzY3JpYmVycygpXG4gKiAgICAudGhlbihcbiAqICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge2NvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXN1bHQpO30sXG4gKiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7Y29uc29sZS5sb2coXCJlcnJvclwiLCBlcnIpO1xuICogICAgfSlcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuY29uc3QgcmVtb3ZlU3Vic2NyaWJlcnMgPSByZXF1aXJlKCcuL2JlLW1ldGhvZHMvcmVtb3ZlLXN1YnNjcmliZXJzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBkb3dubG9hZHM6IGRvd25sb2FkcyxcbiAgcmVtb3ZlU3Vic2NyaWJlcnM6IHJlbW92ZVN1YnNjcmliZXJzXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///42\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar Manifest = __webpack_require__(15).Manifest;\n\nvar translation = __webpack_require__(0);\n\nvar canCreateManifest = __webpack_require__(27);\n\nvar getInvalidDiff = __webpack_require__(60);\n\nvar appSettings = __webpack_require__(1);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestUrl, customManifestId, manifestStr) {\n  var useCustomId = true;\n\n  if (typeof customManifestId === "undefined" || customManifestId === "" || customManifestId === null) {\n    useCustomId = false;\n  }\n\n  if (useCustomId) {\n    if (typeof customManifestId !== "undefined" && typeof customManifestId !== "number" && typeof customManifestId !== "string") {\n      onFailure(translation.getError(translation.e.manifests.INVALID_ID, customManifestId));\n      return;\n    }\n\n    var customManifestIdFolderRegex = appSettings.getSettings().customManifestIdFolderRegex;\n\n    if (!customManifestId.match(customManifestIdFolderRegex)) {\n      var invalid = getInvalidDiff(customManifestId, customManifestIdFolderRegex, appSettings.getSettings().openingTagForInvalidCustomManifestIdCharacter, appSettings.getSettings().closingTagForInvalidCustomManifestIdCharacter);\n      onFailure(translation.getError(translation.e.manifests.INVALID_ID, invalid));\n      return;\n    }\n  }\n\n  var manifest = new Manifest(customManifestId);\n  var promise;\n\n  if (manifestStr) {\n    promise = manifest.loadWithManifest(manifestUrl, manifestStr);\n  } else {\n    promise = manifest.load(manifestUrl);\n  }\n\n  promise.then(function () {\n    if (useCustomId) {\n      canCreateManifest(customManifestId).then(function () {\n        api.manifestController.cacheManifest(manifest);\n        onSuccess(manifest.getJsonInfo());\n      }, function (err) {\n        onFailure(translation.getError(translation.e.manifests.FOLDER_ALREADY_EXISTS, customManifestId), err);\n      });\n    } else {\n      api.manifestController.cacheManifest(manifest);\n      onSuccess(manifest.getJsonInfo());\n    }\n  }, function (err) {\n    onFailure(translation.getError(translation.e.manifests.LOADING_FAILED, manifestUrl), err);\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvY3JlYXRlLmpzP2VjMjQiXSwibmFtZXMiOlsiTWFuaWZlc3QiLCJyZXF1aXJlIiwidHJhbnNsYXRpb24iLCJjYW5DcmVhdGVNYW5pZmVzdCIsImdldEludmFsaWREaWZmIiwiYXBwU2V0dGluZ3MiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBpIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwidGFyZ2V0IiwibWFuaWZlc3RVcmwiLCJjdXN0b21NYW5pZmVzdElkIiwibWFuaWZlc3RTdHIiLCJ1c2VDdXN0b21JZCIsImdldEVycm9yIiwiZSIsIm1hbmlmZXN0cyIsIklOVkFMSURfSUQiLCJjdXN0b21NYW5pZmVzdElkRm9sZGVyUmVnZXgiLCJnZXRTZXR0aW5ncyIsIm1hdGNoIiwiaW52YWxpZCIsIm9wZW5pbmdUYWdGb3JJbnZhbGlkQ3VzdG9tTWFuaWZlc3RJZENoYXJhY3RlciIsImNsb3NpbmdUYWdGb3JJbnZhbGlkQ3VzdG9tTWFuaWZlc3RJZENoYXJhY3RlciIsIm1hbmlmZXN0IiwicHJvbWlzZSIsImxvYWRXaXRoTWFuaWZlc3QiLCJsb2FkIiwidGhlbiIsIm1hbmlmZXN0Q29udHJvbGxlciIsImNhY2hlTWFuaWZlc3QiLCJnZXRKc29uSW5mbyIsImVyciIsIkZPTERFUl9BTFJFQURZX0VYSVNUUyIsIkxPQURJTkdfRkFJTEVEIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFNQSxRQUFRLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUFQLENBQTBDRCxRQUEzRDs7QUFDQSxJQUFNRSxXQUFXLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNRSxpQkFBaUIsR0FBR0YsbUJBQU8sQ0FBQyxFQUFELENBQWpDOztBQUNBLElBQU1HLGNBQWMsR0FBR0gsbUJBQU8sQ0FBQyxFQUFELENBQTlCOztBQUNBLElBQU1JLFdBQVcsR0FBR0osbUJBQU8sQ0FBQyxDQUFELENBQTNC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IlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBNYW5pZmVzdCA9IHJlcXVpcmUoXCIuLi8uLi9tYW5pZmVzdC9sb2FkZXIvbWFuaWZlc3RcIikuTWFuaWZlc3Q7XG5jb25zdCB0cmFuc2xhdGlvbiA9IHJlcXVpcmUoXCIuLi8uLi90cmFuc2xhdGlvbi9pbmRleFwiKTtcbmNvbnN0IGNhbkNyZWF0ZU1hbmlmZXN0ID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvY2FuLWNyZWF0ZS1tYW5pZmVzdFwiKTtcbmNvbnN0IGdldEludmFsaWREaWZmID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvZ2V0LWludmFsaWQtZGlmZlwiKTtcbmNvbnN0IGFwcFNldHRpbmdzID0gcmVxdWlyZShcIi4uLy4uL2FwcC1zZXR0aW5nc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdFVybCwgY3VzdG9tTWFuaWZlc3RJZCwgbWFuaWZlc3RTdHIpIHtcbiAgdmFyIHVzZUN1c3RvbUlkID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGN1c3RvbU1hbmlmZXN0SWQgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICBjdXN0b21NYW5pZmVzdElkID09PSBcIlwiIHx8XG4gICAgY3VzdG9tTWFuaWZlc3RJZCA9PT0gbnVsbCkge1xuICAgIHVzZUN1c3RvbUlkID0gZmFsc2U7XG4gIH1cblxuICBpZiAodXNlQ3VzdG9tSWQpIHtcbiAgICBpZiAodHlwZW9mIGN1c3RvbU1hbmlmZXN0SWQgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgIHR5cGVvZiBjdXN0b21NYW5pZmVzdElkICE9PSBcIm51bWJlclwiICYmXG4gICAgICB0eXBlb2YgY3VzdG9tTWFuaWZlc3RJZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUubWFuaWZlc3RzLklOVkFMSURfSUQsIGN1c3RvbU1hbmlmZXN0SWQpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY3VzdG9tTWFuaWZlc3RJZEZvbGRlclJlZ2V4ID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5jdXN0b21NYW5pZmVzdElkRm9sZGVyUmVnZXg7XG5cbiAgICBpZiAoIWN1c3RvbU1hbmlmZXN0SWQubWF0Y2goY3VzdG9tTWFuaWZlc3RJZEZvbGRlclJlZ2V4KSkge1xuICAgICAgY29uc3QgaW52YWxpZCA9IGdldEludmFsaWREaWZmKFxuICAgICAgICBjdXN0b21NYW5pZmVzdElkLFxuICAgICAgICBjdXN0b21NYW5pZmVzdElkRm9sZGVyUmVnZXgsXG4gICAgICAgIGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkub3BlbmluZ1RhZ0ZvckludmFsaWRDdXN0b21NYW5pZmVzdElkQ2hhcmFjdGVyLFxuICAgICAgICBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLmNsb3NpbmdUYWdGb3JJbnZhbGlkQ3VzdG9tTWFuaWZlc3RJZENoYXJhY3Rlcik7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5tYW5pZmVzdHMuSU5WQUxJRF9JRCwgaW52YWxpZCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGxldCBtYW5pZmVzdCA9IG5ldyBNYW5pZmVzdChjdXN0b21NYW5pZmVzdElkKTtcbiAgbGV0IHByb21pc2U7XG4gIGlmIChtYW5pZmVzdFN0cikge1xuICAgIHByb21pc2UgPSBtYW5pZmVzdC5sb2FkV2l0aE1hbmlmZXN0KG1hbmlmZXN0VXJsLCBtYW5pZmVzdFN0cilcbiAgfSBlbHNlIHtcbiAgICBwcm9taXNlID0gbWFuaWZlc3QubG9hZChtYW5pZmVzdFVybCk7XG4gIH1cblxuICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgIGlmICh1c2VDdXN0b21JZCkge1xuICAgICAgY2FuQ3JlYXRlTWFuaWZlc3QoY3VzdG9tTWFuaWZlc3RJZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFwaS5tYW5pZmVzdENvbnRyb2xsZXIuY2FjaGVNYW5pZmVzdChtYW5pZmVzdCk7XG4gICAgICAgIG9uU3VjY2VzcyhtYW5pZmVzdC5nZXRKc29uSW5mbygpKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUubWFuaWZlc3RzLkZPTERFUl9BTFJFQURZX0VYSVNUUywgY3VzdG9tTWFuaWZlc3RJZCksIGVycik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLm1hbmlmZXN0Q29udHJvbGxlci5jYWNoZU1hbmlmZXN0KG1hbmlmZXN0KTtcbiAgICAgIG9uU3VjY2VzcyhtYW5pZmVzdC5nZXRKc29uSW5mbygpKTtcbiAgICB9XG4gIH0sIChlcnIpID0+IHtcbiAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5tYW5pZmVzdHMuTE9BRElOR19GQUlMRUQsIG1hbmlmZXN0VXJsKSwgZXJyKTtcbiAgfSk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///43\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _require = __webpack_require__(2),\n    net = _require.net;\n\nvar appSettings = __webpack_require__(1);\n\nvar ManifestLoader = function () {\n  function ManifestLoader() {}\n\n  ManifestLoader.prototype.load = function (url) {\n    return this.sendXMLHttpRequest(url);\n  };\n\n  ManifestLoader.prototype.sendXMLHttpRequest = function (url) {\n    var req_options = Object.assign({\n      url: url,\n      method: 'GET'\n    }, appSettings.getSettings().defaultManifestRequestOptions);\n    return new Promise(function (resolve, reject) {\n      var req = net.request(req_options);\n      req.on('error', function (err) {\n        reject(err);\n      });\n      req.on('response', function (response) {\n        response.on(\"error\", function (error) {\n          reject(new Error(\"MANIFEST LOAD FAILURE \" + error));\n        });\n        var error;\n\n        if (response.statusCode >= 400) {\n          error = response.statusMessage;\n        }\n\n        if (!error) {\n          var body = [];\n          response.on('data', function (chunk) {\n            body.push(chunk);\n          }).on('end', function () {\n            body = Buffer.concat(body);\n            resolve({\n              response: body,\n              url: url\n            });\n          });\n        } else {\n          reject(new Error(\"MANIFEST LOAD FAILURE \" + error));\n        }\n      });\n      req.end();\n    });\n  };\n\n  return ManifestLoader;\n}();\n\nexports.ManifestLoader = ManifestLoader;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvbG9hZGVyL21hbmlmZXN0LWxvYWRlci5qcz85NTQ5Il0sIm5hbWVzIjpbInJlcXVpcmUiLCJuZXQiLCJhcHBTZXR0aW5ncyIsIk1hbmlmZXN0TG9hZGVyIiwicHJvdG90eXBlIiwibG9hZCIsInVybCIsInNlbmRYTUxIdHRwUmVxdWVzdCIsInJlcV9vcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwibWV0aG9kIiwiZ2V0U2V0dGluZ3MiLCJkZWZhdWx0TWFuaWZlc3RSZXF1ZXN0T3B0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxIiwicmVxdWVzdCIsIm9uIiwiZXJyIiwicmVzcG9uc2UiLCJlcnJvciIsIkVycm9yIiwic3RhdHVzQ29kZSIsInN0YXR1c01lc3NhZ2UiLCJib2R5IiwiY2h1bmsiLCJwdXNoIiwiQnVmZmVyIiwiY29uY2F0IiwiZW5kIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O2VBQ0NBLG1CQUFPLENBQUMsQ0FBRCxDO0lBQWRDLEcsWUFBQUEsRzs7QUFDUCxJQUFNQyxXQUFXLEdBQUdGLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFFQSxJQUFNRyxjQUFjLEdBQUksWUFBWTtBQUNsQyxXQUFTQSxjQUFULEdBQTJCLENBQUU7O0FBRTdCQSxnQkFBYyxDQUFDQyxTQUFmLENBQXlCQyxJQUF6QixHQUFnQyxVQUFVQyxHQUFWLEVBQWU7QUFDN0MsV0FBTyxLQUFLQyxrQkFBTCxDQUF3QkQsR0FBeEIsQ0FBUDtBQUNELEdBRkQ7O0FBR0FILGdCQUFjLENBQUNDLFNBQWYsQ0FBeUJHLGtCQUF6QixHQUE4QyxVQUFVRCxHQUFWLEVBQWU7QUFDM0QsUUFBTUUsV0FBVyxHQUFHQyxNQUFNLENBQUNDLE1BQVAsQ0FBYztBQUNoQ0osU0FBRyxFQUFFQSxHQUQyQjtBQUVoQ0ssWUFBTSxFQUFFO0FBRndCLEtBQWQsRUFHakJULFdBQVcsQ0FBQ1UsV0FBWixHQUEwQkMsNkJBSFQsQ0FBcEI7QUFLQSxXQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFVQyxPQUFWLEVBQW1CQyxNQUFuQixFQUEyQjtBQUM1QyxVQUFJQyxHQUFHLEdBQUdoQixHQUFHLENBQUNpQixPQUFKLENBQVlWLFdBQVosQ0FBVjtBQUVBUyxTQUFHLENBQUNFLEVBQUosQ0FBTyxPQUFQLEVBQWdCLFVBQUNDLEdBQUQsRUFBUztBQUN2QkosY0FBTSxDQUFDSSxHQUFELENBQU47QUFDRCxPQUZEO0FBSUFILFNBQUcsQ0FBQ0UsRUFBSixDQUFPLFVBQVAsRUFBbUIsVUFBQ0UsUUFBRCxFQUFjO0FBRS9CQSxnQkFBUSxDQUFDRixFQUFULENBQVksT0FBWixFQUFxQixVQUFVRyxLQUFWLEVBQWlCO0FBQ3BDTixnQkFBTSxDQUFDLElBQUlPLEtBQUosQ0FBVSwyQkFBMkJELEtBQXJDLENBQUQsQ0FBTjtBQUNELFNBRkQ7QUFJQSxZQUFJQSxLQUFKOztBQUNBLFlBQUlELFFBQVEsQ0FBQ0csVUFBVCxJQUF1QixHQUEzQixFQUFnQztBQUM1QkYsZUFBSyxHQUFHRCxRQUFRLENBQUNJLGFBQWpCO0FBQ0g7O0FBRUQsWUFBSSxDQUFDSCxLQUFMLEVBQVk7QUFDVixjQUFJSSxJQUFJLEdBQUcsRUFBWDtBQUNBTCxrQkFBUSxDQUFDRixFQUFULENBQVksTUFBWixFQUFvQixVQUFDUSxLQUFELEVBQVc7QUFDN0JELGdCQUFJLENBQUNFLElBQUwsQ0FBVUQsS0FBVjtBQUNELFdBRkQsRUFFR1IsRUFGSCxDQUVNLEtBRk4sRUFFYSxZQUFNO0FBQ2pCTyxnQkFBSSxHQUFHRyxNQUFNLENBQUNDLE1BQVAsQ0FBY0osSUFBZCxDQUFQO0FBQ0FYLG1CQUFPLENBQUM7QUFBQ00sc0JBQVEsRUFBRUssSUFBWDtBQUFpQnBCLGlCQUFHLEVBQUVBO0FBQXRCLGFBQUQsQ0FBUDtBQUNELFdBTEQ7QUFNRCxTQVJELE1BUU87QUFDSFUsZ0JBQU0sQ0FBQyxJQUFJTyxLQUFKLENBQVUsMkJBQTJCRCxLQUFyQyxDQUFELENBQU47QUFDSDtBQUNGLE9BdEJEO0FBdUJBTCxTQUFHLENBQUNjLEdBQUo7QUFDRCxLQS9CTSxDQUFQO0FBZ0NELEdBdENEOztBQXVDQSxTQUFPNUIsY0FBUDtBQUNELENBOUN1QixFQUF4Qjs7QUErQ0E2QixPQUFPLENBQUM3QixjQUFSLEdBQXlCQSxjQUF6QiIsImZpbGUiOiI0NC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3Qge25ldH0gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xuY29uc3QgYXBwU2V0dGluZ3MgPSByZXF1aXJlKCcuLi8uLi9hcHAtc2V0dGluZ3MnKTtcblxuY29uc3QgTWFuaWZlc3RMb2FkZXIgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBNYW5pZmVzdExvYWRlciAoKSB7fVxuXG4gIE1hbmlmZXN0TG9hZGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKHVybCkge1xuICAgIHJldHVybiB0aGlzLnNlbmRYTUxIdHRwUmVxdWVzdCh1cmwpO1xuICB9O1xuICBNYW5pZmVzdExvYWRlci5wcm90b3R5cGUuc2VuZFhNTEh0dHBSZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCkge1xuICAgIGNvbnN0IHJlcV9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICB1cmw6IHVybCxcbiAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICB9LCBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLmRlZmF1bHRNYW5pZmVzdFJlcXVlc3RPcHRpb25zKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBsZXQgcmVxID0gbmV0LnJlcXVlc3QocmVxX29wdGlvbnMpO1xuXG4gICAgICByZXEub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXEub24oJ3Jlc3BvbnNlJywgKHJlc3BvbnNlKSA9PiB7XG5cbiAgICAgICAgcmVzcG9uc2Uub24oXCJlcnJvclwiLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiTUFOSUZFU1QgTE9BRCBGQUlMVVJFIFwiICsgZXJyb3IpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGVycm9yO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgICAgICAgIGVycm9yID0gcmVzcG9uc2Uuc3RhdHVzTWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICBsZXQgYm9keSA9IFtdO1xuICAgICAgICAgIHJlc3BvbnNlLm9uKCdkYXRhJywgKGNodW5rKSA9PiB7XG4gICAgICAgICAgICBib2R5LnB1c2goY2h1bmspO1xuICAgICAgICAgIH0pLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICBib2R5ID0gQnVmZmVyLmNvbmNhdChib2R5KTtcbiAgICAgICAgICAgIHJlc29sdmUoe3Jlc3BvbnNlOiBib2R5LCB1cmw6IHVybH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIk1BTklGRVNUIExPQUQgRkFJTFVSRSBcIiArIGVycm9yKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmVxLmVuZCgpO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gTWFuaWZlc3RMb2FkZXI7XG59KCkpO1xuZXhwb3J0cy5NYW5pZmVzdExvYWRlciA9IE1hbmlmZXN0TG9hZGVyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///44\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar fs = __webpack_require__(3);\n\nvar path = __webpack_require__(4);\n/**\n * @param {string} url - local url\n * @returns {Promise} promise\n * @constructor\n */\n\n\nfunction ManifestLocalLoader(url) {\n  return new Promise(function (resolve, reject) {\n    fs.readFile(path.resolve(url), "utf-8", function (err, content) {\n      if (!err) {\n        resolve(content);\n      } else {\n        reject(err);\n      }\n    });\n  });\n}\n\nmodule.exports = ManifestLocalLoader;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvbG9hZGVyL21hbmlmZXN0LWxvY2FsLWxvYWRlci5qcz9mMzY5Il0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsInBhdGgiLCJNYW5pZmVzdExvY2FsTG9hZGVyIiwidXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWFkRmlsZSIsImVyciIsImNvbnRlbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxFQUFFLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUFsQjs7QUFDQSxJQUFNQyxJQUFJLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUFwQjtBQUVBOzs7Ozs7O0FBS0EsU0FBU0UsbUJBQVQsQ0FBOEJDLEdBQTlCLEVBQW1DO0FBQ2pDLFNBQU8sSUFBSUMsT0FBSixDQUFZLFVBQVVDLE9BQVYsRUFBbUJDLE1BQW5CLEVBQTJCO0FBQzVDUCxNQUFFLENBQUNRLFFBQUgsQ0FBWU4sSUFBSSxDQUFDSSxPQUFMLENBQWFGLEdBQWIsQ0FBWixFQUErQixPQUEvQixFQUF3QyxVQUFVSyxHQUFWLEVBQWVDLE9BQWYsRUFBd0I7QUFDOUQsVUFBSSxDQUFDRCxHQUFMLEVBQVU7QUFDUkgsZUFBTyxDQUFDSSxPQUFELENBQVA7QUFDRCxPQUZELE1BRU87QUFDTEgsY0FBTSxDQUFDRSxHQUFELENBQU47QUFDRDtBQUNGLEtBTkQ7QUFPRCxHQVJNLENBQVA7QUFTRDs7QUFDREUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCVCxtQkFBakIiLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIGxvY2FsIHVybFxuICogQHJldHVybnMge1Byb21pc2V9IHByb21pc2VcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBNYW5pZmVzdExvY2FsTG9hZGVyICh1cmwpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmcy5yZWFkRmlsZShwYXRoLnJlc29sdmUodXJsKSwgXCJ1dGYtOFwiLCBmdW5jdGlvbiAoZXJyLCBjb250ZW50KSB7XG4gICAgICBpZiAoIWVycikge1xuICAgICAgICByZXNvbHZlKGNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSBNYW5pZmVzdExvY2FsTG9hZGVyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///45\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar ManifestXML_1 = __webpack_require__(47);\n\nvar StreamIndexNode_1 = __webpack_require__(51);\n\nManifestXML_1.ManifestXML.prototype.getManifestType = function (xml) {\n  return xml.getElementsByTagName('SmoothStreamingMedia').length !== 0 ? 'MSS' : 'DASH';\n};\n\nManifestXML_1.ManifestXML.prototype.getAdaptationSetNodeName = function () {\n  return this.manifestType === 'MSS' ? 'StreamIndex' : 'AdaptationSet';\n};\n\nManifestXML_1.ManifestXML.prototype.getRepresentationNodeName = function () {\n  return this.manifestType === 'MSS' ? 'QualityLevel' : 'Representation';\n};\n\nManifestXML_1.ManifestXML.prototype.parseStreams = function () {\n  var streams = this.xml.getElementsByTagName('StreamIndex');\n\n  for (var i = 0; i < streams.length; i++) {\n    var streamNode = new StreamIndexNode_1.StreamIndexNode(streams[i], this.xml);\n    this.adaptationSetColl[i] = streamNode;\n  }\n};\n\nManifestXML_1.ManifestXML.prototype._parseAdaptations = ManifestXML_1.ManifestXML.prototype.parseAdaptations;\n\nManifestXML_1.ManifestXML.prototype.parseAdaptations = function () {\n  // Manifest type detection\n  this.manifestType = this.getManifestType(this.xml);\n\n  if (this.manifestType === 'MSS') {\n    return this.parseStreams();\n  } else {\n    return this._parseAdaptations();\n  }\n};\n\nexports.ManifestXML = ManifestXML_1.ManifestXML;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL21zcy9tYW5pZmVzdC14bWwuanM/NjVkMCJdLCJuYW1lcyI6WyJNYW5pZmVzdFhNTF8xIiwicmVxdWlyZSIsIlN0cmVhbUluZGV4Tm9kZV8xIiwiTWFuaWZlc3RYTUwiLCJwcm90b3R5cGUiLCJnZXRNYW5pZmVzdFR5cGUiLCJ4bWwiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsImdldEFkYXB0YXRpb25TZXROb2RlTmFtZSIsIm1hbmlmZXN0VHlwZSIsImdldFJlcHJlc2VudGF0aW9uTm9kZU5hbWUiLCJwYXJzZVN0cmVhbXMiLCJzdHJlYW1zIiwiaSIsInN0cmVhbU5vZGUiLCJTdHJlYW1JbmRleE5vZGUiLCJhZGFwdGF0aW9uU2V0Q29sbCIsIl9wYXJzZUFkYXB0YXRpb25zIiwicGFyc2VBZGFwdGF0aW9ucyIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLGFBQWEsR0FBR0MsbUJBQU8sQ0FBQyxFQUFELENBQTdCOztBQUNBLElBQU1DLGlCQUFpQixHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBakM7O0FBR0FELGFBQWEsQ0FBQ0csV0FBZCxDQUEwQkMsU0FBMUIsQ0FBb0NDLGVBQXBDLEdBQXNELFVBQVVDLEdBQVYsRUFBZTtBQUNuRSxTQUFPQSxHQUFHLENBQUNDLG9CQUFKLENBQXlCLHNCQUF6QixFQUFpREMsTUFBakQsS0FBNEQsQ0FBNUQsR0FBZ0UsS0FBaEUsR0FBd0UsTUFBL0U7QUFDRCxDQUZEOztBQUlBUixhQUFhLENBQUNHLFdBQWQsQ0FBMEJDLFNBQTFCLENBQW9DSyx3QkFBcEMsR0FBK0QsWUFBWTtBQUN6RSxTQUFRLEtBQUtDLFlBQUwsS0FBc0IsS0FBdkIsR0FBZ0MsYUFBaEMsR0FBZ0QsZUFBdkQ7QUFDRCxDQUZEOztBQUdBVixhQUFhLENBQUNHLFdBQWQsQ0FBMEJDLFNBQTFCLENBQW9DTyx5QkFBcEMsR0FBZ0UsWUFBWTtBQUMxRSxTQUFRLEtBQUtELFlBQUwsS0FBc0IsS0FBdkIsR0FBZ0MsY0FBaEMsR0FBaUQsZ0JBQXhEO0FBQ0QsQ0FGRDs7QUFHQVYsYUFBYSxDQUFDRyxXQUFkLENBQTBCQyxTQUExQixDQUFvQ1EsWUFBcEMsR0FBbUQsWUFBWTtBQUM3RCxNQUFNQyxPQUFPLEdBQUcsS0FBS1AsR0FBTCxDQUFTQyxvQkFBVCxDQUE4QixhQUE5QixDQUFoQjs7QUFDQSxPQUFLLElBQUlPLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdELE9BQU8sQ0FBQ0wsTUFBNUIsRUFBb0NNLENBQUMsRUFBckMsRUFBeUM7QUFDdkMsUUFBTUMsVUFBVSxHQUFHLElBQUliLGlCQUFpQixDQUFDYyxlQUF0QixDQUFzQ0gsT0FBTyxDQUFDQyxDQUFELENBQTdDLEVBQWtELEtBQUtSLEdBQXZELENBQW5CO0FBQ0EsU0FBS1csaUJBQUwsQ0FBdUJILENBQXZCLElBQTRCQyxVQUE1QjtBQUNEO0FBQ0YsQ0FORDs7QUFPQWYsYUFBYSxDQUFDRyxXQUFkLENBQTBCQyxTQUExQixDQUFvQ2MsaUJBQXBDLEdBQXdEbEIsYUFBYSxDQUFDRyxXQUFkLENBQTBCQyxTQUExQixDQUFvQ2UsZ0JBQTVGOztBQUNBbkIsYUFBYSxDQUFDRyxXQUFkLENBQTBCQyxTQUExQixDQUFvQ2UsZ0JBQXBDLEdBQXVELFlBQVk7QUFDakU7QUFDQSxPQUFLVCxZQUFMLEdBQW9CLEtBQUtMLGVBQUwsQ0FBcUIsS0FBS0MsR0FBMUIsQ0FBcEI7O0FBRUEsTUFBSSxLQUFLSSxZQUFMLEtBQXNCLEtBQTFCLEVBQWlDO0FBQy9CLFdBQU8sS0FBS0UsWUFBTCxFQUFQO0FBQ0QsR0FGRCxNQUVPO0FBQ0wsV0FBTyxLQUFLTSxpQkFBTCxFQUFQO0FBQ0Q7QUFDRixDQVREOztBQVdBRSxPQUFPLENBQUNqQixXQUFSLEdBQXNCSCxhQUFhLENBQUNHLFdBQXBDIiwiZmlsZSI6IjQ2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBNYW5pZmVzdFhNTF8xID0gcmVxdWlyZSgnLi4vbWFuaWZlc3QteG1sJyk7XG5jb25zdCBTdHJlYW1JbmRleE5vZGVfMSA9IHJlcXVpcmUoJy4vc3RyZWFtSW5kZXgtbm9kZScpO1xuXG5cbk1hbmlmZXN0WE1MXzEuTWFuaWZlc3RYTUwucHJvdG90eXBlLmdldE1hbmlmZXN0VHlwZSA9IGZ1bmN0aW9uICh4bWwpIHtcbiAgcmV0dXJuIHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnU21vb3RoU3RyZWFtaW5nTWVkaWEnKS5sZW5ndGggIT09IDAgPyAnTVNTJyA6ICdEQVNIJztcbn07XG5cbk1hbmlmZXN0WE1MXzEuTWFuaWZlc3RYTUwucHJvdG90eXBlLmdldEFkYXB0YXRpb25TZXROb2RlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICh0aGlzLm1hbmlmZXN0VHlwZSA9PT0gJ01TUycpID8gJ1N0cmVhbUluZGV4JyA6ICdBZGFwdGF0aW9uU2V0Jztcbn07XG5NYW5pZmVzdFhNTF8xLk1hbmlmZXN0WE1MLnByb3RvdHlwZS5nZXRSZXByZXNlbnRhdGlvbk5vZGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gKHRoaXMubWFuaWZlc3RUeXBlID09PSAnTVNTJykgPyAnUXVhbGl0eUxldmVsJyA6ICdSZXByZXNlbnRhdGlvbic7XG59O1xuTWFuaWZlc3RYTUxfMS5NYW5pZmVzdFhNTC5wcm90b3R5cGUucGFyc2VTdHJlYW1zID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBzdHJlYW1zID0gdGhpcy54bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1N0cmVhbUluZGV4Jyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyZWFtcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHN0cmVhbU5vZGUgPSBuZXcgU3RyZWFtSW5kZXhOb2RlXzEuU3RyZWFtSW5kZXhOb2RlKHN0cmVhbXNbaV0sIHRoaXMueG1sKTtcbiAgICB0aGlzLmFkYXB0YXRpb25TZXRDb2xsW2ldID0gc3RyZWFtTm9kZTtcbiAgfVxufTtcbk1hbmlmZXN0WE1MXzEuTWFuaWZlc3RYTUwucHJvdG90eXBlLl9wYXJzZUFkYXB0YXRpb25zID0gTWFuaWZlc3RYTUxfMS5NYW5pZmVzdFhNTC5wcm90b3R5cGUucGFyc2VBZGFwdGF0aW9ucztcbk1hbmlmZXN0WE1MXzEuTWFuaWZlc3RYTUwucHJvdG90eXBlLnBhcnNlQWRhcHRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIE1hbmlmZXN0IHR5cGUgZGV0ZWN0aW9uXG4gIHRoaXMubWFuaWZlc3RUeXBlID0gdGhpcy5nZXRNYW5pZmVzdFR5cGUodGhpcy54bWwpO1xuXG4gIGlmICh0aGlzLm1hbmlmZXN0VHlwZSA9PT0gJ01TUycpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZVN0cmVhbXMoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VBZGFwdGF0aW9ucygpO1xuICB9XG59O1xuXG5leHBvcnRzLk1hbmlmZXN0WE1MID0gTWFuaWZlc3RYTUxfMS5NYW5pZmVzdFhNTDtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///46\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar AdaptationSetNode_1 = __webpack_require__(20);\n\nvar DOMParser = __webpack_require__(10).DOMParser;\n\nvar ManifestXML = function () {\n  function ManifestXML() {}\n\n  ManifestXML.prototype.parse = function (str, onSuccess, onError) {\n    var parser;\n\n    if (typeof onSuccess === \"function\" && typeof onError === \"function\") {\n      parser = new DOMParser({\n        errorHandler: {\n          warning: function warning() {},\n          error: onError,\n          fatalError: onError\n        }\n      });\n    } else {\n      parser = new DOMParser();\n    }\n\n    this.adaptationSetColl = [];\n    this.xml = parser.parseFromString(str, \"application/xml\");\n    this.parseAdaptations();\n\n    if (typeof onSuccess === \"function\") {\n      onSuccess();\n    }\n  };\n\n  ManifestXML.prototype.getAdaptationSetNodeName = function () {\n    return 'AdaptationSet';\n  };\n\n  ManifestXML.prototype.getRepresentationNodeName = function () {\n    return 'Representation';\n  };\n\n  ManifestXML.prototype.parseAdaptations = function () {\n    var adaptations = this.xml.getElementsByTagName('AdaptationSet');\n\n    for (var i = 0; i < adaptations.length; i++) {\n      var adaptNode = new AdaptationSetNode_1.AdaptationSetNode(adaptations[i], this.xml);\n      this.adaptationSetColl[i] = adaptNode;\n    }\n  };\n\n  ManifestXML.prototype.getVideoAdaptation = function () {\n    return this.getAdaptations('video');\n  };\n\n  ManifestXML.prototype.getAudioAdaptation = function () {\n    return this.getAdaptations('audio');\n  };\n\n  ManifestXML.prototype.getTextAdaptation = function () {\n    return this.getAdaptations('text');\n  };\n\n  ManifestXML.prototype.getManifestXML = function () {\n    return this.xml;\n  };\n\n  ManifestXML.prototype.getAdaptations = function (which) {\n    var adaptations = this.adaptationSetColl.map(function (item) {\n      return item;\n    }).filter(function (item) {\n      if (item.isMimeType(which) || item.isContentType(which)) {\n        return true;\n      }\n    });\n    return adaptations;\n  };\n\n  ManifestXML.cloneXML = function (xml) {\n    var newDocument = xml.implementation.createDocument(xml.namespaceURI, null, null);\n    var newNode = newDocument.importNode(xml.documentElement, true);\n    newDocument.appendChild(newNode);\n    return newDocument;\n  };\n\n  ManifestXML.prototype.removeNode = function () {\n    var self = this;\n    var representationCollection = this.xml.documentElement.getElementsByTagName(this.getRepresentationNodeName());\n    var adaptationCollection = this.xml.documentElement.getElementsByTagName(this.getAdaptationSetNodeName());\n    var repArray = [];\n    var adaptationArray = [];\n\n    for (var i = 0; i < representationCollection.length; i++) {\n      repArray[i] = representationCollection[i];\n    }\n\n    repArray.forEach(function (item) {\n      var markForDownload = item.attributes.getNamedItem(\"markForDownload\") && item.attributes.getNamedItem(\"markForDownload\").value == 'true' ? true : false;\n\n      if (!markForDownload) {\n        item.parentNode.removeChild(item);\n      }\n\n      item.removeAttribute('markForDownload');\n    }, this);\n\n    for (var _i = 0; _i < adaptationCollection.length; _i++) {\n      adaptationArray[_i] = adaptationCollection[_i];\n    }\n\n    adaptationArray.forEach(function (item) {\n      if (!item.getElementsByTagName(self.getRepresentationNodeName()).length) {\n        item.parentNode.removeChild(item);\n      }\n    });\n  };\n\n  return ManifestXML;\n}();\n\nexports.ManifestXML = ManifestXML;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL21hbmlmZXN0LXhtbC5qcz83ZTA4Il0sIm5hbWVzIjpbIkFkYXB0YXRpb25TZXROb2RlXzEiLCJyZXF1aXJlIiwiRE9NUGFyc2VyIiwiTWFuaWZlc3RYTUwiLCJwcm90b3R5cGUiLCJwYXJzZSIsInN0ciIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJwYXJzZXIiLCJlcnJvckhhbmRsZXIiLCJ3YXJuaW5nIiwiZXJyb3IiLCJmYXRhbEVycm9yIiwiYWRhcHRhdGlvblNldENvbGwiLCJ4bWwiLCJwYXJzZUZyb21TdHJpbmciLCJwYXJzZUFkYXB0YXRpb25zIiwiZ2V0QWRhcHRhdGlvblNldE5vZGVOYW1lIiwiZ2V0UmVwcmVzZW50YXRpb25Ob2RlTmFtZSIsImFkYXB0YXRpb25zIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpIiwibGVuZ3RoIiwiYWRhcHROb2RlIiwiQWRhcHRhdGlvblNldE5vZGUiLCJnZXRWaWRlb0FkYXB0YXRpb24iLCJnZXRBZGFwdGF0aW9ucyIsImdldEF1ZGlvQWRhcHRhdGlvbiIsImdldFRleHRBZGFwdGF0aW9uIiwiZ2V0TWFuaWZlc3RYTUwiLCJ3aGljaCIsIm1hcCIsIml0ZW0iLCJmaWx0ZXIiLCJpc01pbWVUeXBlIiwiaXNDb250ZW50VHlwZSIsImNsb25lWE1MIiwibmV3RG9jdW1lbnQiLCJpbXBsZW1lbnRhdGlvbiIsImNyZWF0ZURvY3VtZW50IiwibmFtZXNwYWNlVVJJIiwibmV3Tm9kZSIsImltcG9ydE5vZGUiLCJkb2N1bWVudEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInJlbW92ZU5vZGUiLCJzZWxmIiwicmVwcmVzZW50YXRpb25Db2xsZWN0aW9uIiwiYWRhcHRhdGlvbkNvbGxlY3Rpb24iLCJyZXBBcnJheSIsImFkYXB0YXRpb25BcnJheSIsImZvckVhY2giLCJtYXJrRm9yRG93bmxvYWQiLCJhdHRyaWJ1dGVzIiwiZ2V0TmFtZWRJdGVtIiwidmFsdWUiLCJw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QkEsV0FBdEIiLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IEFkYXB0YXRpb25TZXROb2RlXzEgPSByZXF1aXJlKFwiLi9hZGFwdGF0aW9uLXNldC1ub2RlXCIpO1xuY29uc3QgRE9NUGFyc2VyID0gcmVxdWlyZSgneG1sZG9tJykuRE9NUGFyc2VyO1xuY29uc3QgTWFuaWZlc3RYTUwgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBNYW5pZmVzdFhNTCAoKSB7XG4gIH1cbiAgTWFuaWZlc3RYTUwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKHN0ciwgb25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgbGV0IHBhcnNlcjtcbiAgICBpZiAodHlwZW9mIG9uU3VjY2VzcyA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBvbkVycm9yID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHBhcnNlciA9IG5ldyBET01QYXJzZXIoe1xuICAgICAgICBlcnJvckhhbmRsZXI6IHtcbiAgICAgICAgICB3YXJuaW5nOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgICBlcnJvcjogb25FcnJvciwgZmF0YWxFcnJvcjogb25FcnJvclxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG4gICAgfVxuICAgIHRoaXMuYWRhcHRhdGlvblNldENvbGwgPSBbXTtcbiAgICB0aGlzLnhtbCA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoc3RyLCBcImFwcGxpY2F0aW9uL3htbFwiKTtcblxuICAgIHRoaXMucGFyc2VBZGFwdGF0aW9ucygpO1xuXG4gICAgaWYgKHR5cGVvZiBvblN1Y2Nlc3MgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgb25TdWNjZXNzKCk7XG4gICAgfVxuICB9O1xuICBNYW5pZmVzdFhNTC5wcm90b3R5cGUuZ2V0QWRhcHRhdGlvblNldE5vZGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnQWRhcHRhdGlvblNldCc7XG4gIH07XG4gIE1hbmlmZXN0WE1MLnByb3RvdHlwZS5nZXRSZXByZXNlbnRhdGlvbk5vZGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnUmVwcmVzZW50YXRpb24nO1xuICB9O1xuICBNYW5pZmVzdFhNTC5wcm90b3R5cGUucGFyc2VBZGFwdGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBhZGFwdGF0aW9ucyA9IHRoaXMueG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdBZGFwdGF0aW9uU2V0Jyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGFwdGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYWRhcHROb2RlID0gbmV3IEFkYXB0YXRpb25TZXROb2RlXzEuQWRhcHRhdGlvblNldE5vZGUoYWRhcHRhdGlvbnNbaV0sIHRoaXMueG1sKTtcbiAgICAgIHRoaXMuYWRhcHRhdGlvblNldENvbGxbaV0gPSBhZGFwdE5vZGU7XG4gICAgfVxuICB9O1xuICBNYW5pZmVzdFhNTC5wcm90b3R5cGUuZ2V0VmlkZW9BZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFkYXB0YXRpb25zKCd2aWRlbycpO1xuICB9O1xuICBNYW5pZmVzdFhNTC5wcm90b3R5cGUuZ2V0QXVkaW9BZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFkYXB0YXRpb25zKCdhdWRpbycpO1xuICB9O1xuICBNYW5pZmVzdFhNTC5wcm90b3R5cGUuZ2V0VGV4dEFkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QWRhcHRhdGlvbnMoJ3RleHQnKTtcbiAgfTtcbiAgTWFuaWZlc3RYTUwucHJvdG90eXBlLmdldE1hbmlmZXN0WE1MID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnhtbDtcbiAgfTtcbiAgTWFuaWZlc3RYTUwucHJvdG90eXBlLmdldEFkYXB0YXRpb25zID0gZnVuY3Rpb24gKHdoaWNoKSB7XG4gICAgY29uc3QgYWRhcHRhdGlvbnMgPSB0aGlzLmFkYXB0YXRpb25TZXRDb2xsLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICBpZiAoaXRlbS5pc01pbWVUeXBlKHdoaWNoKSB8fCBpdGVtLmlzQ29udGVudFR5cGUod2hpY2gpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBhZGFwdGF0aW9ucztcbiAgfTtcbiAgTWFuaWZlc3RYTUwuY2xvbmVYTUwgPSBmdW5jdGlvbiAoeG1sKSB7XG4gICAgY29uc3QgbmV3RG9jdW1lbnQgPSB4bWwuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQoeG1sLm5hbWVzcGFjZVVSSSwgbnVsbCwgbnVsbCk7XG4gICAgY29uc3QgbmV3Tm9kZSA9IG5ld0RvY3VtZW50LmltcG9ydE5vZGUoeG1sLmRvY3VtZW50RWxlbWVudCwgdHJ1ZSk7XG4gICAgbmV3RG9jdW1lbnQuYXBwZW5kQ2hpbGQobmV3Tm9kZSk7XG4gICAgcmV0dXJuIG5ld0RvY3VtZW50O1xuICB9O1xuICBNYW5pZmVzdFhNTC5wcm90b3R5cGUucmVtb3ZlTm9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBsZXQgcmVwcmVzZW50YXRpb25Db2xsZWN0aW9uID0gdGhpcy54bWwuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRoaXMuZ2V0UmVwcmVzZW50YXRpb25Ob2RlTmFtZSgpKTtcbiAgICBsZXQgYWRhcHRhdGlvbkNvbGxlY3Rpb24gPSB0aGlzLnhtbC5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGhpcy5nZXRBZGFwdGF0aW9uU2V0Tm9kZU5hbWUoKSk7XG4gICAgbGV0IHJlcEFycmF5ID0gW107XG4gICAgbGV0IGFkYXB0YXRpb25BcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVwcmVzZW50YXRpb25Db2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXBBcnJheVtpXSA9IHJlcHJlc2VudGF0aW9uQ29sbGVjdGlvbltpXTtcbiAgICB9XG4gICAgcmVwQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgY29uc3QgbWFya0ZvckRvd25sb2FkID0gKGl0ZW0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJtYXJrRm9yRG93bmxvYWRcIikgJiZcbiAgICAgICAgICBpdGVtLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwibWFya0ZvckRvd25sb2FkXCIpLnZhbHVlID09ICd0cnVlJylcbiAgICAgICAgICA/IHRydWUgOiBmYWxzZTtcbiAgICAgIGlmICghbWFya0ZvckRvd25sb2FkKSB7XG4gICAgICAgIGl0ZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCdtYXJrRm9yRG93bmxvYWQnKTtcbiAgICB9LCB0aGlzKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkYXB0YXRpb25Db2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhZGFwdGF0aW9uQXJyYXlbaV0gPSBhZGFwdGF0aW9uQ29sbGVjdGlvbltpXTtcbiAgICB9XG4gICAgYWRhcHRhdGlvbkFycmF5LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIGlmICghaXRlbS5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxmLmdldFJlcHJlc2VudGF0aW9uTm9kZU5hbWUoKSkubGVuZ3RoKSB7XG4gICAgICAgIGl0ZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIE1hbmlmZXN0WE1MO1xufSgpKTtcbmV4cG9ydHMuTWFuaWZlc3RYTUwgPSBNYW5pZmVzdFhNTDtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///47\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) {\n    if (b.hasOwnProperty(p)) {\n      d[p] = b[p];\n    }\n  }\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar ManifestNode_1 = __webpack_require__(16);\n\nvar SegmentInformation_1 = __webpack_require__(21);\n\nvar IsoDurationParser_1 = __webpack_require__(23);\n\nvar RepresentationNode = function (_super) {\n  __extends(RepresentationNode, _super);\n\n  function RepresentationNode(node, xml) {\n    _super.call(this, node, xml);\n\n    this.markNodeForDownload(false);\n  }\n\n  RepresentationNode.prototype.createSegmentInformation = function () {\n    var presentationDuration = IsoDurationParser_1.IsoDurationParser.getDuration(this.attributeList['mediaPresentationDuration']);\n    var segmentTimeline;\n    var timelineItemList;\n    var segmentUrlList;\n    var representationID = this.attributeList['id'];\n\n    if (this.segmentTemplate && this.segmentTemplate.hasChildNodes()) {\n      for (var i = 0; i < this.segmentTemplate.childNodes.length; i++) {\n        if (this.segmentTemplate.childNodes[i].nodeName == \"SegmentTimeline\") {\n          segmentTimeline = this.segmentTemplate.childNodes[i];\n        }\n      }\n    }\n\n    try {\n      timelineItemList = segmentTimeline.getElementsByTagName('S');\n    } catch (e) {}\n\n    try {\n      segmentUrlList = this.segmentList.getElementsByTagName('SegmentURL');\n    } catch (e) {}\n\n    this.bandwidth = this.attributeList['bandwidth'] ? parseInt(this.attributeList['bandwidth']) : -1;\n    this.segmentInformation = new SegmentInformation_1.SegmentInformation(presentationDuration, this.bandwidth, this.baseURL, representationID, this.attributeList['mimeType'], this.segmentBase, this.segmentTemplate, segmentTimeline, timelineItemList, this.segmentList, segmentUrlList);\n  };\n\n  RepresentationNode.prototype.writeAttributesToList = function (node, list) {\n    var attrList = node.attributes;\n\n    for (var i = 0; i < node.childNodes.length; i++) {\n      if (!this.baseURL && node.childNodes[i].nodeName == 'BaseURL') {\n        this.baseURL = node.childNodes[i].firstChild.nodeValue;\n      }\n\n      if (!this.segmentBase && node.childNodes[i].nodeName == 'SegmentBase') {\n        this.segmentBase = node.childNodes[i];\n      }\n\n      if (!this.segmentTemplate && node.childNodes[i].nodeName == 'SegmentTemplate') {\n        this.segmentTemplate = node.childNodes[i];\n      }\n\n      if (!this.segmentList && node.childNodes[i].nodeName == 'SegmentList') {\n        this.segmentList = node.childNodes[i];\n      }\n    }\n\n    for (var attr in attrList) {\n      if (!list[attrList[attr].nodeName]) {\n        list[attrList[attr].nodeName] = attrList[attr].nodeValue;\n      }\n    }\n\n    if (list['mediaPresentationDuration'] !== undefined) {\n      list['durationInS'] = IsoDurationParser_1.IsoDurationParser.getDurationAsS(this.attributeList['mediaPresentationDuration']);\n    }\n\n    if (node.parentNode !== null) {\n      this.buildAttributeList(node.parentNode, list);\n    } else {\n      if (!this.segmentInformation) {\n        this.createSegmentInformation();\n      }\n    }\n\n    _super.prototype.writeAttributesToList.call(this, node, list);\n  };\n\n  RepresentationNode.prototype.getMimeType = function () {\n    return this.attributeList['mimeType'] || this.attributeList['contentType'];\n  };\n\n  RepresentationNode.prototype.hasMimeType = function () {\n    return this.attributeList['mimeType'] || this.attributeList['contentType'] ? true : false;\n  };\n\n  RepresentationNode.prototype.getMediaUrlList = function () {\n    return this.segmentInformation.getMediaUrlList();\n  };\n\n  RepresentationNode.prototype.getRepresentationId = function () {\n    return this.id;\n  };\n\n  return RepresentationNode;\n}(ManifestNode_1.ManifestNode);\n\nexports.RepresentationNode = RepresentationNode;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL3JlcHJlc2VudGF0aW9uLW5vZGUuanM/ZWYxNSJdLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJkIiwiYiIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJNYW5pZmVzdE5vZGVfMSIsInJlcXVpcmUiLCJTZWdtZW50SW5mb3JtYXRpb25fMSIsIklzb0R1cmF0aW9uUGFyc2VyXzEiLCJSZXByZXNlbnRhdGlvbk5vZGUiLCJfc3VwZXIiLCJub2RlIiwieG1sIiwiY2FsbCIsIm1hcmtOb2RlRm9yRG93bmxvYWQiLCJjcmVhdGVTZWdtZW50SW5mb3JtYXRpb24iLCJwcmVzZW50YXRpb25EdXJhdGlvbiIsIklzb0R1cmF0aW9uUGFyc2VyIiwiZ2V0RHVyYXRpb24iLCJhdHRyaWJ1dGVMaXN0Iiwic2VnbWVudFRpbWVsaW5lIiwidGltZWxpbmVJdGVtTGlzdCIsInNlZ21lbnRVcmxMaXN0IiwicmVwcmVzZW50YXRpb25JRCIsInNlZ21lbnRUZW1wbGF0ZSIsImhhc0NoaWxkTm9kZXMiLCJpIiwiY2hpbGROb2RlcyIsImxlbmd0aCIsIm5vZGVOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJlIiwic2VnbWVudExpc3QiLCJiYW5kd2lkdGgiLCJwYXJzZUludCIsInNlZ21lbnRJbmZvcm1hdGlvbiIsIlNlZ21lbnRJbmZvcm1hdGlvbiIsImJhc2VVUkwiLCJzZWdtZW50QmFzZSIsIndyaXRlQXR0cmlidXRlc1RvTGlzdCIsImxpc3QiLCJhdHRyTGlzdCIsImF0dHJpYnV0ZXMiLCJmaXJzdENoaWxkIiwibm9kZVZhbHVlIiwiYXR0ciIsInVuZGVmaW5lZCIsImdldER1cmF0aW9uQXNTIiwicGFyZW50Tm9kZSIsImJ1aWxkQXR0cmlidXRlTGlzdCIsImdldE1pbWVUeXBlIiwiaGFzTWltZVR5cGUiLCJnZXRNZWRpYVVybExpc3Qi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REYsSUFBbEQsRUFBd0Q2QixJQUF4RDtBQUNELEdBbENEOztBQW1DQS9CLG9CQUFrQixDQUFDUCxTQUFuQixDQUE2QmdELFdBQTdCLEdBQTJDLFlBQVk7QUFDckQsV0FBTyxLQUFLL0IsYUFBTCxDQUFtQixVQUFuQixLQUFrQyxLQUFLQSxhQUFMLENBQW1CLGFBQW5CLENBQXpDO0FBQ0QsR0FGRDs7QUFHQVYsb0JBQWtCLENBQUNQLFNBQW5CLENBQTZCaUQsV0FBN0IsR0FBMkMsWUFBWTtBQUNyRCxXQUFPLEtBQUtoQyxhQUFMLENBQW1CLFVBQW5CLEtBQWtDLEtBQUtBLGFBQUwsQ0FBbUIsYUFBbkIsQ0FBbEMsR0FBc0UsSUFBdEUsR0FBNkUsS0FBcEY7QUFDRCxHQUZEOztBQUdBVixvQkFBa0IsQ0FBQ1AsU0FBbkIsQ0FBNkJrRCxlQUE3QixHQUErQyxZQUFZO0FBQ3pELFdBQU8sS0FBS2pCLGtCQUFMLENBQXdCaUIsZUFBeEIsRUFBUDtBQUNELEdBRkQ7O0FBR0EzQyxvQkFBa0IsQ0FBQ1AsU0FBbkIsQ0FBNkJtRCxtQkFBN0IsR0FBbUQsWUFBWTtBQUM3RCxXQUFPLEtBQUtDLEVBQVo7QUFDRCxHQUZEOztBQUdBLFNBQU83QyxrQkFBUDtBQUNELENBOUUyQixDQThFMUJKLGNBQWMsQ0FBQ2tELFlBOUVXLENBQTVCOztBQStFQUMsT0FBTyxDQUFDL0Msa0JBQVIsR0FBNkJBLGtCQUE3QiIsImZpbGUiOiI0OC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICBmb3IgKGxldCBwIGluIGIpIHtcbiAgICAgICAgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgICBkW3BdID0gYltwXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZnVuY3Rpb24gX18gKCkge1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gZDtcbiAgICAgIH1cblxuICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG5jb25zdCBNYW5pZmVzdE5vZGVfMSA9IHJlcXVpcmUoXCIuL21hbmlmZXN0LW5vZGVcIik7XG5jb25zdCBTZWdtZW50SW5mb3JtYXRpb25fMSA9IHJlcXVpcmUoXCIuL3NlZ21lbnQtaW5mb3JtYXRpb25cIik7XG5jb25zdCBJc29EdXJhdGlvblBhcnNlcl8xID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvSXNvLWR1cmF0aW9uLXBhcnNlclwiKTtcbmNvbnN0IFJlcHJlc2VudGF0aW9uTm9kZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhSZXByZXNlbnRhdGlvbk5vZGUsIF9zdXBlcik7XG4gIGZ1bmN0aW9uIFJlcHJlc2VudGF0aW9uTm9kZSAobm9kZSwgeG1sKSB7XG4gICAgX3N1cGVyLmNhbGwodGhpcywgbm9kZSwgeG1sKTtcbiAgICB0aGlzLm1hcmtOb2RlRm9yRG93bmxvYWQoZmFsc2UpO1xuICB9XG5cbiAgUmVwcmVzZW50YXRpb25Ob2RlLnByb3RvdHlwZS5jcmVhdGVTZWdtZW50SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgcHJlc2VudGF0aW9uRHVyYXRpb24gPSBJc29EdXJhdGlvblBhcnNlcl8xLklzb0R1cmF0aW9uUGFyc2VyLmdldER1cmF0aW9uKFxuICAgICAgICB0aGlzLmF0dHJpYnV0ZUxpc3RbJ21lZGlhUHJlc2VudGF0aW9uRHVyYXRpb24nXSk7XG4gICAgbGV0IHNlZ21lbnRUaW1lbGluZTtcbiAgICBsZXQgdGltZWxpbmVJdGVtTGlzdDtcbiAgICBsZXQgc2VnbWVudFVybExpc3Q7XG4gICAgY29uc3QgcmVwcmVzZW50YXRpb25JRCA9IHRoaXMuYXR0cmlidXRlTGlzdFsnaWQnXTtcbiAgICBpZiAodGhpcy5zZWdtZW50VGVtcGxhdGUgJiYgdGhpcy5zZWdtZW50VGVtcGxhdGUuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VnbWVudFRlbXBsYXRlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuc2VnbWVudFRlbXBsYXRlLmNoaWxkTm9kZXNbaV0ubm9kZU5hbWUgPT0gXCJTZWdtZW50VGltZWxpbmVcIikge1xuICAgICAgICAgIHNlZ21lbnRUaW1lbGluZSA9IHRoaXMuc2VnbWVudFRlbXBsYXRlLmNoaWxkTm9kZXNbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHRpbWVsaW5lSXRlbUxpc3QgPSBzZWdtZW50VGltZWxpbmUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1MnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHRyeSB7XG4gICAgICBzZWdtZW50VXJsTGlzdCA9IHRoaXMuc2VnbWVudExpc3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NlZ21lbnRVUkwnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHRoaXMuYmFuZHdpZHRoID0gKHRoaXMuYXR0cmlidXRlTGlzdFsnYmFuZHdpZHRoJ10pID8gcGFyc2VJbnQodGhpcy5hdHRyaWJ1dGVMaXN0WydiYW5kd2lkdGgnXSkgOiAtMTtcbiAgICB0aGlzLnNlZ21lbnRJbmZvcm1hdGlvbiA9IG5ldyBTZWdtZW50SW5mb3JtYXRpb25fMS5TZWdtZW50SW5mb3JtYXRpb24ocHJlc2VudGF0aW9uRHVyYXRpb24sIHRoaXMuYmFuZHdpZHRoLCB0aGlzLmJhc2VVUkwsIHJlcHJlc2VudGF0aW9uSUQsIHRoaXMuYXR0cmlidXRlTGlzdFsnbWltZVR5cGUnXSwgdGhpcy5zZWdtZW50QmFzZSwgdGhpcy5zZWdtZW50VGVtcGxhdGUsIHNlZ21lbnRUaW1lbGluZSwgdGltZWxpbmVJdGVtTGlzdCwgdGhpcy5zZWdtZW50TGlzdCwgc2VnbWVudFVybExpc3QpO1xuICB9O1xuICBSZXByZXNlbnRhdGlvbk5vZGUucHJvdG90eXBlLndyaXRlQXR0cmlidXRlc1RvTGlzdCA9IGZ1bmN0aW9uIChub2RlLCBsaXN0KSB7XG4gICAgY29uc3QgYXR0ckxpc3QgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdGhpcy5iYXNlVVJMICYmIG5vZGUuY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSA9PSAnQmFzZVVSTCcpIHtcbiAgICAgICAgdGhpcy5iYXNlVVJMID0gbm9kZS5jaGlsZE5vZGVzW2ldLmZpcnN0Q2hpbGQubm9kZVZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnNlZ21lbnRCYXNlICYmIG5vZGUuY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSA9PSAnU2VnbWVudEJhc2UnKSB7XG4gICAgICAgIHRoaXMuc2VnbWVudEJhc2UgPSBub2RlLmNoaWxkTm9kZXNbaV07XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuc2VnbWVudFRlbXBsYXRlICYmIG5vZGUuY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSA9PSAnU2VnbWVudFRlbXBsYXRlJykge1xuICAgICAgICB0aGlzLnNlZ21lbnRUZW1wbGF0ZSA9IG5vZGUuY2hpbGROb2Rlc1tpXTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5zZWdtZW50TGlzdCAmJiBub2RlLmNoaWxkTm9kZXNbaV0ubm9kZU5hbWUgPT0gJ1NlZ21lbnRMaXN0Jykge1xuICAgICAgICB0aGlzLnNlZ21lbnRMaXN0ID0gbm9kZS5jaGlsZE5vZGVzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBhdHRyIGluIGF0dHJMaXN0KSB7XG4gICAgICBpZiAoIWxpc3RbYXR0ckxpc3RbYXR0cl0ubm9kZU5hbWVdKSB7XG4gICAgICAgIGxpc3RbYXR0ckxpc3RbYXR0cl0ubm9kZU5hbWVdID0gYXR0ckxpc3RbYXR0cl0ubm9kZVZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobGlzdFsnbWVkaWFQcmVzZW50YXRpb25EdXJhdGlvbiddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpc3RbJ2R1cmF0aW9uSW5TJ10gPSBJc29EdXJhdGlvblBhcnNlcl8xLklzb0R1cmF0aW9uUGFyc2VyLmdldER1cmF0aW9uQXNTKFxuICAgICAgICB0aGlzLmF0dHJpYnV0ZUxpc3RbJ21lZGlhUHJlc2VudGF0aW9uRHVyYXRpb24nXSk7XG4gICAgfVxuXG4gICAgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUxpc3Qobm9kZS5wYXJlbnROb2RlLCBsaXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF0aGlzLnNlZ21lbnRJbmZvcm1hdGlvbikge1xuICAgICAgICB0aGlzLmNyZWF0ZVNlZ21lbnRJbmZvcm1hdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgICBfc3VwZXIucHJvdG90eXBlLndyaXRlQXR0cmlidXRlc1RvTGlzdC5jYWxsKHRoaXMsIG5vZGUsIGxpc3QpO1xuICB9O1xuICBSZXByZXNlbnRhdGlvbk5vZGUucHJvdG90eXBlLmdldE1pbWVUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZUxpc3RbJ21pbWVUeXBlJ10gfHwgdGhpcy5hdHRyaWJ1dGVMaXN0Wydjb250ZW50VHlwZSddO1xuICB9O1xuICBSZXByZXNlbnRhdGlvbk5vZGUucHJvdG90eXBlLmhhc01pbWVUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZUxpc3RbJ21pbWVUeXBlJ10gfHwgdGhpcy5hdHRyaWJ1dGVMaXN0Wydjb250ZW50VHlwZSddID8gdHJ1ZSA6IGZhbHNlO1xuICB9O1xuICBSZXByZXNlbnRhdGlvbk5vZGUucHJvdG90eXBlLmdldE1lZGlhVXJsTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5zZWdtZW50SW5mb3JtYXRpb24uZ2V0TWVkaWFVcmxMaXN0KCk7XG4gIH07XG4gIFJlcHJlc2VudGF0aW9uTm9kZS5wcm90b3R5cGUuZ2V0UmVwcmVzZW50YXRpb25JZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pZDtcbiAgfTtcbiAgcmV0dXJuIFJlcHJlc2VudGF0aW9uTm9kZTtcbn0oTWFuaWZlc3ROb2RlXzEuTWFuaWZlc3ROb2RlKSk7XG5leHBvcnRzLlJlcHJlc2VudGF0aW9uTm9kZSA9IFJlcHJlc2VudGF0aW9uTm9kZTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///48\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar ZeroPadding = function () {\n  function ZeroPadding() {}\n\n  ZeroPadding.addPadding = function (num, howManyZeros) {\n    var result;\n    var numArr = num.toString().split('');\n\n    while (numArr.length < howManyZeros) {\n      numArr.unshift('0');\n    }\n\n    result = numArr.join('');\n    return result;\n  };\n\n  ZeroPadding.getPaddingAmount = function (inputStr) {\n    var startIndex = inputStr.indexOf('%');\n    var endIndex = inputStr.lastIndexOf('$');\n    var numPadding = parseInt(inputStr.substring(startIndex + 1, endIndex - 1));\n    numPadding = isNaN(numPadding) ? 0 : numPadding;\n    return numPadding;\n  };\n\n  return ZeroPadding;\n}();\n\nexports.ZeroPadding = ZeroPadding;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC96ZXJvLXBhZGRpbmcuanM/ZDI5NCJdLCJuYW1lcyI6WyJaZXJvUGFkZGluZyIsImFkZFBhZGRpbmciLCJudW0iLCJob3dNYW55WmVyb3MiLCJyZXN1bHQiLCJudW1BcnIiLCJ0b1N0cmluZyIsInNwbGl0IiwibGVuZ3RoIiwidW5zaGlmdCIsImpvaW4iLCJnZXRQYWRkaW5nQW1vdW50IiwiaW5wdXRTdHIiLCJzdGFydEluZGV4IiwiaW5kZXhPZiIsImVuZEluZGV4IiwibGFzdEluZGV4T2YiLCJudW1QYWRkaW5nIiwicGFyc2VJbnQiLCJzdWJzdHJpbmciLCJpc05hTiIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLFdBQVcsR0FBSSxZQUFZO0FBQy9CLFdBQVNBLFdBQVQsR0FBd0IsQ0FDdkI7O0FBRURBLGFBQVcsQ0FBQ0MsVUFBWixHQUF5QixVQUFVQyxHQUFWLEVBQWVDLFlBQWYsRUFBNkI7QUFDcEQsUUFBSUMsTUFBSjtBQUNBLFFBQU1DLE1BQU0sR0FBR0gsR0FBRyxDQUFDSSxRQUFKLEdBQWVDLEtBQWYsQ0FBcUIsRUFBckIsQ0FBZjs7QUFDQSxXQUFPRixNQUFNLENBQUNHLE1BQVAsR0FBZ0JMLFlBQXZCLEVBQXFDO0FBQ25DRSxZQUFNLENBQUNJLE9BQVAsQ0FBZSxHQUFmO0FBQ0Q7O0FBQ0RMLFVBQU0sR0FBR0MsTUFBTSxDQUFDSyxJQUFQLENBQVksRUFBWixDQUFUO0FBQ0EsV0FBT04sTUFBUDtBQUNELEdBUkQ7O0FBU0FKLGFBQVcsQ0FBQ1csZ0JBQVosR0FBK0IsVUFBVUMsUUFBVixFQUFvQjtBQUNqRCxRQUFNQyxVQUFVLEdBQUdELFFBQVEsQ0FBQ0UsT0FBVCxDQUFpQixHQUFqQixDQUFuQjtBQUNBLFFBQU1DLFFBQVEsR0FBR0gsUUFBUSxDQUFDSSxXQUFULENBQXFCLEdBQXJCLENBQWpCO0FBQ0EsUUFBSUMsVUFBVSxHQUFHQyxRQUFRLENBQUNOLFFBQVEsQ0FBQ08sU0FBVCxDQUFtQk4sVUFBVSxHQUFHLENBQWhDLEVBQW1DRSxRQUFRLEdBQUcsQ0FBOUMsQ0FBRCxDQUF6QjtBQUNBRSxjQUFVLEdBQUlHLEtBQUssQ0FBQ0gsVUFBRCxDQUFOLEdBQXNCLENBQXRCLEdBQTBCQSxVQUF2QztBQUNBLFdBQU9BLFVBQVA7QUFDRCxHQU5EOztBQU9BLFNBQU9qQixXQUFQO0FBQ0QsQ0FyQm9CLEVBQXJCOztBQXNCQXFCLE9BQU8sQ0FBQ3JCLFdBQVIsR0FBc0JBLFdBQXRCIiwiZmlsZSI6IjQ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBaZXJvUGFkZGluZyA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFplcm9QYWRkaW5nICgpIHtcbiAgfVxuXG4gIFplcm9QYWRkaW5nLmFkZFBhZGRpbmcgPSBmdW5jdGlvbiAobnVtLCBob3dNYW55WmVyb3MpIHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGNvbnN0IG51bUFyciA9IG51bS50b1N0cmluZygpLnNwbGl0KCcnKTtcbiAgICB3aGlsZSAobnVtQXJyLmxlbmd0aCA8IGhvd01hbnlaZXJvcykge1xuICAgICAgbnVtQXJyLnVuc2hpZnQoJzAnKTtcbiAgICB9XG4gICAgcmVzdWx0ID0gbnVtQXJyLmpvaW4oJycpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIFplcm9QYWRkaW5nLmdldFBhZGRpbmdBbW91bnQgPSBmdW5jdGlvbiAoaW5wdXRTdHIpIHtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gaW5wdXRTdHIuaW5kZXhPZignJScpO1xuICAgIGNvbnN0IGVuZEluZGV4ID0gaW5wdXRTdHIubGFzdEluZGV4T2YoJyQnKTtcbiAgICBsZXQgbnVtUGFkZGluZyA9IHBhcnNlSW50KGlucHV0U3RyLnN1YnN0cmluZyhzdGFydEluZGV4ICsgMSwgZW5kSW5kZXggLSAxKSk7XG4gICAgbnVtUGFkZGluZyA9IChpc05hTihudW1QYWRkaW5nKSkgPyAwIDogbnVtUGFkZGluZztcbiAgICByZXR1cm4gbnVtUGFkZGluZztcbiAgfTtcbiAgcmV0dXJuIFplcm9QYWRkaW5nO1xufSgpKTtcbmV4cG9ydHMuWmVyb1BhZGRpbmcgPSBaZXJvUGFkZGluZztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///49\n")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__50__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtb21lbnQvbW9tZW50XCI/OTkzZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI1MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTBfXzsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///50\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar BASE64 = __webpack_require__(52);\n\nvar DOMParser = __webpack_require__(10).DOMParser;\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) {\n    if (b.hasOwnProperty(p)) {\n      d[p] = b[p];\n    }\n  }\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar AdaptationSetNode_1 = __webpack_require__(20);\n\nvar QualityLevelNode_1 = __webpack_require__(53);\n\nvar StreamIndexNode = function (_super) {\n  __extends(StreamIndexNode, _super);\n\n  function StreamIndexNode(node, xml) {\n    _super.call(this, node, xml);\n  }\n\n  StreamIndexNode.prototype.parse = function () {\n    var qualityLevels = this.currentNode.getElementsByTagName('QualityLevel');\n\n    for (var i = 0; i < qualityLevels.length; i++) {\n      var qualityLevelNode = new QualityLevelNode_1.QualityLevelNode(qualityLevels[i], this.xml);\n      this.representationColl[i] = qualityLevelNode;\n\n      if (this.representationColl[0].hasMimeType()) {\n        this.attributeList['mimeType'] = this.representationColl[0].getMimeType();\n      }\n\n      if (this.representationColl[0].hasContentType()) {\n        this.attributeList['mimeType'] = this.representationColl[0].getContentType();\n      }\n    }\n\n    var protection = this.xml.getElementsByTagName('Protection')[0];\n\n    if (protection !== undefined) {\n      var protectionHeader = protection.getElementsByTagName('ProtectionHeader')[0]; // Some packagers put newlines into the ProtectionHeader base64 string, which is not good\n      // because this cannot be correctly parsed. Let's just filter out any newlines found in there.\n\n      var psshPR = protectionHeader.firstChild.data.replace(/\\n|\\r/g, ''); // Get KID (in CENC format) from protection header\n\n      var KID = this.getKIDFromProtectionHeader(protectionHeader); // Create ContentProtection for PlayReady\n\n      var cpPR = {\n        schemeIdUri: \"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95\",\n        cencPSSH: psshPR\n      };\n      this.contentProtections.push(cpPR); // Create ContentProtection for Widevine (as a CENC protection)\n\n      var psshWV = this.createWidevinePssh(KID);\n      var cpWV = {\n        schemeIdUri: \"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\",\n        cencPSSH: psshWV\n      };\n      this.contentProtections.push(cpWV);\n    }\n  };\n\n  StreamIndexNode.prototype.getKIDFromProtectionHeader = function (protectionHeader) {\n    var prHeader, wrmHeader, xmlReader, KID; // Get PlayReady header as byte array (base64 decoded)\n\n    prHeader = BASE64.toByteArray(protectionHeader.firstChild.data); // Get Right Management header (WRMHEADER) from PlayReady header\n\n    wrmHeader = this.getWRMHeaderFromPRHeader(prHeader); // Convert from multi-byte to unicode\n\n    wrmHeader = new Uint16Array(wrmHeader.buffer); // Convert to string\n\n    wrmHeader = String.fromCharCode.apply(null, wrmHeader); // Parse <WRMHeader> to get KID field value\n\n    xmlReader = new DOMParser().parseFromString(wrmHeader, 'application/xml');\n    KID = xmlReader.getElementsByTagName('KID')[0].textContent; // Get KID (base64 decoded) as byte array\n\n    KID = BASE64.toByteArray(KID); // Convert UUID from little-endian to big-endian\n\n    this.convertUuidEndianness(KID);\n    return KID;\n  };\n\n  StreamIndexNode.prototype.convertUuidEndianness = function (uuid) {\n    this.swapBytes(uuid, 0, 3);\n    this.swapBytes(uuid, 1, 2);\n    this.swapBytes(uuid, 4, 5);\n    this.swapBytes(uuid, 6, 7);\n  };\n\n  StreamIndexNode.prototype.swapBytes = function (bytes, pos1, pos2) {\n    var temp = bytes[pos1];\n    bytes[pos1] = bytes[pos2];\n    bytes[pos2] = temp;\n  };\n\n  StreamIndexNode.prototype.getWRMHeaderFromPRHeader = function getWRMHeaderFromPRHeader(prHeader) {\n    var recordType, recordLength, recordValue;\n    var i = 0; // Parse PlayReady header\n    // Length - 32 bits (LE format)\n    // var length = (prHeader[i + 3] << 24) + (prHeader[i + 2] << 16) + (prHeader[i + 1] << 8) + prHeader[i];\n\n    i += 4; // Record count - 16 bits (LE format)\n    // var recordCount = (prHeader[i + 1] << 8) + prHeader[i];\n\n    i += 2; // Parse records\n\n    while (i < prHeader.length) {\n      // Record type - 16 bits (LE format)\n      recordType = prHeader[i + 1] * 256 + prHeader[i];\n      i += 2; // Check if Rights Management header (record type = 0x01)\n\n      if (recordType === 0x01) {\n        // Record length - 16 bits (LE format)\n        recordLength = prHeader[i + 1] * 256 + prHeader[i];\n        i += 2; // Record value => contains <WRMHEADER>\n\n        recordValue = new Uint8Array(recordLength);\n        recordValue.set(prHeader.subarray(i, i + recordLength));\n        return recordValue;\n      }\n    }\n\n    return null;\n  };\n\n  StreamIndexNode.prototype.createWidevinePssh = function (KID) {\n    // Create Widevine CENC header (Protocol Buffer) with KID value\n    var wvCencHeader = new Uint8Array(2 + KID.length);\n    wvCencHeader[0] = 0x12;\n    wvCencHeader[1] = 0x10;\n    wvCencHeader.set(KID, 2); // Create a pssh box\n\n    var length = 12\n    /* box length, type, version and flags */\n    + 16\n    /* SystemID */\n    + 4\n    /* data length */\n    + wvCencHeader.length,\n        pssh = new Uint8Array(length),\n        i = 0; // Set box length value (4 bytes)\n\n    pssh[i++] = 0;\n    pssh[i++] = 0;\n    pssh[i++] = 0;\n    pssh[i++] = length; // Set type ('pssh'), version (0) and flags (0)\n\n    pssh.set([0x70, 0x73, 0x73, 0x68, 0x00, 0x00, 0x00, 0x00], i);\n    i += 8; // Set SystemID ('edef8ba9-79d6-4ace-a3c8-27dcd51d21ed')\n\n    pssh.set([0xed, 0xef, 0x8b, 0xa9, 0x79, 0xd6, 0x4a, 0xce, 0xa3, 0xc8, 0x27, 0xdc, 0xd5, 0x1d, 0x21, 0xed], i);\n    i += 16; // Set data length value\n\n    pssh[i++] = 0;\n    pssh[i++] = 0;\n    pssh[i++] = 0;\n    pssh[i++] = wvCencHeader.length; // Copy Widevine CENC header\n\n    pssh.set(wvCencHeader, i); // Convert to BASE64 string\n\n    pssh = BASE64.fromByteArray(pssh);\n    return pssh;\n  };\n\n  return StreamIndexNode;\n}(AdaptationSetNode_1.AdaptationSetNode);\n\nexports.StreamIndexNode = StreamIndexNode;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL21zcy9zdHJlYW1JbmRleC1ub2RlLmpzPzIzOWYiXSwibmFtZXMiOlsiQkFTRTY0IiwicmVxdWlyZSIsIkRPTVBhcnNlciIsIl9fZXh0ZW5kcyIsImQiLCJiIiwicCIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsIkFkYXB0YXRpb25TZXROb2RlXzEiLCJRdWFsaXR5TGV2ZWxOb2RlXzEiLCJTdHJlYW1JbmRleE5vZGUiLCJfc3VwZXIiLCJub2RlIiwieG1sIiwiY2FsbCIsInBhcnNlIiwicXVhbGl0eUxldmVscyIsImN1cnJlbnROb2RlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpIiwibGVuZ3RoIiwicXVhbGl0eUxldmVsTm9kZSIsIlF1YWxpdHlMZXZlbE5vZGUiLCJyZXByZXNlbnRhdGlvbkNvbGwiLCJoYXNNaW1lVHlwZSIsImF0dHJpYnV0ZUxpc3QiLCJnZXRNaW1lVHlwZSIsImhhc0NvbnRlbnRUeXBlIiwiZ2V0Q29udGVudFR5cGUiLCJwcm90ZWN0aW9uIiwidW5kZWZpbmVkIiwicHJvdGVjdGlvbkhlYWRlciIsInBzc2hQUiIsImZpcnN0Q2hpbGQiLCJkYXRhIiwicmVwbGFjZSIsIktJRCIsImdldEtJREZyb21Qcm90ZWN0aW9uSGVhZGVyIiwiY3BQUiIsInNjaGVtZUlkVXJpIiwiY2VuY1BTU0giLCJjb250ZW50UHJvdGVjdGlvbnMiLCJwdXNoIiwicHNzaFdWIiwiY3JlYXRlV2lkZXZpbmVQc3NoIiwiY3BXViIsInBySGVhZGVyIiwid3JtSGVhZGVyIiwieG1sUmVhZGVyIiwidG9CeXRlQXJyYXkiLCJnZXRXUk1IZWFkZXJGcm9tUFJIZWFkZXIiLCJVaW50MTZBcnJheSIsImJ1ZmZlciIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImFwcGx5IiwicGFyc2VGcm9tU3RyaW5nIiwidGV4dENvbnRlbnQiLCJjb252ZXJ0VXVpZEVuZGlhbm5lc3MiLCJ1dWlkIiwic3dhcEJ5dGVzIiwiYnl0ZXMiLCJwb3MxIiwicG9zMiIsInRlbXAiLCJyZWNvcmRUeXBlIiwicmVjb3JkTGVuZ3RoIiwicmVjb3JkVmFsdWUiLCJVaW50OEFycmF5Iiwic2V0Iiwic3ViYXJyYXkiLCJ3dkNlbmNIZWFkZXIiLCJwc3NoIiwiZnJvbUJ5dGVBcnJheSIsIkFkYXB0YXRpb25TZXROb2RlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsTUFBTSxHQUFHQyxtQkFBTyxDQUFDLEVBQUQsQ0FBdEI7O0FBQ0EsSUFBTUMsU0FBUyxHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBUCxDQUFrQkMsU0FBcEM7O0FBRUEsSUFBTUMsU0FBUyxHQUFJLFFBQVEsS0FBS0EsU0FBZCxJQUE0QixVQUFVQyxDQUFWLEVBQWFDLENBQWIsRUFBZ0I7QUFDeEQsT0FBSyxJQUFJQyxDQUFULElBQWNELENBQWQsRUFBaUI7QUFDZixRQUFJQSxDQUFDLENBQUNFLGNBQUYsQ0FBaUJELENBQWpCLENBQUosRUFBeUI7QUFDdkJGLE9BQUMsQ0FBQ0UsQ0FBRCxDQUFELEdBQU9ELENBQUMsQ0FBQ0MsQ0FBRCxDQUFSO0FBQ0Q7QUFDRjs7QUFDRCxXQUFTRSxFQUFULEdBQWU7QUFDYixTQUFLQyxXQUFMLEdBQW1CTCxDQUFuQjtBQUNEOztBQUVEQSxHQUFDLENBQUNNLFNBQUYsR0FBY0wsQ0FBQyxLQUFLLElBQU4sR0FBYU0sTUFBTSxDQUFDQyxNQUFQLENBQWNQLENBQWQsQ0FBYixJQUFpQ0csRUFBRSxDQUFDRSxTQUFILEdBQWVMLENBQUMsQ0FBQ0ssU0FBakIsRUFBNEIsSUFBSUYsRUFBSixFQUE3RCxDQUFkO0FBQ0QsQ0FYTDs7QUFZQSxJQUFNSyxtQkFBbUIsR0FBR1osbUJBQU8sQ0FBQyxFQUFELENBQW5DOztBQUNBLElBQU1hLGtCQUFrQixHQUFHYixtQkFBTyxDQUFDLEVBQUQsQ0FBbEM7O0FBRUEsSUFBTWMsZUFBZSxHQUFJLFVBQVVD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OEQsSUFBOUQsRUFBb0UsSUFBcEUsRUFBMEUsSUFBMUUsRUFBZ0YsSUFBaEYsRUFBc0YsSUFBdEYsRUFBNEYsSUFBNUYsQ0FBVCxFQUE0R2xELENBQTVHO0FBQ0FBLEtBQUMsSUFBSSxFQUFMLENBeEI0RCxDQTBCNUQ7O0FBQ0FxRCxRQUFJLENBQUNyRCxDQUFDLEVBQUYsQ0FBSixHQUFZLENBQVo7QUFDQXFELFFBQUksQ0FBQ3JELENBQUMsRUFBRixDQUFKLEdBQVksQ0FBWjtBQUNBcUQsUUFBSSxDQUFDckQsQ0FBQyxFQUFGLENBQUosR0FBWSxDQUFaO0FBQ0FxRCxRQUFJLENBQUNyRCxDQUFDLEVBQUYsQ0FBSixHQUFZb0QsWUFBWSxDQUFDbkQsTUFBekIsQ0E5QjRELENBZ0M1RDs7QUFDQW9ELFFBQUksQ0FBQ0gsR0FBTCxDQUFTRSxZQUFULEVBQXVCcEQsQ0FBdkIsRUFqQzRELENBbUM1RDs7QUFDQXFELFFBQUksR0FBRzdFLE1BQU0sQ0FBQzhFLGFBQVAsQ0FBcUJELElBQXJCLENBQVA7QUFDQSxXQUFPQSxJQUFQO0FBQ0QsR0F0Q0Q7O0FBdUNBLFNBQU85RCxlQUFQO0FBQ0QsQ0EzS3dCLENBMkt2QkYsbUJBQW1CLENBQUNrRSxpQkEzS0csQ0FBekI7O0FBNEtBQyxPQUFPLENBQUNqRSxlQUFSLEdBQTBCQSxlQUExQiIsImZpbGUiOiI1MS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgQkFTRTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJyk7XG5jb25zdCBET01QYXJzZXIgPSByZXF1aXJlKCd4bWxkb20nKS5ET01QYXJzZXI7XG5cbmNvbnN0IF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgZm9yIChsZXQgcCBpbiBiKSB7XG4gICAgICAgIGlmIChiLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgZFtwXSA9IGJbcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIF9fICgpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7XG4gICAgICB9XG5cbiAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xuY29uc3QgQWRhcHRhdGlvblNldE5vZGVfMSA9IHJlcXVpcmUoXCIuLi9hZGFwdGF0aW9uLXNldC1ub2RlXCIpO1xuY29uc3QgUXVhbGl0eUxldmVsTm9kZV8xID0gcmVxdWlyZShcIi4vcXVhbGl0eUxldmVsLW5vZGVcIik7XG5cbmNvbnN0IFN0cmVhbUluZGV4Tm9kZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhTdHJlYW1JbmRleE5vZGUsIF9zdXBlcik7XG4gIGZ1bmN0aW9uIFN0cmVhbUluZGV4Tm9kZSAobm9kZSwgeG1sKSB7XG4gICAgX3N1cGVyLmNhbGwodGhpcywgbm9kZSwgeG1sKTtcbiAgfVxuXG4gIFN0cmVhbUluZGV4Tm9kZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBsZXQgcXVhbGl0eUxldmVscyA9IHRoaXMuY3VycmVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1F1YWxpdHlMZXZlbCcpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWFsaXR5TGV2ZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBxdWFsaXR5TGV2ZWxOb2RlID0gbmV3IFF1YWxpdHlMZXZlbE5vZGVfMS5RdWFsaXR5TGV2ZWxOb2RlKHF1YWxpdHlMZXZlbHNbaV0sIHRoaXMueG1sKTtcbiAgICAgIHRoaXMucmVwcmVzZW50YXRpb25Db2xsW2ldID0gcXVhbGl0eUxldmVsTm9kZTtcbiAgICAgIGlmICh0aGlzLnJlcHJlc2VudGF0aW9uQ29sbFswXS5oYXNNaW1lVHlwZSgpKSB7XG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGVMaXN0WydtaW1lVHlwZSddID0gdGhpcy5yZXByZXNlbnRhdGlvbkNvbGxbMF0uZ2V0TWltZVR5cGUoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJlcHJlc2VudGF0aW9uQ29sbFswXS5oYXNDb250ZW50VHlwZSgpKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlTGlzdFsnbWltZVR5cGUnXSA9IHRoaXMucmVwcmVzZW50YXRpb25Db2xsWzBdLmdldENvbnRlbnRUeXBlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJvdGVjdGlvbiA9IHRoaXMueG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdQcm90ZWN0aW9uJylbMF07XG5cbiAgICBpZiAocHJvdGVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBwcm90ZWN0aW9uSGVhZGVyID0gcHJvdGVjdGlvbi5nZXRFbGVtZW50c0J5VGFnTmFtZSgnUHJvdGVjdGlvbkhlYWRlcicpWzBdO1xuICAgICAgLy8gU29tZSBwYWNrYWdlcnMgcHV0IG5ld2xpbmVzIGludG8gdGhlIFByb3RlY3Rpb25IZWFkZXIgYmFzZTY0IHN0cmluZywgd2hpY2ggaXMgbm90IGdvb2RcbiAgICAgIC8vIGJlY2F1c2UgdGhpcyBjYW5ub3QgYmUgY29ycmVjdGx5IHBhcnNlZC4gTGV0J3MganVzdCBmaWx0ZXIgb3V0IGFueSBuZXdsaW5lcyBmb3VuZCBpbiB0aGVyZS5cbiAgICAgIGNvbnN0IHBzc2hQUiA9IHByb3RlY3Rpb25IZWFkZXIuZmlyc3RDaGlsZC5kYXRhLnJlcGxhY2UoL1xcbnxcXHIvZywgJycpO1xuXG4gICAgICAvLyBHZXQgS0lEIChpbiBDRU5DIGZvcm1hdCkgZnJvbSBwcm90ZWN0aW9uIGhlYWRlclxuICAgICAgY29uc3QgS0lEID0gdGhpcy5nZXRLSURGcm9tUHJvdGVjdGlvbkhlYWRlcihwcm90ZWN0aW9uSGVhZGVyKTtcblxuICAgICAgLy8gQ3JlYXRlIENvbnRlbnRQcm90ZWN0aW9uIGZvciBQbGF5UmVhZHlcbiAgICAgIGNvbnN0IGNwUFIgPSB7XG4gICAgICAgIHNjaGVtZUlkVXJpOiBcInVybjp1dWlkOjlhMDRmMDc5LTk4NDAtNDI4Ni1hYjkyLWU2NWJlMDg4NWY5NVwiLFxuICAgICAgICBjZW5jUFNTSDogcHNzaFBSXG4gICAgICB9O1xuICAgICAgdGhpcy5jb250ZW50UHJvdGVjdGlvbnMucHVzaChjcFBSKTtcblxuICAgICAgLy8gQ3JlYXRlIENvbnRlbnRQcm90ZWN0aW9uIGZvciBXaWRldmluZSAoYXMgYSBDRU5DIHByb3RlY3Rpb24pXG4gICAgICBjb25zdCBwc3NoV1YgPSB0aGlzLmNyZWF0ZVdpZGV2aW5lUHNzaChLSUQpO1xuICAgICAgY29uc3QgY3BXViA9IHtcbiAgICAgICAgc2NoZW1lSWRVcmk6IFwidXJuOnV1aWQ6ZWRlZjhiYTktNzlkNi00YWNlLWEzYzgtMjdkY2Q1MWQyMWVkXCIsXG4gICAgICAgIGNlbmNQU1NIOiBwc3NoV1ZcbiAgICAgIH07XG4gICAgICB0aGlzLmNvbnRlbnRQcm90ZWN0aW9ucy5wdXNoKGNwV1YpO1xuICAgIH1cbiAgfVxuXG4gIFN0cmVhbUluZGV4Tm9kZS5wcm90b3R5cGUuZ2V0S0lERnJvbVByb3RlY3Rpb25IZWFkZXIgPSBmdW5jdGlvbiAocHJvdGVjdGlvbkhlYWRlcikge1xuICAgICAgbGV0IHBySGVhZGVyLFxuICAgICAgICAgIHdybUhlYWRlcixcbiAgICAgICAgICB4bWxSZWFkZXIsXG4gICAgICAgICAgS0lEO1xuXG4gICAgICAvLyBHZXQgUGxheVJlYWR5IGhlYWRlciBhcyBieXRlIGFycmF5IChiYXNlNjQgZGVjb2RlZClcbiAgICAgIHBySGVhZGVyID0gQkFTRTY0LnRvQnl0ZUFycmF5KHByb3RlY3Rpb25IZWFkZXIuZmlyc3RDaGlsZC5kYXRhKTtcblxuICAgICAgLy8gR2V0IFJpZ2h0IE1hbmFnZW1lbnQgaGVhZGVyIChXUk1IRUFERVIpIGZyb20gUGxheVJlYWR5IGhlYWRlclxuICAgICAgd3JtSGVhZGVyID0gdGhpcy5nZXRXUk1IZWFkZXJGcm9tUFJIZWFkZXIocHJIZWFkZXIpO1xuXG4gICAgICAvLyBDb252ZXJ0IGZyb20gbXVsdGktYnl0ZSB0byB1bmljb2RlXG4gICAgICB3cm1IZWFkZXIgPSBuZXcgVWludDE2QXJyYXkod3JtSGVhZGVyLmJ1ZmZlcik7XG5cbiAgICAgIC8vIENvbnZlcnQgdG8gc3RyaW5nXG4gICAgICB3cm1IZWFkZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIHdybUhlYWRlcik7XG5cbiAgICAgIC8vIFBhcnNlIDxXUk1IZWFkZXI+IHRvIGdldCBLSUQgZmllbGQgdmFsdWVcbiAgICAgIHhtbFJlYWRlciA9IChuZXcgRE9NUGFyc2VyKCkpLnBhcnNlRnJvbVN0cmluZyh3cm1IZWFkZXIsICdhcHBsaWNhdGlvbi94bWwnKTtcbiAgICAgIEtJRCA9IHhtbFJlYWRlci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnS0lEJylbMF0udGV4dENvbnRlbnQ7XG5cbiAgICAgIC8vIEdldCBLSUQgKGJhc2U2NCBkZWNvZGVkKSBhcyBieXRlIGFycmF5XG4gICAgICBLSUQgPSBCQVNFNjQudG9CeXRlQXJyYXkoS0lEKTtcblxuICAgICAgLy8gQ29udmVydCBVVUlEIGZyb20gbGl0dGxlLWVuZGlhbiB0byBiaWctZW5kaWFuXG4gICAgICB0aGlzLmNvbnZlcnRVdWlkRW5kaWFubmVzcyhLSUQpO1xuXG4gICAgICByZXR1cm4gS0lEO1xuICB9O1xuXG4gIFN0cmVhbUluZGV4Tm9kZS5wcm90b3R5cGUuY29udmVydFV1aWRFbmRpYW5uZXNzID0gZnVuY3Rpb24gKHV1aWQpIHtcbiAgICAgIHRoaXMuc3dhcEJ5dGVzKHV1aWQsIDAsIDMpO1xuICAgICAgdGhpcy5zd2FwQnl0ZXModXVpZCwgMSwgMik7XG4gICAgICB0aGlzLnN3YXBCeXRlcyh1dWlkLCA0LCA1KTtcbiAgICAgIHRoaXMuc3dhcEJ5dGVzKHV1aWQsIDYsIDcpO1xuICB9O1xuXG4gIFN0cmVhbUluZGV4Tm9kZS5wcm90b3R5cGUuc3dhcEJ5dGVzID0gZnVuY3Rpb24gKGJ5dGVzLCBwb3MxLCBwb3MyKSB7XG4gICAgICBsZXQgdGVtcCA9IGJ5dGVzW3BvczFdO1xuICAgICAgYnl0ZXNbcG9zMV0gPSBieXRlc1twb3MyXTtcbiAgICAgIGJ5dGVzW3BvczJdID0gdGVtcDtcbiAgfTtcblxuICBTdHJlYW1JbmRleE5vZGUucHJvdG90eXBlLmdldFdSTUhlYWRlckZyb21QUkhlYWRlciA9IGZ1bmN0aW9uIGdldFdSTUhlYWRlckZyb21QUkhlYWRlciAocHJIZWFkZXIpIHtcbiAgICBsZXQgcmVjb3JkVHlwZSxcbiAgICAgICAgcmVjb3JkTGVuZ3RoLFxuICAgICAgICByZWNvcmRWYWx1ZTtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICAvLyBQYXJzZSBQbGF5UmVhZHkgaGVhZGVyXG5cbiAgICAvLyBMZW5ndGggLSAzMiBiaXRzIChMRSBmb3JtYXQpXG4gICAgLy8gdmFyIGxlbmd0aCA9IChwckhlYWRlcltpICsgM10gPDwgMjQpICsgKHBySGVhZGVyW2kgKyAyXSA8PCAxNikgKyAocHJIZWFkZXJbaSArIDFdIDw8IDgpICsgcHJIZWFkZXJbaV07XG4gICAgaSArPSA0O1xuXG4gICAgLy8gUmVjb3JkIGNvdW50IC0gMTYgYml0cyAoTEUgZm9ybWF0KVxuICAgIC8vIHZhciByZWNvcmRDb3VudCA9IChwckhlYWRlcltpICsgMV0gPDwgOCkgKyBwckhlYWRlcltpXTtcbiAgICBpICs9IDI7XG5cbiAgICAvLyBQYXJzZSByZWNvcmRzXG4gICAgd2hpbGUgKGkgPCBwckhlYWRlci5sZW5ndGgpIHtcbiAgICAgICAgLy8gUmVjb3JkIHR5cGUgLSAxNiBiaXRzIChMRSBmb3JtYXQpXG4gICAgICAgIHJlY29yZFR5cGUgPSAocHJIZWFkZXJbaSArIDFdICogMjU2KSArIHBySGVhZGVyW2ldO1xuICAgICAgICBpICs9IDI7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgUmlnaHRzIE1hbmFnZW1lbnQgaGVhZGVyIChyZWNvcmQgdHlwZSA9IDB4MDEpXG4gICAgICAgIGlmIChyZWNvcmRUeXBlID09PSAweDAxKSB7XG5cbiAgICAgICAgICAgIC8vIFJlY29yZCBsZW5ndGggLSAxNiBiaXRzIChMRSBmb3JtYXQpXG4gICAgICAgICAgICByZWNvcmRMZW5ndGggPSAocHJIZWFkZXJbaSArIDFdICogMjU2KSArIHBySGVhZGVyW2ldO1xuICAgICAgICAgICAgaSArPSAyO1xuXG4gICAgICAgICAgICAvLyBSZWNvcmQgdmFsdWUgPT4gY29udGFpbnMgPFdSTUhFQURFUj5cbiAgICAgICAgICAgIHJlY29yZFZhbHVlID0gbmV3IFVpbnQ4QXJyYXkocmVjb3JkTGVuZ3RoKTtcbiAgICAgICAgICAgIHJlY29yZFZhbHVlLnNldChwckhlYWRlci5zdWJhcnJheShpLCBpICsgcmVjb3JkTGVuZ3RoKSk7XG4gICAgICAgICAgICByZXR1cm4gcmVjb3JkVmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgU3RyZWFtSW5kZXhOb2RlLnByb3RvdHlwZS5jcmVhdGVXaWRldmluZVBzc2ggPSBmdW5jdGlvbiAoS0lEKSB7XG4gICAgLy8gQ3JlYXRlIFdpZGV2aW5lIENFTkMgaGVhZGVyIChQcm90b2NvbCBCdWZmZXIpIHdpdGggS0lEIHZhbHVlXG4gICAgdmFyIHd2Q2VuY0hlYWRlciA9IG5ldyBVaW50OEFycmF5KDIgKyBLSUQubGVuZ3RoKTtcbiAgICB3dkNlbmNIZWFkZXJbMF0gPSAweDEyO1xuICAgIHd2Q2VuY0hlYWRlclsxXSA9IDB4MTA7XG4gICAgd3ZDZW5jSGVhZGVyLnNldChLSUQsIDIpO1xuXG4gICAgLy8gQ3JlYXRlIGEgcHNzaCBib3hcbiAgICB2YXIgbGVuZ3RoID0gMTIgLyogYm94IGxlbmd0aCwgdHlwZSwgdmVyc2lvbiBhbmQgZmxhZ3MgKi8gKyAxNiAvKiBTeXN0ZW1JRCAqLyArIDQgLyogZGF0YSBsZW5ndGggKi8gKyB3dkNlbmNIZWFkZXIubGVuZ3RoLFxuICAgICAgICBwc3NoID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSxcbiAgICAgICAgaSA9IDA7XG5cbiAgICAvLyBTZXQgYm94IGxlbmd0aCB2YWx1ZSAoNCBieXRlcylcbiAgICBwc3NoW2krK10gPSAwO1xuICAgIHBzc2hbaSsrXSA9IDA7XG4gICAgcHNzaFtpKytdID0gMDtcbiAgICBwc3NoW2krK10gPSBsZW5ndGg7XG5cbiAgICAvLyBTZXQgdHlwZSAoJ3Bzc2gnKSwgdmVyc2lvbiAoMCkgYW5kIGZsYWdzICgwKVxuICAgIHBzc2guc2V0KFsweDcwLCAweDczLCAweDczLCAweDY4LCAweDAwLCAweDAwLCAweDAwLCAweDAwXSwgaSk7XG4gICAgaSArPSA4O1xuXG4gICAgLy8gU2V0IFN5c3RlbUlEICgnZWRlZjhiYTktNzlkNi00YWNlLWEzYzgtMjdkY2Q1MWQyMWVkJylcbiAgICBwc3NoLnNldChbMHhlZCwgMHhlZiwgMHg4YiwgMHhhOSwgIDB4NzksIDB4ZDYsIDB4NGEsIDB4Y2UsIDB4YTMsIDB4YzgsIDB4MjcsIDB4ZGMsIDB4ZDUsIDB4MWQsIDB4MjEsIDB4ZWRdLCBpKTtcbiAgICBpICs9IDE2O1xuXG4gICAgLy8gU2V0IGRhdGEgbGVuZ3RoIHZhbHVlXG4gICAgcHNzaFtpKytdID0gMDtcbiAgICBwc3NoW2krK10gPSAwO1xuICAgIHBzc2hbaSsrXSA9IDA7XG4gICAgcHNzaFtpKytdID0gd3ZDZW5jSGVhZGVyLmxlbmd0aDtcblxuICAgIC8vIENvcHkgV2lkZXZpbmUgQ0VOQyBoZWFkZXJcbiAgICBwc3NoLnNldCh3dkNlbmNIZWFkZXIsIGkpO1xuXG4gICAgLy8gQ29udmVydCB0byBCQVNFNjQgc3RyaW5nXG4gICAgcHNzaCA9IEJBU0U2NC5mcm9tQnl0ZUFycmF5KHBzc2gpO1xuICAgIHJldHVybiBwc3NoO1xuICB9O1xuICByZXR1cm4gU3RyZWFtSW5kZXhOb2RlO1xufShBZGFwdGF0aW9uU2V0Tm9kZV8xLkFkYXB0YXRpb25TZXROb2RlKSk7XG5leHBvcnRzLlN0cmVhbUluZGV4Tm9kZSA9IFN0cmVhbUluZGV4Tm9kZTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///51\n")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__52__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJiYXNlNjQtanNcIj84MTgxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjUyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181Ml9fOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///52\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) {\n    if (b.hasOwnProperty(p)) {\n      d[p] = b[p];\n    }\n  }\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar ManifestNode_1 = __webpack_require__(16);\n\nvar IsoDurationParser_1 = __webpack_require__(23);\n\nvar FragmentInformation_1 = __webpack_require__(54);\n\nvar TIME_SCALE_100_NANOSECOND_UNIT = 10000000.0;\n\nvar QualityLevelNode = function (_super) {\n  __extends(QualityLevelNode, _super);\n\n  function QualityLevelNode(node, xml) {\n    _super.call(this, node, xml);\n  }\n\n  QualityLevelNode.prototype.createSegmentInformation = function () {\n    var presentationDuration = IsoDurationParser_1.IsoDurationParser.getDuration(parseFloat(this.attributeList['Duration'] / TIME_SCALE_100_NANOSECOND_UNIT));\n    var representationID = this.attributeList['id'];\n    this.bandwidth = this.attributeList['bandwidth'] ? parseInt(this.attributeList['bandwidth']) : -1;\n    this.segmentTemplate = this.mapMssSegmentTemplate();\n    this.segmentInformation = new FragmentInformation_1.FragmentInformation(presentationDuration, this.bandwidth, this.baseURL, representationID, this.attributeList['mimeType'], this.segmentTemplate);\n  };\n\n  QualityLevelNode.prototype.mapMssSegmentTemplate = function () {\n    var segmentTemplate = {};\n    var mediaUrl;\n    mediaUrl = this.attributeList['Url'].replace('{bitrate}', '$Bandwidth$');\n    mediaUrl = mediaUrl.replace('{start time}', '$Time$');\n    segmentTemplate.media = mediaUrl;\n    segmentTemplate.timescale = TIME_SCALE_100_NANOSECOND_UNIT;\n    segmentTemplate.SegmentTimeline = this.mapMssSegmentTimeline();\n    return segmentTemplate;\n  };\n\n  QualityLevelNode.prototype.mapMssSegmentTimeline = function () {\n    var segmentTimeline = {};\n    var chunks = this.currentNode.parentNode.getElementsByTagName('c');\n    var segments = [];\n    var segment;\n    var prevSegment;\n    var tManifest;\n    var i;\n    var duration = 0;\n\n    for (i = 0; i < chunks.length; i++) {\n      segment = {}; // Get time 't' attribute value\n\n      tManifest = chunks[i].getAttribute('t'); // => segment.tManifest = original timestamp value as a string (for constructing the fragment request url, see DashHandler)\n      // => segment.t = number value of timestamp (maybe rounded value, but only for 0.1 microsecond)\n\n      segment.tManifest = parseFloat(tManifest);\n      segment.t = parseFloat(tManifest); // Get duration 'd' attribute value\n\n      segment.d = parseFloat(chunks[i].getAttribute('d')); // If 't' not defined for first segment then t=0\n\n      if (i === 0 && !segment.t) {\n        segment.t = 0;\n      }\n\n      if (i > 0) {\n        prevSegment = segments[segments.length - 1]; // Update previous segment duration if not defined\n\n        if (!prevSegment.d) {\n          if (prevSegment.tManifest) {\n            prevSegment.d = parseFloat(tManifest) - parseFloat(prevSegment.tManifest);\n          } else {\n            prevSegment.d = segment.t - prevSegment.t;\n          }\n        } // Set segment absolute timestamp if not set in manifest\n\n\n        if (!segment.t) {\n          if (prevSegment.tManifest) {\n            segment.tManifest = parseFloat(prevSegment.tManifest) + prevSegment.d;\n            segment.t = parseFloat(segment.tManifest);\n          } else {\n            segment.t = prevSegment.t + prevSegment.d;\n          }\n        }\n      }\n\n      duration += segment.d; // Create new segment\n\n      segments.push(segment);\n    }\n\n    segmentTimeline.S = segments;\n    segmentTimeline.S_asArray = segments;\n    segmentTimeline.duration = duration / TIME_SCALE_100_NANOSECOND_UNIT;\n    return segmentTimeline;\n  };\n\n  QualityLevelNode.prototype.writeAttributesToList = function (node, list) {\n    var attrList = node.attributes;\n    var mimeTypeMap = {\n      'video': 'video/mp4',\n      'audio': 'audio/mp4',\n      'text': 'application/mp4'\n    };\n\n    for (var i = 0; i < node.childNodes.length; i++) {\n      if (!this.baseURL && node.childNodes[i].nodeName == 'BaseURL') {\n        this.baseURL = node.childNodes[i].firstChild.nodeValue;\n      }\n\n      if (!this.segmentBase && node.childNodes[i].nodeName == 'SegmentBase') {\n        this.segmentBase = node.childNodes[i];\n      }\n\n      if (!this.segmentTemplate && node.childNodes[i].nodeName == 'SegmentTemplate') {\n        this.segmentTemplate = node.childNodes[i];\n      }\n\n      if (!this.segmentList && node.childNodes[i].nodeName == 'SegmentList') {\n        this.segmentList = node.childNodes[i];\n      }\n    }\n\n    for (var attr in attrList) {\n      if (!list[attrList[attr].nodeName]) {\n        list[attrList[attr].nodeName] = attrList[attr].nodeValue;\n      }\n    }\n\n    if (list['Type'] !== undefined) {\n      list['contentType'] = list['Type'];\n      list['mimeType'] = mimeTypeMap[list['contentType']];\n      list['bandwidth'] = list['Bitrate'];\n      list['width'] = list['MaxWidth'];\n      list['height'] = list['MaxHeight'];\n      list.lang = list['Language'] || 'und';\n      var indexId = list['Name'] ? list['Name'] : list['Type']; // build id\n\n      list['id'] = indexId + '_' + list['Index'];\n\n      if (list['Type'] === 'audio') {\n        list.audioSamplingRate = list['SamplingRate'];\n      }\n    }\n\n    if (list['Duration'] !== undefined) {\n      list['durationInS'] = this.attributeList['Duration'] / TIME_SCALE_100_NANOSECOND_UNIT;\n    }\n\n    if (node.parentNode !== null) {\n      this.buildAttributeList(node.parentNode, list);\n    } else {\n      if (!this.segmentInformation) {\n        this.createSegmentInformation();\n      }\n    }\n\n    _super.prototype.writeAttributesToList.call(this, node, list);\n  };\n\n  QualityLevelNode.prototype.getMimeType = function () {\n    return this.attributeList['mimeType'];\n  };\n\n  QualityLevelNode.prototype.hasMimeType = function () {\n    return this.attributeList['mimeType'] ? true : false;\n  };\n\n  QualityLevelNode.prototype.getContentType = function () {\n    return this.attributeList['contentType'];\n  };\n\n  QualityLevelNode.prototype.hasContentType = function () {\n    return this.attributeList['contentType'] ? true : false;\n  };\n\n  return QualityLevelNode;\n}(ManifestNode_1.ManifestNode);\n\nexports.QualityLevelNode = QualityLevelNode;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL21zcy9xdWFsaXR5TGV2ZWwtbm9kZS5qcz8zZDBmIl0sIm5hbWVzIjpbIl9fZXh0ZW5kcyIsImQiLCJiIiwicCIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsIk1hbmlmZXN0Tm9kZV8xIiwicmVxdWlyZSIsIklzb0R1cmF0aW9uUGFyc2VyXzEiLCJGcmFnbWVudEluZm9ybWF0aW9uXzEiLCJUSU1FX1NDQUxFXzEwMF9OQU5PU0VDT05EX1VOSVQiLCJRdWFsaXR5TGV2ZWxOb2RlIiwiX3N1cGVyIiwibm9kZSIsInhtbCIsImNhbGwiLCJjcmVhdGVTZWdtZW50SW5mb3JtYXRpb24iLCJwcmVzZW50YXRpb25EdXJhdGlvbiIsIklzb0R1cmF0aW9uUGFyc2VyIiwiZ2V0RHVyYXRpb24iLCJwYXJzZUZsb2F0IiwiYXR0cmlidXRlTGlzdCIsInJlcHJlc2VudGF0aW9uSUQiLCJiYW5kd2lkdGgiLCJwYXJzZUludCIsInNlZ21lbnRUZW1wbGF0ZSIsIm1hcE1zc1NlZ21lbnRUZW1wbGF0ZSIsInNlZ21lbnRJbmZvcm1hdGlvbiIsIkZyYWdtZW50SW5mb3JtYXRpb24iLCJiYXNlVVJMIiwibWVkaWFVcmwiLCJyZXBsYWNlIiwibWVkaWEiLCJ0aW1lc2NhbGUiLCJTZWdtZW50VGltZWxpbmUiLCJtYXBNc3NTZWdtZW50VGltZWxpbmUiLCJzZWdtZW50VGltZWxpbmUiLCJjaHVua3MiLCJjdXJyZW50Tm9kZSIsInBhcmVudE5vZGUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInNlZ21lbnRzIiwic2VnbWVudCIsInByZXZTZWdtZW50IiwidE1hbmlmZXN0IiwiaSIsImR1cmF0aW9uIiwibGVuZ3RoIiwiZ2V0QXR0cmlidXRlIiwidCIsInB1c2giLCJTIiwiU19hc0FycmF5Iiwid3JpdGVBdHRyaWJ1dGVzVG9MaXN0IiwibGlzdCIsImF0dHJMaXN0IiwiYXR0cmlidXRlcyIsIm1pbWVUeXBlTWFwIiwiY2hpbGROb2RlcyIsIm5vZGVOYW1lIiwiZmlyc3RDaGlsZCIsIm5vZGVWYWx1ZSIsInNlZ21lbnRCYXNlIiwic2VnbWVudExpc3QiLCJhdHRyIiwidW5kZWZpbmVkIiwibGFuZyIsImluZGV4SWQiLCJhdWRpb1NhbXBsaW5nUmF0ZSIsImJ1aWxkQXR0cmlidXRlTGlzdCIsImdldE1pbWVUeXBlIiwiaGFzTWltZVR5cGUiLCJnZXRDb250ZW50VHlwZSIsImhhc0NvbnRlbnRUeXBlIiwiTWFuaWZlc3ROb2RlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsU0FBUyxHQUFJLFFBQVEsS0FBS0EsU0FBZCxJQUE0QixVQUFVQyxDQUFWLEVBQWFDLENBQWIsRUFBZ0I7QUFDNUQsT0FBSyxJQUFJQyxDQUFULElBQWNELENBQWQsRUFBaUI7QUFDZixRQUFJQSxDQUFDLENBQUNFLGNBQUYsQ0FBaUJELENBQWpCLENBQUosRUFBeUI7QUFDdkJGLE9BQUMsQ0FBQ0UsQ0FBRCxDQUFELEdBQU9ELENBQUMsQ0FBQ0MsQ0FBRCxDQUFSO0FBQ0Q7QUFDRjs7QUFDRCxXQUFTRSxFQUFULEdBQWU7QUFDYixTQUFLQyxXQUFMLEdBQW1CTCxDQUFuQjtBQUNEOztBQUVEQSxHQUFDLENBQUNNLFNBQUYsR0FBY0wsQ0FBQyxLQUFLLElBQU4sR0FBYU0sTUFBTSxDQUFDQyxNQUFQLENBQWNQLENBQWQsQ0FBYixJQUFpQ0csRUFBRSxDQUFDRSxTQUFILEdBQWVMLENBQUMsQ0FBQ0ssU0FBakIsRUFBNEIsSUFBSUYsRUFBSixFQUE3RCxDQUFkO0FBQ0QsQ0FYRDs7QUFhQSxJQUFNSyxjQUFjLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUE5Qjs7QUFDQSxJQUFNQyxtQkFBbUIsR0FBR0QsbUJBQU8sQ0FBQyxFQUFELENBQW5DOztBQUNBLElBQU1FLHFCQUFxQixHQUFHRixtQkFBTyxDQUFDLEVBQUQsQ0FBckM7O0FBQ0EsSUFBTUcsOEJBQThC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QUFLbEQsYUFBTCxDQUFtQixVQUFuQixJQUFpQyxJQUFqQyxHQUF3QyxLQUEvQztBQUNELEdBRkQ7O0FBR0FWLGtCQUFnQixDQUFDUixTQUFqQixDQUEyQnFFLGNBQTNCLEdBQTRDLFlBQVk7QUFDdEQsV0FBTyxLQUFLbkQsYUFBTCxDQUFtQixhQUFuQixDQUFQO0FBQ0QsR0FGRDs7QUFHQVYsa0JBQWdCLENBQUNSLFNBQWpCLENBQTJCc0UsY0FBM0IsR0FBNEMsWUFBWTtBQUN0RCxXQUFPLEtBQUtwRCxhQUFMLENBQW1CLGFBQW5CLElBQW9DLElBQXBDLEdBQTJDLEtBQWxEO0FBQ0QsR0FGRDs7QUFHQSxTQUFPVixnQkFBUDtBQUNELENBcEt5QixDQW9LeEJMLGNBQWMsQ0FBQ29FLFlBcEtTLENBQTFCOztBQXFLQUMsT0FBTyxDQUFDaEUsZ0JBQVIsR0FBMkJBLGdCQUEzQiIsImZpbGUiOiI1My5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gIGZvciAobGV0IHAgaW4gYikge1xuICAgIGlmIChiLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICBkW3BdID0gYltwXTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gX18gKCkge1xuICAgIHRoaXMuY29uc3RydWN0b3IgPSBkO1xuICB9XG5cbiAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcblxuY29uc3QgTWFuaWZlc3ROb2RlXzEgPSByZXF1aXJlKFwiLi4vbWFuaWZlc3Qtbm9kZVwiKTtcbmNvbnN0IElzb0R1cmF0aW9uUGFyc2VyXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vdXRpbC9Jc28tZHVyYXRpb24tcGFyc2VyXCIpO1xuY29uc3QgRnJhZ21lbnRJbmZvcm1hdGlvbl8xID0gcmVxdWlyZShcIi4vZnJhZ21lbnQtaW5mb3JtYXRpb25cIik7XG5jb25zdCBUSU1FX1NDQUxFXzEwMF9OQU5PU0VDT05EX1VOSVQgPSAxMDAwMDAwMC4wO1xuY29uc3QgUXVhbGl0eUxldmVsTm9kZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhRdWFsaXR5TGV2ZWxOb2RlLCBfc3VwZXIpO1xuICBmdW5jdGlvbiBRdWFsaXR5TGV2ZWxOb2RlIChub2RlLCB4bWwpIHtcbiAgICBfc3VwZXIuY2FsbCh0aGlzLCBub2RlLCB4bWwpO1xuICB9XG5cbiAgUXVhbGl0eUxldmVsTm9kZS5wcm90b3R5cGUuY3JlYXRlU2VnbWVudEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHByZXNlbnRhdGlvbkR1cmF0aW9uID0gSXNvRHVyYXRpb25QYXJzZXJfMS5Jc29EdXJhdGlvblBhcnNlci5nZXREdXJhdGlvbihwYXJzZUZsb2F0KHRoaXMuYXR0cmlidXRlTGlzdFsnRHVyYXRpb24nXSAvIFRJTUVfU0NBTEVfMTAwX05BTk9TRUNPTkRfVU5JVCkpO1xuICAgIGNvbnN0IHJlcHJlc2VudGF0aW9uSUQgPSB0aGlzLmF0dHJpYnV0ZUxpc3RbJ2lkJ107XG5cbiAgICB0aGlzLmJhbmR3aWR0aCA9ICh0aGlzLmF0dHJpYnV0ZUxpc3RbJ2JhbmR3aWR0aCddKSA/IHBhcnNlSW50KHRoaXMuYXR0cmlidXRlTGlzdFsnYmFuZHdpZHRoJ10pIDogLTE7XG5cbiAgICB0aGlzLnNlZ21lbnRUZW1wbGF0ZSA9IHRoaXMubWFwTXNzU2VnbWVudFRlbXBsYXRlKCk7XG4gICAgdGhpcy5zZWdtZW50SW5mb3JtYXRpb24gPSBuZXcgRnJhZ21lbnRJbmZvcm1hdGlvbl8xLkZyYWdtZW50SW5mb3JtYXRpb24ocHJlc2VudGF0aW9uRHVyYXRpb24sIHRoaXMuYmFuZHdpZHRoLCB0aGlzLmJhc2VVUkwsIHJlcHJlc2VudGF0aW9uSUQsIHRoaXMuYXR0cmlidXRlTGlzdFsnbWltZVR5cGUnXSwgdGhpcy5zZWdtZW50VGVtcGxhdGUpO1xuICB9O1xuXG4gIFF1YWxpdHlMZXZlbE5vZGUucHJvdG90eXBlLm1hcE1zc1NlZ21lbnRUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgc2VnbWVudFRlbXBsYXRlID0ge307XG4gICAgbGV0IG1lZGlhVXJsO1xuXG4gICAgbWVkaWFVcmwgPSB0aGlzLmF0dHJpYnV0ZUxpc3RbJ1VybCddLnJlcGxhY2UoJ3tiaXRyYXRlfScsICckQmFuZHdpZHRoJCcpO1xuICAgIG1lZGlhVXJsID0gbWVkaWFVcmwucmVwbGFjZSgne3N0YXJ0IHRpbWV9JywgJyRUaW1lJCcpO1xuXG4gICAgc2VnbWVudFRlbXBsYXRlLm1lZGlhID0gbWVkaWFVcmw7XG4gICAgc2VnbWVudFRlbXBsYXRlLnRpbWVzY2FsZSA9IFRJTUVfU0NBTEVfMTAwX05BTk9TRUNPTkRfVU5JVDtcblxuICAgIHNlZ21lbnRUZW1wbGF0ZS5TZWdtZW50VGltZWxpbmUgPSB0aGlzLm1hcE1zc1NlZ21lbnRUaW1lbGluZSgpO1xuXG4gICAgcmV0dXJuIHNlZ21lbnRUZW1wbGF0ZTtcbiAgfTtcblxuICBRdWFsaXR5TGV2ZWxOb2RlLnByb3RvdHlwZS5tYXBNc3NTZWdtZW50VGltZWxpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHNlZ21lbnRUaW1lbGluZSA9IHt9O1xuICAgIGxldCBjaHVua3MgPSB0aGlzLmN1cnJlbnROb2RlLnBhcmVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2MnKTtcbiAgICBsZXQgc2VnbWVudHMgPSBbXTtcbiAgICBsZXQgc2VnbWVudDtcbiAgICBsZXQgcHJldlNlZ21lbnQ7XG4gICAgbGV0IHRNYW5pZmVzdDtcbiAgICBsZXQgaTtcbiAgICBsZXQgZHVyYXRpb24gPSAwO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGNodW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzZWdtZW50ID0ge307XG5cbiAgICAgICAgLy8gR2V0IHRpbWUgJ3QnIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICB0TWFuaWZlc3QgPSBjaHVua3NbaV0uZ2V0QXR0cmlidXRlKCd0Jyk7XG5cbiAgICAgICAgLy8gPT4gc2VnbWVudC50TWFuaWZlc3QgPSBvcmlnaW5hbCB0aW1lc3RhbXAgdmFsdWUgYXMgYSBzdHJpbmcgKGZvciBjb25zdHJ1Y3RpbmcgdGhlIGZyYWdtZW50IHJlcXVlc3QgdXJsLCBzZWUgRGFzaEhhbmRsZXIpXG4gICAgICAgIC8vID0+IHNlZ21lbnQudCA9IG51bWJlciB2YWx1ZSBvZiB0aW1lc3RhbXAgKG1heWJlIHJvdW5kZWQgdmFsdWUsIGJ1dCBvbmx5IGZvciAwLjEgbWljcm9zZWNvbmQpXG4gICAgICAgIHNlZ21lbnQudE1hbmlmZXN0ID0gcGFyc2VGbG9hdCh0TWFuaWZlc3QpO1xuICAgICAgICBzZWdtZW50LnQgPSBwYXJzZUZsb2F0KHRNYW5pZmVzdCk7XG5cbiAgICAgICAgLy8gR2V0IGR1cmF0aW9uICdkJyBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgICAgc2VnbWVudC5kID0gcGFyc2VGbG9hdChjaHVua3NbaV0uZ2V0QXR0cmlidXRlKCdkJykpO1xuXG4gICAgICAgIC8vIElmICd0JyBub3QgZGVmaW5lZCBmb3IgZmlyc3Qgc2VnbWVudCB0aGVuIHQ9MFxuICAgICAgICBpZiAoKGkgPT09IDApICYmICFzZWdtZW50LnQpIHtcbiAgICAgICAgICAgIHNlZ21lbnQudCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgIHByZXZTZWdtZW50ID0gc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAvLyBVcGRhdGUgcHJldmlvdXMgc2VnbWVudCBkdXJhdGlvbiBpZiBub3QgZGVmaW5lZFxuICAgICAgICAgICAgaWYgKCFwcmV2U2VnbWVudC5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZTZWdtZW50LnRNYW5pZmVzdCkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2U2VnbWVudC5kID0gcGFyc2VGbG9hdCh0TWFuaWZlc3QpIC0gcGFyc2VGbG9hdChwcmV2U2VnbWVudC50TWFuaWZlc3QpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZTZWdtZW50LmQgPSBzZWdtZW50LnQgLSBwcmV2U2VnbWVudC50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNldCBzZWdtZW50IGFic29sdXRlIHRpbWVzdGFtcCBpZiBub3Qgc2V0IGluIG1hbmlmZXN0XG4gICAgICAgICAgICBpZiAoIXNlZ21lbnQudCkge1xuICAgICAgICAgICAgICAgIGlmIChwcmV2U2VnbWVudC50TWFuaWZlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudC50TWFuaWZlc3QgPSBwYXJzZUZsb2F0KHByZXZTZWdtZW50LnRNYW5pZmVzdCkgKyBwcmV2U2VnbWVudC5kO1xuICAgICAgICAgICAgICAgICAgICBzZWdtZW50LnQgPSBwYXJzZUZsb2F0KHNlZ21lbnQudE1hbmlmZXN0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWdtZW50LnQgPSBwcmV2U2VnbWVudC50ICsgcHJldlNlZ21lbnQuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBkdXJhdGlvbiArPSBzZWdtZW50LmQ7XG5cbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBzZWdtZW50XG4gICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XG4gICAgfVxuXG4gICAgc2VnbWVudFRpbWVsaW5lLlMgPSBzZWdtZW50cztcbiAgICBzZWdtZW50VGltZWxpbmUuU19hc0FycmF5ID0gc2VnbWVudHM7XG4gICAgc2VnbWVudFRpbWVsaW5lLmR1cmF0aW9uID0gZHVyYXRpb24gLyBUSU1FX1NDQUxFXzEwMF9OQU5PU0VDT05EX1VOSVQ7XG5cbiAgICByZXR1cm4gc2VnbWVudFRpbWVsaW5lO1xuICB9O1xuXG4gIFF1YWxpdHlMZXZlbE5vZGUucHJvdG90eXBlLndyaXRlQXR0cmlidXRlc1RvTGlzdCA9IGZ1bmN0aW9uIChub2RlLCBsaXN0KSB7XG4gICAgY29uc3QgYXR0ckxpc3QgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgY29uc3QgbWltZVR5cGVNYXAgPSB7XG4gICAgICAndmlkZW8nOiAndmlkZW8vbXA0JyxcbiAgICAgICdhdWRpbyc6ICdhdWRpby9tcDQnLFxuICAgICAgJ3RleHQnOiAnYXBwbGljYXRpb24vbXA0J1xuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdGhpcy5iYXNlVVJMICYmIG5vZGUuY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSA9PSAnQmFzZVVSTCcpIHtcbiAgICAgICAgdGhpcy5iYXNlVVJMID0gbm9kZS5jaGlsZE5vZGVzW2ldLmZpcnN0Q2hpbGQubm9kZVZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnNlZ21lbnRCYXNlICYmIG5vZGUuY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSA9PSAnU2VnbWVudEJhc2UnKSB7XG4gICAgICAgIHRoaXMuc2VnbWVudEJhc2UgPSBub2RlLmNoaWxkTm9kZXNbaV07XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuc2VnbWVudFRlbXBsYXRlICYmIG5vZGUuY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSA9PSAnU2VnbWVudFRlbXBsYXRlJykge1xuICAgICAgICB0aGlzLnNlZ21lbnRUZW1wbGF0ZSA9IG5vZGUuY2hpbGROb2Rlc1tpXTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5zZWdtZW50TGlzdCAmJiBub2RlLmNoaWxkTm9kZXNbaV0ubm9kZU5hbWUgPT0gJ1NlZ21lbnRMaXN0Jykge1xuICAgICAgICB0aGlzLnNlZ21lbnRMaXN0ID0gbm9kZS5jaGlsZE5vZGVzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBhdHRyIGluIGF0dHJMaXN0KSB7XG4gICAgICBpZiAoIWxpc3RbYXR0ckxpc3RbYXR0cl0ubm9kZU5hbWVdKSB7XG4gICAgICAgIGxpc3RbYXR0ckxpc3RbYXR0cl0ubm9kZU5hbWVdID0gYXR0ckxpc3RbYXR0cl0ubm9kZVZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsaXN0WydUeXBlJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbGlzdFsnY29udGVudFR5cGUnXSA9IGxpc3RbJ1R5cGUnXTtcbiAgICAgIGxpc3RbJ21pbWVUeXBlJ10gPSBtaW1lVHlwZU1hcFtsaXN0Wydjb250ZW50VHlwZSddXTtcbiAgICAgIGxpc3RbJ2JhbmR3aWR0aCddID0gbGlzdFsnQml0cmF0ZSddO1xuICAgICAgbGlzdFsnd2lkdGgnXSA9IGxpc3RbJ01heFdpZHRoJ107XG4gICAgICBsaXN0WydoZWlnaHQnXSA9IGxpc3RbJ01heEhlaWdodCddO1xuICAgICAgbGlzdC5sYW5nID0gbGlzdFsnTGFuZ3VhZ2UnXSB8fCAndW5kJztcblxuICAgICAgbGV0IGluZGV4SWQgPSBsaXN0WydOYW1lJ10gPyBsaXN0WydOYW1lJ10gOiBsaXN0WydUeXBlJ107XG4gICAgICAvLyBidWlsZCBpZFxuICAgICAgbGlzdFsnaWQnXSA9IGluZGV4SWQgKyAnXycgKyBsaXN0WydJbmRleCddO1xuXG4gICAgICBpZiAobGlzdFsnVHlwZSddID09PSAnYXVkaW8nICkge1xuICAgICAgICBsaXN0LmF1ZGlvU2FtcGxpbmdSYXRlID0gbGlzdFsnU2FtcGxpbmdSYXRlJ107XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxpc3RbJ0R1cmF0aW9uJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbGlzdFsnZHVyYXRpb25JblMnXSA9IHRoaXMuYXR0cmlidXRlTGlzdFsnRHVyYXRpb24nXSAvIFRJTUVfU0NBTEVfMTAwX05BTk9TRUNPTkRfVU5JVDtcbiAgICB9XG5cbiAgICBpZiAobm9kZS5wYXJlbnROb2RlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmJ1aWxkQXR0cmlidXRlTGlzdChub2RlLnBhcmVudE5vZGUsIGxpc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMuc2VnbWVudEluZm9ybWF0aW9uKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlU2VnbWVudEluZm9ybWF0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICAgIF9zdXBlci5wcm90b3R5cGUud3JpdGVBdHRyaWJ1dGVzVG9MaXN0LmNhbGwodGhpcywgbm9kZSwgbGlzdCk7XG4gIH07XG4gIFF1YWxpdHlMZXZlbE5vZGUucHJvdG90eXBlLmdldE1pbWVUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZUxpc3RbJ21pbWVUeXBlJ107XG4gIH07XG4gIFF1YWxpdHlMZXZlbE5vZGUucHJvdG90eXBlLmhhc01pbWVUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZUxpc3RbJ21pbWVUeXBlJ10gPyB0cnVlIDogZmFsc2U7XG4gIH07XG4gIFF1YWxpdHlMZXZlbE5vZGUucHJvdG90eXBlLmdldENvbnRlbnRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZUxpc3RbJ2NvbnRlbnRUeXBlJ107XG4gIH07XG4gIFF1YWxpdHlMZXZlbE5vZGUucHJvdG90eXBlLmhhc0NvbnRlbnRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZUxpc3RbJ2NvbnRlbnRUeXBlJ10gPyB0cnVlIDogZmFsc2U7XG4gIH07XG4gIHJldHVybiBRdWFsaXR5TGV2ZWxOb2RlO1xufShNYW5pZmVzdE5vZGVfMS5NYW5pZmVzdE5vZGUpKTtcbmV4cG9ydHMuUXVhbGl0eUxldmVsTm9kZSA9IFF1YWxpdHlMZXZlbE5vZGU7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///53\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) {\n    if (b.hasOwnProperty(p)) {\n      d[p] = b[p];\n    }\n  }\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar MediaUrl_1 = __webpack_require__(22);\n\nvar SegmentInformation_1 = __webpack_require__(21);\n\nvar FragmentInformation = function (_super) {\n  __extends(FragmentInformation, _super);\n\n  function FragmentInformation(presentationDuration, bandwidth, baseUrl, representationID, mimeType, segmentTemplate) {\n    _super.call(this, presentationDuration, bandwidth, baseUrl, representationID, mimeType);\n\n    if (segmentTemplate) {\n      this.segmentTemplate = segmentTemplate;\n      this.mediaTemplate = this.segmentTemplate.media;\n      this.mediaTemplate = this.replace$Bandwidth$(this.mediaTemplate, this.bandwidth);\n    }\n\n    if (this.segmentTemplate.media) {\n      this.timelineItemList = this.segmentTemplate.SegmentTimeline;\n    }\n\n    this.createFragmentUrlsFromTimeline(this.timelineItemList);\n  }\n\n  FragmentInformation.prototype.createFragmentUrlsFromTimeline = function (segmentNodes) {\n    for (var i = 0; i < segmentNodes.S.length; i++) {\n      var fragment = this.mediaTemplate;\n      fragment = this.replace$Time$(fragment, segmentNodes.S[i].t);\n      this.mediaUrls.push(new MediaUrl_1.MediaUrl(this.baseUrl, fragment, this.mimeType));\n    }\n  };\n\n  return FragmentInformation;\n}(SegmentInformation_1.SegmentInformation);\n\nexports.FragmentInformation = FragmentInformation;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL21zcy9mcmFnbWVudC1pbmZvcm1hdGlvbi5qcz9iODE0Il0sIm5hbWVzIjpbIl9fZXh0ZW5kcyIsImQiLCJiIiwicCIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsIk1lZGlhVXJsXzEiLCJyZXF1aXJlIiwiU2VnbWVudEluZm9ybWF0aW9uXzEiLCJGcmFnbWVudEluZm9ybWF0aW9uIiwiX3N1cGVyIiwicHJlc2VudGF0aW9uRHVyYXRpb24iLCJiYW5kd2lkdGgiLCJiYXNlVXJsIiwicmVwcmVzZW50YXRpb25JRCIsIm1pbWVUeXBlIiwic2VnbWVudFRlbXBsYXRlIiwiY2FsbCIsIm1lZGlhVGVtcGxhdGUiLCJtZWRpYSIsInJlcGxhY2UkQmFuZHdpZHRoJCIsInRpbWVsaW5lSXRlbUxpc3QiLCJTZWdtZW50VGltZWxpbmUiLCJjcmVhdGVGcmFnbWVudFVybHNGcm9tVGltZWxpbmUiLCJzZWdtZW50Tm9kZXMiLCJpIiwiUyIsImxlbmd0aCIsImZyYWdtZW50IiwicmVwbGFjZSRUaW1lJCIsInQiLCJtZWRpYVVybHMiLCJwdXNoIiwiTWVkaWFVcmwiLCJTZWdtZW50SW5mb3JtYXRpb24iLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxTQUFTLEdBQUksUUFBUSxLQUFLQSxTQUFkLElBQTRCLFVBQVVDLENBQVYsRUFBYUMsQ0FBYixFQUFnQjtBQUN4RCxPQUFLLElBQUlDLENBQVQsSUFBY0QsQ0FBZCxFQUFpQjtBQUNmLFFBQUlBLENBQUMsQ0FBQ0UsY0FBRixDQUFpQkQsQ0FBakIsQ0FBSixFQUF5QjtBQUN2QkYsT0FBQyxDQUFDRSxDQUFELENBQUQsR0FBT0QsQ0FBQyxDQUFDQyxDQUFELENBQVI7QUFDRDtBQUNGOztBQUNELFdBQVNFLEVBQVQsR0FBZTtBQUNiLFNBQUtDLFdBQUwsR0FBbUJMLENBQW5CO0FBQ0Q7O0FBRURBLEdBQUMsQ0FBQ00sU0FBRixHQUFjTCxDQUFDLEtBQUssSUFBTixHQUFhTSxNQUFNLENBQUNDLE1BQVAsQ0FBY1AsQ0FBZCxDQUFiLElBQWlDRyxFQUFFLENBQUNFLFNBQUgsR0FBZUwsQ0FBQyxDQUFDSyxTQUFqQixFQUE0QixJQUFJRixFQUFKLEVBQTdELENBQWQ7QUFDRCxDQVhMOztBQVlBLElBQU1LLFVBQVUsR0FBR0MsbUJBQU8sQ0FBQyxFQUFELENBQTFCOztBQUNBLElBQU1DLG9CQUFvQixHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBcEM7O0FBQ0EsSUFBTUUsbUJBQW1CLEdBQUksVUFBVUMsTUFBVixFQUFrQjtBQUM3Q2QsV0FBUyxDQUFDYSxtQkFBRCxFQUFzQkMsTUFBdEIsQ0FBVDs7QUFDQSxXQUFTRCxtQkFBVCxDQUE4QkUsb0JBQTlCLEVBQW9EQyxTQUFwRCxFQUErREMsT0FBL0QsRUFBd0VDLGdCQUF4RSxFQUEwRkMsUUFBMUYsRUFBb0dDLGVBQXBHLEVBQXFIO0FBQ25ITixVQUFNLENBQUNPLElBQVAsQ0FBWSxJQUFaLEVBQWtCTixvQkFBbEIsRUFBd0NDLFNBQXhDLEVBQW1EQyxPQUFuRCxFQUE0REMsZ0JBQTVELEVBQThFQyxRQUE5RTs7QUFDQSxRQUFJQyxlQUFKLEVBQXFCO0FBQ25CLFdBQUtBLGVBQUwsR0FBdUJBLGVBQXZCO0FBQ0EsV0FBS0UsYUFBTCxHQUFxQixLQUFLRixlQUFMLENBQXFCRyxLQUExQztBQUNBLFdBQUtELGFBQUwsR0FBcUIsS0FBS0Usa0JBQUwsQ0FBd0IsS0FBS0YsYUFBN0IsRUFBNEMsS0FBS04sU0FBakQsQ0FBckI7QUFDRDs7QUFDRCxRQUFJLEtBQUtJLGVBQUwsQ0FBcUJHLEtBQXpCLEVBQWdDO0FBQzlCLFdBQUtFLGdCQUFMLEdBQXdCLEtBQUtMLGVBQUwsQ0FBcUJNLGVBQTdDO0FBQ0Q7O0FBQ0QsU0FBS0MsOEJBQUwsQ0FBb0MsS0FBS0YsZ0JBQXpDO0FBQ0Q7O0FBRURaLHFCQUFtQixDQUFDTixTQUFwQixDQUE4Qm9CLDhCQUE5QixHQUErRCxVQUFVQyxZQUFWLEVBQXdCO0FBQ3JGLFNBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0QsWUFBWSxDQUFDRSxDQUFiLENBQWVDLE1BQW5DLEVBQTJDRixDQUFDLEVBQTVDLEVBQWdEO0FBQzlDLFVBQUlHLFFBQVEsR0FBRyxLQUFLVixhQUFwQjtBQUNBVSxjQUFRLEdBQUcsS0FBS0MsYUFBTCxDQUFtQkQsUUFBbkIsRUFBNkJKLFlBQVksQ0FBQ0UsQ0FBYixDQUFlRCxDQUFmLEVBQWtCSyxDQUEvQyxDQUFYO0FBRUEsV0FBS0MsU0FBTCxDQUFlQyxJQUFmLENBQW9CLElBQUkxQixVQUFVLENBQUMyQixRQUFmLENBQXdCLEtBQUtwQixPQUE3QixFQUFzQ2UsUUFBdEMsRUFBZ0QsS0FBS2IsUUFBckQsQ0FBcEI7QUFDRDtBQUNGLEdBUEQ7O0FBUUEsU0FBT04sbUJBQVA7QUFDRCxDQXhCNEIsQ0F3QjNCRCxvQkFBb0IsQ0FBQzBCLGtCQXhCTSxDQUE3Qjs7QUF5QkFDLE9BQU8sQ0FBQzFCLG1CQUFSLEdBQThCQSxtQkFBOUIiLCJmaWxlIjoiNTQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgZm9yIChsZXQgcCBpbiBiKSB7XG4gICAgICAgIGlmIChiLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgZFtwXSA9IGJbcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIF9fICgpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7XG4gICAgICB9XG5cbiAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xuY29uc3QgTWVkaWFVcmxfMSA9IHJlcXVpcmUoXCIuLi9tZWRpYS11cmxcIik7XG5jb25zdCBTZWdtZW50SW5mb3JtYXRpb25fMSA9IHJlcXVpcmUoXCIuLi9zZWdtZW50LWluZm9ybWF0aW9uXCIpO1xuY29uc3QgRnJhZ21lbnRJbmZvcm1hdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhGcmFnbWVudEluZm9ybWF0aW9uLCBfc3VwZXIpO1xuICBmdW5jdGlvbiBGcmFnbWVudEluZm9ybWF0aW9uIChwcmVzZW50YXRpb25EdXJhdGlvbiwgYmFuZHdpZHRoLCBiYXNlVXJsLCByZXByZXNlbnRhdGlvbklELCBtaW1lVHlwZSwgc2VnbWVudFRlbXBsYXRlKSB7XG4gICAgX3N1cGVyLmNhbGwodGhpcywgcHJlc2VudGF0aW9uRHVyYXRpb24sIGJhbmR3aWR0aCwgYmFzZVVybCwgcmVwcmVzZW50YXRpb25JRCwgbWltZVR5cGUpO1xuICAgIGlmIChzZWdtZW50VGVtcGxhdGUpIHtcbiAgICAgIHRoaXMuc2VnbWVudFRlbXBsYXRlID0gc2VnbWVudFRlbXBsYXRlO1xuICAgICAgdGhpcy5tZWRpYVRlbXBsYXRlID0gdGhpcy5zZWdtZW50VGVtcGxhdGUubWVkaWE7XG4gICAgICB0aGlzLm1lZGlhVGVtcGxhdGUgPSB0aGlzLnJlcGxhY2UkQmFuZHdpZHRoJCh0aGlzLm1lZGlhVGVtcGxhdGUsIHRoaXMuYmFuZHdpZHRoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VnbWVudFRlbXBsYXRlLm1lZGlhKSB7XG4gICAgICB0aGlzLnRpbWVsaW5lSXRlbUxpc3QgPSB0aGlzLnNlZ21lbnRUZW1wbGF0ZS5TZWdtZW50VGltZWxpbmU7XG4gICAgfVxuICAgIHRoaXMuY3JlYXRlRnJhZ21lbnRVcmxzRnJvbVRpbWVsaW5lKHRoaXMudGltZWxpbmVJdGVtTGlzdCk7XG4gIH1cblxuICBGcmFnbWVudEluZm9ybWF0aW9uLnByb3RvdHlwZS5jcmVhdGVGcmFnbWVudFVybHNGcm9tVGltZWxpbmUgPSBmdW5jdGlvbiAoc2VnbWVudE5vZGVzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50Tm9kZXMuUy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGZyYWdtZW50ID0gdGhpcy5tZWRpYVRlbXBsYXRlO1xuICAgICAgZnJhZ21lbnQgPSB0aGlzLnJlcGxhY2UkVGltZSQoZnJhZ21lbnQsIHNlZ21lbnROb2Rlcy5TW2ldLnQpO1xuXG4gICAgICB0aGlzLm1lZGlhVXJscy5wdXNoKG5ldyBNZWRpYVVybF8xLk1lZGlhVXJsKHRoaXMuYmFzZVVybCwgZnJhZ21lbnQsIHRoaXMubWltZVR5cGUpKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBGcmFnbWVudEluZm9ybWF0aW9uO1xufShTZWdtZW50SW5mb3JtYXRpb25fMS5TZWdtZW50SW5mb3JtYXRpb24pKTtcbmV4cG9ydHMuRnJhZ21lbnRJbmZvcm1hdGlvbiA9IEZyYWdtZW50SW5mb3JtYXRpb247Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///54\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar AllAdaptationSets = function () {\n  function AllAdaptationSets(vid, audio, text) {\n    this.videoAdaptation = vid;\n\n    if (audio) {\n      this.audioAdaptation = audio;\n    }\n\n    if (text) {\n      this.textAdaptation = text;\n    }\n  }\n\n  return AllAdaptationSets;\n}();\n\nexports.AllAdaptationSets = AllAdaptationSets;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL2FsbC1hZGFwdGF0aW9uLXNldHMuanM/NTdlYyJdLCJuYW1lcyI6WyJBbGxBZGFwdGF0aW9uU2V0cyIsInZpZCIsImF1ZGlvIiwidGV4dCIsInZpZGVvQWRhcHRhdGlvbiIsImF1ZGlvQWRhcHRhdGlvbiIsInRleHRBZGFwdGF0aW9uIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsaUJBQWlCLEdBQUksWUFBWTtBQUNyQyxXQUFTQSxpQkFBVCxDQUE0QkMsR0FBNUIsRUFBaUNDLEtBQWpDLEVBQXdDQyxJQUF4QyxFQUE4QztBQUM1QyxTQUFLQyxlQUFMLEdBQXVCSCxHQUF2Qjs7QUFDQSxRQUFJQyxLQUFKLEVBQVc7QUFDVCxXQUFLRyxlQUFMLEdBQXVCSCxLQUF2QjtBQUNEOztBQUNELFFBQUlDLElBQUosRUFBVTtBQUNSLFdBQUtHLGNBQUwsR0FBc0JILElBQXRCO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPSCxpQkFBUDtBQUNELENBWjBCLEVBQTNCOztBQWFBTyxPQUFPLENBQUNQLGlCQUFSLEdBQTRCQSxpQkFBNUIiLCJmaWxlIjoiNTUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IEFsbEFkYXB0YXRpb25TZXRzID0gKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQWxsQWRhcHRhdGlvblNldHMgKHZpZCwgYXVkaW8sIHRleHQpIHtcbiAgICB0aGlzLnZpZGVvQWRhcHRhdGlvbiA9IHZpZDtcbiAgICBpZiAoYXVkaW8pIHtcbiAgICAgIHRoaXMuYXVkaW9BZGFwdGF0aW9uID0gYXVkaW87XG4gICAgfVxuICAgIGlmICh0ZXh0KSB7XG4gICAgICB0aGlzLnRleHRBZGFwdGF0aW9uID0gdGV4dDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gQWxsQWRhcHRhdGlvblNldHM7XG59KCkpO1xuZXhwb3J0cy5BbGxBZGFwdGF0aW9uU2V0cyA9IEFsbEFkYXB0YXRpb25TZXRzO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///55\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar AudioRepresentation = __webpack_require__(24);\n\nvar VideoRepresentation = __webpack_require__(25);\n\nvar TextRepresentation = __webpack_require__(26);\n\nmodule.exports = function jsonRepresentation(representations) {\n  var reprObj = [];\n\n  for (var i = 0, j = representations.length; i < j; i++) {\n    var cols = representations[i].representationColl;\n\n    for (var k = 0, l = cols.length; k < l; k++) {\n      var attr = cols[k].attributeList;\n      var contentType = attr.contentType || attr.mimeType;\n\n      if (contentType.indexOf("video") >= 0) {\n        contentType = "video";\n      } else if (contentType.indexOf("audio") >= 0) {\n        contentType = "audio";\n      } else {\n        contentType = "text";\n      }\n\n      switch (contentType) {\n        case "audio":\n          reprObj.push(new AudioRepresentation(attr));\n          break;\n\n        case "video":\n          reprObj.push(new VideoRepresentation(attr));\n          break;\n\n        default:\n          reprObj.push(new TextRepresentation(attr));\n      }\n    }\n  }\n\n  return reprObj;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL2pzb24tcmVwcmVzZW50YXRpb24uanM/MWM4OCJdLCJuYW1lcyI6WyJBdWRpb1JlcHJlc2VudGF0aW9uIiwicmVxdWlyZSIsIlZpZGVvUmVwcmVzZW50YXRpb24iLCJUZXh0UmVwcmVzZW50YXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIiwianNvblJlcHJlc2VudGF0aW9uIiwicmVwcmVzZW50YXRpb25zIiwicmVwck9iaiIsImkiLCJqIiwibGVuZ3RoIiwiY29scyIsInJlcHJlc2VudGF0aW9uQ29sbCIsImsiLCJsIiwiYXR0ciIsImF0dHJpYnV0ZUxpc3QiLCJjb250ZW50VHlwZSIsIm1pbWVUeXBlIiwiaW5kZXhPZiIsInB1c2giXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLG1CQUFtQixHQUFHQyxtQkFBTyxDQUFDLEVBQUQsQ0FBbkM7O0FBQ0EsSUFBTUMsbUJBQW1CLEdBQUdELG1CQUFPLENBQUMsRUFBRCxDQUFuQzs7QUFDQSxJQUFNRSxrQkFBa0IsR0FBR0YsbUJBQU8sQ0FBQyxFQUFELENBQWxDOztBQUVBRyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsU0FBU0Msa0JBQVQsQ0FBNkJDLGVBQTdCLEVBQThDO0FBQzdELE1BQUlDLE9BQU8sR0FBRyxFQUFkOztBQUNBLE9BQUssSUFBSUMsQ0FBQyxHQUFHLENBQVIsRUFBV0MsQ0FBQyxHQUFHSCxlQUFlLENBQUNJLE1BQXBDLEVBQTRDRixDQUFDLEdBQUdDLENBQWhELEVBQW1ERCxDQUFDLEVBQXBELEVBQXdEO0FBQ3RELFFBQU1HLElBQUksR0FBR0wsZUFBZSxDQUFDRSxDQUFELENBQWYsQ0FBbUJJLGtCQUFoQzs7QUFDQSxTQUFLLElBQUlDLENBQUMsR0FBRyxDQUFSLEVBQVdDLENBQUMsR0FBR0gsSUFBSSxDQUFDRCxNQUF6QixFQUFpQ0csQ0FBQyxHQUFHQyxDQUFyQyxFQUF3Q0QsQ0FBQyxFQUF6QyxFQUE2QztBQUMzQyxVQUFNRSxJQUFJLEdBQUdKLElBQUksQ0FBQ0UsQ0FBRCxDQUFKLENBQVFHLGFBQXJCO0FBQ0EsVUFBSUMsV0FBVyxHQUFHRixJQUFJLENBQUNFLFdBQUwsSUFBb0JGLElBQUksQ0FBQ0csUUFBM0M7O0FBQ0EsVUFBSUQsV0FBVyxDQUFDRSxPQUFaLENBQW9CLE9BQXBCLEtBQWdDLENBQXBDLEVBQXVDO0FBQ3JDRixtQkFBVyxHQUFHLE9BQWQ7QUFDRCxPQUZELE1BRU8sSUFBSUEsV0FBVyxDQUFDRSxPQUFaLENBQW9CLE9BQXBCLEtBQWdDLENBQXBDLEVBQXVDO0FBQzVDRixtQkFBVyxHQUFHLE9BQWQ7QUFDRCxPQUZNLE1BRUE7QUFDTEEsbUJBQVcsR0FBRyxNQUFkO0FBQ0Q7O0FBQ0QsY0FBUUEsV0FBUjtBQUNFLGFBQUssT0FBTDtBQUNFVixpQkFBTyxDQUFDYSxJQUFSLENBQWEsSUFBSXJCLG1CQUFKLENBQXdCZ0IsSUFBeEIsQ0FBYjtBQUNBOztBQUVGLGFBQUssT0FBTDtBQUNFUixpQkFBTyxDQUFDYSxJQUFSLENBQWEsSUFBSW5CLG1CQUFKLENBQXdCYyxJQUF4QixDQUFiO0FBQ0E7O0FBRUY7QUFDRVIsaUJBQU8sQ0FBQ2EsSUFBUixDQUFhLElBQUlsQixrQkFBSixDQUF1QmEsSUFBdkIsQ0FBYjtBQVZKO0FBWUQ7QUFDRjs7QUFDRCxTQUFPUixPQUFQO0FBQ0QsQ0E3QkQiLCJmaWxlIjoiNTYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IEF1ZGlvUmVwcmVzZW50YXRpb24gPSByZXF1aXJlKFwiLi4vanNvbi9hdWRpby1yZXByZXNlbnRhdGlvblwiKTtcbmNvbnN0IFZpZGVvUmVwcmVzZW50YXRpb24gPSByZXF1aXJlKFwiLi4vanNvbi92aWRlby1yZXByZXNlbnRhdGlvblwiKTtcbmNvbnN0IFRleHRSZXByZXNlbnRhdGlvbiA9IHJlcXVpcmUoXCIuLi9qc29uL3RleHQtcmVwcmVzZW50YXRpb25cIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ganNvblJlcHJlc2VudGF0aW9uIChyZXByZXNlbnRhdGlvbnMpIHtcbiAgbGV0IHJlcHJPYmogPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGogPSByZXByZXNlbnRhdGlvbnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgY29uc3QgY29scyA9IHJlcHJlc2VudGF0aW9uc1tpXS5yZXByZXNlbnRhdGlvbkNvbGw7XG4gICAgZm9yIChsZXQgayA9IDAsIGwgPSBjb2xzLmxlbmd0aDsgayA8IGw7IGsrKykge1xuICAgICAgY29uc3QgYXR0ciA9IGNvbHNba10uYXR0cmlidXRlTGlzdDtcbiAgICAgIGxldCBjb250ZW50VHlwZSA9IGF0dHIuY29udGVudFR5cGUgfHwgYXR0ci5taW1lVHlwZTtcbiAgICAgIGlmIChjb250ZW50VHlwZS5pbmRleE9mKFwidmlkZW9cIikgPj0gMCkge1xuICAgICAgICBjb250ZW50VHlwZSA9IFwidmlkZW9cIjtcbiAgICAgIH0gZWxzZSBpZiAoY29udGVudFR5cGUuaW5kZXhPZihcImF1ZGlvXCIpID49IDApIHtcbiAgICAgICAgY29udGVudFR5cGUgPSBcImF1ZGlvXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50VHlwZSA9IFwidGV4dFwiO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChjb250ZW50VHlwZSkge1xuICAgICAgICBjYXNlIFwiYXVkaW9cIjpcbiAgICAgICAgICByZXByT2JqLnB1c2gobmV3IEF1ZGlvUmVwcmVzZW50YXRpb24oYXR0cikpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJ2aWRlb1wiOlxuICAgICAgICAgIHJlcHJPYmoucHVzaChuZXcgVmlkZW9SZXByZXNlbnRhdGlvbihhdHRyKSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXByT2JqLnB1c2gobmV3IFRleHRSZXByZXNlbnRhdGlvbihhdHRyKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXByT2JqO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///56\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar AudioRepresentation = __webpack_require__(24);\n\nvar VideoRepresentation = __webpack_require__(25);\n\nvar TextRepresentation = __webpack_require__(26);\n\nmodule.exports = function jsonRepresentation(representations) {\n  var reprObj = [];\n\n  for (var i = 0, j = representations.length; i < j; i++) {\n    var cols = representations[i].representationColl;\n\n    for (var k = 0, l = cols.length; k < l; k++) {\n      var attr = cols[k].attributeList;\n      var contentType = attr.contentType || attr.mimeType;\n\n      if (contentType.indexOf("video") >= 0) {\n        contentType = "video";\n      } else if (contentType.indexOf("audio") >= 0) {\n        contentType = "audio";\n      } else {\n        contentType = "text";\n      }\n\n      switch (contentType) {\n        case "audio":\n          reprObj.push(new AudioRepresentation(attr));\n          break;\n\n        case "video":\n          reprObj.push(new VideoRepresentation(attr));\n          break;\n\n        default:\n          reprObj.push(new TextRepresentation(attr));\n      }\n\n      reprObj[k].protections = representations[i].contentProtections.slice();\n    }\n  }\n\n  return reprObj;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvcGFyc2VyL2pzb24tcmVwcmVzZW50YXRpb24td2l0aC1wcm90ZWN0aW9uLmpzPzUxNGIiXSwibmFtZXMiOlsiQXVkaW9SZXByZXNlbnRhdGlvbiIsInJlcXVpcmUiLCJWaWRlb1JlcHJlc2VudGF0aW9uIiwiVGV4dFJlcHJlc2VudGF0aW9uIiwibW9kdWxlIiwiZXhwb3J0cyIsImpzb25SZXByZXNlbnRhdGlvbiIsInJlcHJlc2VudGF0aW9ucyIsInJlcHJPYmoiLCJpIiwiaiIsImxlbmd0aCIsImNvbHMiLCJyZXByZXNlbnRhdGlvbkNvbGwiLCJrIiwibCIsImF0dHIiLCJhdHRyaWJ1dGVMaXN0IiwiY29udGVudFR5cGUiLCJtaW1lVHlwZSIsImluZGV4T2YiLCJwdXNoIiwicHJvdGVjdGlvbnMiLCJjb250ZW50UHJvdGVjdGlvbnMiLCJzbGljZSJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsbUJBQW1CLEdBQUdDLG1CQUFPLENBQUMsRUFBRCxDQUFuQzs7QUFDQSxJQUFNQyxtQkFBbUIsR0FBR0QsbUJBQU8sQ0FBQyxFQUFELENBQW5DOztBQUNBLElBQU1FLGtCQUFrQixHQUFHRixtQkFBTyxDQUFDLEVBQUQsQ0FBbEM7O0FBRUFHLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixTQUFTQyxrQkFBVCxDQUE2QkMsZUFBN0IsRUFBOEM7QUFDN0QsTUFBSUMsT0FBTyxHQUFHLEVBQWQ7O0FBQ0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBUixFQUFXQyxDQUFDLEdBQUdILGVBQWUsQ0FBQ0ksTUFBcEMsRUFBNENGLENBQUMsR0FBR0MsQ0FBaEQsRUFBbURELENBQUMsRUFBcEQsRUFBd0Q7QUFDdEQsUUFBTUcsSUFBSSxHQUFHTCxlQUFlLENBQUNFLENBQUQsQ0FBZixDQUFtQkksa0JBQWhDOztBQUNBLFNBQUssSUFBSUMsQ0FBQyxHQUFHLENBQVIsRUFBV0MsQ0FBQyxHQUFHSCxJQUFJLENBQUNELE1BQXpCLEVBQWlDRyxDQUFDLEdBQUdDLENBQXJDLEVBQXdDRCxDQUFDLEVBQXpDLEVBQTZDO0FBQzNDLFVBQU1FLElBQUksR0FBR0osSUFBSSxDQUFDRSxDQUFELENBQUosQ0FBUUcsYUFBckI7QUFDQSxVQUFJQyxXQUFXLEdBQUdGLElBQUksQ0FBQ0UsV0FBTCxJQUFvQkYsSUFBSSxDQUFDRyxRQUEzQzs7QUFDQSxVQUFJRCxXQUFXLENBQUNFLE9BQVosQ0FBb0IsT0FBcEIsS0FBZ0MsQ0FBcEMsRUFBdUM7QUFDckNGLG1CQUFXLEdBQUcsT0FBZDtBQUNELE9BRkQsTUFFTyxJQUFJQSxXQUFXLENBQUNFLE9BQVosQ0FBb0IsT0FBcEIsS0FBZ0MsQ0FBcEMsRUFBdUM7QUFDNUNGLG1CQUFXLEdBQUcsT0FBZDtBQUNELE9BRk0sTUFFQTtBQUNMQSxtQkFBVyxHQUFHLE1BQWQ7QUFDRDs7QUFDRCxjQUFRQSxXQUFSO0FBQ0UsYUFBSyxPQUFMO0FBQ0VWLGlCQUFPLENBQUNhLElBQVIsQ0FBYSxJQUFJckIsbUJBQUosQ0FBd0JnQixJQUF4QixDQUFiO0FBQ0E7O0FBRUYsYUFBSyxPQUFMO0FBQ0VSLGlCQUFPLENBQUNhLElBQVIsQ0FBYSxJQUFJbkIsbUJBQUosQ0FBd0JjLElBQXhCLENBQWI7QUFDQTs7QUFFRjtBQUNFUixpQkFBTyxDQUFDYSxJQUFSLENBQWEsSUFBSWxCLGtCQUFKLENBQXVCYSxJQUF2QixDQUFiO0FBVko7O0FBWUFSLGFBQU8sQ0FBQ00sQ0FBRCxDQUFQLENBQVdRLFdBQVgsR0FBeUJmLGVBQWUsQ0FBQ0UsQ0FBRCxDQUFmLENBQW1CYyxrQkFBbkIsQ0FBc0NDLEtBQXRDLEVBQXpCO0FBQ0Q7QUFFRjs7QUFDRCxTQUFPaEIsT0FBUDtBQUNELENBL0JEIiwiZmlsZSI6IjU3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBBdWRpb1JlcHJlc2VudGF0aW9uID0gcmVxdWlyZShcIi4uL2pzb24vYXVkaW8tcmVwcmVzZW50YXRpb25cIik7XG5jb25zdCBWaWRlb1JlcHJlc2VudGF0aW9uID0gcmVxdWlyZShcIi4uL2pzb24vdmlkZW8tcmVwcmVzZW50YXRpb25cIik7XG5jb25zdCBUZXh0UmVwcmVzZW50YXRpb24gPSByZXF1aXJlKFwiLi4vanNvbi90ZXh0LXJlcHJlc2VudGF0aW9uXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGpzb25SZXByZXNlbnRhdGlvbiAocmVwcmVzZW50YXRpb25zKSB7XG4gIGxldCByZXByT2JqID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBqID0gcmVwcmVzZW50YXRpb25zLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGNvbnN0IGNvbHMgPSByZXByZXNlbnRhdGlvbnNbaV0ucmVwcmVzZW50YXRpb25Db2xsO1xuICAgIGZvciAobGV0IGsgPSAwLCBsID0gY29scy5sZW5ndGg7IGsgPCBsOyBrKyspIHtcbiAgICAgIGNvbnN0IGF0dHIgPSBjb2xzW2tdLmF0dHJpYnV0ZUxpc3Q7XG4gICAgICBsZXQgY29udGVudFR5cGUgPSBhdHRyLmNvbnRlbnRUeXBlIHx8IGF0dHIubWltZVR5cGU7XG4gICAgICBpZiAoY29udGVudFR5cGUuaW5kZXhPZihcInZpZGVvXCIpID49IDApIHtcbiAgICAgICAgY29udGVudFR5cGUgPSBcInZpZGVvXCI7XG4gICAgICB9IGVsc2UgaWYgKGNvbnRlbnRUeXBlLmluZGV4T2YoXCJhdWRpb1wiKSA+PSAwKSB7XG4gICAgICAgIGNvbnRlbnRUeXBlID0gXCJhdWRpb1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudFR5cGUgPSBcInRleHRcIjtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoY29udGVudFR5cGUpIHtcbiAgICAgICAgY2FzZSBcImF1ZGlvXCI6XG4gICAgICAgICAgcmVwck9iai5wdXNoKG5ldyBBdWRpb1JlcHJlc2VudGF0aW9uKGF0dHIpKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwidmlkZW9cIjpcbiAgICAgICAgICByZXByT2JqLnB1c2gobmV3IFZpZGVvUmVwcmVzZW50YXRpb24oYXR0cikpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmVwck9iai5wdXNoKG5ldyBUZXh0UmVwcmVzZW50YXRpb24oYXR0cikpO1xuICAgICAgfVxuICAgICAgcmVwck9ialtrXS5wcm90ZWN0aW9ucyA9IHJlcHJlc2VudGF0aW9uc1tpXS5jb250ZW50UHJvdGVjdGlvbnMuc2xpY2UoKTtcbiAgICB9XG5cbiAgfVxuICByZXR1cm4gcmVwck9iajtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///57\n')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__58__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ1cmwtcGFyc2VcIj82NzRhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjU4LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181OF9fOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///58\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nfunction isUTF16(data) {\n  var i = 0;\n  var len = data && data.length;\n  var pos = null;\n  var b1, b2, next, prev;\n\n  if (len < 2) {\n    if (data[0] > 0xFF) {\n      return false;\n    }\n  } else {\n    b1 = data[0];\n    b2 = data[1];\n\n    if (b1 === 0xFF && // BOM (little-endian)\n    b2 === 0xFE) {\n      return true;\n    }\n\n    if (b1 === 0xFE && // BOM (big-endian)\n    b2 === 0xFF) {\n      return true;\n    }\n\n    for (; i < len; i++) {\n      if (data[i] === 0x00) {\n        pos = i;\n        break;\n      } else if (data[i] > 0xFF) {\n        return false;\n      }\n    }\n\n    if (pos === null) {\n      return false; // Non ASCII\n    }\n\n    next = data[pos + 1]; // BE\n\n    if (next !== void 0 && next > 0x00 && next < 0x80) {\n      return true;\n    }\n\n    prev = data[pos - 1]; // LE\n\n    if (prev !== void 0 && prev > 0x00 && prev < 0x80) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nmodule.exports = {\n  isUTF16: isUTF16\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9lbmNvZGluZy5qcz84ODFiIl0sIm5hbWVzIjpbImlzVVRGMTYiLCJkYXRhIiwiaSIsImxlbiIsImxlbmd0aCIsInBvcyIsImIxIiwiYjIiLCJuZXh0IiwicHJldiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLFNBQVNBLE9BQVQsQ0FBa0JDLElBQWxCLEVBQXdCO0FBQ3RCLE1BQUlDLENBQUMsR0FBRyxDQUFSO0FBQ0EsTUFBSUMsR0FBRyxHQUFHRixJQUFJLElBQUlBLElBQUksQ0FBQ0csTUFBdkI7QUFDQSxNQUFJQyxHQUFHLEdBQUcsSUFBVjtBQUNBLE1BQUlDLEVBQUosRUFBUUMsRUFBUixFQUFZQyxJQUFaLEVBQWtCQyxJQUFsQjs7QUFFQSxNQUFJTixHQUFHLEdBQUcsQ0FBVixFQUFhO0FBQ1QsUUFBSUYsSUFBSSxDQUFDLENBQUQsQ0FBSixHQUFVLElBQWQsRUFBb0I7QUFDaEIsYUFBTyxLQUFQO0FBQ0g7QUFDSixHQUpELE1BSU87QUFDSEssTUFBRSxHQUFHTCxJQUFJLENBQUMsQ0FBRCxDQUFUO0FBQ0FNLE1BQUUsR0FBR04sSUFBSSxDQUFDLENBQUQsQ0FBVDs7QUFDQSxRQUFJSyxFQUFFLEtBQUssSUFBUCxJQUFlO0FBQ2ZDLE1BQUUsS0FBSyxJQURYLEVBQ2lCO0FBQ2IsYUFBTyxJQUFQO0FBQ0g7O0FBQ0QsUUFBSUQsRUFBRSxLQUFLLElBQVAsSUFBZTtBQUNmQyxNQUFFLEtBQUssSUFEWCxFQUNpQjtBQUNiLGFBQU8sSUFBUDtBQUNIOztBQUVELFdBQU9MLENBQUMsR0FBR0MsR0FBWCxFQUFnQkQsQ0FBQyxFQUFqQixFQUFxQjtBQUNqQixVQUFJRCxJQUFJLENBQUNDLENBQUQsQ0FBSixLQUFZLElBQWhCLEVBQXNCO0FBQ2xCRyxXQUFHLEdBQUdILENBQU47QUFDQTtBQUNILE9BSEQsTUFHTyxJQUFJRCxJQUFJLENBQUNDLENBQUQsQ0FBSixHQUFVLElBQWQsRUFBb0I7QUFDdkIsZUFBTyxLQUFQO0FBQ0g7QUFDSjs7QUFFRCxRQUFJRyxHQUFHLEtBQUssSUFBWixFQUFrQjtBQUNkLGFBQU8sS0FBUCxDQURjLENBQ0E7QUFDakI7O0FBRURHLFFBQUksR0FBR1AsSUFBSSxDQUFDSSxHQUFHLEdBQUcsQ0FBUCxDQUFYLENBekJHLENBeUJtQjs7QUFDdEIsUUFBSUcsSUFBSSxLQUFLLEtBQUssQ0FBZCxJQUFtQkEsSUFBSSxHQUFHLElBQTFCLElBQWtDQSxJQUFJLEdBQUcsSUFBN0MsRUFBbUQ7QUFDL0MsYUFBTyxJQUFQO0FBQ0g7O0FBRURDLFFBQUksR0FBR1IsSUFBSSxDQUFDSSxHQUFHLEdBQUcsQ0FBUCxDQUFYLENBOUJHLENBOEJtQjs7QUFDdEIsUUFBSUksSUFBSSxLQUFLLEtBQUssQ0FBZCxJQUFtQkEsSUFBSSxHQUFHLElBQTFCLElBQWtDQSxJQUFJLEdBQUcsSUFBN0MsRUFBbUQ7QUFDL0MsYUFBTyxJQUFQO0FBQ0g7QUFDSjs7QUFFRCxTQUFPLEtBQVA7QUFDRDs7QUFFREMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZYLFNBQU8sRUFBRUE7QUFETSxDQUFqQiIsImZpbGUiOiI1OS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBpc1VURjE2IChkYXRhKSB7XG4gIHZhciBpID0gMDtcbiAgdmFyIGxlbiA9IGRhdGEgJiYgZGF0YS5sZW5ndGg7XG4gIHZhciBwb3MgPSBudWxsO1xuICB2YXIgYjEsIGIyLCBuZXh0LCBwcmV2O1xuXG4gIGlmIChsZW4gPCAyKSB7XG4gICAgICBpZiAoZGF0YVswXSA+IDB4RkYpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gIH0gZWxzZSB7XG4gICAgICBiMSA9IGRhdGFbMF07XG4gICAgICBiMiA9IGRhdGFbMV07XG4gICAgICBpZiAoYjEgPT09IDB4RkYgJiYgLy8gQk9NIChsaXR0bGUtZW5kaWFuKVxuICAgICAgICAgIGIyID09PSAweEZFKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoYjEgPT09IDB4RkUgJiYgLy8gQk9NIChiaWctZW5kaWFuKVxuICAgICAgICAgIGIyID09PSAweEZGKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBpZiAoZGF0YVtpXSA9PT0gMHgwMCkge1xuICAgICAgICAgICAgICBwb3MgPSBpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFbaV0gPiAweEZGKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwb3MgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIE5vbiBBU0NJSVxuICAgICAgfVxuXG4gICAgICBuZXh0ID0gZGF0YVtwb3MgKyAxXTsgLy8gQkVcbiAgICAgIGlmIChuZXh0ICE9PSB2b2lkIDAgJiYgbmV4dCA+IDB4MDAgJiYgbmV4dCA8IDB4ODApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcHJldiA9IGRhdGFbcG9zIC0gMV07IC8vIExFXG4gICAgICBpZiAocHJldiAhPT0gdm9pZCAwICYmIHByZXYgPiAweDAwICYmIHByZXYgPCAweDgwKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc1VURjE2OiBpc1VURjE2XG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///59\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nfunction removeCharacter(text, pos) {\n  var newText;\n  newText = text.substr(0, pos - 1);\n\n  if (text.length > pos) {\n    newText += text.substr(pos, text.length);\n  }\n\n  return newText;\n}\n\nfunction getInvalidDiff(text, regex, openingTag, closingTag) {\n  var value = String(text);\n  var check = true;\n  var i = 1;\n\n  while (check) {\n    var valueToCheck = value.substr(0, i);\n\n    if (!valueToCheck.match(regex)) {\n      value = removeCharacter(value, i);\n    } else {\n      i++;\n    }\n\n    if (i > value.length) {\n      check = false;\n    }\n  }\n\n  var arrValue = value.split("");\n\n  for (var _i = 0, j = text.length; _i < j; _i++) {\n    if (_i >= arrValue.length || text[_i] !== arrValue[_i]) {\n      arrValue.splice(_i, 0, openingTag + text[_i] + closingTag);\n    }\n  }\n\n  return arrValue.join("");\n}\n\nmodule.exports = getInvalidDiff;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9nZXQtaW52YWxpZC1kaWZmLmpzP2JhMWQiXSwibmFtZXMiOlsicmVtb3ZlQ2hhcmFjdGVyIiwidGV4dCIsInBvcyIsIm5ld1RleHQiLCJzdWJzdHIiLCJsZW5ndGgiLCJnZXRJbnZhbGlkRGlmZiIsInJlZ2V4Iiwib3BlbmluZ1RhZyIsImNsb3NpbmdUYWciLCJ2YWx1ZSIsIlN0cmluZyIsImNoZWNrIiwiaSIsInZhbHVlVG9DaGVjayIsIm1hdGNoIiwiYXJyVmFsdWUiLCJzcGxpdCIsImoiLCJzcGxpY2UiLCJqb2luIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsU0FBU0EsZUFBVCxDQUEwQkMsSUFBMUIsRUFBZ0NDLEdBQWhDLEVBQXFDO0FBQ25DLE1BQUlDLE9BQUo7QUFDQUEsU0FBTyxHQUFHRixJQUFJLENBQUNHLE1BQUwsQ0FBWSxDQUFaLEVBQWVGLEdBQUcsR0FBRyxDQUFyQixDQUFWOztBQUNBLE1BQUlELElBQUksQ0FBQ0ksTUFBTCxHQUFjSCxHQUFsQixFQUF1QjtBQUNyQkMsV0FBTyxJQUFJRixJQUFJLENBQUNHLE1BQUwsQ0FBWUYsR0FBWixFQUFpQkQsSUFBSSxDQUFDSSxNQUF0QixDQUFYO0FBQ0Q7O0FBQ0QsU0FBT0YsT0FBUDtBQUNEOztBQUVELFNBQVNHLGNBQVQsQ0FBeUJMLElBQXpCLEVBQStCTSxLQUEvQixFQUFzQ0MsVUFBdEMsRUFBa0RDLFVBQWxELEVBQThEO0FBQzVELE1BQUlDLEtBQUssR0FBR0MsTUFBTSxDQUFDVixJQUFELENBQWxCO0FBQ0EsTUFBSVcsS0FBSyxHQUFHLElBQVo7QUFDQSxNQUFJQyxDQUFDLEdBQUcsQ0FBUjs7QUFDQSxTQUFPRCxLQUFQLEVBQWM7QUFDWixRQUFJRSxZQUFZLEdBQUdKLEtBQUssQ0FBQ04sTUFBTixDQUFhLENBQWIsRUFBZ0JTLENBQWhCLENBQW5COztBQUVBLFFBQUksQ0FBQ0MsWUFBWSxDQUFDQyxLQUFiLENBQW1CUixLQUFuQixDQUFMLEVBQWdDO0FBQzlCRyxXQUFLLEdBQUdWLGVBQWUsQ0FBQ1UsS0FBRCxFQUFRRyxDQUFSLENBQXZCO0FBQ0QsS0FGRCxNQUVPO0FBQ0xBLE9BQUM7QUFDRjs7QUFDRCxRQUFJQSxDQUFDLEdBQUdILEtBQUssQ0FBQ0wsTUFBZCxFQUFzQjtBQUNwQk8sV0FBSyxHQUFHLEtBQVI7QUFDRDtBQUNGOztBQUNELE1BQUlJLFFBQVEsR0FBR04sS0FBSyxDQUFDTyxLQUFOLENBQVksRUFBWixDQUFmOztBQUNBLE9BQUssSUFBSUosRUFBQyxHQUFHLENBQVIsRUFBV0ssQ0FBQyxHQUFHakIsSUFBSSxDQUFDSSxNQUF6QixFQUFpQ1EsRUFBQyxHQUFHSyxDQUFyQyxFQUF3Q0wsRUFBQyxFQUF6QyxFQUE2QztBQUMzQyxRQUFJQSxFQUFDLElBQUlHLFFBQVEsQ0FBQ1gsTUFBZCxJQUF3QkosSUFBSSxDQUFDWSxFQUFELENBQUosS0FBWUcsUUFBUSxDQUFDSCxFQUFELENBQWhELEVBQXFEO0FBQ25ERyxjQUFRLENBQUNHLE1BQVQsQ0FBZ0JOLEVBQWhCLEVBQW1CLENBQW5CLEVBQXNCTCxVQUFVLEdBQUdQLElBQUksQ0FBQ1ksRUFBRCxDQUFqQixHQUF1QkosVUFBN0M7QUFDRDtBQUNGOztBQUNELFNBQU9PLFFBQVEsQ0FBQ0ksSUFBVCxDQUFjLEVBQWQsQ0FBUDtBQUNEOztBQUVEQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJoQixjQUFqQiIsImZpbGUiOiI2MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiByZW1vdmVDaGFyYWN0ZXIgKHRleHQsIHBvcykge1xuICBsZXQgbmV3VGV4dDtcbiAgbmV3VGV4dCA9IHRleHQuc3Vic3RyKDAsIHBvcyAtIDEpO1xuICBpZiAodGV4dC5sZW5ndGggPiBwb3MpIHtcbiAgICBuZXdUZXh0ICs9IHRleHQuc3Vic3RyKHBvcywgdGV4dC5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBuZXdUZXh0O1xufVxuXG5mdW5jdGlvbiBnZXRJbnZhbGlkRGlmZiAodGV4dCwgcmVnZXgsIG9wZW5pbmdUYWcsIGNsb3NpbmdUYWcpIHtcbiAgbGV0IHZhbHVlID0gU3RyaW5nKHRleHQpO1xuICBsZXQgY2hlY2sgPSB0cnVlO1xuICBsZXQgaSA9IDE7XG4gIHdoaWxlIChjaGVjaykge1xuICAgIGxldCB2YWx1ZVRvQ2hlY2sgPSB2YWx1ZS5zdWJzdHIoMCwgaSk7XG5cbiAgICBpZiAoIXZhbHVlVG9DaGVjay5tYXRjaChyZWdleCkpIHtcbiAgICAgIHZhbHVlID0gcmVtb3ZlQ2hhcmFjdGVyKHZhbHVlLCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAoaSA+IHZhbHVlLmxlbmd0aCkge1xuICAgICAgY2hlY2sgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgbGV0IGFyclZhbHVlID0gdmFsdWUuc3BsaXQoXCJcIik7XG4gIGZvciAobGV0IGkgPSAwLCBqID0gdGV4dC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBpZiAoaSA+PSBhcnJWYWx1ZS5sZW5ndGggfHwgdGV4dFtpXSAhPT0gYXJyVmFsdWVbaV0pIHtcbiAgICAgIGFyclZhbHVlLnNwbGljZShpLCAwLCBvcGVuaW5nVGFnICsgdGV4dFtpXSArIGNsb3NpbmdUYWcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXJyVmFsdWUuam9pbihcIlwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRJbnZhbGlkRGlmZjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///60\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = function (api, onSuccess\n/*, onFailure, target, manifestId */\n) {\n  onSuccess();\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvY3JlYXRlUGVyc2lzdGVudC5qcz9lYWRkIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViQSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsR0FBVixFQUFlQztBQUFVO0FBQXpCLEVBQStEO0FBQzlFQSxXQUFTO0FBQ1YsQ0FGRCIsImZpbGUiOiI2MS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcGksIG9uU3VjY2VzcyAvKiwgb25GYWlsdXJlLCB0YXJnZXQsIG1hbmlmZXN0SWQgKi8pIHtcbiAgb25TdWNjZXNzKCk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///61\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId) {\n  api.offlineController.getManifestFolderInfo(manifestId, function (err, info) {\n    if (err) {\n      onFailure(translation.getError(translation.e.manifests.INFO_FAILED, manifestId), err);\n    } else {\n      onSuccess(info);\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvZm9sZGVyLWluZm8uanM/ZWNjMiJdLCJuYW1lcyI6WyJ0cmFuc2xhdGlvbiIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBpIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwidGFyZ2V0IiwibWFuaWZlc3RJZCIsIm9mZmxpbmVDb250cm9sbGVyIiwiZ2V0TWFuaWZlc3RGb2xkZXJJbmZvIiwiZXJyIiwiaW5mbyIsImdldEVycm9yIiwiZSIsIm1hbmlmZXN0cyIsIklORk9fRkFJTEVEIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFNQSxXQUFXLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFFQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUNDLE1BQXJDLEVBQTZDQyxVQUE3QyxFQUF5RDtBQUN4RUosS0FBRyxDQUFDSyxpQkFBSixDQUFzQkMscUJBQXRCLENBQTRDRixVQUE1QyxFQUF3RCxVQUFVRyxHQUFWLEVBQWVDLElBQWYsRUFBcUI7QUFDM0UsUUFBSUQsR0FBSixFQUFTO0FBQ1BMLGVBQVMsQ0FBQ04sV0FBVyxDQUFDYSxRQUFaLENBQXFCYixXQUFXLENBQUNjLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsV0FBN0MsRUFBMERSLFVBQTFELENBQUQsRUFBd0VHLEdBQXhFLENBQVQ7QUFDRCxLQUZELE1BRU87QUFDTE4sZUFBUyxDQUFDTyxJQUFELENBQVQ7QUFDRDtBQUNGLEdBTkQ7QUFPRCxDQVJEIiwiZmlsZSI6IjYyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IHRyYW5zbGF0aW9uID0gcmVxdWlyZSgnLi4vLi4vdHJhbnNsYXRpb24vaW5kZXgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkKSB7XG4gIGFwaS5vZmZsaW5lQ29udHJvbGxlci5nZXRNYW5pZmVzdEZvbGRlckluZm8obWFuaWZlc3RJZCwgZnVuY3Rpb24gKGVyciwgaW5mbykge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5JTkZPX0ZBSUxFRCwgbWFuaWZlc3RJZCksIGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uU3VjY2VzcyhpbmZvKTtcbiAgICB9XG4gIH0pO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///62\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nmodule.exports = function (api, onSuccess, onFailure) {\n  api.offlineController.getManifestsList(function (err, list) {\n    if (err) {\n      onFailure(translation.getError(translation.e.manifests.LIST_LOADING_FAILED), err);\n    } else {\n      onSuccess(list);\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvZ2V0LWxpc3QuanM/M2ZiNSJdLCJuYW1lcyI6WyJ0cmFuc2xhdGlvbiIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBpIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwib2ZmbGluZUNvbnRyb2xsZXIiLCJnZXRNYW5pZmVzdHNMaXN0IiwiZXJyIiwibGlzdCIsImdldEVycm9yIiwiZSIsIm1hbmlmZXN0cyIsIkxJU1RfTE9BRElOR19GQUlMRUQiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQU1BLFdBQVcsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQTNCOztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsR0FBVixFQUFlQyxTQUFmLEVBQTBCQyxTQUExQixFQUFxQztBQUNwREYsS0FBRyxDQUFDRyxpQkFBSixDQUFzQkMsZ0JBQXRCLENBQXVDLFVBQVVDLEdBQVYsRUFBZUMsSUFBZixFQUFxQjtBQUMxRCxRQUFJRCxHQUFKLEVBQVM7QUFDUEgsZUFBUyxDQUFDTixXQUFXLENBQUNXLFFBQVosQ0FBcUJYLFdBQVcsQ0FBQ1ksQ0FBWixDQUFjQyxTQUFkLENBQXdCQyxtQkFBN0MsQ0FBRCxFQUFvRUwsR0FBcEUsQ0FBVDtBQUNELEtBRkQsTUFFTztBQUNMSixlQUFTLENBQUNLLElBQUQsQ0FBVDtBQUNEO0FBQ0YsR0FORDtBQU9ELENBUkQiLCJmaWxlIjoiNjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgdHJhbnNsYXRpb24gPSByZXF1aXJlKCcuLi8uLi90cmFuc2xhdGlvbi9pbmRleCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcGksIG9uU3VjY2Vzcywgb25GYWlsdXJlKSB7XG4gIGFwaS5vZmZsaW5lQ29udHJvbGxlci5nZXRNYW5pZmVzdHNMaXN0KGZ1bmN0aW9uIChlcnIsIGxpc3QpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5tYW5pZmVzdHMuTElTVF9MT0FESU5HX0ZBSUxFRCksIGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uU3VjY2VzcyhsaXN0KTtcbiAgICB9XG4gIH0pO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///63\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nmodule.exports = function (api, onSuccess, onFailure, target, full) {\n  api.offlineController.getManifestsListWithInfo(function (err, list) {\n    if (err) {\n      onFailure(translation.getError(translation.e.manifests.LIST_LOADING_FAILED), err);\n    } else {\n      onSuccess(list);\n    }\n  }, full);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvZ2V0LWxpc3Qtd2l0aC1pbmZvLmpzP2Y0ODEiXSwibmFtZXMiOlsidHJhbnNsYXRpb24iLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsImFwaSIsIm9uU3VjY2VzcyIsIm9uRmFpbHVyZSIsInRhcmdldCIsImZ1bGwiLCJvZmZsaW5lQ29udHJvbGxlciIsImdldE1hbmlmZXN0c0xpc3RXaXRoSW5mbyIsImVyciIsImxpc3QiLCJnZXRFcnJvciIsImUiLCJtYW5pZmVzdHMiLCJMSVNUX0xPQURJTkdfRkFJTEVEIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFNQSxXQUFXLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFFQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUNDLE1BQXJDLEVBQTZDQyxJQUE3QyxFQUFtRDtBQUNsRUosS0FBRyxDQUFDSyxpQkFBSixDQUFzQkMsd0JBQXRCLENBQStDLFVBQVVDLEdBQVYsRUFBZUMsSUFBZixFQUFxQjtBQUNsRSxRQUFJRCxHQUFKLEVBQVM7QUFDUEwsZUFBUyxDQUFDTixXQUFXLENBQUNhLFFBQVosQ0FBcUJiLFdBQVcsQ0FBQ2MsQ0FBWixDQUFjQyxTQUFkLENBQXdCQyxtQkFBN0MsQ0FBRCxFQUFvRUwsR0FBcEUsQ0FBVDtBQUNELEtBRkQsTUFFTztBQUNMTixlQUFTLENBQUNPLElBQUQsQ0FBVDtBQUNEO0FBQ0YsR0FORCxFQU1HSixJQU5IO0FBT0QsQ0FSRCIsImZpbGUiOiI2NC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCB0cmFuc2xhdGlvbiA9IHJlcXVpcmUoJy4uLy4uL3RyYW5zbGF0aW9uL2luZGV4Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwaSwgb25TdWNjZXNzLCBvbkZhaWx1cmUsIHRhcmdldCwgZnVsbCkge1xuICBhcGkub2ZmbGluZUNvbnRyb2xsZXIuZ2V0TWFuaWZlc3RzTGlzdFdpdGhJbmZvKGZ1bmN0aW9uIChlcnIsIGxpc3QpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5tYW5pZmVzdHMuTElTVF9MT0FESU5HX0ZBSUxFRCksIGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uU3VjY2VzcyhsaXN0KTtcbiAgICB9XG4gIH0sIGZ1bGwpO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///64\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId) {\n  api.offlineController.getManifestInfo(manifestId, function (err, info) {\n    if (err) {\n      onFailure(translation.getError(translation.e.downloads._GENERAL), err);\n    } else {\n      onSuccess({\n        offlineLink: api.getOfflinePath(manifestId) + info.manifest.name,\n        persistent: info.persistent\n      });\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvZ2V0LW9mZmxpbmUtbGluay5qcz9mNGMyIl0sIm5hbWVzIjpbInRyYW5zbGF0aW9uIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJ0YXJnZXQiLCJtYW5pZmVzdElkIiwib2ZmbGluZUNvbnRyb2xsZXIiLCJnZXRNYW5pZmVzdEluZm8iLCJlcnIiLCJpbmZvIiwiZ2V0RXJyb3IiLCJlIiwiZG93bmxvYWRzIiwiX0dFTkVSQUwiLCJvZmZsaW5lTGluayIsImdldE9mZmxpbmVQYXRoIiwibWFuaWZlc3QiLCJuYW1lIiwicGVyc2lzdGVudCJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsV0FBVyxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBM0I7O0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixVQUFVQyxHQUFWLEVBQWVDLFNBQWYsRUFBMEJDLFNBQTFCLEVBQXFDQyxNQUFyQyxFQUE2Q0MsVUFBN0MsRUFBeUQ7QUFDeEVKLEtBQUcsQ0FBQ0ssaUJBQUosQ0FBc0JDLGVBQXRCLENBQXNDRixVQUF0QyxFQUFrRCxVQUFVRyxHQUFWLEVBQWVDLElBQWYsRUFBcUI7QUFDckUsUUFBSUQsR0FBSixFQUFTO0FBQ1BMLGVBQVMsQ0FBQ04sV0FBVyxDQUFDYSxRQUFaLENBQXFCYixXQUFXLENBQUNjLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsUUFBN0MsQ0FBRCxFQUF5REwsR0FBekQsQ0FBVDtBQUNELEtBRkQsTUFFTztBQUNMTixlQUFTLENBQUM7QUFDUlksbUJBQVcsRUFBRWIsR0FBRyxDQUFDYyxjQUFKLENBQW1CVixVQUFuQixJQUFpQ0ksSUFBSSxDQUFDTyxRQUFMLENBQWNDLElBRHBEO0FBRVJDLGtCQUFVLEVBQUVULElBQUksQ0FBQ1M7QUFGVCxPQUFELENBQVQ7QUFJRDtBQUNGLEdBVEQ7QUFVRCxDQVhEIiwiZmlsZSI6IjY1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCB0cmFuc2xhdGlvbiA9IHJlcXVpcmUoJy4uLy4uL3RyYW5zbGF0aW9uL2luZGV4Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwaSwgb25TdWNjZXNzLCBvbkZhaWx1cmUsIHRhcmdldCwgbWFuaWZlc3RJZCkge1xuICBhcGkub2ZmbGluZUNvbnRyb2xsZXIuZ2V0TWFuaWZlc3RJbmZvKG1hbmlmZXN0SWQsIGZ1bmN0aW9uIChlcnIsIGluZm8pIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuX0dFTkVSQUwpLCBlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvblN1Y2Nlc3Moe1xuICAgICAgICBvZmZsaW5lTGluazogYXBpLmdldE9mZmxpbmVQYXRoKG1hbmlmZXN0SWQpICsgaW5mby5tYW5pZmVzdC5uYW1lLFxuICAgICAgICBwZXJzaXN0ZW50OiBpbmZvLnBlcnNpc3RlbnRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///65\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId, full) {\n  api.offlineController.getManifestInfo(manifestId, function (err, info) {\n    if (err) {\n      onFailure(translation.getError(translation.e.manifests.INFO_FAILED, manifestId), err);\n    } else {\n      onSuccess(info);\n    }\n  }, full);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvaW5mby5qcz82ZGI1Il0sIm5hbWVzIjpbInRyYW5zbGF0aW9uIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJ0YXJnZXQiLCJtYW5pZmVzdElkIiwiZnVsbCIsIm9mZmxpbmVDb250cm9sbGVyIiwiZ2V0TWFuaWZlc3RJbmZvIiwiZXJyIiwiaW5mbyIsImdldEVycm9yIiwiZSIsIm1hbmlmZXN0cyIsIklORk9fRkFJTEVEIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFNQSxXQUFXLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFFQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUNDLE1BQXJDLEVBQTZDQyxVQUE3QyxFQUF5REMsSUFBekQsRUFBK0Q7QUFDOUVMLEtBQUcsQ0FBQ00saUJBQUosQ0FBc0JDLGVBQXRCLENBQXNDSCxVQUF0QyxFQUFrRCxVQUFVSSxHQUFWLEVBQWVDLElBQWYsRUFBcUI7QUFDckUsUUFBSUQsR0FBSixFQUFTO0FBQ1BOLGVBQVMsQ0FBQ04sV0FBVyxDQUFDYyxRQUFaLENBQXFCZCxXQUFXLENBQUNlLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsV0FBN0MsRUFBMERULFVBQTFELENBQUQsRUFBd0VJLEdBQXhFLENBQVQ7QUFDRCxLQUZELE1BRU87QUFDTFAsZUFBUyxDQUFDUSxJQUFELENBQVQ7QUFDRDtBQUNGLEdBTkQsRUFNR0osSUFOSDtBQU9ELENBUkQiLCJmaWxlIjoiNjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgdHJhbnNsYXRpb24gPSByZXF1aXJlKCcuLi8uLi90cmFuc2xhdGlvbi9pbmRleCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcGksIG9uU3VjY2Vzcywgb25GYWlsdXJlLCB0YXJnZXQsIG1hbmlmZXN0SWQsIGZ1bGwpIHtcbiAgYXBpLm9mZmxpbmVDb250cm9sbGVyLmdldE1hbmlmZXN0SW5mbyhtYW5pZmVzdElkLCBmdW5jdGlvbiAoZXJyLCBpbmZvKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUubWFuaWZlc3RzLklORk9fRkFJTEVELCBtYW5pZmVzdElkKSwgZXJyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb25TdWNjZXNzKGluZm8pO1xuICAgIH1cbiAgfSwgZnVsbCk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///66\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId) {\n  api.offlineController.getManifestInfo(manifestId, function (err, info) {\n    api.downloadsController.removePromise(manifestId).then(function () {\n      api.offlineController.removePromise(manifestId).then(function () {\n        api.subscribersController.unsubscribe(manifestId);\n        api.manifestController.removeFromCache(manifestId);\n        onSuccess(info);\n      }, function (err) {\n        onFailure(translation.getError(translation.e.downloads.REMOVING_FAILED, manifestId), err);\n      });\n    }, function (err) {\n      onFailure(translation.getError(translation.e.downloads.REMOVING_FAILED, manifestId), err);\n    });\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvcmVtb3ZlLmpzPzQzYTUiXSwibmFtZXMiOlsidHJhbnNsYXRpb24iLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsImFwaSIsIm9uU3VjY2VzcyIsIm9uRmFpbHVyZSIsInRhcmdldCIsIm1hbmlmZXN0SWQiLCJvZmZsaW5lQ29udHJvbGxlciIsImdldE1hbmlmZXN0SW5mbyIsImVyciIsImluZm8iLCJkb3dubG9hZHNDb250cm9sbGVyIiwicmVtb3ZlUHJvbWlzZSIsInRoZW4iLCJzdWJzY3JpYmVyc0NvbnRyb2xsZXIiLCJ1bnN1YnNjcmliZSIsIm1hbmlmZXN0Q29udHJvbGxlciIsInJlbW92ZUZyb21DYWNoZSIsImdldEVycm9yIiwiZSIsImRvd25sb2FkcyIsIlJFTU9WSU5HX0ZBSUxFRCJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsSUFBTUEsV0FBVyxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBM0I7O0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixVQUFVQyxHQUFWLEVBQWVDLFNBQWYsRUFBMEJDLFNBQTFCLEVBQXFDQyxNQUFyQyxFQUE2Q0MsVUFBN0MsRUFBeUQ7QUFDeEVKLEtBQUcsQ0FBQ0ssaUJBQUosQ0FBc0JDLGVBQXRCLENBQXNDRixVQUF0QyxFQUFrRCxVQUFVRyxHQUFWLEVBQWVDLElBQWYsRUFBcUI7QUFDckVSLE9BQUcsQ0FBQ1MsbUJBQUosQ0FBd0JDLGFBQXhCLENBQXNDTixVQUF0QyxFQUNLTyxJQURMLENBQ1UsWUFBWTtBQUNoQlgsU0FBRyxDQUFDSyxpQkFBSixDQUFzQkssYUFBdEIsQ0FBb0NOLFVBQXBDLEVBQ0tPLElBREwsQ0FDVSxZQUFZO0FBQ2hCWCxXQUFHLENBQUNZLHFCQUFKLENBQTBCQyxXQUExQixDQUFzQ1QsVUFBdEM7QUFDQUosV0FBRyxDQUFDYyxrQkFBSixDQUF1QkMsZUFBdkIsQ0FBdUNYLFVBQXZDO0FBQ0FILGlCQUFTLENBQUNPLElBQUQsQ0FBVDtBQUNELE9BTEwsRUFLTyxVQUFVRCxHQUFWLEVBQWU7QUFDaEJMLGlCQUFTLENBQUNOLFdBQVcsQ0FBQ29CLFFBQVosQ0FBcUJwQixXQUFXLENBQUNxQixDQUFaLENBQWNDLFNBQWQsQ0FBd0JDLGVBQTdDLEVBQThEZixVQUE5RCxDQUFELEVBQTRFRyxHQUE1RSxDQUFUO0FBQ0QsT0FQTDtBQVFELEtBVkwsRUFVTyxVQUFVQSxHQUFWLEVBQWU7QUFDaEJMLGVBQVMsQ0FBQ04sV0FBVyxDQUFDb0IsUUFBWixDQUFxQnBCLFdBQVcsQ0FBQ3FCLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsZUFBN0MsRUFBOERmLFVBQTlELENBQUQsRUFBNEVHLEdBQTVFLENBQVQ7QUFDRCxLQVpMO0FBYUQsR0FkRDtBQWVELENBaEJEIiwiZmlsZSI6IjY3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IHRyYW5zbGF0aW9uID0gcmVxdWlyZSgnLi4vLi4vdHJhbnNsYXRpb24vaW5kZXgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkKSB7XG4gIGFwaS5vZmZsaW5lQ29udHJvbGxlci5nZXRNYW5pZmVzdEluZm8obWFuaWZlc3RJZCwgZnVuY3Rpb24gKGVyciwgaW5mbykge1xuICAgIGFwaS5kb3dubG9hZHNDb250cm9sbGVyLnJlbW92ZVByb21pc2UobWFuaWZlc3RJZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGFwaS5vZmZsaW5lQ29udHJvbGxlci5yZW1vdmVQcm9taXNlKG1hbmlmZXN0SWQpXG4gICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBhcGkuc3Vic2NyaWJlcnNDb250cm9sbGVyLnVuc3Vic2NyaWJlKG1hbmlmZXN0SWQpO1xuICAgICAgICAgICAgICAgIGFwaS5tYW5pZmVzdENvbnRyb2xsZXIucmVtb3ZlRnJvbUNhY2hlKG1hbmlmZXN0SWQpO1xuICAgICAgICAgICAgICAgIG9uU3VjY2VzcyhpbmZvKTtcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5SRU1PVklOR19GQUlMRUQsIG1hbmlmZXN0SWQpLCBlcnIpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5SRU1PVklOR19GQUlMRUQsIG1hbmlmZXN0SWQpLCBlcnIpO1xuICAgICAgICB9KTtcbiAgfSk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///67\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nmodule.exports = function (api, onSuccess, onFailure) {\n  api.offlineController.getManifestsListWithInfo(function (err, manifests) {\n    if (err) {\n      onFailure(translation.getError(translation.e.downloads.REMOVING_ALL_FAILED), err);\n    } else {\n      var manifestIds = manifests.map(function (manifest) {\n        return manifest.manifestInfo.id;\n      });\n      var promises = [];\n\n      for (var i = 0, j = manifestIds.length; i < j; i++) {\n        promises.push(api.downloadsController.removePromise(manifestIds[i]));\n      }\n\n      Promise.all(promises).then(function () {\n        api.offlineController.removeAllPromise().then(function () {\n          api.subscribersController.unsubscribeAll();\n          api.manifestController.removeFromCacheAll();\n          onSuccess(manifests);\n        }, function (err) {\n          onFailure(translation.getError(translation.e.downloads.REMOVING_ALL_FAILED), err);\n        });\n      }, function (err) {\n        onFailure(translation.getError(translation.e.downloads.REMOVING_ALL_FAILED), err);\n      });\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvcmVtb3ZlLWFsbC5qcz9mNjVhIl0sIm5hbWVzIjpbInRyYW5zbGF0aW9uIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJvZmZsaW5lQ29udHJvbGxlciIsImdldE1hbmlmZXN0c0xpc3RXaXRoSW5mbyIsImVyciIsIm1hbmlmZXN0cyIsImdldEVycm9yIiwiZSIsImRvd25sb2FkcyIsIlJFTU9WSU5HX0FMTF9GQUlMRUQiLCJtYW5pZmVzdElkcyIsIm1hcCIsIm1hbmlmZXN0IiwibWFuaWZlc3RJbmZvIiwiaWQiLCJwcm9taXNlcyIsImkiLCJqIiwibGVuZ3RoIiwicHVzaCIsImRvd25sb2Fkc0NvbnRyb2xsZXIiLCJyZW1vdmVQcm9taXNlIiwiUHJvbWlzZSIsImFsbCIsInRoZW4iLCJyZW1vdmVBbGxQcm9taXNlIiwic3Vic2NyaWJlcnNDb250cm9sbGVyIiwidW5zdWJzY3JpYmVBbGwiLCJtYW5pZmVzdENvbnRyb2xsZXIiLCJyZW1vdmVGcm9tQ2FjaGVBbGwiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQU1BLFdBQVcsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQTNCOztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsR0FBVixFQUFlQyxTQUFmLEVBQTBCQyxTQUExQixFQUFxQztBQUNwREYsS0FBRyxDQUFDRyxpQkFBSixDQUFzQkMsd0JBQXRCLENBQStDLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQjtBQUN2RSxRQUFJRCxHQUFKLEVBQVM7QUFDUEgsZUFBUyxDQUFDTixXQUFXLENBQUNXLFFBQVosQ0FBcUJYLFdBQVcsQ0FBQ1ksQ0FBWixDQUFjQyxTQUFkLENBQXdCQyxtQkFBN0MsQ0FBRCxFQUFvRUwsR0FBcEUsQ0FBVDtBQUNELEtBRkQsTUFFTztBQUNMLFVBQU1NLFdBQVcsR0FBR0wsU0FBUyxDQUFDTSxHQUFWLENBQWMsVUFBVUMsUUFBVixFQUFvQjtBQUNwRCxlQUFPQSxRQUFRLENBQUNDLFlBQVQsQ0FBc0JDLEVBQTdCO0FBQ0QsT0FGbUIsQ0FBcEI7QUFHQSxVQUFJQyxRQUFRLEdBQUcsRUFBZjs7QUFDQSxXQUFLLElBQUlDLENBQUMsR0FBRyxDQUFSLEVBQVdDLENBQUMsR0FBR1AsV0FBVyxDQUFDUSxNQUFoQyxFQUF3Q0YsQ0FBQyxHQUFHQyxDQUE1QyxFQUErQ0QsQ0FBQyxFQUFoRCxFQUFvRDtBQUNsREQsZ0JBQVEsQ0FBQ0ksSUFBVCxDQUFjcEIsR0FBRyxDQUFDcUIsbUJBQUosQ0FBd0JDLGFBQXhCLENBQXNDWCxXQUFXLENBQUNNLENBQUQsQ0FBakQsQ0FBZDtBQUNEOztBQUNETSxhQUFPLENBQUNDLEdBQVIsQ0FBWVIsUUFBWixFQUNLUyxJQURMLENBQ1UsWUFBWTtBQUNoQnpCLFdBQUcsQ0FBQ0csaUJBQUosQ0FBc0J1QixnQkFBdEIsR0FDS0QsSUFETCxDQUNVLFlBQVk7QUFDaEJ6QixhQUFHLENBQUMyQixxQkFBSixDQUEwQkMsY0FBMUI7QUFDQTVCLGFBQUcsQ0FBQzZCLGtCQUFKLENBQXVCQyxrQkFBdkI7QUFDQTdCLG1CQUFTLENBQUNLLFNBQUQsQ0FBVDtBQUNELFNBTEwsRUFLTyxVQUFVRCxHQUFWLEVBQWU7QUFDaEJILG1CQUFTLENBQUNOLFdBQVcsQ0FBQ1csUUFBWixDQUFxQlgsV0FBVyxDQUFDWSxDQUFaLENBQWNDLFNBQWQsQ0FBd0JDLG1CQUE3QyxDQUFELEVBQW9FTCxHQUFwRSxDQUFUO0FBQ0QsU0FQTDtBQVFELE9BVkwsRUFVTyxVQUFVQSxHQUFWLEVBQWU7QUFDaEJILGlCQUFTLENBQUNOLFdBQVcsQ0FBQ1csUUFBWixDQUFxQlgsV0FBVyxDQUFDWSxDQUFaLENBQWNDLFNBQWQsQ0FBd0JDLG1CQUE3QyxDQUFELEVBQW9FTCxHQUFwRSxDQUFUO0FBQ0QsT0FaTDtBQWFEO0FBQ0YsR0F6QkQ7QUEwQkQsQ0EzQkQiLCJmaWxlIjoiNjguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgdHJhbnNsYXRpb24gPSByZXF1aXJlKCcuLi8uLi90cmFuc2xhdGlvbi9pbmRleCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcGksIG9uU3VjY2Vzcywgb25GYWlsdXJlKSB7XG4gIGFwaS5vZmZsaW5lQ29udHJvbGxlci5nZXRNYW5pZmVzdHNMaXN0V2l0aEluZm8oZnVuY3Rpb24gKGVyciwgbWFuaWZlc3RzKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUuZG93bmxvYWRzLlJFTU9WSU5HX0FMTF9GQUlMRUQpLCBlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYW5pZmVzdElkcyA9IG1hbmlmZXN0cy5tYXAoZnVuY3Rpb24gKG1hbmlmZXN0KSB7XG4gICAgICAgIHJldHVybiBtYW5pZmVzdC5tYW5pZmVzdEluZm8uaWQ7XG4gICAgICB9KTtcbiAgICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSBtYW5pZmVzdElkcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgcHJvbWlzZXMucHVzaChhcGkuZG93bmxvYWRzQ29udHJvbGxlci5yZW1vdmVQcm9taXNlKG1hbmlmZXN0SWRzW2ldKSk7XG4gICAgICB9XG4gICAgICBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhcGkub2ZmbGluZUNvbnRyb2xsZXIucmVtb3ZlQWxsUHJvbWlzZSgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgYXBpLnN1YnNjcmliZXJzQ29udHJvbGxlci51bnN1YnNjcmliZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgYXBpLm1hbmlmZXN0Q29udHJvbGxlci5yZW1vdmVGcm9tQ2FjaGVBbGwoKTtcbiAgICAgICAgICAgICAgICAgIG9uU3VjY2VzcyhtYW5pZmVzdHMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5SRU1PVklOR19BTExfRkFJTEVEKSwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuUkVNT1ZJTkdfQUxMX0ZBSUxFRCksIGVycik7XG4gICAgICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///68\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nvar STATUSES = __webpack_require__(8);\n\nmodule.exports = function (api, onSuccess, onFailure) {\n  api.offlineController.getManifestsListWithInfo(function (err, results) {\n    if (err) {\n      onFailure(translation.getError(translation.e.downloads.REMOVING_ALL_UNFINISHED_FAILED), err);\n    } else {\n      var promises = [];\n      var manifestIds = [];\n\n      if (!results.length) {\n        onFailure(translation.getError(translation.e.downloads.ALREADY_REMOVED_ALL_UNFINISHED));\n        return;\n      }\n\n      for (var i = 0, j = results.length; i < j; i++) {\n        var status = results[i].status;\n        var manifestId = results[i].manifestInfo.id;\n\n        if (status !== STATUSES.FINISHED) {\n          manifestIds.push(manifestId);\n          promises.push(api.downloadsController.removePromise(manifestId));\n        }\n      }\n\n      Promise.all(promises).then(function () {\n        var promises = [];\n\n        for (var _i = 0, _j = manifestIds.length; _i < _j; _i++) {\n          promises.push(api.offlineController.removePromise(manifestIds[_i]));\n        }\n\n        Promise.all(promises).then(function () {\n          api.subscribersController.unsubscribe(manifestIds);\n          api.manifestController.removeFromCache(manifestIds);\n          onSuccess(manifestIds);\n        }, function (err) {\n          onFailure(translation.getError(translation.e.downloads.REMOVING_ALL_UNFINISHED_FAILED), err);\n        });\n      }, function (err) {\n        onFailure(translation.getError(translation.e.downloads.REMOVING_ALL_UNFINISHED_FAILED), err);\n      });\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvcmVtb3ZlLWFsbC11bmZpbmlzaGVkLmpzPzc3MWQiXSwibmFtZXMiOlsidHJhbnNsYXRpb24iLCJyZXF1aXJlIiwiU1RBVFVTRVMiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBpIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwib2ZmbGluZUNvbnRyb2xsZXIiLCJnZXRNYW5pZmVzdHNMaXN0V2l0aEluZm8iLCJlcnIiLCJyZXN1bHRzIiwiZ2V0RXJyb3IiLCJlIiwiZG93bmxvYWRzIiwiUkVNT1ZJTkdfQUxMX1VORklOSVNIRURfRkFJTEVEIiwicHJvbWlzZXMiLCJtYW5pZmVzdElkcyIsImxlbmd0aCIsIkFMUkVBRFlfUkVNT1ZFRF9BTExfVU5GSU5JU0hFRCIsImkiLCJqIiwic3RhdHVzIiwibWFuaWZlc3RJZCIsIm1hbmlmZXN0SW5mbyIsImlkIiwiRklOSVNIRUQiLCJwdXNoIiwiZG93bmxvYWRzQ29udHJvbGxlciIsInJlbW92ZVByb21pc2UiLCJQcm9taXNlIiwiYWxsIiwidGhlbiIsInN1YnNjcmliZXJzQ29udHJvbGxlciIsInVuc3Vic2NyaWJlIiwibWFuaWZlc3RDb250cm9sbGVyIiwicmVtb3ZlRnJvbUNhY2hlIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxXQUFXLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNQyxRQUFRLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUF4Qjs7QUFFQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUM7QUFDcERGLEtBQUcsQ0FBQ0csaUJBQUosQ0FBc0JDLHdCQUF0QixDQUErQyxVQUFVQyxHQUFWLEVBQWVDLE9BQWYsRUFBd0I7QUFDckUsUUFBSUQsR0FBSixFQUFTO0FBQ1BILGVBQVMsQ0FBQ1AsV0FBVyxDQUFDWSxRQUFaLENBQXFCWixXQUFXLENBQUNhLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsOEJBQTdDLENBQUQsRUFBK0VMLEdBQS9FLENBQVQ7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJTSxRQUFRLEdBQUcsRUFBZjtBQUNBLFVBQUlDLFdBQVcsR0FBRyxFQUFsQjs7QUFDQSxVQUFJLENBQUNOLE9BQU8sQ0FBQ08sTUFBYixFQUFxQjtBQUNuQlgsaUJBQVMsQ0FBQ1AsV0FBVyxDQUFDWSxRQUFaLENBQXFCWixXQUFXLENBQUNhLENBQVosQ0FBY0MsU0FBZCxDQUF3QkssOEJBQTdDLENBQUQsQ0FBVDtBQUNBO0FBQ0Q7O0FBQ0QsV0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBUixFQUFXQyxDQUFDLEdBQUdWLE9BQU8sQ0FBQ08sTUFBNUIsRUFBb0NFLENBQUMsR0FBR0MsQ0FBeEMsRUFBMkNELENBQUMsRUFBNUMsRUFBZ0Q7QUFDOUMsWUFBSUUsTUFBTSxHQUFHWCxPQUFPLENBQUNTLENBQUQsQ0FBUCxDQUFXRSxNQUF4QjtBQUNBLFlBQUlDLFVBQVUsR0FBR1osT0FBTyxDQUFDUyxDQUFELENBQVAsQ0FBV0ksWUFBWCxDQUF3QkMsRUFBekM7O0FBQ0EsWUFBSUgsTUFBTSxLQUFLcEIsUUFBUSxDQUFDd0IsUUFBeEIsRUFBa0M7QUFDaENULHFCQUFXLENBQUNVLElBQVosQ0FBaUJKLFVBQWpCO0FBQ0FQLGtCQUFRLENBQUNXLElBQVQsQ0FBY3RCLEdBQUcsQ0FBQ3VCLG1CQUFKLENBQXdCQyxhQUF4QixDQUFzQ04sVUFBdEMsQ0FBZDtBQUNEO0FBQ0Y7O0FBQ0RPLGFBQU8sQ0FBQ0MsR0FBUixDQUFZZixRQUFaLEVBQ0tnQixJQURMLENBQ1UsWUFBWTtBQUNoQixZQUFJaEIsUUFBUSxHQUFHLEVBQWY7O0FBQ0EsYUFBSyxJQUFJSSxFQUFDLEdBQUcsQ0FBUixFQUFXQyxFQUFDLEdBQUdKLFdBQVcsQ0FBQ0MsTUFBaEMsRUFBd0NFLEVBQUMsR0FBR0MsRUFBNUMsRUFBK0NELEVBQUMsRUFBaEQsRUFBb0Q7QUFDbERKLGtCQUFRLENBQUNXLElBQVQsQ0FBY3RCLEdBQUcsQ0FBQ0csaUJBQUosQ0FBc0JxQixhQUF0QixDQUFvQ1osV0FBVyxDQUFDRyxFQUFELENBQS9DLENBQWQ7QUFDRDs7QUFDRFUsZUFBTyxDQUFDQyxHQUFSLENBQVlmLFFBQVosRUFDS2dCLElBREwsQ0FDVSxZQUFZO0FBQ2hCM0IsYUFBRyxDQUFDNEIscUJBQUosQ0FBMEJDLFdBQTFCLENBQXNDakIsV0FBdEM7QUFDQVosYUFBRyxDQUFDOEIsa0JBQUosQ0FBdUJDLGVBQXZCLENBQXVDbkIsV0FBdkM7QUFDQVgsbUJBQVMsQ0FBQ1csV0FBRCxDQUFUO0FBQ0QsU0FMTCxFQUtPLFVBQVVQLEdBQVYsRUFBZTtBQUNoQkgsbUJBQVMsQ0FBQ1AsV0FBVyxDQUFDWSxRQUFaLENBQXFCWixXQUFXLENBQUNhLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsOEJBQTdDLENBQUQsRUFBK0VMLEdBQS9FLENBQVQ7QUFDRCxTQVBMO0FBUUQsT0FkTCxFQWNPLFVBQVVBLEdBQVYsRUFBZTtBQUNoQkgsaUJBQVMsQ0FBQ1AsV0FBVyxDQUFDWSxRQUFaLENBQXFCWixXQUFXLENBQUNhLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsOEJBQTdDLENBQUQsRUFBK0VMLEdBQS9FLENBQVQ7QUFDRCxPQWhCTDtBQWlCRDtBQUNGLEdBcENEO0FBcUNELENBdENEIiwiZmlsZSI6IjY5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCB0cmFuc2xhdGlvbiA9IHJlcXVpcmUoJy4uLy4uL3RyYW5zbGF0aW9uL2luZGV4Jyk7XG5jb25zdCBTVEFUVVNFUyA9IHJlcXVpcmUoXCIuLi8uLi9kb3dubG9hZHMvc3RhdHVzZXNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwaSwgb25TdWNjZXNzLCBvbkZhaWx1cmUpIHtcbiAgYXBpLm9mZmxpbmVDb250cm9sbGVyLmdldE1hbmlmZXN0c0xpc3RXaXRoSW5mbyhmdW5jdGlvbiAoZXJyLCByZXN1bHRzKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUuZG93bmxvYWRzLlJFTU9WSU5HX0FMTF9VTkZJTklTSEVEX0ZBSUxFRCksIGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgICAgbGV0IG1hbmlmZXN0SWRzID0gW107XG4gICAgICBpZiAoIXJlc3VsdHMubGVuZ3RoKSB7XG4gICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5BTFJFQURZX1JFTU9WRURfQUxMX1VORklOSVNIRUQpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSByZXN1bHRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICBsZXQgc3RhdHVzID0gcmVzdWx0c1tpXS5zdGF0dXM7XG4gICAgICAgIGxldCBtYW5pZmVzdElkID0gcmVzdWx0c1tpXS5tYW5pZmVzdEluZm8uaWQ7XG4gICAgICAgIGlmIChzdGF0dXMgIT09IFNUQVRVU0VTLkZJTklTSEVEKSB7XG4gICAgICAgICAgbWFuaWZlc3RJZHMucHVzaChtYW5pZmVzdElkKTtcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKGFwaS5kb3dubG9hZHNDb250cm9sbGVyLnJlbW92ZVByb21pc2UobWFuaWZlc3RJZCkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSBtYW5pZmVzdElkcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChhcGkub2ZmbGluZUNvbnRyb2xsZXIucmVtb3ZlUHJvbWlzZShtYW5pZmVzdElkc1tpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgYXBpLnN1YnNjcmliZXJzQ29udHJvbGxlci51bnN1YnNjcmliZShtYW5pZmVzdElkcyk7XG4gICAgICAgICAgICAgICAgICBhcGkubWFuaWZlc3RDb250cm9sbGVyLnJlbW92ZUZyb21DYWNoZShtYW5pZmVzdElkcyk7XG4gICAgICAgICAgICAgICAgICBvblN1Y2Nlc3MobWFuaWZlc3RJZHMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5SRU1PVklOR19BTExfVU5GSU5JU0hFRF9GQUlMRUQpLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5SRU1PVklOR19BTExfVU5GSU5JU0hFRF9GQUlMRUQpLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///69\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar appSettings = __webpack_require__(1);\n\nvar translation = __webpack_require__(0);\n\nvar removeDir = __webpack_require__(28);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId) {\n  api.offlineController.getManifestInfo(manifestId, function (err, info) {\n    if (err) {\n      onFailure(translation.getError(translation.e.manifests.NOT_FOUND, manifestId), err);\n    } else {\n      var file = appSettings.getSettings().settingsFolder + manifestId + "/" + appSettings.getSettings().stores.PERSISTENT + ".json";\n      removeDir(file, function (err) {\n        if (err && err.code !== "ENOENT") {\n          onFailure(translation.getError(translation.e.downloads.REMOVING_PERSISTENT_FAILED, manifestId), err);\n        } else {\n          onSuccess(info);\n        }\n      });\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvcmVtb3ZlLXBlcnNpc3RlbnQuanM/Nzc1OSJdLCJuYW1lcyI6WyJhcHBTZXR0aW5ncyIsInJlcXVpcmUiLCJ0cmFuc2xhdGlvbiIsInJlbW92ZURpciIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJ0YXJnZXQiLCJtYW5pZmVzdElkIiwib2ZmbGluZUNvbnRyb2xsZXIiLCJnZXRNYW5pZmVzdEluZm8iLCJlcnIiLCJpbmZvIiwiZ2V0RXJyb3IiLCJlIiwibWFuaWZlc3RzIiwiTk9UX0ZPVU5EIiwiZmlsZSIsImdldFNldHRpbmdzIiwic2V0dGluZ3NGb2xkZXIiLCJzdG9yZXMiLCJQRVJTSVNURU5UIiwiY29kZSIsImRvd25sb2FkcyIsIlJFTU9WSU5HX1BFUlNJU1RFTlRfRkFJTEVEIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxXQUFXLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNQyxXQUFXLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNRSxTQUFTLEdBQUdGLG1CQUFPLENBQUMsRUFBRCxDQUF6Qjs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUNDLE1BQXJDLEVBQTZDQyxVQUE3QyxFQUF5RDtBQUN4RUosS0FBRyxDQUFDSyxpQkFBSixDQUFzQkMsZUFBdEIsQ0FBc0NGLFVBQXRDLEVBQWtELFVBQVVHLEdBQVYsRUFBZUMsSUFBZixFQUFxQjtBQUNyRSxRQUFJRCxHQUFKLEVBQVM7QUFDUEwsZUFBUyxDQUFDTixXQUFXLENBQUNhLFFBQVosQ0FBcUJiLFdBQVcsQ0FBQ2MsQ0FBWixDQUFjQyxTQUFkLENBQXdCQyxTQUE3QyxFQUF3RFIsVUFBeEQsQ0FBRCxFQUFzRUcsR0FBdEUsQ0FBVDtBQUNELEtBRkQsTUFFTztBQUNMLFVBQU1NLElBQUksR0FBR25CLFdBQVcsQ0FBQ29CLFdBQVosR0FBMEJDLGNBQTFCLEdBQTJDWCxVQUEzQyxHQUF3RCxHQUF4RCxHQUE4RFYsV0FBVyxDQUFDb0IsV0FBWixHQUEwQkUsTUFBMUIsQ0FBaUNDLFVBQS9GLEdBQTRHLE9BQXpIO0FBRUFwQixlQUFTLENBQUNnQixJQUFELEVBQU8sVUFBVU4sR0FBVixFQUFlO0FBQzdCLFlBQUlBLEdBQUcsSUFBSUEsR0FBRyxDQUFDVyxJQUFKLEtBQWEsUUFBeEIsRUFBa0M7QUFDaENoQixtQkFBUyxDQUFDTixXQUFXLENBQUNhLFFBQVosQ0FBcUJiLFdBQVcsQ0FBQ2MsQ0FBWixDQUFjUyxTQUFkLENBQXdCQywwQkFBN0MsRUFBeUVoQixVQUF6RSxDQUFELEVBQXVGRyxHQUF2RixDQUFUO0FBQ0QsU0FGRCxNQUVPO0FBQ0xOLG1CQUFTLENBQUNPLElBQUQsQ0FBVDtBQUNEO0FBQ0YsT0FOUSxDQUFUO0FBT0Q7QUFDRixHQWREO0FBZ0JELENBakJEIiwiZmlsZSI6IjcwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBhcHBTZXR0aW5ncyA9IHJlcXVpcmUoJy4uLy4uL2FwcC1zZXR0aW5ncycpO1xuY29uc3QgdHJhbnNsYXRpb24gPSByZXF1aXJlKCcuLi8uLi90cmFuc2xhdGlvbi9pbmRleCcpO1xuY29uc3QgcmVtb3ZlRGlyID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvcmVtb3ZlLWRpclwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkKSB7XG4gIGFwaS5vZmZsaW5lQ29udHJvbGxlci5nZXRNYW5pZmVzdEluZm8obWFuaWZlc3RJZCwgZnVuY3Rpb24gKGVyciwgaW5mbykge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5OT1RfRk9VTkQsIG1hbmlmZXN0SWQpLCBlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmaWxlID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5zZXR0aW5nc0ZvbGRlciArIG1hbmlmZXN0SWQgKyBcIi9cIiArIGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc3RvcmVzLlBFUlNJU1RFTlQgKyBcIi5qc29uXCI7XG5cbiAgICAgIHJlbW92ZURpcihmaWxlLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgIT09IFwiRU5PRU5UXCIpIHtcbiAgICAgICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuUkVNT1ZJTkdfUEVSU0lTVEVOVF9GQUlMRUQsIG1hbmlmZXN0SWQpLCBlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9uU3VjY2VzcyhpbmZvKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///70\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId, representations) {\n  api.downloadsController.resume(manifestId, representations, onSuccess, onFailure);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvcmVzdW1lLmpzPzgzODkiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsImFwaSIsIm9uU3VjY2VzcyIsIm9uRmFpbHVyZSIsInRhcmdldCIsIm1hbmlmZXN0SWQiLCJyZXByZXNlbnRhdGlvbnMiLCJkb3dubG9hZHNDb250cm9sbGVyIiwicmVzdW1lIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYkEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUNDLE1BQXJDLEVBQTZDQyxVQUE3QyxFQUF5REMsZUFBekQsRUFBMEU7QUFDekZMLEtBQUcsQ0FBQ00sbUJBQUosQ0FBd0JDLE1BQXhCLENBQStCSCxVQUEvQixFQUEyQ0MsZUFBM0MsRUFBNERKLFNBQTVELEVBQXVFQyxTQUF2RTtBQUNELENBRkQiLCJmaWxlIjoiNzEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkLCByZXByZXNlbnRhdGlvbnMpIHtcbiAgYXBpLmRvd25sb2Fkc0NvbnRyb2xsZXIucmVzdW1lKG1hbmlmZXN0SWQsIHJlcHJlc2VudGF0aW9ucywgb25TdWNjZXNzLCBvbkZhaWx1cmUpO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///71\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar appSettings = __webpack_require__(1);\n\nvar translation = __webpack_require__(0);\n\nvar FlushItem = __webpack_require__(12);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId, data) {\n  api.offlineController.getManifestInfo(manifestId, function (err) {\n    if (err) {\n      onFailure(translation.getError(translation.e.manifests.NOT_FOUND, manifestId), err);\n    } else {\n      var flushItem = new FlushItem(manifestId, appSettings.getSettings().stores.DATA, data);\n      flushItem.save().then(function () {\n        onSuccess();\n      }, function (err) {\n        onFailure(translation.getError(translation.e.downloads.SAVING_DATA_FAILED, manifestId), err);\n      });\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvc2F2ZS1kYXRhLmpzPzgwYjEiXSwibmFtZXMiOlsiYXBwU2V0dGluZ3MiLCJyZXF1aXJlIiwidHJhbnNsYXRpb24iLCJGbHVzaEl0ZW0iLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBpIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwidGFyZ2V0IiwibWFuaWZlc3RJZCIsImRhdGEiLCJvZmZsaW5lQ29udHJvbGxlciIsImdldE1hbmlmZXN0SW5mbyIsImVyciIsImdldEVycm9yIiwiZSIsIm1hbmlmZXN0cyIsIk5PVF9GT1VORCIsImZsdXNoSXRlbSIsImdldFNldHRpbmdzIiwic3RvcmVzIiwiREFUQSIsInNhdmUiLCJ0aGVuIiwiZG93bmxvYWRzIiwiU0FWSU5HX0RBVEFfRkFJTEVEIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxXQUFXLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNQyxXQUFXLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNRSxTQUFTLEdBQUdGLG1CQUFPLENBQUMsRUFBRCxDQUF6Qjs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUNDLE1BQXJDLEVBQTZDQyxVQUE3QyxFQUF5REMsSUFBekQsRUFBK0Q7QUFDOUVMLEtBQUcsQ0FBQ00saUJBQUosQ0FBc0JDLGVBQXRCLENBQXNDSCxVQUF0QyxFQUFrRCxVQUFVSSxHQUFWLEVBQWU7QUFDL0QsUUFBSUEsR0FBSixFQUFTO0FBQ1BOLGVBQVMsQ0FBQ04sV0FBVyxDQUFDYSxRQUFaLENBQXFCYixXQUFXLENBQUNjLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsU0FBN0MsRUFBd0RSLFVBQXhELENBQUQsRUFBc0VJLEdBQXRFLENBQVQ7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFNSyxTQUFTLEdBQUcsSUFBSWhCLFNBQUosQ0FBY08sVUFBZCxFQUEwQlYsV0FBVyxDQUFDb0IsV0FBWixHQUEwQkMsTUFBMUIsQ0FBaUNDLElBQTNELEVBQWlFWCxJQUFqRSxDQUFsQjtBQUNBUSxlQUFTLENBQUNJLElBQVYsR0FDR0MsSUFESCxDQUNRLFlBQVk7QUFDaEJqQixpQkFBUztBQUNWLE9BSEgsRUFHSyxVQUFVTyxHQUFWLEVBQWU7QUFDaEJOLGlCQUFTLENBQUNOLFdBQVcsQ0FBQ2EsUUFBWixDQUFxQmIsV0FBVyxDQUFDYyxDQUFaLENBQWNTLFNBQWQsQ0FBd0JDLGtCQUE3QyxFQUFpRWhCLFVBQWpFLENBQUQsRUFBK0VJLEdBQS9FLENBQVQ7QUFDRCxPQUxIO0FBTUQ7QUFDRixHQVpEO0FBY0QsQ0FmRCIsImZpbGUiOiI3Mi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgYXBwU2V0dGluZ3MgPSByZXF1aXJlKCcuLi8uLi9hcHAtc2V0dGluZ3MnKTtcbmNvbnN0IHRyYW5zbGF0aW9uID0gcmVxdWlyZSgnLi4vLi4vdHJhbnNsYXRpb24vaW5kZXgnKTtcbmNvbnN0IEZsdXNoSXRlbSA9IHJlcXVpcmUoXCIuLi8uLi9kb3dubG9hZHMvZmx1c2gtaXRlbVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkLCBkYXRhKSB7XG4gIGFwaS5vZmZsaW5lQ29udHJvbGxlci5nZXRNYW5pZmVzdEluZm8obWFuaWZlc3RJZCwgZnVuY3Rpb24gKGVycikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5OT1RfRk9VTkQsIG1hbmlmZXN0SWQpLCBlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmbHVzaEl0ZW0gPSBuZXcgRmx1c2hJdGVtKG1hbmlmZXN0SWQsIGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc3RvcmVzLkRBVEEsIGRhdGEpO1xuICAgICAgZmx1c2hJdGVtLnNhdmUoKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgb25TdWNjZXNzKCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuU0FWSU5HX0RBVEFfRkFJTEVELCBtYW5pZmVzdElkKSwgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///72\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar fieldsPicker = __webpack_require__(11);\n\nmodule.exports = function LinkSave(attr) {\n  fieldsPicker(this, ["id", "contentType", "bandwidth", "remoteUrl", "stats", "localUrl"], attr);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvbWFuaWZlc3QvanNvbi9saW5rLXNhdmUuanM/MWEwOCJdLCJuYW1lcyI6WyJmaWVsZHNQaWNrZXIiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsIkxpbmtTYXZlIiwiYXR0ciJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsWUFBWSxHQUFHQyxtQkFBTyxDQUFDLEVBQUQsQ0FBNUI7O0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixTQUFTQyxRQUFULENBQW1CQyxJQUFuQixFQUF5QjtBQUN4Q0wsY0FBWSxDQUFDLElBQUQsRUFBTyxDQUNqQixJQURpQixFQUVqQixhQUZpQixFQUdqQixXQUhpQixFQUlqQixXQUppQixFQUtqQixPQUxpQixFQU1qQixVQU5pQixDQUFQLEVBT1RLLElBUFMsQ0FBWjtBQVFELENBVEQiLCJmaWxlIjoiNzMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IGZpZWxkc1BpY2tlciA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL2ZpZWxkcy1waWNrZXJcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gTGlua1NhdmUgKGF0dHIpIHtcbiAgZmllbGRzUGlja2VyKHRoaXMsIFtcbiAgICBcImlkXCIsXG4gICAgXCJjb250ZW50VHlwZVwiLFxuICAgIFwiYmFuZHdpZHRoXCIsXG4gICAgXCJyZW1vdGVVcmxcIixcbiAgICBcInN0YXRzXCIsXG4gICAgXCJsb2NhbFVybFwiXG4gIF0sIGF0dHIpO1xufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///73\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar appSettings = __webpack_require__(1);\n\nvar translation = __webpack_require__(0);\n\nvar FlushItem = __webpack_require__(12);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId, persistent) {\n  api.offlineController.getManifestInfo(manifestId, function (err) {\n    if (err) {\n      onFailure(translation.getError(translation.e.manifests.NOT_FOUND, manifestId), err);\n    } else {\n      var flushItem = new FlushItem(manifestId, appSettings.getSettings().stores.PERSISTENT, persistent);\n      flushItem.save().then(function () {\n        onSuccess();\n      }, function (err) {\n        onFailure(translation.getError(translation.e.downloads.SAVING_PERSISTENT_FAILED, manifestId), err);\n      });\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvc2F2ZS1wZXJzaXN0ZW50LmpzPzcyNTEiXSwibmFtZXMiOlsiYXBwU2V0dGluZ3MiLCJyZXF1aXJlIiwidHJhbnNsYXRpb24iLCJGbHVzaEl0ZW0iLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBpIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwidGFyZ2V0IiwibWFuaWZlc3RJZCIsInBlcnNpc3RlbnQiLCJvZmZsaW5lQ29udHJvbGxlciIsImdldE1hbmlmZXN0SW5mbyIsImVyciIsImdldEVycm9yIiwiZSIsIm1hbmlmZXN0cyIsIk5PVF9GT1VORCIsImZsdXNoSXRlbSIsImdldFNldHRpbmdzIiwic3RvcmVzIiwiUEVSU0lTVEVOVCIsInNhdmUiLCJ0aGVuIiwiZG93bmxvYWRzIiwiU0FWSU5HX1BFUlNJU1RFTlRfRkFJTEVEIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFDYixJQUFNQSxXQUFXLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNQyxXQUFXLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNRSxTQUFTLEdBQUdGLG1CQUFPLENBQUMsRUFBRCxDQUF6Qjs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUNDLE1BQXJDLEVBQTZDQyxVQUE3QyxFQUF5REMsVUFBekQsRUFBcUU7QUFDcEZMLEtBQUcsQ0FBQ00saUJBQUosQ0FBc0JDLGVBQXRCLENBQXNDSCxVQUF0QyxFQUFrRCxVQUFVSSxHQUFWLEVBQWU7QUFDL0QsUUFBSUEsR0FBSixFQUFTO0FBQ1BOLGVBQVMsQ0FBQ04sV0FBVyxDQUFDYSxRQUFaLENBQXFCYixXQUFXLENBQUNjLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsU0FBN0MsRUFBd0RSLFVBQXhELENBQUQsRUFBc0VJLEdBQXRFLENBQVQ7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFNSyxTQUFTLEdBQUcsSUFBSWhCLFNBQUosQ0FBY08sVUFBZCxFQUEwQlYsV0FBVyxDQUFDb0IsV0FBWixHQUEwQkMsTUFBMUIsQ0FBaUNDLFVBQTNELEVBQXVFWCxVQUF2RSxDQUFsQjtBQUNBUSxlQUFTLENBQUNJLElBQVYsR0FDS0MsSUFETCxDQUNVLFlBQVk7QUFDaEJqQixpQkFBUztBQUNWLE9BSEwsRUFHTyxVQUFVTyxHQUFWLEVBQWU7QUFDaEJOLGlCQUFTLENBQUNOLFdBQVcsQ0FBQ2EsUUFBWixDQUFxQmIsV0FBVyxDQUFDYyxDQUFaLENBQWNTLFNBQWQsQ0FBd0JDLHdCQUE3QyxFQUF1RWhCLFVBQXZFLENBQUQsRUFBcUZJLEdBQXJGLENBQVQ7QUFDRCxPQUxMO0FBTUQ7QUFDRixHQVpEO0FBY0QsQ0FmRCIsImZpbGUiOiI3NC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgYXBwU2V0dGluZ3MgPSByZXF1aXJlKCcuLi8uLi9hcHAtc2V0dGluZ3MnKTtcbmNvbnN0IHRyYW5zbGF0aW9uID0gcmVxdWlyZSgnLi4vLi4vdHJhbnNsYXRpb24vaW5kZXgnKTtcbmNvbnN0IEZsdXNoSXRlbSA9IHJlcXVpcmUoXCIuLi8uLi9kb3dubG9hZHMvZmx1c2gtaXRlbVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkLCBwZXJzaXN0ZW50KSB7XG4gIGFwaS5vZmZsaW5lQ29udHJvbGxlci5nZXRNYW5pZmVzdEluZm8obWFuaWZlc3RJZCwgZnVuY3Rpb24gKGVycikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5OT1RfRk9VTkQsIG1hbmlmZXN0SWQpLCBlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmbHVzaEl0ZW0gPSBuZXcgRmx1c2hJdGVtKG1hbmlmZXN0SWQsIGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc3RvcmVzLlBFUlNJU1RFTlQsIHBlcnNpc3RlbnQpO1xuICAgICAgZmx1c2hJdGVtLnNhdmUoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5TQVZJTkdfUEVSU0lTVEVOVF9GQUlMRUQsIG1hbmlmZXN0SWQpLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///74\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nvar canCreateManifest = __webpack_require__(27);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId, representations, downloadFolder) {\n  var manifest = api.manifestController.getManifestById(manifestId);\n\n  if (!manifest) {\n    onFailure(translation.getError(translation.e.manifests.NOT_FOUND, manifestId));\n    return;\n  }\n\n  function start() {\n    api.downloadsController.storage.getItem(manifestId).then(function (result) {\n      if (result) {\n        onFailure(translation.getError(translation.e.downloads.ALREADY_STARTED, manifestId));\n      } else {\n        api.downloadsController.start(manifestId, representations, downloadFolder, onSuccess, function (err) {\n          onFailure(translation.getError(translation.e.downloads._GENERAL), err);\n        });\n      }\n    }, function (err) {\n      onFailure(translation.getError(translation.e.downloads._GENERAL), err);\n    });\n  }\n\n  canCreateManifest(manifestId, downloadFolder).then(function () {\n    start();\n  }, function (errors) {\n    errors = errors || [];\n    var movieFolderError = errors[1];\n\n    if (errors.length) {\n      if (movieFolderError) {\n        // if movie folder has been already created the we can't start as it might be either different folder\n        // or simply the resume should be used\n        onFailure(translation.getError(translation.e.manifests.FOLDER_ALREADY_EXISTS, manifestId));\n        return;\n      }\n    } // if manifest exists physically on drive that means something is wrong and can't start the manifest\n    // the manifest is saved in method start so this cannot be overwritten here\n\n\n    api.offlineController.getManifestDataFile(manifestId, function (data) {\n      if (data) {\n        onFailure(translation.getError(translation.e.manifests.FOLDER_ALREADY_EXISTS, manifestId));\n      } else {\n        start();\n      }\n    });\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvc3RhcnQuanM/MmQ3YyJdLCJuYW1lcyI6WyJ0cmFuc2xhdGlvbiIsInJlcXVpcmUiLCJjYW5DcmVhdGVNYW5pZmVzdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJ0YXJnZXQiLCJtYW5pZmVzdElkIiwicmVwcmVzZW50YXRpb25zIiwiZG93bmxvYWRGb2xkZXIiLCJtYW5pZmVzdCIsIm1hbmlmZXN0Q29udHJvbGxlciIsImdldE1hbmlmZXN0QnlJZCIsImdldEVycm9yIiwiZSIsIm1hbmlmZXN0cyIsIk5PVF9GT1VORCIsInN0YXJ0IiwiZG93bmxvYWRzQ29udHJvbGxlciIsInN0b3JhZ2UiLCJnZXRJdGVtIiwidGhlbiIsInJlc3VsdCIsImRvd25sb2FkcyIsIkFMUkVBRFlfU1RBUlRFRCIsImVyciIsIl9HRU5FUkFMIiwiZXJyb3JzIiwibW92aWVGb2xkZXJFcnJvciIsImxlbmd0aCIsIkZPTERFUl9BTFJFQURZX0VYSVNUUyIsIm9mZmxpbmVDb250cm9sbGVyIiwiZ2V0TWFuaWZlc3REYXRhRmlsZSIsImRhdGEiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQU1BLFdBQVcsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQTNCOztBQUNBLElBQU1DLGlCQUFpQixHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBakM7O0FBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixVQUFVQyxHQUFWLEVBQWVDLFNBQWYsRUFBMEJDLFNBQTFCLEVBQXFDQyxNQUFyQyxFQUE2Q0MsVUFBN0MsRUFBeURDLGVBQXpELEVBQTBFQyxjQUExRSxFQUEwRjtBQUN6RyxNQUFNQyxRQUFRLEdBQUdQLEdBQUcsQ0FBQ1Esa0JBQUosQ0FBdUJDLGVBQXZCLENBQXVDTCxVQUF2QyxDQUFqQjs7QUFDQSxNQUFJLENBQUNHLFFBQUwsRUFBZTtBQUNiTCxhQUFTLENBQUNQLFdBQVcsQ0FBQ2UsUUFBWixDQUFxQmYsV0FBVyxDQUFDZ0IsQ0FBWixDQUFjQyxTQUFkLENBQXdCQyxTQUE3QyxFQUF3RFQsVUFBeEQsQ0FBRCxDQUFUO0FBQ0E7QUFDRDs7QUFFRCxXQUFTVSxLQUFULEdBQWtCO0FBQ2hCZCxPQUFHLENBQUNlLG1CQUFKLENBQXdCQyxPQUF4QixDQUFnQ0MsT0FBaEMsQ0FBd0NiLFVBQXhDLEVBQW9EYyxJQUFwRCxDQUF5RCxVQUFVQyxNQUFWLEVBQWtCO0FBQ3pFLFVBQUlBLE1BQUosRUFBWTtBQUNWakIsaUJBQVMsQ0FBQ1AsV0FBVyxDQUFDZSxRQUFaLENBQXFCZixXQUFXLENBQUNnQixDQUFaLENBQWNTLFNBQWQsQ0FBd0JDLGVBQTdDLEVBQThEakIsVUFBOUQsQ0FBRCxDQUFUO0FBQ0QsT0FGRCxNQUVPO0FBQ0xKLFdBQUcsQ0FBQ2UsbUJBQUosQ0FBd0JELEtBQXhCLENBQThCVixVQUE5QixFQUEwQ0MsZUFBMUMsRUFBMkRDLGNBQTNELEVBQTJFTCxTQUEzRSxFQUFzRixVQUFVcUIsR0FBVixFQUFlO0FBQ25HcEIsbUJBQVMsQ0FBQ1AsV0FBVyxDQUFDZSxRQUFaLENBQXFCZixXQUFXLENBQUNnQixDQUFaLENBQWNTLFNBQWQsQ0FBd0JHLFFBQTdDLENBQUQsRUFBeURELEdBQXpELENBQVQ7QUFDRCxTQUZEO0FBR0Q7QUFDRixLQVJELEVBUUcsVUFBVUEsR0FBVixFQUFlO0FBQ2hCcEIsZUFBUyxDQUFDUCxXQUFXLENBQUNlLFFBQVosQ0FBcUJmLFdBQVcsQ0FBQ2dCLENBQVosQ0FBY1MsU0FBZCxDQUF3QkcsUUFBN0MsQ0FBRCxFQUF5REQsR0FBekQsQ0FBVDtBQUNELEtBVkQ7QUFXRDs7QUFFRHpCLG1CQUFpQixDQUFDTyxVQUFELEVBQWFFLGNBQWIsQ0FBakIsQ0FBOENZLElBQTlDLENBQW1ELFlBQVk7QUFDN0RKLFNBQUs7QUFDTixHQUZELEVBRUcsVUFBVVUsTUFBVixFQUFrQjtBQUNuQkEsVUFBTSxHQUFHQSxNQUFNLElBQUksRUFBbkI7QUFDQSxRQUFJQyxnQkFBZ0IsR0FBR0QsTUFBTSxDQUFDLENBQUQsQ0FBN0I7O0FBQ0EsUUFBSUEsTUFBTSxDQUFDRSxNQUFYLEVBQW1CO0FBQ2pCLFVBQUlELGdCQUFKLEVBQXNCO0FBQ3BCO0FBQ0E7QUFDQXZCLGlCQUFTLENBQUNQLFdBQVcsQ0FBQ2UsUUFBWixDQUFxQmYsV0FBVyxDQUFDZ0IsQ0FBWixDQUFjQyxTQUFkLENBQXdCZSxxQkFBN0MsRUFBb0V2QixVQUFwRSxDQUFELENBQVQ7QUFDQTtBQUNEO0FBQ0YsS0FWa0IsQ0FXbkI7QUFDQTs7O0FBQ0FKLE9BQUcsQ0FBQzRCLGlCQUFKLENBQXNCQyxtQkFBdEIsQ0FBMEN6QixVQUExQyxFQUFzRCxVQUFVMEIsSUFBVixFQUFnQjtBQUNwRSxVQUFJQSxJQUFKLEVBQVU7QUFDUjVCLGlCQUFTLENBQUNQLFdBQVcsQ0FBQ2UsUUFBWixDQUFxQmYsV0FBVyxDQUFDZ0IsQ0FBWixDQUFjQyxTQUFkLENBQXdCZSxxQkFBN0MsRUFBb0V2QixVQUFwRSxDQUFELENBQVQ7QUFDRCxPQUZELE1BRU87QUFDTFUsYUFBSztBQUNOO0FBQ0YsS0FORDtBQU9ELEdBdEJEO0FBd0JELENBN0NEIiwiZmlsZSI6Ijc1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IHRyYW5zbGF0aW9uID0gcmVxdWlyZShcIi4uLy4uL3RyYW5zbGF0aW9uL2luZGV4XCIpO1xuY29uc3QgY2FuQ3JlYXRlTWFuaWZlc3QgPSByZXF1aXJlKFwiLi4vLi4vdXRpbC9jYW4tY3JlYXRlLW1hbmlmZXN0XCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcGksIG9uU3VjY2Vzcywgb25GYWlsdXJlLCB0YXJnZXQsIG1hbmlmZXN0SWQsIHJlcHJlc2VudGF0aW9ucywgZG93bmxvYWRGb2xkZXIpIHtcbiAgY29uc3QgbWFuaWZlc3QgPSBhcGkubWFuaWZlc3RDb250cm9sbGVyLmdldE1hbmlmZXN0QnlJZChtYW5pZmVzdElkKTtcbiAgaWYgKCFtYW5pZmVzdCkge1xuICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5OT1RfRk9VTkQsIG1hbmlmZXN0SWQpKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydCAoKSB7XG4gICAgYXBpLmRvd25sb2Fkc0NvbnRyb2xsZXIuc3RvcmFnZS5nZXRJdGVtKG1hbmlmZXN0SWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuQUxSRUFEWV9TVEFSVEVELCBtYW5pZmVzdElkKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcGkuZG93bmxvYWRzQ29udHJvbGxlci5zdGFydChtYW5pZmVzdElkLCByZXByZXNlbnRhdGlvbnMsIGRvd25sb2FkRm9sZGVyLCBvblN1Y2Nlc3MsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuX0dFTkVSQUwpLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuX0dFTkVSQUwpLCBlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgY2FuQ3JlYXRlTWFuaWZlc3QobWFuaWZlc3RJZCwgZG93bmxvYWRGb2xkZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgIHN0YXJ0KCk7XG4gIH0sIGZ1bmN0aW9uIChlcnJvcnMpIHtcbiAgICBlcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgdmFyIG1vdmllRm9sZGVyRXJyb3IgPSBlcnJvcnNbMV07XG4gICAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgIGlmIChtb3ZpZUZvbGRlckVycm9yKSB7XG4gICAgICAgIC8vIGlmIG1vdmllIGZvbGRlciBoYXMgYmVlbiBhbHJlYWR5IGNyZWF0ZWQgdGhlIHdlIGNhbid0IHN0YXJ0IGFzIGl0IG1pZ2h0IGJlIGVpdGhlciBkaWZmZXJlbnQgZm9sZGVyXG4gICAgICAgIC8vIG9yIHNpbXBseSB0aGUgcmVzdW1lIHNob3VsZCBiZSB1c2VkXG4gICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5GT0xERVJfQUxSRUFEWV9FWElTVFMsIG1hbmlmZXN0SWQpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBpZiBtYW5pZmVzdCBleGlzdHMgcGh5c2ljYWxseSBvbiBkcml2ZSB0aGF0IG1lYW5zIHNvbWV0aGluZyBpcyB3cm9uZyBhbmQgY2FuJ3Qgc3RhcnQgdGhlIG1hbmlmZXN0XG4gICAgLy8gdGhlIG1hbmlmZXN0IGlzIHNhdmVkIGluIG1ldGhvZCBzdGFydCBzbyB0aGlzIGNhbm5vdCBiZSBvdmVyd3JpdHRlbiBoZXJlXG4gICAgYXBpLm9mZmxpbmVDb250cm9sbGVyLmdldE1hbmlmZXN0RGF0YUZpbGUobWFuaWZlc3RJZCwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5GT0xERVJfQUxSRUFEWV9FWElTVFMsIG1hbmlmZXN0SWQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///75\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId) {\n  api.downloadsController.stop(manifestId, onSuccess, onFailure);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvc3RvcC5qcz8zNDY0Il0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJ0YXJnZXQiLCJtYW5pZmVzdElkIiwiZG93bmxvYWRzQ29udHJvbGxlciIsInN0b3AiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViQSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsR0FBVixFQUFlQyxTQUFmLEVBQTBCQyxTQUExQixFQUFxQ0MsTUFBckMsRUFBNkNDLFVBQTdDLEVBQXlEO0FBQ3hFSixLQUFHLENBQUNLLG1CQUFKLENBQXdCQyxJQUF4QixDQUE2QkYsVUFBN0IsRUFBeUNILFNBQXpDLEVBQW9EQyxTQUFwRDtBQUNELENBRkQiLCJmaWxlIjoiNzYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkKSB7XG4gIGFwaS5kb3dubG9hZHNDb250cm9sbGVyLnN0b3AobWFuaWZlc3RJZCwgb25TdWNjZXNzLCBvbkZhaWx1cmUpO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///76\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nvar STATUSES = __webpack_require__(8);\n\nmodule.exports = function (api, onSuccess, onFailure) {\n  api.offlineController.getManifestsListWithInfo(function (err, results) {\n    if (err) {\n      onFailure(translation.getError(translation.e.downloads.STOPPING_ALL_FAILED), err);\n    } else {\n      var promises = [];\n      var manifestIds = [];\n\n      for (var i = 0, j = results.length; i < j; i++) {\n        var status = results[i].status;\n        var manifestId = results[i].manifestInfo.id;\n\n        if (status !== STATUSES.FINISHED) {\n          manifestIds.push(manifestId);\n          promises.push(api.downloadsController.stopPromise(manifestId, true));\n        }\n      }\n\n      if (manifestIds.length > 0) {\n        Promise.all(promises).then(function () {\n          onSuccess(manifestIds);\n        }, function (err) {\n          onFailure(translation.getError(translation.e.downloads.STOPPING_ALL_FAILED), err);\n        });\n      } else {\n        onFailure(translation.getError(translation.e.downloads.ALREADY_STOPPED_ALL));\n      }\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvc3RvcC1hbGwuanM/NzcwYyJdLCJuYW1lcyI6WyJ0cmFuc2xhdGlvbiIsInJlcXVpcmUiLCJTVEFUVVNFUyIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJvZmZsaW5lQ29udHJvbGxlciIsImdldE1hbmlmZXN0c0xpc3RXaXRoSW5mbyIsImVyciIsInJlc3VsdHMiLCJnZXRFcnJvciIsImUiLCJkb3dubG9hZHMiLCJTVE9QUElOR19BTExfRkFJTEVEIiwicHJvbWlzZXMiLCJtYW5pZmVzdElkcyIsImkiLCJqIiwibGVuZ3RoIiwic3RhdHVzIiwibWFuaWZlc3RJZCIsIm1hbmlmZXN0SW5mbyIsImlkIiwiRklOSVNIRUQiLCJwdXNoIiwiZG93bmxvYWRzQ29udHJvbGxlciIsInN0b3BQcm9taXNlIiwiUHJvbWlzZSIsImFsbCIsInRoZW4iLCJBTFJFQURZX1NUT1BQRURfQUxMIl0sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFNQSxXQUFXLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNQyxRQUFRLEdBQUdELG1CQUFPLENBQUMsQ0FBRCxDQUF4Qjs7QUFFQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZUMsU0FBZixFQUEwQkMsU0FBMUIsRUFBcUM7QUFDcERGLEtBQUcsQ0FBQ0csaUJBQUosQ0FBc0JDLHdCQUF0QixDQUErQyxVQUFVQyxHQUFWLEVBQWVDLE9BQWYsRUFBd0I7QUFDckUsUUFBSUQsR0FBSixFQUFTO0FBQ1BILGVBQVMsQ0FBQ1AsV0FBVyxDQUFDWSxRQUFaLENBQXFCWixXQUFXLENBQUNhLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsbUJBQTdDLENBQUQsRUFBb0VMLEdBQXBFLENBQVQ7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJTSxRQUFRLEdBQUcsRUFBZjtBQUNBLFVBQUlDLFdBQVcsR0FBRyxFQUFsQjs7QUFDQSxXQUFLLElBQUlDLENBQUMsR0FBRyxDQUFSLEVBQVdDLENBQUMsR0FBR1IsT0FBTyxDQUFDUyxNQUE1QixFQUFvQ0YsQ0FBQyxHQUFHQyxDQUF4QyxFQUEyQ0QsQ0FBQyxFQUE1QyxFQUFnRDtBQUM5QyxZQUFJRyxNQUFNLEdBQUdWLE9BQU8sQ0FBQ08sQ0FBRCxDQUFQLENBQVdHLE1BQXhCO0FBQ0EsWUFBSUMsVUFBVSxHQUFHWCxPQUFPLENBQUNPLENBQUQsQ0FBUCxDQUFXSyxZQUFYLENBQXdCQyxFQUF6Qzs7QUFDQSxZQUFJSCxNQUFNLEtBQUtuQixRQUFRLENBQUN1QixRQUF4QixFQUFrQztBQUNoQ1IscUJBQVcsQ0FBQ1MsSUFBWixDQUFpQkosVUFBakI7QUFDQU4sa0JBQVEsQ0FBQ1UsSUFBVCxDQUFjckIsR0FBRyxDQUFDc0IsbUJBQUosQ0FBd0JDLFdBQXhCLENBQW9DTixVQUFwQyxFQUFnRCxJQUFoRCxDQUFkO0FBQ0Q7QUFDRjs7QUFDRCxVQUFJTCxXQUFXLENBQUNHLE1BQVosR0FBcUIsQ0FBekIsRUFBNEI7QUFDMUJTLGVBQU8sQ0FBQ0MsR0FBUixDQUFZZCxRQUFaLEVBQ0tlLElBREwsQ0FDVSxZQUFZO0FBQ2hCekIsbUJBQVMsQ0FBQ1csV0FBRCxDQUFUO0FBQ0QsU0FITCxFQUdPLFVBQVVQLEdBQVYsRUFBZTtBQUNoQkgsbUJBQVMsQ0FBQ1AsV0FBVyxDQUFDWSxRQUFaLENBQXFCWixXQUFXLENBQUNhLENBQVosQ0FBY0MsU0FBZCxDQUF3QkMsbUJBQTdDLENBQUQsRUFBb0VMLEdBQXBFLENBQVQ7QUFDRCxTQUxMO0FBTUQsT0FQRCxNQU9PO0FBQ0xILGlCQUFTLENBQUNQLFdBQVcsQ0FBQ1ksUUFBWixDQUFxQlosV0FBVyxDQUFDYSxDQUFaLENBQWNDLFNBQWQsQ0FBd0JrQixtQkFBN0MsQ0FBRCxDQUFUO0FBQ0Q7QUFDRjtBQUNGLEdBekJEO0FBMEJELENBM0JEIiwiZmlsZSI6Ijc3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IHRyYW5zbGF0aW9uID0gcmVxdWlyZSgnLi4vLi4vdHJhbnNsYXRpb24vaW5kZXgnKTtcbmNvbnN0IFNUQVRVU0VTID0gcmVxdWlyZShcIi4uLy4uL2Rvd25sb2Fkcy9zdGF0dXNlc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSkge1xuICBhcGkub2ZmbGluZUNvbnRyb2xsZXIuZ2V0TWFuaWZlc3RzTGlzdFdpdGhJbmZvKGZ1bmN0aW9uIChlcnIsIHJlc3VsdHMpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuU1RPUFBJTkdfQUxMX0ZBSUxFRCksIGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgICAgbGV0IG1hbmlmZXN0SWRzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMCwgaiA9IHJlc3VsdHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgIGxldCBzdGF0dXMgPSByZXN1bHRzW2ldLnN0YXR1cztcbiAgICAgICAgbGV0IG1hbmlmZXN0SWQgPSByZXN1bHRzW2ldLm1hbmlmZXN0SW5mby5pZDtcbiAgICAgICAgaWYgKHN0YXR1cyAhPT0gU1RBVFVTRVMuRklOSVNIRUQpIHtcbiAgICAgICAgICBtYW5pZmVzdElkcy5wdXNoKG1hbmlmZXN0SWQpO1xuICAgICAgICAgIHByb21pc2VzLnB1c2goYXBpLmRvd25sb2Fkc0NvbnRyb2xsZXIuc3RvcFByb21pc2UobWFuaWZlc3RJZCwgdHJ1ZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWFuaWZlc3RJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgb25TdWNjZXNzKG1hbmlmZXN0SWRzKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUuZG93bmxvYWRzLlNUT1BQSU5HX0FMTF9GQUlMRUQpLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuQUxSRUFEWV9TVE9QUEVEX0FMTCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///77\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nvar Subscriber = __webpack_require__(79);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestIds, timeout) {\n  if (typeof manifestIds === 'string') {\n    subscribeSingle(api, onSuccess, onFailure, target, manifestIds, timeout);\n  } else {\n    subscribeMany(api, onSuccess, onFailure, target, manifestIds, timeout);\n  }\n};\n\nfunction subscribeMany(api, onSuccess, onFailure, target, manifestIds, timeout) {\n  var subscriber1, subscriber2, subscribersId;\n  var manifestId = manifestIds.sort().join(',');\n  subscribersId = []; // callbackOnProgress\n\n  subscriber1 = new Subscriber(function () {\n    return api.downloadsController.downloadStats.getStats(manifestIds);\n  }, api.processSubscriber, target, manifestId, timeout);\n  subscribersId.push(api.subscribersController.addSubscriber(subscriber1)); // callbackOnFinish\n\n  subscriber2 = new Subscriber(function () {\n    var result = true;\n\n    for (var i = 0, j = manifestIds.length; i < j; i++) {\n      result = result && api.downloadsController.isDownloadFinishedAndSynced(manifestIds[i]);\n    }\n\n    return result;\n  }, api.processSubscriber, target, manifestId, timeout, true);\n  subscriber2.onFinish(function (callback) {\n    subscriber1.remove();\n    var items = [];\n\n    for (var i = 0, j = manifestIds.length; i < j; i++) {\n      items.push(api.offlineController.getManifestInfoPromise(manifestIds[i]));\n    }\n\n    Promise.all(items).then(function (results) {\n      callback(null, results);\n    }, function (err) {\n      callback(err);\n    });\n  });\n  subscribersId.push(api.subscribersController.addSubscriber(subscriber2));\n  onSuccess(null, subscribersId);\n}\n\nfunction subscribeSingle(api, onSuccess, onFailure, target, manifestId, timeout) {\n  var manifest = api.manifestController.getManifestById(manifestId);\n  var subscriber1, subscriber2, subscribersId;\n\n  if (manifest) {\n    subscribersId = []; // callbackOnProgress\n\n    subscriber1 = new Subscriber(function () {\n      return api.downloadsController.downloadStats.getStats(manifestId);\n    }, api.processSubscriber, target, manifestId, timeout);\n    subscribersId.push(api.subscribersController.addSubscriber(subscriber1)); // callbackOnFinish\n\n    subscriber2 = new Subscriber(function () {\n      return api.downloadsController.isDownloadFinishedAndSynced(manifestId);\n    }, api.processSubscriber, target, manifestId, timeout, true);\n    subscriber2.onFinish(function (callback) {\n      subscriber1.remove();\n      api.offlineController.getManifestInfo(manifestId, function (err, result) {\n        callback(err, result);\n      });\n    });\n    subscribersId.push(api.subscribersController.addSubscriber(subscriber2));\n    onSuccess(manifest.getJsonInfo(), subscribersId);\n  } else {\n    onFailure(translation.getError(translation.e.manifests.NOT_FOUND, manifestId));\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvc3Vic2NyaWJlLmpzP2IwMzMiXSwibmFtZXMiOlsidHJhbnNsYXRpb24iLCJyZXF1aXJlIiwiU3Vic2NyaWJlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJ0YXJnZXQiLCJtYW5pZmVzdElkcyIsInRpbWVvdXQiLCJzdWJzY3JpYmVTaW5nbGUiLCJzdWJzY3JpYmVNYW55Iiwic3Vic2NyaWJlcjEiLCJzdWJzY3JpYmVyMiIsInN1YnNjcmliZXJzSWQiLCJtYW5pZmVzdElkIiwic29ydCIsImpvaW4iLCJkb3dubG9hZHNDb250cm9sbGVyIiwiZG93bmxvYWRTdGF0cyIsImdldFN0YXRzIiwicHJvY2Vzc1N1YnNjcmliZXIiLCJwdXNoIiwic3Vic2NyaWJlcnNDb250cm9sbGVyIiwiYWRkU3Vic2NyaWJlciIsInJlc3VsdCIsImkiLCJqIiwibGVuZ3RoIiwiaXNEb3dubG9hZEZpbmlzaGVkQW5kU3luY2VkIiwib25GaW5pc2giLCJjYWxsYmFjayIsInJlbW92ZSIsIml0ZW1zIiwib2ZmbGluZUNvbnRyb2xsZXIiLCJnZXRNYW5pZmVzdEluZm9Qcm9taXNlIiwiUHJvbWlzZSIsImFsbCIsInRoZW4iLCJyZXN1bHRzIiwiZXJyIiwibWFuaWZlc3QiLCJtYW5pZmVzdENvbnRyb2xsZXIiLCJnZXRNYW5pZmVzdEJ5SWQiLCJnZXRNYW5pZmVzdEluZm8iLCJnZXRKc29uSW5mbyIsImdldEVycm9yIiwiZSIsIm1hbmlmZXN0cyIsIk5PVF9GT1VORCJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsSUFBTUEsV0FBVyxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBM0I7O0FBQ0EsSUFBTUMsVUFBVSxHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBMUI7O0FBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixVQUFVQyxHQUFWLEVBQWVDLFNBQWYsRUFBMEJDLFNB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QzdCLFVBQXRDLEVBQWtELFVBQVV5QixHQUFWLEVBQWVmLE1BQWYsRUFBdUI7QUFDdkVNLGdCQUFRLENBQUNTLEdBQUQsRUFBTWYsTUFBTixDQUFSO0FBQ0QsT0FGRDtBQUdELEtBTEQ7QUFNQVgsaUJBQWEsQ0FBQ1EsSUFBZCxDQUFtQmxCLEdBQUcsQ0FBQ21CLHFCQUFKLENBQTBCQyxhQUExQixDQUF3Q1gsV0FBeEMsQ0FBbkI7QUFFQVIsYUFBUyxDQUFDb0MsUUFBUSxDQUFDSSxXQUFULEVBQUQsRUFBeUIvQixhQUF6QixDQUFUO0FBQ0QsR0F2QkQsTUF1Qk87QUFDTFIsYUFBUyxDQUFDUCxXQUFXLENBQUMrQyxRQUFaLENBQXFCL0MsV0FBVyxDQUFDZ0QsQ0FBWixDQUFjQyxTQUFkLENBQXdCQyxTQUE3QyxFQUF3RGxDLFVBQXhELENBQUQsQ0FBVDtBQUNEO0FBQ0YiLCJmaWxlIjoiNzguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgdHJhbnNsYXRpb24gPSByZXF1aXJlKCcuLi8uLi90cmFuc2xhdGlvbi9pbmRleCcpO1xuY29uc3QgU3Vic2NyaWJlciA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL3N1YnNjcmliZXJcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwaSwgb25TdWNjZXNzLCBvbkZhaWx1cmUsIHRhcmdldCwgbWFuaWZlc3RJZHMsIHRpbWVvdXQpIHtcbiAgaWYgKHR5cGVvZiBtYW5pZmVzdElkcyA9PT0gJ3N0cmluZycpIHtcbiAgICBzdWJzY3JpYmVTaW5nbGUoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkcywgdGltZW91dCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlTWFueShhcGksIG9uU3VjY2Vzcywgb25GYWlsdXJlLCB0YXJnZXQsIG1hbmlmZXN0SWRzLCB0aW1lb3V0KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gc3Vic2NyaWJlTWFueSAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkcywgdGltZW91dCkge1xuICBsZXQgc3Vic2NyaWJlcjEsIHN1YnNjcmliZXIyLCBzdWJzY3JpYmVyc0lkO1xuICBjb25zdCBtYW5pZmVzdElkID0gbWFuaWZlc3RJZHMuc29ydCgpLmpvaW4oJywnKTtcblxuICBzdWJzY3JpYmVyc0lkID0gW107XG4gIC8vIGNhbGxiYWNrT25Qcm9ncmVzc1xuICBzdWJzY3JpYmVyMSA9IG5ldyBTdWJzY3JpYmVyKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYXBpLmRvd25sb2Fkc0NvbnRyb2xsZXIuZG93bmxvYWRTdGF0cy5nZXRTdGF0cyhtYW5pZmVzdElkcyk7XG4gIH0sIGFwaS5wcm9jZXNzU3Vic2NyaWJlciwgdGFyZ2V0LCBtYW5pZmVzdElkLCB0aW1lb3V0KTtcbiAgc3Vic2NyaWJlcnNJZC5wdXNoKGFwaS5zdWJzY3JpYmVyc0NvbnRyb2xsZXIuYWRkU3Vic2NyaWJlcihzdWJzY3JpYmVyMSkpO1xuXG4gIC8vIGNhbGxiYWNrT25GaW5pc2hcbiAgc3Vic2NyaWJlcjIgPSBuZXcgU3Vic2NyaWJlcihmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHJlc3VsdCA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBtYW5pZmVzdElkcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdCAmJiBhcGkuZG93bmxvYWRzQ29udHJvbGxlci5pc0Rvd25sb2FkRmluaXNoZWRBbmRTeW5jZWQobWFuaWZlc3RJZHNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCBhcGkucHJvY2Vzc1N1YnNjcmliZXIsIHRhcmdldCwgbWFuaWZlc3RJZCwgdGltZW91dCwgdHJ1ZSk7XG5cbiAgc3Vic2NyaWJlcjIub25GaW5pc2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgc3Vic2NyaWJlcjEucmVtb3ZlKCk7XG4gICAgbGV0IGl0ZW1zID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBtYW5pZmVzdElkcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGl0ZW1zLnB1c2goYXBpLm9mZmxpbmVDb250cm9sbGVyLmdldE1hbmlmZXN0SW5mb1Byb21pc2UobWFuaWZlc3RJZHNbaV0pKTtcbiAgICB9XG4gICAgUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgfSk7XG4gIH0pO1xuICBzdWJzY3JpYmVyc0lkLnB1c2goYXBpLnN1YnNjcmliZXJzQ29udHJvbGxlci5hZGRTdWJzY3JpYmVyKHN1YnNjcmliZXIyKSk7XG5cbiAgb25TdWNjZXNzKG51bGwsIHN1YnNjcmliZXJzSWQpO1xufVxuXG5mdW5jdGlvbiBzdWJzY3JpYmVTaW5nbGUgKGFwaSwgb25TdWNjZXNzLCBvbkZhaWx1cmUsIHRhcmdldCwgbWFuaWZlc3RJZCwgdGltZW91dCkge1xuICBjb25zdCBtYW5pZmVzdCA9IGFwaS5tYW5pZmVzdENvbnRyb2xsZXIuZ2V0TWFuaWZlc3RCeUlkKG1hbmlmZXN0SWQpO1xuICBsZXQgc3Vic2NyaWJlcjEsIHN1YnNjcmliZXIyLCBzdWJzY3JpYmVyc0lkO1xuICBpZiAobWFuaWZlc3QpIHtcbiAgICBzdWJzY3JpYmVyc0lkID0gW107XG5cbiAgICAvLyBjYWxsYmFja09uUHJvZ3Jlc3NcbiAgICBzdWJzY3JpYmVyMSA9IG5ldyBTdWJzY3JpYmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhcGkuZG93bmxvYWRzQ29udHJvbGxlci5kb3dubG9hZFN0YXRzLmdldFN0YXRzKG1hbmlmZXN0SWQpO1xuICAgIH0sIGFwaS5wcm9jZXNzU3Vic2NyaWJlciwgdGFyZ2V0LCBtYW5pZmVzdElkLCB0aW1lb3V0KTtcbiAgICBzdWJzY3JpYmVyc0lkLnB1c2goYXBpLnN1YnNjcmliZXJzQ29udHJvbGxlci5hZGRTdWJzY3JpYmVyKHN1YnNjcmliZXIxKSk7XG5cbiAgICAvLyBjYWxsYmFja09uRmluaXNoXG4gICAgc3Vic2NyaWJlcjIgPSBuZXcgU3Vic2NyaWJlcihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYXBpLmRvd25sb2Fkc0NvbnRyb2xsZXIuaXNEb3dubG9hZEZpbmlzaGVkQW5kU3luY2VkKG1hbmlmZXN0SWQpO1xuICAgIH0sIGFwaS5wcm9jZXNzU3Vic2NyaWJlciwgdGFyZ2V0LCBtYW5pZmVzdElkLCB0aW1lb3V0LCB0cnVlKTtcblxuICAgIHN1YnNjcmliZXIyLm9uRmluaXNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgc3Vic2NyaWJlcjEucmVtb3ZlKCk7XG4gICAgICBhcGkub2ZmbGluZUNvbnRyb2xsZXIuZ2V0TWFuaWZlc3RJbmZvKG1hbmlmZXN0SWQsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBzdWJzY3JpYmVyc0lkLnB1c2goYXBpLnN1YnNjcmliZXJzQ29udHJvbGxlci5hZGRTdWJzY3JpYmVyKHN1YnNjcmliZXIyKSk7XG5cbiAgICBvblN1Y2Nlc3MobWFuaWZlc3QuZ2V0SnNvbkluZm8oKSwgc3Vic2NyaWJlcnNJZCk7XG4gIH0gZWxzZSB7XG4gICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUubWFuaWZlc3RzLk5PVF9GT1VORCwgbWFuaWZlc3RJZCkpO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///78\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar Snowflake = __webpack_require__(9);\n\nvar _ = __webpack_require__(5);\n/**\n *\n * @param {function} process - function to get the result from\n * @param {function} callback - callback to be invoked when "process" function returns anything\n * @param {number} target - window target id\n * @param {string} manifestId - manifest identifier\n * @param {number} time - time in miliseconds how often the callback should be invoked\n * @param {boolean} onceOnly - if set to true the callback will be invoked once only and subsriber will be removed\n * @constructor\n */\n\n\nfunction Subscriber(process, callback, target, manifestId, time, onceOnly) {\n  this._process = process;\n  this._callback = callback;\n  this._manifestId = manifestId;\n  this._id = String(Snowflake.SnowflakeId.getUUID());\n  this._onceOnly = onceOnly;\n  this._target = target;\n\n  this.onInterval = function () {\n    var result = this._process();\n\n    var self = this;\n\n    if (result) {\n      if (this._onceOnly) {\n        this.remove();\n\n        if (typeof this._callbackOnFinish === "function") {\n          this._callbackOnFinish(function (err, result) {\n            self._callback(self._id, err, result, self._target, true);\n          });\n        } else {\n          this._callback(this._id, null, result, self._target);\n        }\n      } else {\n        this._callback(this._id, null, result, self._target);\n      }\n    }\n  };\n\n  _.bindAll(this, "onInterval");\n\n  this._intervalTimer = setInterval(this.onInterval, time);\n}\n/**\n *\n * @returns {string} - subscriber identifier\n */\n\n\nSubscriber.prototype.getId = function () {\n  return this._id;\n};\n/**\n *\n * @returns {string} - manifest identifier\n */\n\n\nSubscriber.prototype.getManifestId = function () {\n  return this._manifestId;\n};\n/**\n * @param {function} callback - function to be invoked when "process" function returns anything\n * and when "onceOnly" is set to true\n * @returns {void}\n */\n\n\nSubscriber.prototype.onFinish = function (callback) {\n  this._callbackOnFinish = callback;\n};\n/**\n * @returns {void}\n */\n\n\nSubscriber.prototype.remove = function () {\n  clearInterval(this._intervalTimer);\n};\n\nmodule.exports = Subscriber;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9zdWJzY3JpYmVyLmpzPzI1MzciXSwibmFtZXMiOlsiU25vd2ZsYWtlIiwicmVxdWlyZSIsIl8iLCJTdWJzY3JpYmVyIiwicHJvY2VzcyIsImNhbGxiYWNrIiwidGFyZ2V0IiwibWFuaWZlc3RJZCIsInRpbWUiLCJvbmNlT25seSIsIl9wcm9jZXNzIiwiX2NhbGxiYWNrIiwiX21hbmlmZXN0SWQiLCJfaWQiLCJTdHJpbmciLCJTbm93Zmxha2VJZCIsImdldFVVSUQiLCJfb25jZU9ubHkiLCJfdGFyZ2V0Iiwib25JbnRlcnZhbCIsInJlc3VsdCIsInNlbGYiLCJyZW1vdmUiLCJfY2FsbGJhY2tPbkZpbmlzaCIsImVyciIsImJpbmRBbGwiLCJfaW50ZXJ2YWxUaW1lciIsInNldEludGVydmFsIiwicHJvdG90eXBlIiwiZ2V0SWQiLCJnZXRNYW5pZmVzdElkIiwib25GaW5pc2giLCJjbGVhckludGVydmFsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsU0FBUyxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBekI7O0FBQ0EsSUFBTUMsQ0FBQyxHQUFHRCxtQkFBTyxDQUFDLENBQUQsQ0FBakI7QUFFQTs7Ozs7Ozs7Ozs7O0FBVUEsU0FBU0UsVUFBVCxDQUFxQkMsT0FBckIsRUFBOEJDLFFBQTlCLEVBQXdDQyxNQUF4QyxFQUFnREMsVUFBaEQsRUFBNERDLElBQTVELEVBQWtFQyxRQUFsRSxFQUE0RTtBQUMxRSxPQUFLQyxRQUFMLEdBQWdCTixPQUFoQjtBQUNBLE9BQUtPLFNBQUwsR0FBaUJOLFFBQWpCO0FBQ0EsT0FBS08sV0FBTCxHQUFtQkwsVUFBbkI7QUFDQSxPQUFLTSxHQUFMLEdBQVdDLE1BQU0sQ0FBQ2QsU0FBUyxDQUFDZSxXQUFWLENBQXNCQyxPQUF0QixFQUFELENBQWpCO0FBQ0EsT0FBS0MsU0FBTCxHQUFpQlIsUUFBakI7QUFDQSxPQUFLUyxPQUFMLEdBQWVaLE1BQWY7O0FBQ0EsT0FBS2EsVUFBTCxHQUFrQixZQUFZO0FBQzVCLFFBQU1DLE1BQU0sR0FBRyxLQUFLVixRQUFMLEVBQWY7O0FBQ0EsUUFBTVcsSUFBSSxHQUFHLElBQWI7O0FBQ0EsUUFBSUQsTUFBSixFQUFZO0FBQ1YsVUFBSSxLQUFLSCxTQUFULEVBQW9CO0FBQ2xCLGFBQUtLLE1BQUw7O0FBQ0EsWUFBSSxPQUFPLEtBQUtDLGlCQUFaLEtBQWtDLFVBQXRDLEVBQWtEO0FBQ2hELGVBQUtBLGlCQUFMLENBQXVCLFVBQVVDLEdBQVYsRUFBZUosTUFBZixFQUF1QjtBQUM1Q0MsZ0JBQUksQ0FBQ1YsU0FBTCxDQUFlVSxJQUFJLENBQUNSLEdBQXBCLEVBQXlCVyxHQUF6QixFQUE4QkosTUFBOUIsRUFBc0NDLElBQUksQ0FBQ0gsT0FBM0MsRUFBb0QsSUFBcEQ7QUFDRCxXQUZEO0FBR0QsU0FKRCxNQUlPO0FBQ0wsZUFBS1AsU0FBTCxDQUFlLEtBQUtFLEdBQXBCLEVBQXlCLElBQXpCLEVBQStCTyxNQUEvQixFQUF1Q0MsSUFBSSxDQUFDSCxPQUE1QztBQUNEO0FBQ0YsT0FURCxNQVNPO0FBQ0wsYUFBS1AsU0FBTCxDQUFlLEtBQUtFLEdBQXBCLEVBQXlCLElBQXpCLEVBQStCTyxNQUEvQixFQUF1Q0MsSUFBSSxDQUFDSCxPQUE1QztBQUNEO0FBQ0Y7QUFDRixHQWpCRDs7QUFrQkFoQixHQUFDLENBQUN1QixPQUFGLENBQVUsSUFBVixFQUFnQixZQUFoQjs7QUFDQSxPQUFLQyxjQUFMLEdBQXNCQyxXQUFXLENBQUMsS0FBS1IsVUFBTixFQUFrQlgsSUFBbEIsQ0FBakM7QUFDRDtBQUVEOzs7Ozs7QUFJQUwsVUFBVSxDQUFDeUIsU0FBWCxDQUFxQkMsS0FBckIsR0FBNkIsWUFBWTtBQUN2QyxTQUFPLEtBQUtoQixHQUFaO0FBQ0QsQ0FGRDtBQUlBOzs7Ozs7QUFJQVYsVUFBVSxDQUFDeUIsU0FBWCxDQUFxQkUsYUFBckIsR0FBcUMsWUFBWTtBQUMvQyxTQUFPLEtBQUtsQixXQUFaO0FBQ0QsQ0FGRDtBQUlBOzs7Ozs7O0FBS0FULFVBQVUsQ0FBQ3lCLFNBQVgsQ0FBcUJHLFFBQXJCLEdBQWdDLFVBQVUxQixRQUFWLEVBQW9CO0FBQ2xELE9BQUtrQixpQkFBTCxHQUF5QmxCLFFBQXpCO0FBQ0QsQ0FGRDtBQUlBOzs7OztBQUdBRixVQUFVLENBQUN5QixTQUFYLENBQXFCTixNQUFyQixHQUE4QixZQUFZO0FBQ3hDVSxlQUFhLENBQUMsS0FBS04sY0FBTixDQUFiO0FBQ0QsQ0FGRDs7QUFJQU8sTUFBTSxDQUFDQyxPQUFQLEdBQWlCL0IsVUFBakIiLCJmaWxlIjoiNzkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IFNub3dmbGFrZSA9IHJlcXVpcmUoXCIuL3Nub3dmbGFrZS1pZFwiKTtcbmNvbnN0IF8gPSByZXF1aXJlKFwidW5kZXJzY29yZVwiKTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gcHJvY2VzcyAtIGZ1bmN0aW9uIHRvIGdldCB0aGUgcmVzdWx0IGZyb21cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIFwicHJvY2Vzc1wiIGZ1bmN0aW9uIHJldHVybnMgYW55dGhpbmdcbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXQgLSB3aW5kb3cgdGFyZ2V0IGlkXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIC0gdGltZSBpbiBtaWxpc2Vjb25kcyBob3cgb2Z0ZW4gdGhlIGNhbGxiYWNrIHNob3VsZCBiZSBpbnZva2VkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uY2VPbmx5IC0gaWYgc2V0IHRvIHRydWUgdGhlIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCBvbmNlIG9ubHkgYW5kIHN1YnNyaWJlciB3aWxsIGJlIHJlbW92ZWRcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBTdWJzY3JpYmVyIChwcm9jZXNzLCBjYWxsYmFjaywgdGFyZ2V0LCBtYW5pZmVzdElkLCB0aW1lLCBvbmNlT25seSkge1xuICB0aGlzLl9wcm9jZXNzID0gcHJvY2VzcztcbiAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgdGhpcy5fbWFuaWZlc3RJZCA9IG1hbmlmZXN0SWQ7XG4gIHRoaXMuX2lkID0gU3RyaW5nKFNub3dmbGFrZS5Tbm93Zmxha2VJZC5nZXRVVUlEKCkpO1xuICB0aGlzLl9vbmNlT25seSA9IG9uY2VPbmx5O1xuICB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7XG4gIHRoaXMub25JbnRlcnZhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wcm9jZXNzKCk7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgaWYgKHRoaXMuX29uY2VPbmx5KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY2FsbGJhY2tPbkZpbmlzaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgdGhpcy5fY2FsbGJhY2tPbkZpbmlzaChmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrKHNlbGYuX2lkLCBlcnIsIHJlc3VsdCwgc2VsZi5fdGFyZ2V0LCB0cnVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9jYWxsYmFjayh0aGlzLl9pZCwgbnVsbCwgcmVzdWx0LCBzZWxmLl90YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jYWxsYmFjayh0aGlzLl9pZCwgbnVsbCwgcmVzdWx0LCBzZWxmLl90YXJnZXQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgXy5iaW5kQWxsKHRoaXMsIFwib25JbnRlcnZhbFwiKTtcbiAgdGhpcy5faW50ZXJ2YWxUaW1lciA9IHNldEludGVydmFsKHRoaXMub25JbnRlcnZhbCwgdGltZSk7XG59XG5cbi8qKlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gc3Vic2NyaWJlciBpZGVudGlmaWVyXG4gKi9cblN1YnNjcmliZXIucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5faWQ7XG59O1xuXG4vKipcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqL1xuU3Vic2NyaWJlci5wcm90b3R5cGUuZ2V0TWFuaWZlc3RJZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuX21hbmlmZXN0SWQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gZnVuY3Rpb24gdG8gYmUgaW52b2tlZCB3aGVuIFwicHJvY2Vzc1wiIGZ1bmN0aW9uIHJldHVybnMgYW55dGhpbmdcbiAqIGFuZCB3aGVuIFwib25jZU9ubHlcIiBpcyBzZXQgdG8gdHJ1ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblN1YnNjcmliZXIucHJvdG90eXBlLm9uRmluaXNoID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIHRoaXMuX2NhbGxiYWNrT25GaW5pc2ggPSBjYWxsYmFjaztcbn07XG5cbi8qKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblN1YnNjcmliZXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbFRpbWVyKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3Vic2NyaWJlcjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///79\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar translation = __webpack_require__(0);\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestIds) {\n  if (typeof manifestIds === 'string') {\n    unsubscribeSingle(api, onSuccess, onFailure, target, manifestIds);\n  } else {\n    api.subscribersController.unsubscribe(manifestIds);\n    api.subscribersController.unsubscribe(manifestIds.sort().join(','));\n  }\n};\n\nfunction unsubscribeSingle(api, onSuccess, onFailure, target, manifestId) {\n  var manifest = api.manifestController.getManifestById(manifestId);\n\n  if (manifest) {\n    api.subscribersController.unsubscribe(manifestId);\n    onSuccess();\n  } else {\n    onFailure(translation.getError(translation.e.manifests.NOT_FOUND, manifestId));\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvdW5zdWJzY3JpYmUuanM/MmQ4MSJdLCJuYW1lcyI6WyJ0cmFuc2xhdGlvbiIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBpIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwidGFyZ2V0IiwibWFuaWZlc3RJZHMiLCJ1bnN1YnNjcmliZVNpbmdsZSIsInN1YnNjcmliZXJzQ29udHJvbGxlciIsInVuc3Vic2NyaWJlIiwic29ydCIsImpvaW4iLCJtYW5pZmVzdElkIiwibWFuaWZlc3QiLCJtYW5pZmVzdENvbnRyb2xsZXIiLCJnZXRNYW5pZmVzdEJ5SWQiLCJnZXRFcnJvciIsImUiLCJtYW5pZmVzdHMiLCJOT1RfRk9VTkQiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQU1BLFdBQVcsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQTNCOztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsR0FBVixFQUFlQyxTQUFmLEVBQTBCQyxTQUExQixFQUFxQ0MsTUFBckMsRUFBNkNDLFdBQTdDLEVBQTBEO0FBQ3pFLE1BQUksT0FBT0EsV0FBUCxLQUF1QixRQUEzQixFQUFxQztBQUNuQ0MscUJBQWlCLENBQUNMLEdBQUQsRUFBTUMsU0FBTixFQUFpQkMsU0FBakIsRUFBNEJDLE1BQTVCLEVBQW9DQyxXQUFwQyxDQUFqQjtBQUNELEdBRkQsTUFFTztBQUNMSixPQUFHLENBQUNNLHFCQUFKLENBQTBCQyxXQUExQixDQUFzQ0gsV0FBdEM7QUFDQUosT0FBRyxDQUFDTSxxQkFBSixDQUEwQkMsV0FBMUIsQ0FBc0NILFdBQVcsQ0FBQ0ksSUFBWixHQUFtQkMsSUFBbkIsQ0FBd0IsR0FBeEIsQ0FBdEM7QUFDRDtBQUNGLENBUEQ7O0FBU0EsU0FBU0osaUJBQVQsQ0FBNEJMLEdBQTVCLEVBQWlDQyxTQUFqQyxFQUE0Q0MsU0FBNUMsRUFBdURDLE1BQXZELEVBQStETyxVQUEvRCxFQUEyRTtBQUN6RSxNQUFNQyxRQUFRLEdBQUdYLEdBQUcsQ0FBQ1ksa0JBQUosQ0FBdUJDLGVBQXZCLENBQXVDSCxVQUF2QyxDQUFqQjs7QUFDQSxNQUFJQyxRQUFKLEVBQWM7QUFDWlgsT0FBRyxDQUFDTSxxQkFBSixDQUEwQkMsV0FBMUIsQ0FBc0NHLFVBQXRDO0FBQ0FULGFBQVM7QUFDVixHQUhELE1BR087QUFDTEMsYUFBUyxDQUFDTixXQUFXLENBQUNrQixRQUFaLENBQXFCbEIsV0FBVyxDQUFDbUIsQ0FBWixDQUFjQyxTQUFkLENBQXdCQyxTQUE3QyxFQUF3RFAsVUFBeEQsQ0FBRCxDQUFUO0FBQ0Q7QUFDRiIsImZpbGUiOiI4MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCB0cmFuc2xhdGlvbiA9IHJlcXVpcmUoJy4uLy4uL3RyYW5zbGF0aW9uL2luZGV4Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwaSwgb25TdWNjZXNzLCBvbkZhaWx1cmUsIHRhcmdldCwgbWFuaWZlc3RJZHMpIHtcbiAgaWYgKHR5cGVvZiBtYW5pZmVzdElkcyA9PT0gJ3N0cmluZycpIHtcbiAgICB1bnN1YnNjcmliZVNpbmdsZShhcGksIG9uU3VjY2Vzcywgb25GYWlsdXJlLCB0YXJnZXQsIG1hbmlmZXN0SWRzKTtcbiAgfSBlbHNlIHtcbiAgICBhcGkuc3Vic2NyaWJlcnNDb250cm9sbGVyLnVuc3Vic2NyaWJlKG1hbmlmZXN0SWRzKTtcbiAgICBhcGkuc3Vic2NyaWJlcnNDb250cm9sbGVyLnVuc3Vic2NyaWJlKG1hbmlmZXN0SWRzLnNvcnQoKS5qb2luKCcsJykpO1xuICB9XG59O1xuXG5mdW5jdGlvbiB1bnN1YnNjcmliZVNpbmdsZSAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkKSB7XG4gIGNvbnN0IG1hbmlmZXN0ID0gYXBpLm1hbmlmZXN0Q29udHJvbGxlci5nZXRNYW5pZmVzdEJ5SWQobWFuaWZlc3RJZCk7XG4gIGlmIChtYW5pZmVzdCkge1xuICAgIGFwaS5zdWJzY3JpYmVyc0NvbnRyb2xsZXIudW5zdWJzY3JpYmUobWFuaWZlc3RJZCk7XG4gICAgb25TdWNjZXNzKCk7XG4gIH0gZWxzZSB7XG4gICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUubWFuaWZlc3RzLk5PVF9GT1VORCwgbWFuaWZlc3RJZCkpO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///80\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = function (api, onSuccess, onFailure, target, manifestId, downloadFolder) {\n  api.downloadsController.updateDownloadFolder(manifestId, downloadFolder, onSuccess, onFailure);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9kb3dubG9hZHMvdXBkYXRlLWRvd25sb2FkLWZvbGRlci5qcz8zMjNmIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJhcGkiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJ0YXJnZXQiLCJtYW5pZmVzdElkIiwiZG93bmxvYWRGb2xkZXIiLCJkb3dubG9hZHNDb250cm9sbGVyIiwidXBkYXRlRG93bmxvYWRGb2xkZXIiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViQSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsR0FBVixFQUFlQyxTQUFmLEVBQTBCQyxTQUExQixFQUFxQ0MsTUFBckMsRUFBNkNDLFVBQTdDLEVBQXlEQyxjQUF6RCxFQUF5RTtBQUN4RkwsS0FBRyxDQUFDTSxtQkFBSixDQUF3QkMsb0JBQXhCLENBQTZDSCxVQUE3QyxFQUF5REMsY0FBekQsRUFBeUVKLFNBQXpFLEVBQW9GQyxTQUFwRjtBQUNELENBRkQiLCJmaWxlIjoiODEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBpLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdGFyZ2V0LCBtYW5pZmVzdElkLCBkb3dubG9hZEZvbGRlcikge1xuICBhcGkuZG93bmxvYWRzQ29udHJvbGxlci51cGRhdGVEb3dubG9hZEZvbGRlcihtYW5pZmVzdElkLCBkb3dubG9hZEZvbGRlciwgb25TdWNjZXNzLCBvbkZhaWx1cmUpO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///81\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = function (api, onSuccess, onFailure, target, subscribers) {\n  api.subscribersController.removeSubscribersById(subscribers);\n  onSuccess();\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvYmUtbWV0aG9kcy9yZW1vdmUtc3Vic2NyaWJlcnMuanM/NTMzYiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiYXBpIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwidGFyZ2V0Iiwic3Vic2NyaWJlcnMiLCJzdWJzY3JpYmVyc0NvbnRyb2xsZXIiLCJyZW1vdmVTdWJzY3JpYmVyc0J5SWQiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViQSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsR0FBVixFQUFlQyxTQUFmLEVBQTBCQyxTQUExQixFQUFxQ0MsTUFBckMsRUFBNkNDLFdBQTdDLEVBQTBEO0FBQ3pFSixLQUFHLENBQUNLLHFCQUFKLENBQTBCQyxxQkFBMUIsQ0FBZ0RGLFdBQWhEO0FBQ0FILFdBQVM7QUFDVixDQUhEIiwiZmlsZSI6IjgyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwaSwgb25TdWNjZXNzLCBvbkZhaWx1cmUsIHRhcmdldCwgc3Vic2NyaWJlcnMpIHtcbiAgYXBpLnN1YnNjcmliZXJzQ29udHJvbGxlci5yZW1vdmVTdWJzY3JpYmVyc0J5SWQoc3Vic2NyaWJlcnMpO1xuICBvblN1Y2Nlc3MoKTtcbn07XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///82\n")},function(module,exports,__webpack_require__){"use strict";eval('/*eslint no-console: ["error", { allow: ["warn", "error", "info"] }] */\n\n\nvar _ = __webpack_require__(5);\n\nvar mkdirpPromise = __webpack_require__(84);\n\nvar appSettings = __webpack_require__(1);\n\nvar translation = __webpack_require__(0);\n\nvar Download = __webpack_require__(85);\n\nvar DownloadsStorageController = __webpack_require__(90);\n\nvar downloadUtil = __webpack_require__(94);\n\nvar DownloadStats = __webpack_require__(95);\n\nvar STATUSES = __webpack_require__(8);\n\nvar CODES = __webpack_require__(6);\n\nvar constants = __webpack_require__(19);\n\nvar utilUrl = __webpack_require__(34);\n\nvar path = __webpack_require__(4);\n\nvar ReadItem = __webpack_require__(35);\n\nvar FlushItem = __webpack_require__(12);\n\nvar downloadFileUtil = __webpack_require__(7);\n/**\n *\n * @param {ManifestController} manifestController - existing manifest controller\n * @param {OfflineController} offlineController - existing offline controller\n * @constructor\n */\n\n\nfunction DownloadsController(manifestController, offlineController) {\n  this._manifestsDownloadOrder = [];\n  this._manifestsDownloadOrderObj = {};\n  this._manifestController = manifestController;\n  this._offlineController = offlineController;\n  this.storage = new DownloadsStorageController();\n\n  this._offlineController.setDownloadStorage(this.storage);\n\n  this._names = {\n    downloadInProgress: "downloadInProgress",\n    options: "options",\n    maxDownloadInProgress: "maxDownloadInProgress"\n  };\n  this._STATS_TIME_GENERATION = 1000;\n  this.downloadStats = new DownloadStats(this.storage);\n\n  _.bindAll(this, "_onDownloadEnd", "_onDownloadError", "isDownloadFinished");\n}\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Array} videoLinks - video links to be downloaded\n * @param {Array} audioLinks - audio links to be downloaded\n * @param {Array} textLinks - text links to be downloaded\n * @returns {void}\n * @private\n */\n\n\nDownloadsController.prototype._addDownloads = function (manifestId, videoLinks, audioLinks, textLinks) {\n  var working = true;\n\n  this._prepareStartOptions(manifestId, videoLinks, audioLinks, textLinks);\n\n  while (working) {\n    var ratioAudioVideo = videoLinks.length ? Math.round(audioLinks.length / videoLinks.length) : 1;\n    var ratioTextVideo = videoLinks.length ? Math.round(textLinks.length / videoLinks.length) : 1;\n\n    this._addNextItemToQueue(manifestId, textLinks, ratioTextVideo);\n\n    this._addNextItemToQueue(manifestId, audioLinks, ratioAudioVideo);\n\n    this._addNextItemToQueue(manifestId, videoLinks);\n\n    working = !!(textLinks.length || videoLinks.length || audioLinks.length);\n  }\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Array} links - array of links to be downloaded\n * @param {number} nbItems - the rnumber of items to add to the queue\n * @private\n * @returns {void}\n */\n\n\nDownloadsController.prototype._addNextItemToQueue = function (manifestId, links, nbItems) {\n  var link;\n\n  if (!nbItems) {\n    nbItems = 1;\n  }\n\n  if (links.length) {\n    while (nbItems > 0) {\n      link = links.shift();\n      link.manifestId = manifestId;\n      this.storage.left.push(manifestId, link);\n      nbItems--;\n    }\n  }\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {boolean} asFirst - to force to download manifest without wiating in queue\n * @returns {boolean} - status if operation was successfully\n * @private\n */\n\n\nDownloadsController.prototype._downloadOrderAddManifest = function (manifestId, asFirst) {\n  if (!this._downloadOrderManifestExists(manifestId)) {\n    this._manifestsDownloadOrderObj[manifestId] = true;\n\n    if (asFirst) {\n      this._manifestsDownloadOrder.unshift(manifestId);\n    } else {\n      this._manifestsDownloadOrder.push(manifestId);\n    }\n\n    return true;\n  } else {\n    return false;\n  }\n};\n/**\n *\n * @param {number} nextManifestPositionInArray - index number from array _manifestsDownloadOrder\n * @returns {manifestId} - manifest identifier\n * @private\n */\n\n\nDownloadsController.prototype._downloadOrderGetManifestId = function (nextManifestPositionInArray) {\n  return this._manifestsDownloadOrder[nextManifestPositionInArray];\n};\n/**\n *\n * @param {manifestId} manifestId -  manifest identifier\n * @returns {number} index number from array _manifestsDownloadOrder\n * @private\n */\n\n\nDownloadsController.prototype._indexOfManifest = function (manifestId) {\n  return this._manifestsDownloadOrder.indexOf(manifestId);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {*} - if manifest has been already added to the queue\n * @private\n */\n\n\nDownloadsController.prototype._downloadOrderManifestExists = function (manifestId) {\n  return this._manifestsDownloadOrderObj[manifestId];\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {boolean} - status if manifest has been removed from queue\n * @private\n */\n\n\nDownloadsController.prototype._downloadOrderRemoveManifest = function (manifestId) {\n  var found = false,\n      i,\n      j;\n  delete this._manifestsDownloadOrderObj[manifestId];\n\n  for (i = 0, j = this._manifestsDownloadOrder.length; i < j; i++) {\n    if (this._manifestsDownloadOrder[i] === manifestId) {\n      this._manifestsDownloadOrder.splice(i, 1);\n\n      found = true;\n      break;\n    }\n  }\n\n  return found;\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {function} onSuccess - callback to be invoked when download finishes with success\n * @param {function} onFailure - callback to be invoked when download failed\n * @private\n * @returns {void}\n */\n\n\nDownloadsController.prototype._finish = function (manifestId, onSuccess, onFailure) {\n  this.downloadStats.refresh();\n\n  this._downloadOrderRemoveManifest(manifestId);\n\n  if (!this._manifestsDownloadOrder.length) {\n    this.downloadStats.stop();\n  }\n\n  this.storage.removeItem(manifestId).then(onSuccess, onFailure);\n};\n/**\n *\n * @param {object} link - link object which consist remote and local url\n * @private\n * @returns {string} - unique hash for download file based on local and remote url\n */\n\n\nDownloadsController.prototype._getDownloadHash = function (link) {\n  return link.remoteUrl + "-" + link.localUrl;\n};\n/**\n *\n * @param {Download} download - download class to be marked either with success or with error\n * @private\n * @returns {void}\n */\n\n\nDownloadsController.prototype._markDownloadItem = function (download) {\n  var self = this;\n  var manifestId = download.manifestId;\n\n  var downloadHash = self._getDownloadHash(download);\n\n  var syncStorageKeys = [];\n  var lastItem;\n  download.events.removeListener("end", self._onDownloadEnd);\n  download.events.removeListener("error", self._onDownloadError); //refreshing stats for last time - to have correct stats for subscribers progress before it is removed\n\n  if (self.storage.downloading.count(manifestId) === 1 && self.storage.left.count(manifestId) === 0) {\n    this.downloadStats.refresh();\n    lastItem = true;\n  }\n\n  if (download.status === STATUSES.FINISHED) {\n    self.storage.downloaded.push(manifestId, download);\n    syncStorageKeys.push(this.storage.stores.DOWNLOADS.DOWNLOADED);\n  } else {\n    self.storage.errors.push(manifestId, download);\n  }\n\n  self.storage.downloading.removeItem(manifestId, downloadHash);\n\n  if (self.isDownloadFinished(manifestId)) {\n    if (self.storage.errors.count(manifestId) === 0) {\n      self.storage.status.setItem(manifestId, "status", STATUSES.FINISHED);\n    } else {\n      self.storage.status.setItem(manifestId, "status", STATUSES.ERROR);\n    }\n\n    syncStorageKeys.push(this.storage.stores.STATUS);\n  }\n\n  self.storage.sync(manifestId, syncStorageKeys).then(function () {\n    self.storage.params.decrease(manifestId, self._names.downloadInProgress);\n\n    if (lastItem) {\n      self._finish(manifestId, function () {\n        self.startQueue();\n        console.info("FINISHED", manifestId);\n      }, function () {\n        self.startQueue();\n      });\n    } else {\n      self.startQueue();\n    }\n  }, function (err) {\n    console.error("ERROR", err);\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {function} onSuccess - callback to be invoked when stop has been successfully\n * @param {function} onFailure - callback to be invoked when stop failed\n * @param {string} status - the status\n * @param {string} statusDetails - adds details about status (on errors for example)\n * @returns {void}\n */\n\n\nDownloadsController.prototype._stopWithStatus = function (manifestId, onSuccess, onFailure, status, statusDetails) {\n  var self = this;\n\n  self._downloadOrderRemoveManifest(manifestId);\n\n  self.storage.getItem(manifestId).then(function (result) {\n    if (!result) {\n      onFailure(translation.getError(translation.e.downloads.ALREADY_STOPPED, manifestId));\n      return;\n    }\n\n    var itemsToStop = self.storage.downloading.getKeys(manifestId);\n    var itemToStop;\n    console.info("STOPPING", manifestId, itemsToStop.length);\n    var promises = [];\n\n    for (var i = 0, j = itemsToStop.length; i < j; i++) {\n      itemToStop = self.storage.downloading.getItem(manifestId, itemsToStop[i]);\n      itemToStop.events.removeListener("end", self._onDownloadEnd);\n      itemToStop.events.removeListener("error", self._onDownloadError);\n      promises.push(itemToStop.stopPromise());\n    }\n\n    self.storage.status.setItem(manifestId, "status", status);\n\n    if (statusDetails) {\n      self.storage.status.setItem(manifestId, "details", statusDetails);\n    }\n\n    promises.push(self.storage.sync(manifestId, [self.storage.stores.DOWNLOADS.DOWNLOADED, self.storage.stores.STATUS]));\n    Promise.all(promises).then(function () {\n      self._finish(manifestId, onSuccess, onFailure);\n    }, function (err) {\n      onFailure(translation.getError(translation.e.downloads.STOPPING_FAILED, manifestId), err);\n    });\n  }, function (err) {\n    onFailure(translation.getError(translation.e.downloads.STOPPING_FAILED, manifestId), err);\n  });\n};\n/**\n * @param {Download} download - Download Class\n * @param {object} err - error object\n * @returns {void}\n * @private\n */\n\n\nDownloadsController.prototype._onDownloadError = function (download, err) {\n  console.error("ERROR", download.remoteUrl, err);\n\n  this._markDownloadItem(download);\n\n  if (err === downloadFileUtil.errors.NO_SPACE_LEFT_ERROR || appSettings.getSettings().stopOnError) {\n    // stop downloading => cannot write\n    this._stopWithStatus(download.manifestId, function () {\n      console.info(\'stopped\');\n    }, function (failure) {\n      console.info(failure);\n    }, STATUSES.ERROR, err);\n  }\n};\n/**\n *\n * @param {Download} download - Download Class\n * @returns {void}\n * @private\n */\n\n\nDownloadsController.prototype._onDownloadEnd = function (download) {\n  // console.log("FINISHED", download.remoteUrl, download.localUrl);\n  this._markDownloadItem(download);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Array} videoLinks - video links to be downloaded\n * @param {Array} audioLinks - audio links to be downloaded\n * @param {Array} textLinks - text links to be downloaded\n * @returns {void}\n * @private\n */\n\n\nDownloadsController.prototype._prepareStartOptions = function (manifestId, videoLinks, audioLinks, textLinks) {\n  var count = videoLinks.length + audioLinks.length + textLinks.length;\n  console.info("ADDING ->>> ", manifestId + ",", count, "fragments");\n  var options = {};\n  this.storage.params.setItem(manifestId, this._names.downloadInProgress, 0);\n  var maxDownloadInProgress;\n  var threadRules = appSettings.getSettings().downloadingThreadsRules;\n\n  for (var i = 0, j = threadRules.items.length; i < j; i++) {\n    if (count <= threadRules.items[i].max) {\n      options[threadRules.threadName] = threadRules.items[i].threads;\n      maxDownloadInProgress = threadRules.items[i].files;\n      break;\n    }\n  }\n\n  this.storage.params.setItem(manifestId, this._names.options, options);\n  this.storage.params.setItem(manifestId, this._names.maxDownloadInProgress, maxDownloadInProgress); //download order can help to stop download one manifest and download another or download them in parallel\n\n  this._downloadOrderAddManifest(manifestId);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {boolean} - if download is finished\n */\n\n\nDownloadsController.prototype.isDownloadFinished = function (manifestId) {\n  return !this.storage.left.count(manifestId) && !this.storage.downloading.count(manifestId);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {boolean} - if download is finished and synced (info written on disk)\n */\n\n\nDownloadsController.prototype.isDownloadFinishedAndSynced = function (manifestId) {\n  return !this.storage.left.count(manifestId) && !this.storage.downloading.count(manifestId) && !this.storage.keyExists(manifestId);\n};\n\nDownloadsController.prototype.getDownloading = function (manifestId, localFile) {\n  var items = this.storage.downloading.getItems(manifestId);\n\n  if (!items) {\n    return null;\n  }\n\n  for (var link in items) {\n    if (items.hasOwnProperty(link)) {\n      var download = items[link];\n      var downloadPath = path.normalize(download.localUrl);\n      var local = path.normalize(localFile);\n\n      if (downloadPath === local) {\n        return download;\n      }\n    }\n  }\n\n  return null;\n};\n\nDownloadsController.prototype.waitForDownload = function (download, callback) {\n  var _onDownloadEnd;\n\n  var _onDownloadError;\n\n  var removeListener = function removeListener(download) {\n    download.events.removeListener("end", _onDownloadEnd);\n    download.events.removeListener("error", _onDownloadError);\n  };\n\n  _onDownloadEnd = function _onDownloadEnd(download) {\n    removeListener(download);\n    callback();\n  };\n\n  _onDownloadError = function _onDownloadError(download, err) {\n    removeListener(download);\n    callback(err);\n  };\n\n  download.events.on("end", _onDownloadEnd);\n  download.events.on("error", _onDownloadError);\n};\n/**\n* Perform a seek - this changes order of fragment download for a manifest\n* @param {string} manifestId - manifest identifier\n* @param {string} localFile - local file\n* @param {function} callback - callback to get result\n* @returns {void}\n*/\n\n\nDownloadsController.prototype.performSeek = function (manifestId, localFile, callback) {\n  var self = this;\n  var download;\n  download = self.getDownloading(manifestId, localFile);\n\n  if (download) {\n    self.waitForDownload(download, callback);\n    return;\n  }\n\n  var items = self.storage.left.getItems(manifestId);\n\n  if (!items) {\n    callback(\'No download found\');\n    return;\n  }\n\n  var index = items.findIndex(function (download) {\n    var downloadPath = path.normalize(download.localUrl);\n    var local = path.normalize(localFile);\n    return downloadPath === local;\n  });\n\n  if (index > -1) {\n    var part1 = items.slice(0, index);\n    var part2 = items.slice(index);\n    self.storage.left.clear(manifestId);\n    self.storage.left.concat(manifestId, part2);\n    self.storage.left.concat(manifestId, part1);\n    items = self.storage.left.getItems(manifestId);\n    self.startQueue(self._indexOfManifest(manifestId), true);\n    download = self.getDownloading(manifestId, localFile);\n\n    if (download) {\n      self.waitForDownload(download, callback);\n    } else {\n      // if not queued, return an error\n      callback(\'No download found\');\n    }\n  } else {\n    callback(\'No download found\');\n  }\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {object} representations - object containing video, audio and text representations ids\n * @param {string} downloadFolder - download folder for video. If undefined, then default download folder is used\n * @param {function} onSuccess - callback to be invoked when start has been successfully\n * @param {function} onFailure - callback to be invoked when start failed\n * @param {boolean} fromResumed - if start has been called from resume api method\n * @param {string} oldstatus - if from resumed, then indicates the old status of download\n * @returns {void}\n */\n\n\nDownloadsController.prototype.start = function (manifestId, representations, downloadFolder, onSuccess, onFailure, fromResumed, oldstatus) {\n  var self = this;\n  this.downloadStats.start();\n\n  var manifest = this._manifestController.getManifestById(manifestId);\n\n  if (!manifest) {\n    onFailure(translation.getError(translation.e.manifests.NOT_FOUND, manifestId));\n    return;\n  }\n\n  representations = representations || {};\n  var video = representations.video || [];\n\n  if (!Array.isArray(video)) {\n    video = [video];\n  }\n\n  var audio = representations.audio || [];\n\n  if (!Array.isArray(audio)) {\n    audio = [audio];\n  }\n\n  var text = representations.text || [];\n\n  if (!Array.isArray(text)) {\n    text = [text];\n  }\n\n  var videoR = manifest.getVideoRepresentations();\n  var audioR = manifest.getAudioRepresentations();\n  var textR = manifest.getTextRepresentations();\n  var localDownloadFolder = path.resolve(appSettings.getSettings().downloadsFolderPath);\n\n  if (downloadFolder) {\n    localDownloadFolder = path.resolve(downloadFolder);\n  }\n\n  var localPath = path.resolve(localDownloadFolder + "/" + manifestId + "/");\n  var manifestUrl = manifest.getManifestUrl();\n  var manifestName = manifest.getManifestName();\n\n  function getManifestBaseUrl(xml, manifestUrlDomain) {\n    var manifestBaseUrl;\n    var MPD = xml.getElementsByTagName("MPD")[0];\n\n    if (MPD) {\n      for (var i = 0, j = MPD.childNodes.length; i < j; i++) {\n        if (MPD.childNodes[i].nodeName === "BaseURL") {\n          manifestBaseUrl = MPD.childNodes[i].textContent;\n\n          if (!manifestBaseUrl.match(constants.regexpProtocolRemove)) {\n            manifestBaseUrl = utilUrl.joinPath(manifestUrlDomain, manifestBaseUrl);\n          }\n\n          break;\n        }\n      }\n    }\n\n    if (!manifestBaseUrl) {\n      manifestBaseUrl = manifestUrlDomain;\n    }\n\n    return manifestBaseUrl;\n  }\n\n  Promise.all([this._offlineController.getManifestInfoPromise(manifestId, true), this.storage.getItem(manifestId), mkdirpPromise(localPath)]).then(function (results) {\n    var info = results[0];\n    var storageItem = results[1];\n\n    if (storageItem && !self.isDownloadFinished(manifestId)) {\n      if (fromResumed) {\n        onFailure(translation.getError(translation.e.downloads.ALREADY_RESUMED, manifestId));\n      } else {\n        onFailure(translation.getError(translation.e.downloads.ALREADY_STARTED, manifestId));\n      }\n\n      return;\n    } //collect Links - start\n\n\n    if (info.manifest.video) {\n      video = _.union(video, info.manifest.video);\n    }\n\n    if (info.manifest.audio) {\n      audio = _.union(audio, info.manifest.audio);\n    }\n\n    if (info.manifest.text) {\n      text = _.union(text, info.manifest.text);\n    }\n\n    var downloaded = info.downloadedFiles || [];\n    var downloadedHash = {};\n\n    for (var i = 0, j = downloaded.length; i < j; i++) {\n      downloadedHash[downloaded[i].localUrl] = downloaded[i];\n    }\n\n    var remotePath = getManifestBaseUrl(manifest.manifestXML.xml, manifest.url_domain);\n    var videoLinks = downloadUtil.getDownloadLinks(manifestId, localPath, remotePath, video, videoR, downloadedHash);\n    var audioLinks = downloadUtil.getDownloadLinks(manifestId, localPath, remotePath, audio, audioR, downloadedHash);\n    var textLinks = downloadUtil.getDownloadLinks(manifestId, localPath, remotePath, text, textR, downloadedHash);\n    var allvideoLinks = downloadUtil.getAllLinks(manifestId, localPath, remotePath, video, videoR);\n    var allaudioLinks = downloadUtil.getAllLinks(manifestId, localPath, remotePath, audio, audioR);\n    var alltextLinks = downloadUtil.getAllLinks(manifestId, localPath, remotePath, text, textR);\n    var allFiles = allvideoLinks.concat(allaudioLinks, alltextLinks); //collect Links - end\n\n    self.storage.createIfNotExists(manifestId).then(function () {\n      self.storage.manifest.setItem(manifestId, "ts", new Date().getTime());\n      self.storage.manifest.setItem(manifestId, "url", manifestUrl);\n      self.storage.manifest.setItem(manifestId, "name", manifestName);\n      self.storage.manifest.setItem(manifestId, "video", video);\n      self.storage.manifest.setItem(manifestId, "audio", audio);\n      self.storage.manifest.setItem(manifestId, "text", text);\n      self.storage.manifest.setItem(manifestId, "files", allFiles);\n      self.storage.manifest.setItem(manifestId, "folder", localDownloadFolder);\n      self.storage.downloaded.clear(manifestId);\n      self.storage.downloaded.concat(manifestId, downloaded);\n      self.storage.errors.clear(manifestId);\n\n      if (!fromResumed) {\n        // do not initialise state of manifest is start is from resume\n        // state must stay the last one\n        self.storage.status.setItem(manifestId, "status", STATUSES.CREATED);\n      } else {\n        // init status with last status\n        self.storage.status.setItem(manifestId, "status", oldstatus);\n      }\n\n      Promise.all([self.storage.sync(manifestId, [self.storage.stores.MANIFEST, self.storage.stores.STATUS]), self._manifestController.saveOriginalManifestOnceOnly(manifestId), self._manifestController.saveManifestWithChosenRepresentations(manifestId, {\n        video: video,\n        audio: audio,\n        text: text\n      }, localPath)]).then(function () {\n        self._addDownloads(manifestId, videoLinks, audioLinks, textLinks);\n\n        if (self._indexOfManifest(manifestId) > appSettings.getSettings().numberOfManifestsInParallel - 1) {\n          self.storage.status.setItem(manifestId, "status", STATUSES.QUEUED);\n        } else {\n          self.storage.status.setItem(manifestId, "status", STATUSES.STARTED);\n        }\n\n        self.storage.status.setItem(manifestId, "left", self.storage.left.count(manifestId));\n        self.storage.sync(manifestId, [self.storage.stores.DOWNLOADS.DOWNLOADED, self.storage.stores.STATUS]).then(function () {\n          self.downloadStats.refresh();\n\n          if (self.isDownloadFinished(manifestId)) {\n            self.storage.status.setItem(manifestId, "status", STATUSES.FINISHED);\n            self.storage.sync(manifestId, self.storage.stores.STATUS).then(function () {\n              self._finish(manifestId, onSuccess, onFailure);\n            }, onFailure);\n          } else {\n            self.downloadStats.start();\n            self.startQueue();\n            onSuccess();\n          }\n        }, onFailure);\n      }, onFailure);\n    }, onFailure);\n  }, onFailure);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {object} representations - object containing video, audio and text representations ids\n * @param {function} onSuccess - callback to be invoked when start has been successfully\n * @param {function} onFailure - callback to be invoked when start failed\n * @returns {void}\n */\n\n\nDownloadsController.prototype.resume = function (manifestId, representations, onSuccess, onFailure) {\n  var self = this;\n\n  this._offlineController.getManifestInfo(manifestId, function (err, info) {\n    if (err) {\n      onFailure(translation.getError(translation.e.downloads.RESUMING_FAILED, manifestId), err);\n    } else {\n      var folder = info.manifest.folder;\n\n      if (!folder) {\n        // use default download folder path\n        folder = path.resolve(appSettings.getSettings().downloadsFolderPath);\n      }\n\n      self.start(manifestId, representations, folder, onSuccess, onFailure, true, info.status);\n    }\n  });\n};\n/**\n * Update download folder path\n * @param {string} manifestId - manifest identifier\n * @param {string} downloadFolder - new download folder\n * @param {function} onSuccess - callback to be invoked when start has been successfully\n * @param {function} onFailure - callback to be invoked when start failed\n * @returns {void}\n */\n\n\nDownloadsController.prototype.updateDownloadFolder = function (manifestId, downloadFolder, onSuccess, onFailure) {\n  Promise.all([new ReadItem(manifestId, appSettings.getSettings().stores.MANIFEST)]).then(function (results) {\n    var manifestSettings = results[0];\n\n    if (!manifestSettings) {\n      onFailure(translation.getError(translation.e.manifests.NOT_FOUND, manifestId));\n      return;\n    }\n\n    manifestSettings.folder = downloadFolder;\n    var flushItem = new FlushItem(manifestId, appSettings.getSettings().stores.MANIFEST, manifestSettings);\n    flushItem.save().then(function () {\n      onSuccess();\n    }, function (err) {\n      onFailure(translation.getError(translation.e.downloads.SAVING_DATA_FAILED, manifestId), err);\n    });\n  }, function (err) {\n    onFailure(translation.getError(translation.e.downloads.UPDATE_DOWNLOAD_FOLDER_FAILED, manifestId), err);\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {function} onSuccess - callback to be invoked when stop has been successfully\n * @param {function} onFailure - callback to be invoked when stop failed\n * @returns {void}\n */\n\n\nDownloadsController.prototype.stop = function (manifestId, onSuccess, onFailure) {\n  this._stopWithStatus(manifestId, onSuccess, onFailure, STATUSES.STOPPED);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {boolean} ignoreStopped - don\'t fail if download has been already stopped\n * @returns {Promise} - promise\n */\n\n\nDownloadsController.prototype.stopPromise = function (manifestId, ignoreStopped) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    self.stop(manifestId, resolve, function (err) {\n      if (err) {\n        if (ignoreStopped && err.code === CODES.ERRORS.STOPPED) {\n          resolve();\n          return;\n        }\n\n        reject(err);\n      } else {\n        resolve();\n      }\n    });\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {Promise} - promise\n */\n\n\nDownloadsController.prototype.removePromise = function (manifestId) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    self.stopPromise(manifestId).then(function () {\n      self.storage.removeItem(manifestId).then(resolve, reject);\n    }, function (err) {\n      //already stopped, continue\n      if (err && err.code === CODES.ERRORS.STOPPED) {\n        self.storage.removeItem(manifestId).then(resolve, reject);\n      } else {\n        reject(err);\n      }\n    });\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {object} link - object link to be downloaded\n * @private\n * @returns {void}\n */\n\n\nDownloadsController.prototype._addLinkToDownload = function (manifestId, link) {\n  var self = this;\n  var params = Object.assign({}, link);\n  var download = new Download(params, self.storage.params.getItem(manifestId, self._names.options));\n\n  var downloadHash = self._getDownloadHash(link);\n\n  self.storage.downloading.setItem(manifestId, downloadHash, download);\n  self.storage.status.setItem(manifestId, "left", self.storage.left.count(manifestId) + self.storage.errors.count(manifestId));\n  self.storage.sync(manifestId, self.storage.stores.STATUS);\n  download.events.on("end", self._onDownloadEnd);\n  download.events.on("error", self._onDownloadError);\n  download.start();\n  return download;\n};\n/**\n *\n * @param {number} [nextManifestPositionInArray] - index from array to decide which manifest should be downloaded next\n *   (queue)\n * @param {boolean} forceDownload true to force next download to be queued\n * @returns {void}\n */\n\n\nDownloadsController.prototype.startQueue = function (nextManifestPositionInArray, forceDownload) {\n  var count, downloadsInProgress, link, manifestId, maxDownloads;\n\n  if (typeof nextManifestPositionInArray === "undefined") {\n    nextManifestPositionInArray = 0;\n  }\n\n  manifestId = this._downloadOrderGetManifestId(nextManifestPositionInArray);\n\n  if (manifestId && this.isDownloadFinished(manifestId)) {\n    // the manifest id will be removed from queue, wait next time. Thus, do not change status\n    return;\n  }\n\n  if (nextManifestPositionInArray >= appSettings.getSettings().numberOfManifestsInParallel) {\n    if (manifestId) {\n      this.storage.status.setItem(manifestId, "status", STATUSES.QUEUED);\n    }\n\n    return;\n  } else {\n    this.storage.status.setItem(manifestId, "status", STATUSES.STARTED);\n  }\n\n  if (!manifestId) {\n    count = 0;\n    var i, j, items;\n    items = this.storage.getKeys();\n\n    for (i = 0, j = items.length; i < j; i++) {\n      count += this.storage.params.count(items[i], this._names.downloadInProgress);\n    }\n\n    if (count === 0) {\n      this.downloadStats.stop();\n    }\n\n    return;\n  }\n\n  downloadsInProgress = this.storage.params.getItem(manifestId, this._names.downloadInProgress);\n  maxDownloads = this.storage.params.getItem(manifestId, this._names.maxDownloadInProgress);\n\n  if (downloadsInProgress < maxDownloads - 1 || forceDownload) {\n    link = this.storage.left.shift(manifestId);\n\n    if (link) {\n      this.storage.params.increase(manifestId, this._names.downloadInProgress);\n\n      this._addLinkToDownload(manifestId, link);\n    } else {\n      //check next manifest\n      nextManifestPositionInArray++;\n    }\n\n    this.startQueue(nextManifestPositionInArray);\n  } else if (appSettings.getSettings().numberOfManifestsInParallel > 1 && nextManifestPositionInArray < appSettings.getSettings().numberOfManifestsInParallel) {\n    nextManifestPositionInArray++;\n    this.startQueue(nextManifestPositionInArray);\n  }\n};\n\nmodule.exports = DownloadsController;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvY29udHJvbGxlcnMvZG93bmxvYWRzLWNvbnRyb2xsZXIuanM/ZDAwYyJdLCJuYW1lcyI6WyJfIiwicmVxdWlyZSIsIm1rZGlycFByb21pc2UiLCJhcHBTZXR0aW5ncyIsInRyYW5zbGF0aW9uIiwiRG93bmxvYWQiLCJEb3dubG9hZHNTdG9yYWdlQ29udHJvbGxlciIsImRvd25sb2FkVXRpbCIsIkRvd25sb2FkU3RhdHMiLCJTVEFUVVNFUyIsIkNPREVTIiwiY29uc3RhbnRzIiwidXRpbFVybCIsInBhdGgiLCJSZWFkSXRlbSIsIkZsdXNoSXRlbSIsImRvd25sb2FkRmlsZVV0aWwiLCJEb3dubG9hZHNDb250cm9sbGVyIiwibWFuaWZlc3RDb250cm9sbGVyIiwib2ZmbGluZUNvbnRyb2xsZXIiLCJfbWFuaWZlc3RzRG93bmxvYWRPcmRlciIsIl9tYW5pZmVzdHNEb3dubG9hZE9yZGVyT2JqIiwiX21hbmlmZXN0Q29udHJvbGxlciIsIl9vZmZsaW5lQ29udHJvbGxlciIsInN0b3JhZ2UiLCJzZXREb3dubG9hZFN0b3JhZ2UiLCJfbmFtZXMiLCJkb3dubG9hZEluUHJvZ3Jlc3MiLCJvcHRpb25zIiwibWF4RG93bmxvYWRJblByb2dyZXNzIiwiX1NUQVRTX1RJTUVfR0VORVJBVElPTiIsImRvd25sb2FkU3RhdHMiLCJiaW5kQWxsIiwicHJvdG90eXBlIiwiX2FkZERvd25sb2FkcyIsIm1hbmlmZXN0SWQiLCJ2aWRlb0xpbmtzIiwiYXVkaW9MaW5rcyIsInRleHRMaW5rcyIsIndvcmtpbmciLCJfcHJlcGFyZVN0YXJ0T3B0aW9ucyIsInJhdGlvQXVkaW9WaWRlbyIsImxlbmd0aCIsIk1hdGgiLCJyb3VuZCIsInJhdGlvVGV4dFZpZGVvIiwiX2FkZE5leHRJdGVtVG9RdWV1ZSIsImxpbmtzIiwibmJJdGVtcyIsImxpbmsiLCJzaGlmdCIsImxlZnQiLCJwdXNoIiwiX2Rvd25sb2FkT3JkZXJBZGRNYW5pZmVzdCIsImFzRmlyc3QiLCJfZG93bmxvYWRPcmRlck1hbmlmZXN0RXhpc3RzIiwidW5zaGlmdCIsIl9kb3dubG9hZE9yZGVyR2V0TWFuaWZlc3RJZCIsIm5leHRNYW5pZmVzdFBvc2l0aW9uSW5BcnJheSIsIl9pbmRleE9mTWFuaWZlc3QiLCJpbmRleE9mIiwiX2Rvd25sb2FkT3JkZXJSZW1vdmVNYW5pZmVzdCIsImZvdW5kIiwiaSIsImoiLCJzcGxpY2UiLCJfZmluaXNoIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwicmVmcmVzaCIsInN0b3AiLCJyZW1vdmVJdGVtIiwidGhlbiIsIl9nZXREb3dubG9hZEhhc2giLCJyZW1vdGVVcmwiLCJsb2NhbFVybCIsIl9tYXJrRG93bmxvYWRJdGVtIiwiZG93bmxvYWQiLCJzZWxmIiwiZG93bmxvYWRIYXNoIiwic3luY1N0b3JhZ2VLZXlzIiwibGFzdEl0ZW0iLCJldmVudHMiLCJyZW1vdmVMaXN0ZW5lciIsIl9vbkRvd25sb2FkRW5kIiwiX29uRG93bmxvYWRFcnJvciIsImRvd25sb2FkaW5nIiwiY291bnQiLCJzdGF0dXMiLCJGSU5JU0hFRCIsImRvd25sb2FkZWQiLCJzdG9yZXMiLCJET1dOTE9BRFMiLCJET1dOTE9BREVEIiwiZXJyb3JzIiwiaXNEb3dubG9hZEZpbmlzaGVkIiwic2V0SXRlbSIsIkVSUk9SIiwiU1RBVFVTIiwic3luYyIsInBhcmFtcyIsImRlY3JlYXNlIiwic3RhcnRRdWV1ZSIsImNvbnNvbGUiLCJpbmZvIiwiZXJyIiwiZXJyb3IiLCJfc3RvcFdpdGhTdGF0dXMiLCJzdGF0dXNEZXRhaWxzIiwiZ2V0SXRlbSIsInJlc3VsdCIsImdldEVycm9yIiwiZSIsImRvd25sb2FkcyIsIkFMUkVBRFlfU1RPUFBFRCIsIml0ZW1zVG9TdG9wIiwiZ2V0S2V5cyIsIml0ZW1Ub1N0b3AiLCJwcm9taXNlcyIsInN0b3BQcm9taXNlIiwiUHJvbWlzZSIsImFsbCIsIlNUT1BQSU5HX0ZBSUxFRCIsIk5PX1NQQUNFX0xFRlRfRVJST1IiLCJnZXRTZXR0aW5ncyIsInN0b3BPbkVycm9yIiwiZmFpbHVyZSIsInRocmVhZFJ1bGVzIiwiZG93bmxvYWRpbmdUaHJlYWRzUnVsZXMiLCJpdGVtcyIsIm1heCIsInRocmVhZE5hbWUiLCJ0aHJlYWRzIiwiZmlsZXMiLCJpc0Rvd25sb2FkRmluaXNoZWRBbmRTeW5jZWQiLCJrZXlFeGlzdHMiLCJnZXREb3dubG9hZGluZyIsImxvY2FsRmlsZSIsImdldEl0ZW1zIiwiaGFzT3duUHJvcGVydHkiLCJkb3dubG9hZFBhdGgiLCJub3JtYWxpemUiLCJsb2NhbCIsIndhaXRGb3JEb3dubG9hZCIsImNhbGxiYWNrIiwib24iLCJwZXJmb3JtU2VlayIsImluZGV4IiwiZmluZEluZGV4IiwicGFydDEiLCJzbGljZSIsInBhcnQyIiwiY2xlYXIiLCJjb25jYXQiLCJzdGFydCIsInJlcHJlc2VudGF0aW9ucyIsImRvd25sb2FkRm9sZGVyIiwiZnJvbVJlc3VtZWQiLCJvbGRzdGF0dXMiLCJtYW5pZmVzdCIsImdldE1hbmlmZXN0QnlJZCIsIm1hbmlmZXN0cyIsIk5PVF9GT1VORCIsInZpZGVvIiwiQXJyYXkiLCJpc0FycmF5IiwiYXVkaW8iLCJ0ZXh0IiwidmlkZW9SIiwiZ2V0VmlkZW9SZXByZXNlbnRhdGlvbnMiLCJhdWRpb1IiLCJnZXRBdWRpb1JlcHJlc2VudGF0aW9ucyIsInRleHRSIiwiZ2V0VGV4dFJlcHJlc2VudGF0aW9ucyIsImxvY2FsRG93bmxvYWRGb2xkZXIiLCJyZXNvbHZlIiwiZG93bmxvYWRzRm9sZGVyUGF0aCIsImxvY2FsUGF0aCIsIm1hbmlmZXN0VXJsIiwiZ2V0TWFuaWZlc3RVcmwiLCJtYW5pZmVzdE5hbWUiLCJnZXRNYW5pZmVzdE5hbWUiLCJnZXRNYW5pZmVzdEJhc2VVcmwiLCJ4bWwiLCJtYW5pZmVzdFVybERvbWFpbiIsIm1hbmlmZXN0QmFzZVVybCIsIk1QRCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiY2hpbGROb2RlcyIsIm5vZGVOYW1lIiwidGV4dENvbnRlbnQiLCJtYXRjaCIsInJlZ2V4cFByb3RvY29sUmVtb3ZlIiwiam9pblBhdGgiLCJnZXRNYW5pZmVzdEluZm9Qcm9taXNlIiwicmVzdWx0cyIsInN0b3JhZ2VJdGVtIiwiQUxSRUFEWV9SRVNVTUVEIiwiQUxSRUFEWV9TVEFSVEVEIiwidW5pb24iLCJkb3dubG9hZGVkRmlsZXMiLCJkb3dubG9hZGVkSGFzaCIsInJlbW90ZVBhdGgiLCJtYW5pZmVzdFhNTCIsInVybF9kb21haW4iLCJnZXREb3dubG9hZExpbmtzIiwiYWxsdmlkZW9MaW5rcyIsImdldEFsbExpbmtzIiwiYWxsYXVkaW9MaW5rcyIsImFsbHRleHRMaW5rcyIsImFsbEZpbGVzIiwiY3JlYXRlSWZOb3RFeGlzdHMiLCJEYXRlIiwiZ2V0VGltZSIsIkNSRUFURUQiLCJNQU5JRkVTVCIsInNhdmVPcmlnaW5hbE1hbmlmZXN0T25jZU9ubHkiLCJzYXZlTWFuaWZlc3RXaXRoQ2hvc2VuUmVwcmVzZW50YXRpb25zIiwibnVtYmVyT2ZNYW5pZmVzdHNJblBhcmFsbGVsIiwiUVVFVUVEIiwiU1RBUlRFRCIsInJlc3VtZSIsImdldE1hbmlmZXN0SW5mbyIsIlJFU1VNSU5HX0ZBSUxFRCIsImZvbGRlciIsInVwZGF0ZURvd25sb2FkRm9sZGVyIiwibWFuaWZlc3RTZXR0aW5ncyIsImZsdXNoSXRlbSIsInNhdmUiLCJTQVZJTkdfREFUQV9GQUlMRUQiLCJVUERBVEVfRE9XTkxPQURfRk9MREVSX0ZBSUxFRCIsIlNUT1BQRUQiLCJpZ25vcmVTdG9wcGVkIiwicmVqZWN0IiwiY29kZSIsIkVSUk9SUyIsInJlbW92ZVByb21pc2UiLCJfYWRkTGlua1RvRG93bmxvYWQiLCJPYmplY3QiLCJhc3NpZ24iLCJmb3JjZURvd25sb2FkIiwiZG93bmxvYWRzSW5Qcm9ncmVzcyIsIm1heERvd25sb2FkcyIsImluY3JlYXNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDYTs7QUFDYixJQUFNQSxDQUFDLEdBQUdDLG1CQUFPLENBQUMsQ0FBRCxDQUFqQjs7QUFDQSxJQUFNQyxhQUFhLEdBQUdELG1CQUFP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LE1BQUwsQ0FBWUMsa0JBQXJEOztBQUNBLFdBQUtrTixrQkFBTCxDQUF3QjFNLFVBQXhCLEVBQW9DYyxJQUFwQztBQUNELEtBSEQsTUFHTztBQUNMO0FBQ0FTLGlDQUEyQjtBQUM1Qjs7QUFDRCxTQUFLNEMsVUFBTCxDQUFnQjVDLDJCQUFoQjtBQUNELEdBVkQsTUFVTyxJQUFJdkQsV0FBVyxDQUFDeUgsV0FBWixHQUEwQjhGLDJCQUExQixHQUF3RCxDQUF4RCxJQUE2RGhLLDJCQUEyQixHQUFHdkQsV0FBVyxDQUFDeUgsV0FBWixHQUEwQjhGLDJCQUF6SCxFQUFzSjtBQUMzSmhLLCtCQUEyQjtBQUMzQixTQUFLNEMsVUFBTCxDQUFnQjVDLDJCQUFoQjtBQUNEO0FBQ0YsQ0FoREQ7O0FBa0RBMEwsTUFBTSxDQUFDQyxPQUFQLEdBQWlCcE8sbUJBQWpCIiwiZmlsZSI6IjgzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyplc2xpbnQgbm8tY29uc29sZTogW1wiZXJyb3JcIiwgeyBhbGxvdzogW1wid2FyblwiLCBcImVycm9yXCIsIFwiaW5mb1wiXSB9XSAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBfID0gcmVxdWlyZShcInVuZGVyc2NvcmVcIik7XG5jb25zdCBta2RpcnBQcm9taXNlID0gcmVxdWlyZShcIi4uL3V0aWwvbWtkaXJwLXByb21pc2VcIik7XG5cbmNvbnN0IGFwcFNldHRpbmdzID0gcmVxdWlyZShcIi4uL2FwcC1zZXR0aW5nc1wiKTtcbmNvbnN0IHRyYW5zbGF0aW9uID0gcmVxdWlyZShcIi4uL3RyYW5zbGF0aW9uL2luZGV4XCIpO1xuY29uc3QgRG93bmxvYWQgPSByZXF1aXJlKFwiLi4vZG93bmxvYWRzL2Rvd25sb2FkXCIpO1xuY29uc3QgRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi9kb3dubG9hZHMtc3RvcmFnZS1jb250cm9sbGVyXCIpO1xuY29uc3QgZG93bmxvYWRVdGlsID0gcmVxdWlyZShcIi4uL3V0aWwvZG93bmxvYWRzXCIpO1xuY29uc3QgRG93bmxvYWRTdGF0cyA9IHJlcXVpcmUoXCIuLi9zdGF0cy9kb3dubG9hZF9zdGF0c1wiKTtcbmNvbnN0IFNUQVRVU0VTID0gcmVxdWlyZShcIi4uL2Rvd25sb2Fkcy9zdGF0dXNlc1wiKTtcbmNvbnN0IENPREVTID0gcmVxdWlyZShcIi4uL2Rvd25sb2Fkcy9jb2Rlc1wiKTtcbmNvbnN0IGNvbnN0YW50cyA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCB1dGlsVXJsID0gcmVxdWlyZShcIi4uL3V0aWwvdXJsXCIpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuY29uc3QgUmVhZEl0ZW0gPSByZXF1aXJlKFwiLi4vZG93bmxvYWRzL3JlYWQtaXRlbVwiKTtcbmNvbnN0IEZsdXNoSXRlbSA9IHJlcXVpcmUoXCIuLi9kb3dubG9hZHMvZmx1c2gtaXRlbVwiKTtcbmNvbnN0IGRvd25sb2FkRmlsZVV0aWwgPSByZXF1aXJlKFwiLi4vZG93bmxvYWRzL2Rvd25sb2FkLWZpbGUtdXRpbFwiKTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtNYW5pZmVzdENvbnRyb2xsZXJ9IG1hbmlmZXN0Q29udHJvbGxlciAtIGV4aXN0aW5nIG1hbmlmZXN0IGNvbnRyb2xsZXJcbiAqIEBwYXJhbSB7T2ZmbGluZUNvbnRyb2xsZXJ9IG9mZmxpbmVDb250cm9sbGVyIC0gZXhpc3Rpbmcgb2ZmbGluZSBjb250cm9sbGVyXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRG93bmxvYWRzQ29udHJvbGxlciAobWFuaWZlc3RDb250cm9sbGVyLCBvZmZsaW5lQ29udHJvbGxlcikge1xuICB0aGlzLl9tYW5pZmVzdHNEb3dubG9hZE9yZGVyID0gW107XG4gIHRoaXMuX21hbmlmZXN0c0Rvd25sb2FkT3JkZXJPYmogPSB7fTtcbiAgdGhpcy5fbWFuaWZlc3RDb250cm9sbGVyID0gbWFuaWZlc3RDb250cm9sbGVyO1xuICB0aGlzLl9vZmZsaW5lQ29udHJvbGxlciA9IG9mZmxpbmVDb250cm9sbGVyO1xuICB0aGlzLnN0b3JhZ2UgPSBuZXcgRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIoKTtcbiAgdGhpcy5fb2ZmbGluZUNvbnRyb2xsZXIuc2V0RG93bmxvYWRTdG9yYWdlKHRoaXMuc3RvcmFnZSk7XG4gIHRoaXMuX25hbWVzID0ge1xuICAgIGRvd25sb2FkSW5Qcm9ncmVzczogXCJkb3dubG9hZEluUHJvZ3Jlc3NcIixcbiAgICBvcHRpb25zOiBcIm9wdGlvbnNcIixcbiAgICBtYXhEb3dubG9hZEluUHJvZ3Jlc3M6IFwibWF4RG93bmxvYWRJblByb2dyZXNzXCJcbiAgfTtcbiAgdGhpcy5fU1RBVFNfVElNRV9HRU5FUkFUSU9OID0gMTAwMDtcbiAgdGhpcy5kb3dubG9hZFN0YXRzID0gbmV3IERvd25sb2FkU3RhdHModGhpcy5zdG9yYWdlKTtcbiAgXy5iaW5kQWxsKHRoaXMsIFwiX29uRG93bmxvYWRFbmRcIiwgXCJfb25Eb3dubG9hZEVycm9yXCIsIFwiaXNEb3dubG9hZEZpbmlzaGVkXCIpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7QXJyYXl9IHZpZGVvTGlua3MgLSB2aWRlbyBsaW5rcyB0byBiZSBkb3dubG9hZGVkXG4gKiBAcGFyYW0ge0FycmF5fSBhdWRpb0xpbmtzIC0gYXVkaW8gbGlua3MgdG8gYmUgZG93bmxvYWRlZFxuICogQHBhcmFtIHtBcnJheX0gdGV4dExpbmtzIC0gdGV4dCBsaW5rcyB0byBiZSBkb3dubG9hZGVkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbkRvd25sb2Fkc0NvbnRyb2xsZXIucHJvdG90eXBlLl9hZGREb3dubG9hZHMgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgdmlkZW9MaW5rcywgYXVkaW9MaW5rcywgdGV4dExpbmtzKSB7XG4gIGxldCB3b3JraW5nID0gdHJ1ZTtcbiAgdGhpcy5fcHJlcGFyZVN0YXJ0T3B0aW9ucyhtYW5pZmVzdElkLCB2aWRlb0xpbmtzLCBhdWRpb0xpbmtzLCB0ZXh0TGlua3MpO1xuICB3aGlsZSAod29ya2luZykge1xuICAgIGxldCByYXRpb0F1ZGlvVmlkZW8gPSB2aWRlb0xpbmtzLmxlbmd0aCA/IE1hdGgucm91bmQoYXVkaW9MaW5rcy5sZW5ndGggLyB2aWRlb0xpbmtzLmxlbmd0aCkgOiAxO1xuICAgIGxldCByYXRpb1RleHRWaWRlbyA9IHZpZGVvTGlua3MubGVuZ3RoID8gTWF0aC5yb3VuZCh0ZXh0TGlua3MubGVuZ3RoIC8gdmlkZW9MaW5rcy5sZW5ndGgpIDogMTtcbiAgICB0aGlzLl9hZGROZXh0SXRlbVRvUXVldWUobWFuaWZlc3RJZCwgdGV4dExpbmtzLCByYXRpb1RleHRWaWRlbyk7XG4gICAgdGhpcy5fYWRkTmV4dEl0ZW1Ub1F1ZXVlKG1hbmlmZXN0SWQsIGF1ZGlvTGlua3MsIHJhdGlvQXVkaW9WaWRlbyk7XG4gICAgdGhpcy5fYWRkTmV4dEl0ZW1Ub1F1ZXVlKG1hbmlmZXN0SWQsIHZpZGVvTGlua3MpO1xuICAgIHdvcmtpbmcgPSAhISh0ZXh0TGlua3MubGVuZ3RoIHx8IHZpZGVvTGlua3MubGVuZ3RoIHx8IGF1ZGlvTGlua3MubGVuZ3RoKTtcbiAgfVxufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge0FycmF5fSBsaW5rcyAtIGFycmF5IG9mIGxpbmtzIHRvIGJlIGRvd25sb2FkZWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuYkl0ZW1zIC0gdGhlIHJudW1iZXIgb2YgaXRlbXMgdG8gYWRkIHRvIHRoZSBxdWV1ZVxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZHNDb250cm9sbGVyLnByb3RvdHlwZS5fYWRkTmV4dEl0ZW1Ub1F1ZXVlID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIGxpbmtzLCBuYkl0ZW1zKSB7XG4gIGxldCBsaW5rO1xuICBpZiAoIW5iSXRlbXMpIHtcbiAgICBuYkl0ZW1zID0gMTtcbiAgfVxuICBpZiAobGlua3MubGVuZ3RoKSB7XG4gICAgd2hpbGUgKG5iSXRlbXMgPiAwKSB7XG4gICAgICBsaW5rID0gbGlua3Muc2hpZnQoKTtcbiAgICAgIGxpbmsubWFuaWZlc3RJZCA9IG1hbmlmZXN0SWQ7XG4gICAgICB0aGlzLnN0b3JhZ2UubGVmdC5wdXNoKG1hbmlmZXN0SWQsIGxpbmspO1xuICAgICAgbmJJdGVtcy0tO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFzRmlyc3QgLSB0byBmb3JjZSB0byBkb3dubG9hZCBtYW5pZmVzdCB3aXRob3V0IHdpYXRpbmcgaW4gcXVldWVcbiAqIEByZXR1cm5zIHtib29sZWFufSAtIHN0YXR1cyBpZiBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWxseVxuICogQHByaXZhdGVcbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuX2Rvd25sb2FkT3JkZXJBZGRNYW5pZmVzdCA9IGZ1bmN0aW9uIChtYW5pZmVzdElkLCBhc0ZpcnN0KSB7XG4gIGlmICghdGhpcy5fZG93bmxvYWRPcmRlck1hbmlmZXN0RXhpc3RzKG1hbmlmZXN0SWQpKSB7XG4gICAgdGhpcy5fbWFuaWZlc3RzRG93bmxvYWRPcmRlck9ialttYW5pZmVzdElkXSA9IHRydWU7XG4gICAgaWYgKGFzRmlyc3QpIHtcbiAgICAgIHRoaXMuX21hbmlmZXN0c0Rvd25sb2FkT3JkZXIudW5zaGlmdChtYW5pZmVzdElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbWFuaWZlc3RzRG93bmxvYWRPcmRlci5wdXNoKG1hbmlmZXN0SWQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZXh0TWFuaWZlc3RQb3NpdGlvbkluQXJyYXkgLSBpbmRleCBudW1iZXIgZnJvbSBhcnJheSBfbWFuaWZlc3RzRG93bmxvYWRPcmRlclxuICogQHJldHVybnMge21hbmlmZXN0SWR9IC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHByaXZhdGVcbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuX2Rvd25sb2FkT3JkZXJHZXRNYW5pZmVzdElkID0gZnVuY3Rpb24gKG5leHRNYW5pZmVzdFBvc2l0aW9uSW5BcnJheSkge1xuICByZXR1cm4gdGhpcy5fbWFuaWZlc3RzRG93bmxvYWRPcmRlcltuZXh0TWFuaWZlc3RQb3NpdGlvbkluQXJyYXldO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHttYW5pZmVzdElkfSBtYW5pZmVzdElkIC0gIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGluZGV4IG51bWJlciBmcm9tIGFycmF5IF9tYW5pZmVzdHNEb3dubG9hZE9yZGVyXG4gKiBAcHJpdmF0ZVxuICovXG5Eb3dubG9hZHNDb250cm9sbGVyLnByb3RvdHlwZS5faW5kZXhPZk1hbmlmZXN0ID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgcmV0dXJuIHRoaXMuX21hbmlmZXN0c0Rvd25sb2FkT3JkZXIuaW5kZXhPZihtYW5pZmVzdElkKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7Kn0gLSBpZiBtYW5pZmVzdCBoYXMgYmVlbiBhbHJlYWR5IGFkZGVkIHRvIHRoZSBxdWV1ZVxuICogQHByaXZhdGVcbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuX2Rvd25sb2FkT3JkZXJNYW5pZmVzdEV4aXN0cyA9IGZ1bmN0aW9uIChtYW5pZmVzdElkKSB7XG4gIHJldHVybiB0aGlzLl9tYW5pZmVzdHNEb3dubG9hZE9yZGVyT2JqW21hbmlmZXN0SWRdO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBzdGF0dXMgaWYgbWFuaWZlc3QgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHF1ZXVlXG4gKiBAcHJpdmF0ZVxuICovXG5Eb3dubG9hZHNDb250cm9sbGVyLnByb3RvdHlwZS5fZG93bmxvYWRPcmRlclJlbW92ZU1hbmlmZXN0ID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgbGV0IGZvdW5kID0gZmFsc2UsIGksIGo7XG4gIGRlbGV0ZSB0aGlzLl9tYW5pZmVzdHNEb3dubG9hZE9yZGVyT2JqW21hbmlmZXN0SWRdO1xuICBmb3IgKGkgPSAwLCBqID0gdGhpcy5fbWFuaWZlc3RzRG93bmxvYWRPcmRlci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBpZiAodGhpcy5fbWFuaWZlc3RzRG93bmxvYWRPcmRlcltpXSA9PT0gbWFuaWZlc3RJZCkge1xuICAgICAgdGhpcy5fbWFuaWZlc3RzRG93bmxvYWRPcmRlci5zcGxpY2UoaSwgMSk7XG4gICAgICBmb3VuZCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZvdW5kO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblN1Y2Nlc3MgLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gZG93bmxvYWQgZmluaXNoZXMgd2l0aCBzdWNjZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbkZhaWx1cmUgLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gZG93bmxvYWQgZmFpbGVkXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2Fkc0NvbnRyb2xsZXIucHJvdG90eXBlLl9maW5pc2ggPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgb25TdWNjZXNzLCBvbkZhaWx1cmUpIHtcbiAgdGhpcy5kb3dubG9hZFN0YXRzLnJlZnJlc2goKTtcbiAgdGhpcy5fZG93bmxvYWRPcmRlclJlbW92ZU1hbmlmZXN0KG1hbmlmZXN0SWQpO1xuICBpZiAoIXRoaXMuX21hbmlmZXN0c0Rvd25sb2FkT3JkZXIubGVuZ3RoKSB7XG4gICAgdGhpcy5kb3dubG9hZFN0YXRzLnN0b3AoKTtcbiAgfVxuICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShtYW5pZmVzdElkKVxuICAgICAgLnRoZW4ob25TdWNjZXNzLCBvbkZhaWx1cmUpO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGxpbmsgLSBsaW5rIG9iamVjdCB3aGljaCBjb25zaXN0IHJlbW90ZSBhbmQgbG9jYWwgdXJsXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3N0cmluZ30gLSB1bmlxdWUgaGFzaCBmb3IgZG93bmxvYWQgZmlsZSBiYXNlZCBvbiBsb2NhbCBhbmQgcmVtb3RlIHVybFxuICovXG5Eb3dubG9hZHNDb250cm9sbGVyLnByb3RvdHlwZS5fZ2V0RG93bmxvYWRIYXNoID0gZnVuY3Rpb24gKGxpbmspIHtcbiAgcmV0dXJuIGxpbmsucmVtb3RlVXJsICsgXCItXCIgKyBsaW5rLmxvY2FsVXJsO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtEb3dubG9hZH0gZG93bmxvYWQgLSBkb3dubG9hZCBjbGFzcyB0byBiZSBtYXJrZWQgZWl0aGVyIHdpdGggc3VjY2VzcyBvciB3aXRoIGVycm9yXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2Fkc0NvbnRyb2xsZXIucHJvdG90eXBlLl9tYXJrRG93bmxvYWRJdGVtID0gZnVuY3Rpb24gKGRvd25sb2FkKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBjb25zdCBtYW5pZmVzdElkID0gZG93bmxvYWQubWFuaWZlc3RJZDtcbiAgY29uc3QgZG93bmxvYWRIYXNoID0gc2VsZi5fZ2V0RG93bmxvYWRIYXNoKGRvd25sb2FkKTtcbiAgbGV0IHN5bmNTdG9yYWdlS2V5cyA9IFtdO1xuICBsZXQgbGFzdEl0ZW07XG5cbiAgZG93bmxvYWQuZXZlbnRzLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsIHNlbGYuX29uRG93bmxvYWRFbmQpO1xuICBkb3dubG9hZC5ldmVudHMucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLCBzZWxmLl9vbkRvd25sb2FkRXJyb3IpO1xuXG4gIC8vcmVmcmVzaGluZyBzdGF0cyBmb3IgbGFzdCB0aW1lIC0gdG8gaGF2ZSBjb3JyZWN0IHN0YXRzIGZvciBzdWJzY3JpYmVycyBwcm9ncmVzcyBiZWZvcmUgaXQgaXMgcmVtb3ZlZFxuICBpZiAoc2VsZi5zdG9yYWdlLmRvd25sb2FkaW5nLmNvdW50KG1hbmlmZXN0SWQpID09PSAxICYmIHNlbGYuc3RvcmFnZS5sZWZ0LmNvdW50KG1hbmlmZXN0SWQpID09PSAwKSB7XG4gICAgdGhpcy5kb3dubG9hZFN0YXRzLnJlZnJlc2goKTtcbiAgICBsYXN0SXRlbSA9IHRydWU7XG4gIH1cblxuICBpZiAoZG93bmxvYWQuc3RhdHVzID09PSBTVEFUVVNFUy5GSU5JU0hFRCkge1xuICAgIHNlbGYuc3RvcmFnZS5kb3dubG9hZGVkLnB1c2gobWFuaWZlc3RJZCwgZG93bmxvYWQpO1xuICAgIHN5bmNTdG9yYWdlS2V5cy5wdXNoKHRoaXMuc3RvcmFnZS5zdG9yZXMuRE9XTkxPQURTLkRPV05MT0FERUQpO1xuICB9IGVsc2Uge1xuICAgIHNlbGYuc3RvcmFnZS5lcnJvcnMucHVzaChtYW5pZmVzdElkLCBkb3dubG9hZCk7XG4gIH1cbiAgc2VsZi5zdG9yYWdlLmRvd25sb2FkaW5nLnJlbW92ZUl0ZW0obWFuaWZlc3RJZCwgZG93bmxvYWRIYXNoKTtcblxuICBpZiAoc2VsZi5pc0Rvd25sb2FkRmluaXNoZWQobWFuaWZlc3RJZCkpIHtcbiAgICBpZiAoc2VsZi5zdG9yYWdlLmVycm9ycy5jb3VudChtYW5pZmVzdElkKSA9PT0gMCkge1xuICAgICAgc2VsZi5zdG9yYWdlLnN0YXR1cy5zZXRJdGVtKG1hbmlmZXN0SWQsIFwic3RhdHVzXCIsIFNUQVRVU0VTLkZJTklTSEVEKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5zdG9yYWdlLnN0YXR1cy5zZXRJdGVtKG1hbmlmZXN0SWQsIFwic3RhdHVzXCIsIFNUQVRVU0VTLkVSUk9SKTtcbiAgICB9XG4gICAgc3luY1N0b3JhZ2VLZXlzLnB1c2godGhpcy5zdG9yYWdlLnN0b3Jlcy5TVEFUVVMpO1xuICB9XG5cbiAgc2VsZi5zdG9yYWdlLnN5bmMobWFuaWZlc3RJZCwgc3luY1N0b3JhZ2VLZXlzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnN0b3JhZ2UucGFyYW1zLmRlY3JlYXNlKG1hbmlmZXN0SWQsIHNlbGYuX25hbWVzLmRvd25sb2FkSW5Qcm9ncmVzcyk7XG4gICAgICAgIGlmIChsYXN0SXRlbSkge1xuICAgICAgICAgIHNlbGYuX2ZpbmlzaChtYW5pZmVzdElkLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnN0YXJ0UXVldWUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkZJTklTSEVEXCIsIG1hbmlmZXN0SWQpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuc3RhcnRRdWV1ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuc3RhcnRRdWV1ZSgpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUlwiLCBlcnIpO1xuICAgICAgfSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uU3VjY2VzcyAtIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbiBzdG9wIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25GYWlsdXJlIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHN0b3AgZmFpbGVkXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIC0gdGhlIHN0YXR1c1xuICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1c0RldGFpbHMgLSBhZGRzIGRldGFpbHMgYWJvdXQgc3RhdHVzIChvbiBlcnJvcnMgZm9yIGV4YW1wbGUpXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuX3N0b3BXaXRoU3RhdHVzID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIG9uU3VjY2Vzcywgb25GYWlsdXJlLCBzdGF0dXMsIHN0YXR1c0RldGFpbHMpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHNlbGYuX2Rvd25sb2FkT3JkZXJSZW1vdmVNYW5pZmVzdChtYW5pZmVzdElkKTtcbiAgc2VsZi5zdG9yYWdlLmdldEl0ZW0obWFuaWZlc3RJZClcbiAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5BTFJFQURZX1NUT1BQRUQsIG1hbmlmZXN0SWQpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaXRlbXNUb1N0b3AgPSBzZWxmLnN0b3JhZ2UuZG93bmxvYWRpbmcuZ2V0S2V5cyhtYW5pZmVzdElkKTtcbiAgICBsZXQgaXRlbVRvU3RvcDtcbiAgICBjb25zb2xlLmluZm8oXCJTVE9QUElOR1wiLCBtYW5pZmVzdElkLCBpdGVtc1RvU3RvcC5sZW5ndGgpO1xuICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gaXRlbXNUb1N0b3AubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBpdGVtVG9TdG9wID0gc2VsZi5zdG9yYWdlLmRvd25sb2FkaW5nLmdldEl0ZW0obWFuaWZlc3RJZCwgaXRlbXNUb1N0b3BbaV0pO1xuICAgICAgaXRlbVRvU3RvcC5ldmVudHMucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIiwgc2VsZi5fb25Eb3dubG9hZEVuZCk7XG4gICAgICBpdGVtVG9TdG9wLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsIHNlbGYuX29uRG93bmxvYWRFcnJvcik7XG4gICAgICBwcm9taXNlcy5wdXNoKGl0ZW1Ub1N0b3Auc3RvcFByb21pc2UoKSk7XG4gICAgfVxuXG4gICAgc2VsZi5zdG9yYWdlLnN0YXR1cy5zZXRJdGVtKG1hbmlmZXN0SWQsIFwic3RhdHVzXCIsIHN0YXR1cyk7XG4gICAgaWYgKHN0YXR1c0RldGFpbHMpIHtcbiAgICAgIHNlbGYuc3RvcmFnZS5zdGF0dXMuc2V0SXRlbShtYW5pZmVzdElkLCBcImRldGFpbHNcIiwgc3RhdHVzRGV0YWlscyk7XG4gICAgfVxuXG4gICAgcHJvbWlzZXMucHVzaChzZWxmLnN0b3JhZ2Uuc3luYyhtYW5pZmVzdElkLCBbXG4gICAgICBzZWxmLnN0b3JhZ2Uuc3RvcmVzLkRPV05MT0FEUy5ET1dOTE9BREVELFxuICAgICAgc2VsZi5zdG9yYWdlLnN0b3Jlcy5TVEFUVVMsXG4gICAgXSkpO1xuICAgIFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5fZmluaXNoKG1hbmlmZXN0SWQsIG9uU3VjY2Vzcywgb25GYWlsdXJlKTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuU1RPUFBJTkdfRkFJTEVELCBtYW5pZmVzdElkKSwgZXJyKTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5TVE9QUElOR19GQUlMRUQsIG1hbmlmZXN0SWQpLCBlcnIpO1xuICB9KTtcblxufTtcbi8qKlxuICogQHBhcmFtIHtEb3dubG9hZH0gZG93bmxvYWQgLSBEb3dubG9hZCBDbGFzc1xuICogQHBhcmFtIHtvYmplY3R9IGVyciAtIGVycm9yIG9iamVjdFxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5Eb3dubG9hZHNDb250cm9sbGVyLnByb3RvdHlwZS5fb25Eb3dubG9hZEVycm9yID0gZnVuY3Rpb24gKGRvd25sb2FkLCBlcnIpIHtcbiAgY29uc29sZS5lcnJvcihcIkVSUk9SXCIsIGRvd25sb2FkLnJlbW90ZVVybCwgZXJyKTtcbiAgdGhpcy5fbWFya0Rvd25sb2FkSXRlbShkb3dubG9hZCk7XG4gIGlmIChlcnIgPT09IGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLk5PX1NQQUNFX0xFRlRfRVJST1IgfHwgYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5zdG9wT25FcnJvcikge1xuICAgIC8vIHN0b3AgZG93bmxvYWRpbmcgPT4gY2Fubm90IHdyaXRlXG4gICAgdGhpcy5fc3RvcFdpdGhTdGF0dXMoZG93bmxvYWQubWFuaWZlc3RJZCwgKCkgPT4ge1xuICAgICAgY29uc29sZS5pbmZvKCdzdG9wcGVkJyk7XG4gICAgfSwgKGZhaWx1cmUpID0+IHtcbiAgICAgIGNvbnNvbGUuaW5mbyhmYWlsdXJlKTtcbiAgICB9LCBTVEFUVVNFUy5FUlJPUiwgZXJyKTtcbiAgfVxufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtEb3dubG9hZH0gZG93bmxvYWQgLSBEb3dubG9hZCBDbGFzc1xuICogQHJldHVybnMge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5Eb3dubG9hZHNDb250cm9sbGVyLnByb3RvdHlwZS5fb25Eb3dubG9hZEVuZCA9IGZ1bmN0aW9uIChkb3dubG9hZCkge1xuICAvLyBjb25zb2xlLmxvZyhcIkZJTklTSEVEXCIsIGRvd25sb2FkLnJlbW90ZVVybCwgZG93bmxvYWQubG9jYWxVcmwpO1xuICB0aGlzLl9tYXJrRG93bmxvYWRJdGVtKGRvd25sb2FkKTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtBcnJheX0gdmlkZW9MaW5rcyAtIHZpZGVvIGxpbmtzIHRvIGJlIGRvd25sb2FkZWRcbiAqIEBwYXJhbSB7QXJyYXl9IGF1ZGlvTGlua3MgLSBhdWRpbyBsaW5rcyB0byBiZSBkb3dubG9hZGVkXG4gKiBAcGFyYW0ge0FycmF5fSB0ZXh0TGlua3MgLSB0ZXh0IGxpbmtzIHRvIGJlIGRvd25sb2FkZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuX3ByZXBhcmVTdGFydE9wdGlvbnMgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgdmlkZW9MaW5rcywgYXVkaW9MaW5rcywgdGV4dExpbmtzKSB7XG4gIGNvbnN0IGNvdW50ID0gdmlkZW9MaW5rcy5sZW5ndGggKyBhdWRpb0xpbmtzLmxlbmd0aCArIHRleHRMaW5rcy5sZW5ndGg7XG4gIGNvbnNvbGUuaW5mbyhcIkFERElORyAtPj4+IFwiLCBtYW5pZmVzdElkICsgXCIsXCIsIGNvdW50LCBcImZyYWdtZW50c1wiKTtcbiAgbGV0IG9wdGlvbnMgPSB7fTtcbiAgdGhpcy5zdG9yYWdlLnBhcmFtcy5zZXRJdGVtKG1hbmlmZXN0SWQsIHRoaXMuX25hbWVzLmRvd25sb2FkSW5Qcm9ncmVzcywgMCk7XG4gIGxldCBtYXhEb3dubG9hZEluUHJvZ3Jlc3M7XG4gIGNvbnN0IHRocmVhZFJ1bGVzID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5kb3dubG9hZGluZ1RocmVhZHNSdWxlcztcblxuICBmb3IgKGxldCBpID0gMCwgaiA9IHRocmVhZFJ1bGVzLml0ZW1zLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGlmIChjb3VudCA8PSB0aHJlYWRSdWxlcy5pdGVtc1tpXS5tYXgpIHtcbiAgICAgIG9wdGlvbnNbdGhyZWFkUnVsZXMudGhyZWFkTmFtZV0gPSB0aHJlYWRSdWxlcy5pdGVtc1tpXS50aHJlYWRzO1xuICAgICAgbWF4RG93bmxvYWRJblByb2dyZXNzID0gdGhyZWFkUnVsZXMuaXRlbXNbaV0uZmlsZXM7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB0aGlzLnN0b3JhZ2UucGFyYW1zLnNldEl0ZW0obWFuaWZlc3RJZCwgdGhpcy5fbmFtZXMub3B0aW9ucywgb3B0aW9ucyk7XG4gIHRoaXMuc3RvcmFnZS5wYXJhbXMuc2V0SXRlbShtYW5pZmVzdElkLCB0aGlzLl9uYW1lcy5tYXhEb3dubG9hZEluUHJvZ3Jlc3MsIG1heERvd25sb2FkSW5Qcm9ncmVzcyk7XG5cbiAgLy9kb3dubG9hZCBvcmRlciBjYW4gaGVscCB0byBzdG9wIGRvd25sb2FkIG9uZSBtYW5pZmVzdCBhbmQgZG93bmxvYWQgYW5vdGhlciBvciBkb3dubG9hZCB0aGVtIGluIHBhcmFsbGVsXG4gIHRoaXMuX2Rvd25sb2FkT3JkZXJBZGRNYW5pZmVzdChtYW5pZmVzdElkKTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHJldHVybnMge2Jvb2xlYW59IC0gaWYgZG93bmxvYWQgaXMgZmluaXNoZWRcbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuaXNEb3dubG9hZEZpbmlzaGVkID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgcmV0dXJuICF0aGlzLnN0b3JhZ2UubGVmdC5jb3VudChtYW5pZmVzdElkKSAmJiAhdGhpcy5zdG9yYWdlLmRvd25sb2FkaW5nLmNvdW50KG1hbmlmZXN0SWQpO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBpZiBkb3dubG9hZCBpcyBmaW5pc2hlZCBhbmQgc3luY2VkIChpbmZvIHdyaXR0ZW4gb24gZGlzaylcbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuaXNEb3dubG9hZEZpbmlzaGVkQW5kU3luY2VkID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgcmV0dXJuICF0aGlzLnN0b3JhZ2UubGVmdC5jb3VudChtYW5pZmVzdElkKSAmJiAhdGhpcy5zdG9yYWdlLmRvd25sb2FkaW5nLmNvdW50KG1hbmlmZXN0SWQpICYmICF0aGlzLnN0b3JhZ2Uua2V5RXhpc3RzKG1hbmlmZXN0SWQpO1xufTtcblxuXG5Eb3dubG9hZHNDb250cm9sbGVyLnByb3RvdHlwZS5nZXREb3dubG9hZGluZyA9IGZ1bmN0aW9uIChtYW5pZmVzdElkLCBsb2NhbEZpbGUpIHtcbiAgbGV0IGl0ZW1zID0gdGhpcy5zdG9yYWdlLmRvd25sb2FkaW5nLmdldEl0ZW1zKG1hbmlmZXN0SWQpO1xuICBpZiAoICFpdGVtcyApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZvciAodmFyIGxpbmsgaW4gaXRlbXMpIHtcbiAgICBpZiAoaXRlbXMuaGFzT3duUHJvcGVydHkobGluaykpIHtcbiAgICAgIGxldCBkb3dubG9hZCA9IGl0ZW1zW2xpbmtdO1xuICAgICAgbGV0IGRvd25sb2FkUGF0aCA9IHBhdGgubm9ybWFsaXplKGRvd25sb2FkLmxvY2FsVXJsKTtcbiAgICAgIGxldCBsb2NhbCA9ICBwYXRoLm5vcm1hbGl6ZShsb2NhbEZpbGUpO1xuICAgICAgaWYgKGRvd25sb2FkUGF0aCA9PT0gbG9jYWwpIHtcbiAgICAgICAgcmV0dXJuIGRvd25sb2FkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUud2FpdEZvckRvd25sb2FkID0gZnVuY3Rpb24gKGRvd25sb2FkLCBjYWxsYmFjaykge1xuICBsZXQgX29uRG93bmxvYWRFbmQ7XG4gIGxldCBfb25Eb3dubG9hZEVycm9yO1xuXG4gIGxldCByZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIChkb3dubG9hZCkge1xuICAgIGRvd25sb2FkLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLCBfb25Eb3dubG9hZEVuZCk7XG4gICAgZG93bmxvYWQuZXZlbnRzLnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIiwgX29uRG93bmxvYWRFcnJvcik7XG4gIH1cblxuICBfb25Eb3dubG9hZEVuZCA9IGZ1bmN0aW9uIChkb3dubG9hZCkge1xuICAgIHJlbW92ZUxpc3RlbmVyKGRvd25sb2FkKTtcbiAgICBjYWxsYmFjaygpO1xuICB9XG5cbiAgX29uRG93bmxvYWRFcnJvciA9IGZ1bmN0aW9uIChkb3dubG9hZCwgZXJyKSB7XG4gICAgcmVtb3ZlTGlzdGVuZXIoZG93bmxvYWQpO1xuICAgIGNhbGxiYWNrKGVycik7XG4gIH1cblxuICBkb3dubG9hZC5ldmVudHMub24oXCJlbmRcIiwgX29uRG93bmxvYWRFbmQpO1xuICBkb3dubG9hZC5ldmVudHMub24oXCJlcnJvclwiLCBfb25Eb3dubG9hZEVycm9yKTtcbn1cblxuIC8qKlxuICogUGVyZm9ybSBhIHNlZWsgLSB0aGlzIGNoYW5nZXMgb3JkZXIgb2YgZnJhZ21lbnQgZG93bmxvYWQgZm9yIGEgbWFuaWZlc3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtzdHJpbmd9IGxvY2FsRmlsZSAtIGxvY2FsIGZpbGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gY2FsbGJhY2sgdG8gZ2V0IHJlc3VsdFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2Fkc0NvbnRyb2xsZXIucHJvdG90eXBlLnBlcmZvcm1TZWVrID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIGxvY2FsRmlsZSwgY2FsbGJhY2spIHtcbiAgbGV0IHNlbGYgPSB0aGlzO1xuICBsZXQgZG93bmxvYWQ7XG5cbiAgZG93bmxvYWQgPSBzZWxmLmdldERvd25sb2FkaW5nKG1hbmlmZXN0SWQsIGxvY2FsRmlsZSk7XG4gIGlmIChkb3dubG9hZCkge1xuICAgIHNlbGYud2FpdEZvckRvd25sb2FkKGRvd25sb2FkLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGl0ZW1zID0gc2VsZi5zdG9yYWdlLmxlZnQuZ2V0SXRlbXMobWFuaWZlc3RJZCk7XG4gIGlmICggIWl0ZW1zICkge1xuICAgIGNhbGxiYWNrKCdObyBkb3dubG9hZCBmb3VuZCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBpbmRleCA9IGl0ZW1zLmZpbmRJbmRleChmdW5jdGlvbiAoZG93bmxvYWQpIHtcbiAgICBsZXQgZG93bmxvYWRQYXRoID0gcGF0aC5ub3JtYWxpemUoZG93bmxvYWQubG9jYWxVcmwpO1xuICAgIGxldCBsb2NhbCA9ICBwYXRoLm5vcm1hbGl6ZShsb2NhbEZpbGUpO1xuICAgIHJldHVybiAoZG93bmxvYWRQYXRoID09PSBsb2NhbClcbiAgfSk7XG4gIGlmIChpbmRleCA+IC0xKSB7XG5cbiAgICBsZXQgcGFydDEgPSAgaXRlbXMuc2xpY2UoMCwgaW5kZXgpO1xuICAgIGxldCBwYXJ0MiA9ICBpdGVtcy5zbGljZShpbmRleCk7XG5cbiAgICBzZWxmLnN0b3JhZ2UubGVmdC5jbGVhcihtYW5pZmVzdElkKTtcbiAgICBzZWxmLnN0b3JhZ2UubGVmdC5jb25jYXQobWFuaWZlc3RJZCwgcGFydDIpO1xuICAgIHNlbGYuc3RvcmFnZS5sZWZ0LmNvbmNhdChtYW5pZmVzdElkLCBwYXJ0MSk7XG5cbiAgICBpdGVtcyA9IHNlbGYuc3RvcmFnZS5sZWZ0LmdldEl0ZW1zKG1hbmlmZXN0SWQpO1xuICAgIHNlbGYuc3RhcnRRdWV1ZShzZWxmLl9pbmRleE9mTWFuaWZlc3QobWFuaWZlc3RJZCksIHRydWUpO1xuICAgIGRvd25sb2FkID0gc2VsZi5nZXREb3dubG9hZGluZyhtYW5pZmVzdElkLCBsb2NhbEZpbGUpO1xuICAgIGlmIChkb3dubG9hZCkge1xuICAgICAgc2VsZi53YWl0Rm9yRG93bmxvYWQoZG93bmxvYWQsIGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgbm90IHF1ZXVlZCwgcmV0dXJuIGFuIGVycm9yXG4gICAgICBjYWxsYmFjaygnTm8gZG93bmxvYWQgZm91bmQnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY2FsbGJhY2soJ05vIGRvd25sb2FkIGZvdW5kJyk7XG4gIH1cbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtvYmplY3R9IHJlcHJlc2VudGF0aW9ucyAtIG9iamVjdCBjb250YWluaW5nIHZpZGVvLCBhdWRpbyBhbmQgdGV4dCByZXByZXNlbnRhdGlvbnMgaWRzXG4gKiBAcGFyYW0ge3N0cmluZ30gZG93bmxvYWRGb2xkZXIgLSBkb3dubG9hZCBmb2xkZXIgZm9yIHZpZGVvLiBJZiB1bmRlZmluZWQsIHRoZW4gZGVmYXVsdCBkb3dubG9hZCBmb2xkZXIgaXMgdXNlZFxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25TdWNjZXNzIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHN0YXJ0IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25GYWlsdXJlIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHN0YXJ0IGZhaWxlZFxuICogQHBhcmFtIHtib29sZWFufSBmcm9tUmVzdW1lZCAtIGlmIHN0YXJ0IGhhcyBiZWVuIGNhbGxlZCBmcm9tIHJlc3VtZSBhcGkgbWV0aG9kXG4gKiBAcGFyYW0ge3N0cmluZ30gb2xkc3RhdHVzIC0gaWYgZnJvbSByZXN1bWVkLCB0aGVuIGluZGljYXRlcyB0aGUgb2xkIHN0YXR1cyBvZiBkb3dubG9hZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2Fkc0NvbnRyb2xsZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIHJlcHJlc2VudGF0aW9ucywgZG93bmxvYWRGb2xkZXIsICBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgZnJvbVJlc3VtZWQsIG9sZHN0YXR1cykge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgdGhpcy5kb3dubG9hZFN0YXRzLnN0YXJ0KCk7XG4gIGNvbnN0IG1hbmlmZXN0ID0gdGhpcy5fbWFuaWZlc3RDb250cm9sbGVyLmdldE1hbmlmZXN0QnlJZChtYW5pZmVzdElkKTtcbiAgaWYgKCFtYW5pZmVzdCkge1xuICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5OT1RfRk9VTkQsIG1hbmlmZXN0SWQpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgcmVwcmVzZW50YXRpb25zID0gcmVwcmVzZW50YXRpb25zIHx8IHt9O1xuICBsZXQgdmlkZW8gPSByZXByZXNlbnRhdGlvbnMudmlkZW8gfHwgW107XG4gIGlmICghQXJyYXkuaXNBcnJheSh2aWRlbykpIHtcbiAgICB2aWRlbyA9IFt2aWRlb107XG4gIH1cblxuICBsZXQgYXVkaW8gPSByZXByZXNlbnRhdGlvbnMuYXVkaW8gfHwgW107XG4gIGlmICghQXJyYXkuaXNBcnJheShhdWRpbykpIHtcbiAgICBhdWRpbyA9IFthdWRpb107XG4gIH1cblxuICBsZXQgdGV4dCA9IHJlcHJlc2VudGF0aW9ucy50ZXh0IHx8IFtdO1xuICBpZiAoIUFycmF5LmlzQXJyYXkodGV4dCkpIHtcbiAgICB0ZXh0ID0gW3RleHRdO1xuICB9XG5cbiAgY29uc3QgdmlkZW9SID0gbWFuaWZlc3QuZ2V0VmlkZW9SZXByZXNlbnRhdGlvbnMoKTtcbiAgY29uc3QgYXVkaW9SID0gbWFuaWZlc3QuZ2V0QXVkaW9SZXByZXNlbnRhdGlvbnMoKTtcbiAgY29uc3QgdGV4dFIgPSBtYW5pZmVzdC5nZXRUZXh0UmVwcmVzZW50YXRpb25zKCk7XG5cbiAgbGV0IGxvY2FsRG93bmxvYWRGb2xkZXIgPSBwYXRoLnJlc29sdmUoYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5kb3dubG9hZHNGb2xkZXJQYXRoKVxuICBpZiAoZG93bmxvYWRGb2xkZXIpIHtcbiAgICBsb2NhbERvd25sb2FkRm9sZGVyID0gcGF0aC5yZXNvbHZlKGRvd25sb2FkRm9sZGVyKTtcbiAgfVxuICBjb25zdCBsb2NhbFBhdGggPSBwYXRoLnJlc29sdmUobG9jYWxEb3dubG9hZEZvbGRlciArIFwiL1wiICsgbWFuaWZlc3RJZCArIFwiL1wiKTtcbiAgY29uc3QgbWFuaWZlc3RVcmwgPSBtYW5pZmVzdC5nZXRNYW5pZmVzdFVybCgpO1xuICBjb25zdCBtYW5pZmVzdE5hbWUgPSBtYW5pZmVzdC5nZXRNYW5pZmVzdE5hbWUoKTtcblxuICBmdW5jdGlvbiBnZXRNYW5pZmVzdEJhc2VVcmwgKHhtbCwgbWFuaWZlc3RVcmxEb21haW4pIHtcbiAgICBsZXQgbWFuaWZlc3RCYXNlVXJsO1xuICAgIGNvbnN0IE1QRCA9IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIk1QRFwiKVswXTtcbiAgICBpZiAoTVBEKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaiA9IE1QRC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICBpZiAoTVBELmNoaWxkTm9kZXNbaV0ubm9kZU5hbWUgPT09IFwiQmFzZVVSTFwiKSB7XG4gICAgICAgICAgbWFuaWZlc3RCYXNlVXJsID0gTVBELmNoaWxkTm9kZXNbaV0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgaWYgKCFtYW5pZmVzdEJhc2VVcmwubWF0Y2goY29uc3RhbnRzLnJlZ2V4cFByb3RvY29sUmVtb3ZlKSkge1xuICAgICAgICAgICAgbWFuaWZlc3RCYXNlVXJsID0gdXRpbFVybC5qb2luUGF0aChtYW5pZmVzdFVybERvbWFpbiwgbWFuaWZlc3RCYXNlVXJsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFtYW5pZmVzdEJhc2VVcmwpIHtcbiAgICAgIG1hbmlmZXN0QmFzZVVybCA9IG1hbmlmZXN0VXJsRG9tYWluO1xuICAgIH1cbiAgICByZXR1cm4gbWFuaWZlc3RCYXNlVXJsO1xuICB9XG5cbiAgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLl9vZmZsaW5lQ29udHJvbGxlci5nZXRNYW5pZmVzdEluZm9Qcm9taXNlKG1hbmlmZXN0SWQsIHRydWUpLFxuICAgICAgICB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShtYW5pZmVzdElkKSxcbiAgICAgICAgbWtkaXJwUHJvbWlzZShsb2NhbFBhdGgpLFxuICAgICAgXSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSByZXN1bHRzWzBdO1xuICAgICAgICBjb25zdCBzdG9yYWdlSXRlbSA9IHJlc3VsdHNbMV07XG4gICAgICAgIGlmIChzdG9yYWdlSXRlbSAmJiAhc2VsZi5pc0Rvd25sb2FkRmluaXNoZWQobWFuaWZlc3RJZCkpIHtcbiAgICAgICAgICBpZiAoZnJvbVJlc3VtZWQpIHtcbiAgICAgICAgICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5BTFJFQURZX1JFU1VNRUQsIG1hbmlmZXN0SWQpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUuZG93bmxvYWRzLkFMUkVBRFlfU1RBUlRFRCwgbWFuaWZlc3RJZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvL2NvbGxlY3QgTGlua3MgLSBzdGFydFxuICAgICAgICBpZiAoaW5mby5tYW5pZmVzdC52aWRlbykge1xuICAgICAgICAgIHZpZGVvID0gXy51bmlvbih2aWRlbywgaW5mby5tYW5pZmVzdC52aWRlbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZm8ubWFuaWZlc3QuYXVkaW8pIHtcbiAgICAgICAgICBhdWRpbyA9IF8udW5pb24oYXVkaW8sIGluZm8ubWFuaWZlc3QuYXVkaW8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmZvLm1hbmlmZXN0LnRleHQpIHtcbiAgICAgICAgICB0ZXh0ID0gXy51bmlvbih0ZXh0LCBpbmZvLm1hbmlmZXN0LnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRvd25sb2FkZWQgPSBpbmZvLmRvd25sb2FkZWRGaWxlcyB8fCBbXTtcbiAgICAgICAgbGV0IGRvd25sb2FkZWRIYXNoID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gZG93bmxvYWRlZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICBkb3dubG9hZGVkSGFzaFtkb3dubG9hZGVkW2ldLmxvY2FsVXJsXSA9IGRvd25sb2FkZWRbaV07XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVtb3RlUGF0aCA9IGdldE1hbmlmZXN0QmFzZVVybChtYW5pZmVzdC5tYW5pZmVzdFhNTC54bWwsIG1hbmlmZXN0LnVybF9kb21haW4pO1xuICAgICAgICBjb25zdCB2aWRlb0xpbmtzID0gZG93bmxvYWRVdGlsLmdldERvd25sb2FkTGlua3MobWFuaWZlc3RJZCwgbG9jYWxQYXRoLCByZW1vdGVQYXRoLCB2aWRlbywgdmlkZW9SLCBkb3dubG9hZGVkSGFzaCk7XG4gICAgICAgIGNvbnN0IGF1ZGlvTGlua3MgPSBkb3dubG9hZFV0aWwuZ2V0RG93bmxvYWRMaW5rcyhtYW5pZmVzdElkLCBsb2NhbFBhdGgsIHJlbW90ZVBhdGgsIGF1ZGlvLCBhdWRpb1IsIGRvd25sb2FkZWRIYXNoKTtcbiAgICAgICAgY29uc3QgdGV4dExpbmtzID0gZG93bmxvYWRVdGlsLmdldERvd25sb2FkTGlua3MobWFuaWZlc3RJZCwgbG9jYWxQYXRoLCByZW1vdGVQYXRoLCB0ZXh0LCB0ZXh0UiwgZG93bmxvYWRlZEhhc2gpO1xuXG4gICAgICAgIGNvbnN0IGFsbHZpZGVvTGlua3MgPSAgZG93bmxvYWRVdGlsLmdldEFsbExpbmtzKG1hbmlmZXN0SWQsIGxvY2FsUGF0aCwgcmVtb3RlUGF0aCwgdmlkZW8sIHZpZGVvUik7XG4gICAgICAgIGNvbnN0IGFsbGF1ZGlvTGlua3MgPSBkb3dubG9hZFV0aWwuZ2V0QWxsTGlua3MobWFuaWZlc3RJZCwgbG9jYWxQYXRoLCByZW1vdGVQYXRoLCBhdWRpbywgYXVkaW9SKTtcbiAgICAgICAgY29uc3QgYWxsdGV4dExpbmtzID0gZG93bmxvYWRVdGlsLmdldEFsbExpbmtzKG1hbmlmZXN0SWQsIGxvY2FsUGF0aCwgcmVtb3RlUGF0aCwgdGV4dCwgdGV4dFIpO1xuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGFsbHZpZGVvTGlua3MuY29uY2F0KGFsbGF1ZGlvTGlua3MsIGFsbHRleHRMaW5rcyk7XG5cbiAgICAgICAgLy9jb2xsZWN0IExpbmtzIC0gZW5kXG5cbiAgICAgICAgc2VsZi5zdG9yYWdlLmNyZWF0ZUlmTm90RXhpc3RzKG1hbmlmZXN0SWQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLm1hbmlmZXN0LnNldEl0ZW0obWFuaWZlc3RJZCwgXCJ0c1wiLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG4gICAgICAgICAgICAgIHNlbGYuc3RvcmFnZS5tYW5pZmVzdC5zZXRJdGVtKG1hbmlmZXN0SWQsIFwidXJsXCIsIG1hbmlmZXN0VXJsKTtcbiAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLm1hbmlmZXN0LnNldEl0ZW0obWFuaWZlc3RJZCwgXCJuYW1lXCIsIG1hbmlmZXN0TmFtZSk7XG4gICAgICAgICAgICAgIHNlbGYuc3RvcmFnZS5tYW5pZmVzdC5zZXRJdGVtKG1hbmlmZXN0SWQsIFwidmlkZW9cIiwgdmlkZW8pO1xuICAgICAgICAgICAgICBzZWxmLnN0b3JhZ2UubWFuaWZlc3Quc2V0SXRlbShtYW5pZmVzdElkLCBcImF1ZGlvXCIsIGF1ZGlvKTtcbiAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLm1hbmlmZXN0LnNldEl0ZW0obWFuaWZlc3RJZCwgXCJ0ZXh0XCIsIHRleHQpO1xuICAgICAgICAgICAgICBzZWxmLnN0b3JhZ2UubWFuaWZlc3Quc2V0SXRlbShtYW5pZmVzdElkLCBcImZpbGVzXCIsIGFsbEZpbGVzKTtcbiAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLm1hbmlmZXN0LnNldEl0ZW0obWFuaWZlc3RJZCwgXCJmb2xkZXJcIiwgbG9jYWxEb3dubG9hZEZvbGRlcik7XG5cbiAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLmRvd25sb2FkZWQuY2xlYXIobWFuaWZlc3RJZCk7XG4gICAgICAgICAgICAgIHNlbGYuc3RvcmFnZS5kb3dubG9hZGVkLmNvbmNhdChtYW5pZmVzdElkLCBkb3dubG9hZGVkKTtcbiAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLmVycm9ycy5jbGVhcihtYW5pZmVzdElkKTtcblxuICAgICAgICAgICAgICBpZiAoIWZyb21SZXN1bWVkKSB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IGluaXRpYWxpc2Ugc3RhdGUgb2YgbWFuaWZlc3QgaXMgc3RhcnQgaXMgZnJvbSByZXN1bWVcbiAgICAgICAgICAgICAgICAvLyBzdGF0ZSBtdXN0IHN0YXkgdGhlIGxhc3Qgb25lXG4gICAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLnN0YXR1cy5zZXRJdGVtKG1hbmlmZXN0SWQsIFwic3RhdHVzXCIsIFNUQVRVU0VTLkNSRUFURUQpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGluaXQgc3RhdHVzIHdpdGggbGFzdCBzdGF0dXNcbiAgICAgICAgICAgICAgICBzZWxmLnN0b3JhZ2Uuc3RhdHVzLnNldEl0ZW0obWFuaWZlc3RJZCwgXCJzdGF0dXNcIiwgb2xkc3RhdHVzKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLnN5bmMobWFuaWZlc3RJZCwgW1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RvcmFnZS5zdG9yZXMuTUFOSUZFU1QsXG4gICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLnN0b3Jlcy5TVEFUVVNcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX21hbmlmZXN0Q29udHJvbGxlci5zYXZlT3JpZ2luYWxNYW5pZmVzdE9uY2VPbmx5KG1hbmlmZXN0SWQpLFxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9tYW5pZmVzdENvbnRyb2xsZXIuc2F2ZU1hbmlmZXN0V2l0aENob3NlblJlcHJlc2VudGF0aW9ucyhtYW5pZmVzdElkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgdmlkZW86IHZpZGVvLFxuICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBhdWRpbyxcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsb2NhbFBhdGgpXG4gICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9hZGREb3dubG9hZHMobWFuaWZlc3RJZCwgdmlkZW9MaW5rcywgYXVkaW9MaW5rcywgdGV4dExpbmtzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuX2luZGV4T2ZNYW5pZmVzdChtYW5pZmVzdElkKSA+IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkubnVtYmVyT2ZNYW5pZmVzdHNJblBhcmFsbGVsIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RvcmFnZS5zdGF0dXMuc2V0SXRlbShtYW5pZmVzdElkLCBcInN0YXR1c1wiLCBTVEFUVVNFUy5RVUVVRUQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RvcmFnZS5zdGF0dXMuc2V0SXRlbShtYW5pZmVzdElkLCBcInN0YXR1c1wiLCBTVEFUVVNFUy5TVEFSVEVEKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZWxmLnN0b3JhZ2Uuc3RhdHVzLnNldEl0ZW0obWFuaWZlc3RJZCwgXCJsZWZ0XCIsIHNlbGYuc3RvcmFnZS5sZWZ0LmNvdW50KG1hbmlmZXN0SWQpKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLnN5bmMobWFuaWZlc3RJZCwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0b3JhZ2Uuc3RvcmVzLkRPV05MT0FEUy5ET1dOTE9BREVELFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0b3JhZ2Uuc3RvcmVzLlNUQVRVU1xuICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kb3dubG9hZFN0YXRzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNEb3dubG9hZEZpbmlzaGVkKG1hbmlmZXN0SWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdG9yYWdlLnN0YXR1cy5zZXRJdGVtKG1hbmlmZXN0SWQsIFwic3RhdHVzXCIsIFNUQVRVU0VTLkZJTklTSEVEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0b3JhZ2Uuc3luYyhtYW5pZmVzdElkLCBzZWxmLnN0b3JhZ2Uuc3RvcmVzLlNUQVRVUylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZpbmlzaChtYW5pZmVzdElkLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9uRmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kb3dubG9hZFN0YXRzLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFydFF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9uRmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgICB9LCBvbkZhaWx1cmUpO1xuICAgICAgICAgICAgfSwgb25GYWlsdXJlKTtcbiAgICAgIH0sIG9uRmFpbHVyZSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXByZXNlbnRhdGlvbnMgLSBvYmplY3QgY29udGFpbmluZyB2aWRlbywgYXVkaW8gYW5kIHRleHQgcmVwcmVzZW50YXRpb25zIGlkc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gb25TdWNjZXNzIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHN0YXJ0IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25GYWlsdXJlIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHN0YXJ0IGZhaWxlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2Fkc0NvbnRyb2xsZXIucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uIChtYW5pZmVzdElkLCByZXByZXNlbnRhdGlvbnMsICBvblN1Y2Nlc3MsIG9uRmFpbHVyZSkge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgdGhpcy5fb2ZmbGluZUNvbnRyb2xsZXIuZ2V0TWFuaWZlc3RJbmZvKG1hbmlmZXN0SWQsIGZ1bmN0aW9uIChlcnIsIGluZm8pIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuUkVTVU1JTkdfRkFJTEVELCBtYW5pZmVzdElkKSwgZXJyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGZvbGRlciA9IGluZm8ubWFuaWZlc3QuZm9sZGVyO1xuICAgICAgaWYgKCFmb2xkZXIpIHtcbiAgICAgICAgLy8gdXNlIGRlZmF1bHQgZG93bmxvYWQgZm9sZGVyIHBhdGhcbiAgICAgICAgZm9sZGVyID0gIHBhdGgucmVzb2x2ZShhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLmRvd25sb2Fkc0ZvbGRlclBhdGgpXG4gICAgICB9XG4gICAgICBzZWxmLnN0YXJ0KG1hbmlmZXN0SWQsIHJlcHJlc2VudGF0aW9ucywgZm9sZGVyLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgdHJ1ZSwgaW5mby5zdGF0dXMpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBkb3dubG9hZCBmb2xkZXIgcGF0aFxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gZG93bmxvYWRGb2xkZXIgLSBuZXcgZG93bmxvYWQgZm9sZGVyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblN1Y2Nlc3MgLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gc3RhcnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbkZhaWx1cmUgLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gc3RhcnQgZmFpbGVkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlRG93bmxvYWRGb2xkZXIgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgZG93bmxvYWRGb2xkZXIsIG9uU3VjY2Vzcywgb25GYWlsdXJlKSB7XG4gIFByb21pc2UuYWxsKFtcbiAgICBuZXcgUmVhZEl0ZW0obWFuaWZlc3RJZCwgYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5zdG9yZXMuTUFOSUZFU1QpLFxuICAgIF0pXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICBjb25zdCBtYW5pZmVzdFNldHRpbmdzID0gcmVzdWx0c1swXVxuICAgIGlmICghbWFuaWZlc3RTZXR0aW5ncykge1xuICAgICAgb25GYWlsdXJlKHRyYW5zbGF0aW9uLmdldEVycm9yKHRyYW5zbGF0aW9uLmUubWFuaWZlc3RzLk5PVF9GT1VORCwgbWFuaWZlc3RJZCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1hbmlmZXN0U2V0dGluZ3MuZm9sZGVyID0gZG93bmxvYWRGb2xkZXJcbiAgICBjb25zdCBmbHVzaEl0ZW0gPSBuZXcgRmx1c2hJdGVtKG1hbmlmZXN0SWQsIGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc3RvcmVzLk1BTklGRVNULCBtYW5pZmVzdFNldHRpbmdzKTtcbiAgICBmbHVzaEl0ZW0uc2F2ZSgpXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBvblN1Y2Nlc3MoKTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBvbkZhaWx1cmUodHJhbnNsYXRpb24uZ2V0RXJyb3IodHJhbnNsYXRpb24uZS5kb3dubG9hZHMuU0FWSU5HX0RBVEFfRkFJTEVELCBtYW5pZmVzdElkKSwgZXJyKTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgIG9uRmFpbHVyZSh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLmRvd25sb2Fkcy5VUERBVEVfRE9XTkxPQURfRk9MREVSX0ZBSUxFRCwgbWFuaWZlc3RJZCksIGVycik7XG4gIH0pXG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uU3VjY2VzcyAtIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbiBzdG9wIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogQHBhcmFtIHtmdW5jdGlvbn0gb25GYWlsdXJlIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHN0b3AgZmFpbGVkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIChtYW5pZmVzdElkLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSkge1xuICB0aGlzLl9zdG9wV2l0aFN0YXR1cyhtYW5pZmVzdElkLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSwgU1RBVFVTRVMuU1RPUFBFRClcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtib29sZWFufSBpZ25vcmVTdG9wcGVkIC0gZG9uJ3QgZmFpbCBpZiBkb3dubG9hZCBoYXMgYmVlbiBhbHJlYWR5IHN0b3BwZWRcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHByb21pc2VcbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuc3RvcFByb21pc2UgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgaWdub3JlU3RvcHBlZCkge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBzZWxmLnN0b3AobWFuaWZlc3RJZCwgcmVzb2x2ZSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBpZiAoaWdub3JlU3RvcHBlZCAmJiBlcnIuY29kZSA9PT0gQ09ERVMuRVJST1JTLlNUT1BQRUQpIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZSgpXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbkRvd25sb2Fkc0NvbnRyb2xsZXIucHJvdG90eXBlLnJlbW92ZVByb21pc2UgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCkge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBzZWxmLnN0b3BQcm9taXNlKG1hbmlmZXN0SWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnN0b3JhZ2UucmVtb3ZlSXRlbShtYW5pZmVzdElkKVxuICAgICAgICAgICAgICAudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgLy9hbHJlYWR5IHN0b3BwZWQsIGNvbnRpbnVlXG4gICAgICAgICAgaWYgKGVyciAmJiBlcnIuY29kZSA9PT0gQ09ERVMuRVJST1JTLlNUT1BQRUQpIHtcbiAgICAgICAgICAgIHNlbGYuc3RvcmFnZS5yZW1vdmVJdGVtKG1hbmlmZXN0SWQpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBsaW5rIC0gb2JqZWN0IGxpbmsgdG8gYmUgZG93bmxvYWRlZFxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZHNDb250cm9sbGVyLnByb3RvdHlwZS5fYWRkTGlua1RvRG93bmxvYWQgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgbGluaykge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgbGluayk7XG4gIGNvbnN0IGRvd25sb2FkID0gbmV3IERvd25sb2FkKHBhcmFtcywgc2VsZi5zdG9yYWdlLnBhcmFtcy5nZXRJdGVtKG1hbmlmZXN0SWQsIHNlbGYuX25hbWVzLm9wdGlvbnMpKTtcbiAgY29uc3QgZG93bmxvYWRIYXNoID0gc2VsZi5fZ2V0RG93bmxvYWRIYXNoKGxpbmspO1xuICBzZWxmLnN0b3JhZ2UuZG93bmxvYWRpbmcuc2V0SXRlbShtYW5pZmVzdElkLCBkb3dubG9hZEhhc2gsIGRvd25sb2FkKTtcbiAgc2VsZi5zdG9yYWdlLnN0YXR1cy5zZXRJdGVtKG1hbmlmZXN0SWQsIFwibGVmdFwiLCBzZWxmLnN0b3JhZ2UubGVmdC5jb3VudChtYW5pZmVzdElkKSArIHNlbGYuc3RvcmFnZS5lcnJvcnMuY291bnQobWFuaWZlc3RJZCkpO1xuICBzZWxmLnN0b3JhZ2Uuc3luYyhtYW5pZmVzdElkLCBzZWxmLnN0b3JhZ2Uuc3RvcmVzLlNUQVRVUyk7XG4gIGRvd25sb2FkLmV2ZW50cy5vbihcImVuZFwiLCBzZWxmLl9vbkRvd25sb2FkRW5kKTtcbiAgZG93bmxvYWQuZXZlbnRzLm9uKFwiZXJyb3JcIiwgc2VsZi5fb25Eb3dubG9hZEVycm9yKTtcbiAgZG93bmxvYWQuc3RhcnQoKTtcblxuICByZXR1cm4gZG93bmxvYWQ7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW25leHRNYW5pZmVzdFBvc2l0aW9uSW5BcnJheV0gLSBpbmRleCBmcm9tIGFycmF5IHRvIGRlY2lkZSB3aGljaCBtYW5pZmVzdCBzaG91bGQgYmUgZG93bmxvYWRlZCBuZXh0XG4gKiAgIChxdWV1ZSlcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9yY2VEb3dubG9hZCB0cnVlIHRvIGZvcmNlIG5leHQgZG93bmxvYWQgdG8gYmUgcXVldWVkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRzQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRRdWV1ZSA9IGZ1bmN0aW9uIChuZXh0TWFuaWZlc3RQb3NpdGlvbkluQXJyYXksIGZvcmNlRG93bmxvYWQpIHtcbiAgbGV0IGNvdW50LCBkb3dubG9hZHNJblByb2dyZXNzLCBsaW5rLCBtYW5pZmVzdElkLCBtYXhEb3dubG9hZHM7XG4gIGlmICh0eXBlb2YgbmV4dE1hbmlmZXN0UG9zaXRpb25JbkFycmF5ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbmV4dE1hbmlmZXN0UG9zaXRpb25JbkFycmF5ID0gMDtcbiAgfVxuXG4gIG1hbmlmZXN0SWQgPSB0aGlzLl9kb3dubG9hZE9yZGVyR2V0TWFuaWZlc3RJZChuZXh0TWFuaWZlc3RQb3NpdGlvbkluQXJyYXkpO1xuICBpZiAobWFuaWZlc3RJZCAmJiB0aGlzLmlzRG93bmxvYWRGaW5pc2hlZChtYW5pZmVzdElkKSkge1xuICAgIC8vIHRoZSBtYW5pZmVzdCBpZCB3aWxsIGJlIHJlbW92ZWQgZnJvbSBxdWV1ZSwgd2FpdCBuZXh0IHRpbWUuIFRodXMsIGRvIG5vdCBjaGFuZ2Ugc3RhdHVzXG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChuZXh0TWFuaWZlc3RQb3NpdGlvbkluQXJyYXkgPj0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5udW1iZXJPZk1hbmlmZXN0c0luUGFyYWxsZWwpIHtcbiAgICBpZiAobWFuaWZlc3RJZCkge1xuICAgICAgdGhpcy5zdG9yYWdlLnN0YXR1cy5zZXRJdGVtKG1hbmlmZXN0SWQsIFwic3RhdHVzXCIsIFNUQVRVU0VTLlFVRVVFRCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnN0b3JhZ2Uuc3RhdHVzLnNldEl0ZW0obWFuaWZlc3RJZCwgXCJzdGF0dXNcIiwgU1RBVFVTRVMuU1RBUlRFRCk7XG4gIH1cblxuICBpZiAoIW1hbmlmZXN0SWQpIHtcbiAgICBjb3VudCA9IDA7XG4gICAgbGV0IGksIGosIGl0ZW1zO1xuICAgIGl0ZW1zID0gdGhpcy5zdG9yYWdlLmdldEtleXMoKTtcbiAgICBmb3IgKGkgPSAwLCBqID0gaXRlbXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBjb3VudCArPSB0aGlzLnN0b3JhZ2UucGFyYW1zLmNvdW50KGl0ZW1zW2ldLCB0aGlzLl9uYW1lcy5kb3dubG9hZEluUHJvZ3Jlc3MpO1xuICAgIH1cbiAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgIHRoaXMuZG93bmxvYWRTdGF0cy5zdG9wKCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBkb3dubG9hZHNJblByb2dyZXNzID0gdGhpcy5zdG9yYWdlLnBhcmFtcy5nZXRJdGVtKG1hbmlmZXN0SWQsIHRoaXMuX25hbWVzLmRvd25sb2FkSW5Qcm9ncmVzcyk7XG4gIG1heERvd25sb2FkcyA9IHRoaXMuc3RvcmFnZS5wYXJhbXMuZ2V0SXRlbShtYW5pZmVzdElkLCB0aGlzLl9uYW1lcy5tYXhEb3dubG9hZEluUHJvZ3Jlc3MpO1xuICBpZiAoKGRvd25sb2Fkc0luUHJvZ3Jlc3MgPCBtYXhEb3dubG9hZHMgLSAxKSB8fCBmb3JjZURvd25sb2FkKSB7XG4gICAgbGluayA9IHRoaXMuc3RvcmFnZS5sZWZ0LnNoaWZ0KG1hbmlmZXN0SWQpO1xuICAgIGlmIChsaW5rKSB7XG4gICAgICB0aGlzLnN0b3JhZ2UucGFyYW1zLmluY3JlYXNlKG1hbmlmZXN0SWQsIHRoaXMuX25hbWVzLmRvd25sb2FkSW5Qcm9ncmVzcyk7XG4gICAgICB0aGlzLl9hZGRMaW5rVG9Eb3dubG9hZChtYW5pZmVzdElkLCBsaW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9jaGVjayBuZXh0IG1hbmlmZXN0XG4gICAgICBuZXh0TWFuaWZlc3RQb3NpdGlvbkluQXJyYXkrKztcbiAgICB9XG4gICAgdGhpcy5zdGFydFF1ZXVlKG5leHRNYW5pZmVzdFBvc2l0aW9uSW5BcnJheSk7XG4gIH0gZWxzZSBpZiAoYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5udW1iZXJPZk1hbmlmZXN0c0luUGFyYWxsZWwgPiAxICYmIG5leHRNYW5pZmVzdFBvc2l0aW9uSW5BcnJheSA8IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkubnVtYmVyT2ZNYW5pZmVzdHNJblBhcmFsbGVsKSB7XG4gICAgbmV4dE1hbmlmZXN0UG9zaXRpb25JbkFycmF5Kys7XG4gICAgdGhpcy5zdGFydFF1ZXVlKG5leHRNYW5pZmVzdFBvc2l0aW9uSW5BcnJheSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRG93bmxvYWRzQ29udHJvbGxlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///83\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar mkdirp = __webpack_require__(13);\n/**\n *\n * @param {string} localPath - local path\n * @returns {Promise} promise\n */\n\n\nmodule.exports = function (localPath) {\n  return new Promise(function (resolve, reject) {\n    mkdirp(localPath, function (err) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve();\n      }\n    });\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9ta2RpcnAtcHJvbWlzZS5qcz83ZWViIl0sIm5hbWVzIjpbIm1rZGlycCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwibG9jYWxQYXRoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnIiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLE1BQU0sR0FBR0MsbUJBQU8sQ0FBQyxFQUFELENBQXRCO0FBRUE7Ozs7Ozs7QUFLQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLFNBQVYsRUFBcUI7QUFDcEMsU0FBTyxJQUFJQyxPQUFKLENBQVksVUFBVUMsT0FBVixFQUFtQkMsTUFBbkIsRUFBMkI7QUFDNUNQLFVBQU0sQ0FBQ0ksU0FBRCxFQUFZLFVBQVVJLEdBQVYsRUFBZTtBQUMvQixVQUFJQSxHQUFKLEVBQVM7QUFDUEQsY0FBTSxDQUFDQyxHQUFELENBQU47QUFDRCxPQUZELE1BRU87QUFDTEYsZUFBTztBQUNSO0FBQ0YsS0FOSyxDQUFOO0FBT0QsR0FSTSxDQUFQO0FBU0QsQ0FWRCIsImZpbGUiOiI4NC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgbWtkaXJwID0gcmVxdWlyZSgnbWtkaXJwJyk7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbFBhdGggLSBsb2NhbCBwYXRoXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gcHJvbWlzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsb2NhbFBhdGgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBta2RpcnAobG9jYWxQYXRoLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZSgpXG4gICAgICB9XG4gICAgfSk7XG4gIH0pXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///84\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar _ = __webpack_require__(5);\n\nvar domain = __webpack_require__(86);\n\nvar DownloadFileNoHead = __webpack_require__(87);\n\nvar DownloadFile = __webpack_require__(88);\n\nvar mkdirp = __webpack_require__(13);\n\nvar appSettings = __webpack_require__(1);\n\nvar EventEmitter = __webpack_require__(14).EventEmitter;\n\nvar STATUSES = __webpack_require__(8);\n/**\n *\n * @param {object} params - parameters connected with download like id, bandwidth, contentType, remoteUrl, localUrl\n * see util class {@link downloadUtil.getDownloadLinks}\n * @param {object} options - options chosen for whole manifest, like number of chunks, retry,\n * @constructor\n */\n\n\nfunction Download(params, options) {\n  this._defaults = {};\n  this._defaults.threads = appSettings.getSettings().downloadingThreadsRules.threads;\n  this.status = STATUSES.CREATED;\n  Object.assign(this, params);\n  this._options = Object.assign(this._defaults, options);\n  this._options.maxDownloadRetry = appSettings.getSettings().MAX_ERRORS_DOWNLOAD_RETRY;\n  this._options.maxDownloadChunkRetry = appSettings.getSettings().MAX_ERRORS_DOWNLOAD_CHUNK_RETRY;\n  this._options.maxDownloadChunkInternetRetry = appSettings.getSettings().MAX_INTERNET_ERRORS_DOWNLOAD_CHUNK_RETRY;\n  this._options.timeout = appSettings.getSettings().times.DOWNLOAD_TIMEOUT;\n  this._options.retryTimeout = appSettings.getSettings().times.RETRY_TIMEOUT;\n  this._options.useChunkedEncoding = appSettings.getSettings().useChunkedEncoding;\n  this._options.useHeadRequests = appSettings.getSettings().useHeadRequests;\n  this._options.noCache = appSettings.getSettings().noCache;\n  this.stats = {\n    available: 0,\n    downloaded: 0,\n    file_size: 0,\n    writeProgress: 0\n  };\n\n  _.bindAll(this, "_onError", "_onEnd", "_onData", "_updateStats", "_attachEvents", "_removeEvents", "_removeEventsOnStop");\n\n  this.events = new EventEmitter();\n}\n/**\n * @private\n * @returns {void}\n */\n\n\nDownload.prototype._attachEvents = function () {\n  this._dl.on(\'error\', this._onError);\n\n  this._dl.on(\'end\', this._onEnd);\n\n  this._dl.on(\'data\', this._onData);\n};\n/**\n *\n * @param {function} callback - callback to be invoked then local path is created\n * @private\n * @returns {void}\n */\n\n\nDownload.prototype._createLocalPath = function (callback) {\n  var folders = this.localUrl.split("/");\n  folders = folders.slice(0, folders.length - 1);\n  folders = folders.join("/");\n  mkdirp(folders, callback);\n};\n/**\n *\n * @private\n * @returns {void}\n */\n\n\nDownload.prototype._onData = function () {\n  this._updateStats();\n};\n/**\n * @private\n * @returns {void}\n */\n\n\nDownload.prototype._onEnd = function () {\n  this.status = STATUSES.FINISHED;\n\n  this._updateStats();\n\n  this._removeEvents();\n\n  this.events.emit("end", this);\n};\n/**\n *\n * @param {object} data - error data\n * @private\n * @returns {void}\n */\n\n\nDownload.prototype._onError = function (data) {\n  var self = this;\n  this.status = STATUSES.ERROR;\n  data = data || {};\n  var message = data.message || "";\n\n  self._removeEvents();\n\n  self._updateStats(); // notify only if there exists any error listener (from downloads controller)\n  // otherwise EventEmitter throws an error\n\n\n  if (self.events.listeners(\'error\').length) {\n    self.events.emit("error", self, message);\n  }\n};\n\nDownload.prototype._onDomainError = function (data) {\n  var self = this;\n  data = data || {};\n  var message = data.message || "";\n\n  if (self._dl) {\n    if (message === \'net::ERR_NETWORK_CHANGED\' || message === \'net::ERR_SPDY_PROTOCOL_ERROR\' || message === \'net::ERR_HTTP2_PROTOCOL_ERROR\') {\n      // network changed during download, retry download\n      self.stop(function () {\n        self.start();\n      });\n    } else {\n      // stop current download to release file stream and notify error\n      self.stop(function () {\n        self._onError(data);\n      });\n    }\n  } else {\n    self._onError(data);\n  }\n};\n/**\n * @private\n * @returns {void}\n */\n\n\nDownload.prototype._removeEvents = function () {\n  if (typeof this._dl.removeListener === "function") {\n    this._dl.removeListener(\'error\', this._onError);\n\n    this._dl.removeListener(\'end\', this._onEnd);\n\n    this._dl.removeListener(\'data\', this._onData);\n  }\n};\n/**\n * @private\n * @returns {void}\n */\n\n\nDownload.prototype._removeEventsOnStop = function () {\n  if (this._dl && typeof this._dl.removeListener === "function") {\n    this._dl.removeListener(\'error\', this._onError);\n\n    this._dl.removeListener(\'end\', this._onEnd);\n  }\n};\n/**\n * @private\n * @returns {void}\n */\n\n\nDownload.prototype._updateStats = function () {\n  if (this.status === STATUSES.FINISHED) {\n    this.stats.available = this._dl.file_size;\n    this.stats.writeProgress = 1;\n  } else {\n    this.stats.available = this._dl.available;\n    this.stats.writeProgress = this._dl.writeProgress;\n  }\n\n  this.stats.downloaded = this._dl.downloaded;\n  this.stats.file_size = this._dl.file_size;\n};\n/**\n * @returns {void}\n */\n\n\nDownload.prototype.start = function () {\n  var self = this;\n  this.status = STATUSES.STARTED;\n\n  this._createLocalPath(function (err) {\n    if (err) {\n      self._onError(err);\n\n      return;\n    } // NOTE: domain module is marked to be deprecated in the future,\n    //       we will use it until NodeJS will propose alternative or\n    //       rewrite with promises\n\n\n    var d = domain.create();\n    d.on(\'error\', function (err) {\n      var message = \'\';\n\n      if (err) {\n        message = err.code || err.message || "";\n      } // this needs to be disposed otherwise it might complain about unhandled error.\n\n\n      if (typeof d.dispose === "function") {\n        d.dispose();\n      }\n\n      self._onDomainError({\n        message: message\n      });\n    });\n    d.run(function () {\n      self._dl = self.createDownloader(self.remoteUrl, self.localUrl, self._options);\n\n      self._attachEvents();\n\n      self._dl.start();\n    });\n  });\n};\n/**\n * Creates file downloader\n * @param {string} [remoteUrl] - url of fragment\n * @param {string} [localUrl] - local url where to download fragment\n * @param {object} [options] - some options\n * @returns {void}\n */\n\n\nDownload.prototype.createDownloader = function (remoteUrl, localUrl, options) {\n  if (this._options.useHeadRequests) {\n    return new DownloadFile(remoteUrl, localUrl, options);\n  } else {\n    return new DownloadFileNoHead(remoteUrl, localUrl, options);\n  }\n};\n/**\n * @param {function} [resolve] - callback to be invoked when stop was successfully\n * @returns {void}\n */\n\n\nDownload.prototype.stop = function (resolve) {\n  var self = this;\n  this.status = STATUSES.STOPPED;\n\n  this._removeEventsOnStop();\n\n  if (typeof resolve !== "function") {\n    resolve = function resolve() {};\n  }\n\n  if (this._dl) {\n    var d = domain.create();\n    d.on(\'error\', function () {\n      resolve();\n    });\n    d.run(function () {\n      self._dl.on(\'error\', function () {\n        resolve();\n      });\n\n      self._dl.on(\'end\', function () {\n        resolve();\n      });\n\n      self._dl.stop();\n    });\n  } else {\n    resolve();\n  }\n};\n/**\n *\n * @returns {Promise} - promise\n */\n\n\nDownload.prototype.stopPromise = function () {\n  var self = this;\n  return new Promise(function (resolve) {\n    self.stop(function () {\n      resolve();\n    });\n  });\n};\n\nmodule.exports = Download;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL2Rvd25sb2FkLmpzPzE4MTUiXSwibmFtZXMiOlsiXyIsInJlcXVpcmUiLCJkb21haW4iLCJEb3dubG9hZEZpbGVOb0hlYWQiLCJEb3dubG9hZEZpbGUiLCJta2RpcnAiLCJhcHBTZXR0aW5ncyIsIkV2ZW50RW1pdHRlciIsIlNUQVRVU0VTIiwiRG93bmxvYWQiLCJwYXJhbXMiLCJvcHRpb25zIiwiX2RlZmF1bHRzIiwidGhyZWFkcyIsImdldFNldHRpbmdzIiwiZG93bmxvYWRpbmdUaHJlYWRzUnVsZXMiLCJzdGF0dXMiLCJDUkVBVEVEIiwiT2JqZWN0IiwiYXNzaWduIiwiX29wdGlvbnMiLCJtYXhEb3dubG9hZFJldHJ5IiwiTUFYX0VSUk9SU19ET1dOTE9BRF9SRVRSWSIsIm1heERvd25sb2FkQ2h1bmtSZXRyeSIsIk1BWF9FUlJPUlNfRE9XTkxPQURfQ0hVTktfUkVUUlkiLCJtYXhEb3dubG9hZENodW5rSW50ZXJuZXRSZXRyeSIsIk1BWF9JTlRFUk5FVF9FUlJPUlNfRE9XTkxPQURfQ0hVTktfUkVUUlkiLCJ0aW1lb3V0IiwidGltZXMiLCJET1dOTE9BRF9USU1FT1VUIiwicmV0cnlUaW1lb3V0IiwiUkVUUllfVElNRU9VVCIsInVzZUNodW5rZWRFbmNvZGluZyIsInVzZUhlYWRSZXF1ZXN0cyIsIm5vQ2FjaGUiLCJzdGF0cyIsImF2YWlsYWJsZSIsImRvd25sb2FkZWQiLCJmaWxlX3NpemUiLCJ3cml0ZVByb2dyZXNzIiwiYmluZEFsbCIsImV2ZW50cyIsInByb3RvdHlwZSIsIl9hdHRhY2hFdmVudHMiLCJfZGwiLCJvbiIsIl9vbkVycm9yIiwiX29uRW5kIiwiX29uRGF0YSIsIl9jcmVhdGVMb2NhbFBhdGgiLCJjYWxsYmFjayIsImZvbGRlcnMiLCJsb2NhbFVybCIsInNwbGl0Iiwic2xpY2UiLCJsZW5ndGgiLCJqb2luIiwiX3VwZGF0ZVN0YXRzIiwiRklOSVNIRUQiLCJfcmVtb3ZlRXZlbnRzIiwiZW1pdCIsImRhdGEiLCJzZWxmIiwiRVJST1IiLCJtZXNzYWdlIiwibGlzdGVuZXJzIiwiX29uRG9tYWluRXJyb3IiLCJzdG9wIiwic3RhcnQiLCJyZW1vdmVMaXN0ZW5lciIsIl9yZW1vdmVFdmVudHNPblN0b3AiLCJTVEFSVEVEIiwiZXJyIiwiZCIsImNyZWF0ZSIsImNvZGUiLCJkaXNwb3NlIiwicnVuIiwiY3JlYXRlRG93bmxvYWRlciIsInJlbW90ZVVybCIsInJlc29sdmUiLCJTVE9QUEVEIiwic3RvcFByb21pc2UiLCJQcm9taXNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsQ0FBQyxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBakI7O0FBQ0EsSUFBTUMsTUFBTSxHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBdEI7O0FBQ0EsSUFBTUUsa0JBQWtCLEdBQUdGLG1CQUFPLENBQUMsRUFBRCxDQUFsQzs7QUFDQSxJQUFNRyxZQUFZLEdBQUdILG1CQUFPLENBQUMsRUFBRCxDQUE1Qjs7QUFDQSxJQUFNSSxNQUFNLEdBQUdKLG1CQUFPLENBQUMsRUFBRCxDQUF0Qjs7QUFFQSxJQUFNSyxXQUFXLEdBQUdMLG1CQUFPLENBQUMsQ0FBRCxDQUEzQjs7QUFDQSxJQUFNTSxZQUFZLEdBQUdOLG1CQUFPLENBQUMsRUFBRCxDQUFQLENBQWtCTSxZQUF2Qzs7QUFDQSxJQUFNQyxRQUFRLEdBQUdQLG1CQUFPLENBQUMsQ0FBRCxDQUF4QjtBQUdBOzs7Ozs7Ozs7QUFPQSxTQUFTUSxRQUFULENBQW1CQyxNQUFuQixFQUEyQkMsT0FBM0IsRUFBb0M7QUFDbEMsT0FBS0MsU0FBTCxHQUFpQixFQUFqQjtBQUNBLE9BQUtBLFNBQUwsQ0FBZUMsT0FBZixHQUF5QlAsV0FBVyxDQUFDUSxXQUFaLEdBQTBCQyx1QkFBMUIsQ0FBa0RGLE9BQTNFO0FBQ0EsT0FBS0csTUFBTCxHQUFjUixRQUFRLENBQUNTLE9BQXZCO0FBQ0FDLFFBQU0sQ0FBQ0MsTUFBUCxDQUFjLElBQWQsRUFB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R0FBTCxDQUFTQyxFQUFULENBQVksT0FBWixFQUFxQixZQUFZO0FBQy9CbUMsZUFBTztBQUNSLE9BRkQ7O0FBR0FsQixVQUFJLENBQUNsQixHQUFMLENBQVNDLEVBQVQsQ0FBWSxLQUFaLEVBQW1CLFlBQVk7QUFDN0JtQyxlQUFPO0FBQ1IsT0FGRDs7QUFHQWxCLFVBQUksQ0FBQ2xCLEdBQUwsQ0FBU3VCLElBQVQ7QUFDRCxLQVJEO0FBU0QsR0FkRCxNQWNPO0FBQ0xhLFdBQU87QUFDUjtBQUNGLENBekJEO0FBMkJBOzs7Ozs7QUFJQXZFLFFBQVEsQ0FBQ2lDLFNBQVQsQ0FBbUJ3QyxXQUFuQixHQUFpQyxZQUFZO0FBQzNDLE1BQU1wQixJQUFJLEdBQUcsSUFBYjtBQUNBLFNBQU8sSUFBSXFCLE9BQUosQ0FBWSxVQUFVSCxPQUFWLEVBQW1CO0FBQ3BDbEIsUUFBSSxDQUFDSyxJQUFMLENBQVUsWUFBWTtBQUNwQmEsYUFBTztBQUNSLEtBRkQ7QUFHRCxHQUpNLENBQVA7QUFLRCxDQVBEOztBQVNBSSxNQUFNLENBQUNDLE9BQVAsR0FBaUI1RSxRQUFqQiIsImZpbGUiOiI4NS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgXyA9IHJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpO1xuY29uc3QgZG9tYWluID0gcmVxdWlyZSgnZG9tYWluJyk7XG5jb25zdCBEb3dubG9hZEZpbGVOb0hlYWQgPSByZXF1aXJlKFwiLi9kb3dubG9hZC1maWxlLW5vLWhlYWRcIik7XG5jb25zdCBEb3dubG9hZEZpbGUgPSByZXF1aXJlKFwiLi9kb3dubG9hZC1maWxlXCIpO1xuY29uc3QgbWtkaXJwID0gcmVxdWlyZShcIm1rZGlycFwiKTtcblxuY29uc3QgYXBwU2V0dGluZ3MgPSByZXF1aXJlKFwiLi4vYXBwLXNldHRpbmdzXCIpO1xuY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcImV2ZW50c1wiKS5FdmVudEVtaXR0ZXI7XG5jb25zdCBTVEFUVVNFUyA9IHJlcXVpcmUoXCIuL3N0YXR1c2VzXCIpO1xuXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgLSBwYXJhbWV0ZXJzIGNvbm5lY3RlZCB3aXRoIGRvd25sb2FkIGxpa2UgaWQsIGJhbmR3aWR0aCwgY29udGVudFR5cGUsIHJlbW90ZVVybCwgbG9jYWxVcmxcbiAqIHNlZSB1dGlsIGNsYXNzIHtAbGluayBkb3dubG9hZFV0aWwuZ2V0RG93bmxvYWRMaW5rc31cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyBjaG9zZW4gZm9yIHdob2xlIG1hbmlmZXN0LCBsaWtlIG51bWJlciBvZiBjaHVua3MsIHJldHJ5LFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERvd25sb2FkIChwYXJhbXMsIG9wdGlvbnMpIHtcbiAgdGhpcy5fZGVmYXVsdHMgPSB7fTtcbiAgdGhpcy5fZGVmYXVsdHMudGhyZWFkcyA9IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuZG93bmxvYWRpbmdUaHJlYWRzUnVsZXMudGhyZWFkcztcbiAgdGhpcy5zdGF0dXMgPSBTVEFUVVNFUy5DUkVBVEVEO1xuICBPYmplY3QuYXNzaWduKHRoaXMsIHBhcmFtcyk7XG4gIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuX2RlZmF1bHRzLCBvcHRpb25zKTtcbiAgdGhpcy5fb3B0aW9ucy5tYXhEb3dubG9hZFJldHJ5ID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5NQVhfRVJST1JTX0RPV05MT0FEX1JFVFJZO1xuICB0aGlzLl9vcHRpb25zLm1heERvd25sb2FkQ2h1bmtSZXRyeSA9IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuTUFYX0VSUk9SU19ET1dOTE9BRF9DSFVOS19SRVRSWTtcbiAgdGhpcy5fb3B0aW9ucy5tYXhEb3dubG9hZENodW5rSW50ZXJuZXRSZXRyeSA9IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuTUFYX0lOVEVSTkVUX0VSUk9SU19ET1dOTE9BRF9DSFVOS19SRVRSWTtcbiAgdGhpcy5fb3B0aW9ucy50aW1lb3V0ID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS50aW1lcy5ET1dOTE9BRF9USU1FT1VUO1xuICB0aGlzLl9vcHRpb25zLnJldHJ5VGltZW91dCA9IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkudGltZXMuUkVUUllfVElNRU9VVDtcbiAgdGhpcy5fb3B0aW9ucy51c2VDaHVua2VkRW5jb2RpbmcgPSBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnVzZUNodW5rZWRFbmNvZGluZztcbiAgdGhpcy5fb3B0aW9ucy51c2VIZWFkUmVxdWVzdHMgPSBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnVzZUhlYWRSZXF1ZXN0cztcbiAgdGhpcy5fb3B0aW9ucy5ub0NhY2hlID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5ub0NhY2hlO1xuICB0aGlzLnN0YXRzID0ge1xuICAgIGF2YWlsYWJsZTogMCxcbiAgICBkb3dubG9hZGVkOiAwLFxuICAgIGZpbGVfc2l6ZTogMCxcbiAgICB3cml0ZVByb2dyZXNzOiAwXG4gIH07XG4gIF8uYmluZEFsbCh0aGlzLCBcIl9vbkVycm9yXCIsIFwiX29uRW5kXCIsIFwiX29uRGF0YVwiLCBcIl91cGRhdGVTdGF0c1wiLCBcIl9hdHRhY2hFdmVudHNcIiwgXCJfcmVtb3ZlRXZlbnRzXCIsXG4gICAgICBcIl9yZW1vdmVFdmVudHNPblN0b3BcIik7XG5cbiAgdGhpcy5ldmVudHMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZC5wcm90b3R5cGUuX2F0dGFjaEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fZGwub24oJ2Vycm9yJywgdGhpcy5fb25FcnJvcik7XG4gIHRoaXMuX2RsLm9uKCdlbmQnLCB0aGlzLl9vbkVuZCk7XG4gIHRoaXMuX2RsLm9uKCdkYXRhJywgdGhpcy5fb25EYXRhKTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB0aGVuIGxvY2FsIHBhdGggaXMgY3JlYXRlZFxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZC5wcm90b3R5cGUuX2NyZWF0ZUxvY2FsUGF0aCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBsZXQgZm9sZGVycyA9IHRoaXMubG9jYWxVcmwuc3BsaXQoXCIvXCIpO1xuICBmb2xkZXJzID0gZm9sZGVycy5zbGljZSgwLCBmb2xkZXJzLmxlbmd0aCAtIDEpO1xuICBmb2xkZXJzID0gZm9sZGVycy5qb2luKFwiL1wiKTtcbiAgbWtkaXJwKGZvbGRlcnMsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWQucHJvdG90eXBlLl9vbkRhdGEgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3VwZGF0ZVN0YXRzKCk7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWQucHJvdG90eXBlLl9vbkVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5zdGF0dXMgPSBTVEFUVVNFUy5GSU5JU0hFRDtcbiAgdGhpcy5fdXBkYXRlU3RhdHMoKTtcbiAgdGhpcy5fcmVtb3ZlRXZlbnRzKCk7XG4gIHRoaXMuZXZlbnRzLmVtaXQoXCJlbmRcIiwgdGhpcyk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIGVycm9yIGRhdGFcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWQucHJvdG90eXBlLl9vbkVycm9yID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHRoaXMuc3RhdHVzID0gU1RBVFVTRVMuRVJST1I7XG4gIGRhdGEgPSBkYXRhIHx8IHt9O1xuICBjb25zdCBtZXNzYWdlID0gZGF0YS5tZXNzYWdlIHx8IFwiXCI7XG5cbiAgc2VsZi5fcmVtb3ZlRXZlbnRzKCk7XG4gIHNlbGYuX3VwZGF0ZVN0YXRzKCk7XG5cbiAgLy8gbm90aWZ5IG9ubHkgaWYgdGhlcmUgZXhpc3RzIGFueSBlcnJvciBsaXN0ZW5lciAoZnJvbSBkb3dubG9hZHMgY29udHJvbGxlcilcbiAgLy8gb3RoZXJ3aXNlIEV2ZW50RW1pdHRlciB0aHJvd3MgYW4gZXJyb3JcbiAgaWYgKHNlbGYuZXZlbnRzLmxpc3RlbmVycygnZXJyb3InKS5sZW5ndGgpIHtcbiAgICBzZWxmLmV2ZW50cy5lbWl0KFwiZXJyb3JcIiwgc2VsZiwgbWVzc2FnZSk7XG4gIH1cbn07XG5cbkRvd25sb2FkLnByb3RvdHlwZS5fb25Eb21haW5FcnJvciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBkYXRhID0gZGF0YSB8fCB7fTtcbiAgY29uc3QgbWVzc2FnZSA9IGRhdGEubWVzc2FnZSB8fCBcIlwiO1xuXG4gIGlmIChzZWxmLl9kbCkge1xuICAgIGlmIChtZXNzYWdlID09PSAnbmV0OjpFUlJfTkVUV09SS19DSEFOR0VEJyB8fCBtZXNzYWdlID09PSAnbmV0OjpFUlJfU1BEWV9QUk9UT0NPTF9FUlJPUicgfHwgbWVzc2FnZSA9PT0gJ25ldDo6RVJSX0hUVFAyX1BST1RPQ09MX0VSUk9SJykge1xuICAgICAgLy8gbmV0d29yayBjaGFuZ2VkIGR1cmluZyBkb3dubG9hZCwgcmV0cnkgZG93bmxvYWRcbiAgICAgIHNlbGYuc3RvcCgoKSA9PiB7XG4gICAgICAgIHNlbGYuc3RhcnQoKTtcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHN0b3AgY3VycmVudCBkb3dubG9hZCB0byByZWxlYXNlIGZpbGUgc3RyZWFtIGFuZCBub3RpZnkgZXJyb3JcbiAgICAgIHNlbGYuc3RvcCgoKSA9PiB7XG4gICAgICAgIHNlbGYuX29uRXJyb3IoZGF0YSk7XG4gICAgICB9KVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzZWxmLl9vbkVycm9yKGRhdGEpO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZC5wcm90b3R5cGUuX3JlbW92ZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiB0aGlzLl9kbC5yZW1vdmVMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdGhpcy5fZGwucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fb25FcnJvcik7XG4gICAgdGhpcy5fZGwucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIHRoaXMuX29uRW5kKTtcbiAgICB0aGlzLl9kbC5yZW1vdmVMaXN0ZW5lcignZGF0YScsIHRoaXMuX29uRGF0YSk7XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZC5wcm90b3R5cGUuX3JlbW92ZUV2ZW50c09uU3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX2RsICYmIHR5cGVvZiB0aGlzLl9kbC5yZW1vdmVMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdGhpcy5fZGwucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fb25FcnJvcik7XG4gICAgdGhpcy5fZGwucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIHRoaXMuX29uRW5kKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2FkLnByb3RvdHlwZS5fdXBkYXRlU3RhdHMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnN0YXR1cyA9PT0gU1RBVFVTRVMuRklOSVNIRUQpIHtcbiAgICB0aGlzLnN0YXRzLmF2YWlsYWJsZSA9IHRoaXMuX2RsLmZpbGVfc2l6ZTtcbiAgICB0aGlzLnN0YXRzLndyaXRlUHJvZ3Jlc3MgPSAxO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuc3RhdHMuYXZhaWxhYmxlID0gdGhpcy5fZGwuYXZhaWxhYmxlO1xuICAgIHRoaXMuc3RhdHMud3JpdGVQcm9ncmVzcyA9IHRoaXMuX2RsLndyaXRlUHJvZ3Jlc3M7XG4gIH1cbiAgdGhpcy5zdGF0cy5kb3dubG9hZGVkID0gdGhpcy5fZGwuZG93bmxvYWRlZDtcbiAgdGhpcy5zdGF0cy5maWxlX3NpemUgPSB0aGlzLl9kbC5maWxlX3NpemU7XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICB0aGlzLnN0YXR1cyA9IFNUQVRVU0VTLlNUQVJURUQ7XG4gIHRoaXMuX2NyZWF0ZUxvY2FsUGF0aChmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgc2VsZi5fb25FcnJvcihlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBOT1RFOiBkb21haW4gbW9kdWxlIGlzIG1hcmtlZCB0byBiZSBkZXByZWNhdGVkIGluIHRoZSBmdXR1cmUsXG4gICAgLy8gICAgICAgd2Ugd2lsbCB1c2UgaXQgdW50aWwgTm9kZUpTIHdpbGwgcHJvcG9zZSBhbHRlcm5hdGl2ZSBvclxuICAgIC8vICAgICAgIHJld3JpdGUgd2l0aCBwcm9taXNlc1xuICAgIGNvbnN0IGQgPSBkb21haW4uY3JlYXRlKCk7XG4gICAgZC5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBsZXQgbWVzc2FnZSA9ICcnO1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBtZXNzYWdlID0gZXJyLmNvZGUgfHwgZXJyLm1lc3NhZ2UgfHwgXCJcIjtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXMgbmVlZHMgdG8gYmUgZGlzcG9zZWQgb3RoZXJ3aXNlIGl0IG1pZ2h0IGNvbXBsYWluIGFib3V0IHVuaGFuZGxlZCBlcnJvci5cbiAgICAgIGlmICh0eXBlb2YgZC5kaXNwb3NlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgICBzZWxmLl9vbkRvbWFpbkVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgZC5ydW4oZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5fZGwgPSBzZWxmLmNyZWF0ZURvd25sb2FkZXIoc2VsZi5yZW1vdGVVcmwsIHNlbGYubG9jYWxVcmwsIHNlbGYuX29wdGlvbnMpO1xuICAgICAgc2VsZi5fYXR0YWNoRXZlbnRzKCk7XG4gICAgICBzZWxmLl9kbC5zdGFydCgpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBmaWxlIGRvd25sb2FkZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcmVtb3RlVXJsXSAtIHVybCBvZiBmcmFnbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IFtsb2NhbFVybF0gLSBsb2NhbCB1cmwgd2hlcmUgdG8gZG93bmxvYWQgZnJhZ21lbnRcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBzb21lIG9wdGlvbnNcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZC5wcm90b3R5cGUuY3JlYXRlRG93bmxvYWRlciA9IGZ1bmN0aW9uIChyZW1vdGVVcmwsIGxvY2FsVXJsLCBvcHRpb25zKSB7XG4gIGlmICggdGhpcy5fb3B0aW9ucy51c2VIZWFkUmVxdWVzdHMgKSB7XG4gICAgcmV0dXJuIG5ldyBEb3dubG9hZEZpbGUocmVtb3RlVXJsLCBsb2NhbFVybCwgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBEb3dubG9hZEZpbGVOb0hlYWQocmVtb3RlVXJsLCBsb2NhbFVybCwgb3B0aW9ucyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcmVzb2x2ZV0gLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gc3RvcCB3YXMgc3VjY2Vzc2Z1bGx5XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWQucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAocmVzb2x2ZSkge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgdGhpcy5zdGF0dXMgPSBTVEFUVVNFUy5TVE9QUEVEO1xuICB0aGlzLl9yZW1vdmVFdmVudHNPblN0b3AoKTtcbiAgaWYgKHR5cGVvZiByZXNvbHZlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXNvbHZlID0gZnVuY3Rpb24gKCkge1xuICAgIH07XG4gIH1cbiAgaWYgKHRoaXMuX2RsKSB7XG4gICAgY29uc3QgZCA9IGRvbWFpbi5jcmVhdGUoKTtcbiAgICBkLm9uKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgICBkLnJ1bihmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLl9kbC5vbignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgICAgc2VsZi5fZGwub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgICBzZWxmLl9kbC5zdG9wKCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmVzb2x2ZSgpO1xuICB9XG59O1xuXG4vKipcbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBwcm9taXNlXG4gKi9cbkRvd25sb2FkLnByb3RvdHlwZS5zdG9wUHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIHNlbGYuc3RvcChmdW5jdGlvbiAoKSB7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEb3dubG9hZDtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///85\n')},function(module,exports){eval('module.exports = require("domain");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJkb21haW5cIj84NjM5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6Ijg2LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZG9tYWluXCIpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///86\n')},function(module,exports,__webpack_require__){eval('/*eslint no-console: ["error", { allow: ["warn", "error", "info"] }] */\nvar fs = __webpack_require__(3);\n\nvar _require = __webpack_require__(2),\n    net = _require.net;\n\nvar EventEmitter = __webpack_require__(14).EventEmitter;\n\nvar util = __webpack_require__(30);\n\nvar downloadFileUtil = __webpack_require__(7);\n/**\n *\n * @param {string} url - remote url\n * @param {string} destFile - local url\n * @param {object} options - options\n * @constructor\n */\n\n\nfunction DownloadFileNoHead(url, destFile, options) {\n  this._url = url;\n  this._destFile = destFile;\n  this._options = options;\n\n  this._resetValues();\n}\n\nutil.inherits(DownloadFileNoHead, EventEmitter);\n\nDownloadFileNoHead.prototype._reset = function (callback) {\n  var self = this;\n\n  callback = callback || function () {};\n\n  self._closeStreamAndRequest(function () {\n    self._resetValues();\n\n    callback();\n  });\n};\n\nDownloadFileNoHead.prototype._resetValues = function () {\n  this.available = 0;\n  this.downloaded = 0;\n  this.file_size = 0;\n  this.writeProgress = 0;\n};\n\nDownloadFileNoHead.prototype._createFileStream = function (callback) {\n  var self = this;\n\n  if (!this.fileStream) {\n    var destFile = this._destFile;\n    self.fileStream = fs.createWriteStream(destFile, {\n      flags: "w"\n    });\n    self.fileStream.on("error", callback);\n    self.fileStream.on("open", function () {\n      // for unknown reason from time to time the file descriptor of self.fileStream is null\n      // when event \'open\' is fired then the file descriptor is not a null anymore\n      // this should fix a problem with EBADF error\n      // a bug in fs ?\n      self.fileStream = this;\n      this.removeListener("error", callback);\n      this.on("error", function (error) {\n        if (error.code === "ENOSPC") {\n          // no space left on disk, do not retry downloading\n          self.emit("error", {\n            message: downloadFileUtil.errors.NO_SPACE_LEFT_ERROR,\n            data: error\n          });\n        } else {\n          self._retry(downloadFileUtil.errors.FILE_WRITING_ERROR, function (retried) {\n            if (!retried) {\n              self.emit("error", {\n                message: downloadFileUtil.errors.FILE_WRITING_ERROR,\n                data: error\n              });\n            }\n          });\n        }\n      });\n      this.on("finish", function () {\n        if (!self.isDownloaded()) {\n          self._retry(downloadFileUtil.errors.CHUNK_SIZE_ERROR, function (retried) {\n            if (!retried) {\n              self._closeStreamAndRequest(function () {\n                self.emit("error", {\n                  message: downloadFileUtil.errors.CHUNK_SIZE_ERROR\n                });\n              });\n            }\n          });\n        } else {\n          self.writeProgress = 1;\n          self.emit("end");\n        }\n      });\n      callback();\n    });\n  } else {\n    callback();\n  }\n};\n\nDownloadFileNoHead.prototype.isDownloaded = function () {\n  return this.downloaded === this.file_size;\n};\n\nDownloadFileNoHead.prototype._retry = function (errorType, callback) {\n  var self = this;\n  var maxDownloadRetry;\n  this._errors = this._errors || {};\n  this._errors[errorType] = this._errors[errorType] || 0;\n  this._errors[errorType]++;\n\n  if (errorType === downloadFileUtil.errors.INTERNET) {\n    maxDownloadRetry = this._options.maxDownloadChunkInternetRetry;\n  } else {\n    maxDownloadRetry = this._options.maxDownloadRetry;\n  }\n\n  if (this._errors[errorType] <= maxDownloadRetry) {\n    if (self._timer) {\n      clearTimeout(self._timer);\n    }\n\n    callback(true);\n    self._timer = setTimeout(function () {\n      // console.log("retrying chunk", errorType, self.destFile);\n      self._reset(function () {\n        self.start();\n      });\n    }, self._options.retryTimeout);\n  } else {\n    // console.log("not retrying chunk", errorType, self._errors[errorType]);\n    callback(false);\n  }\n};\n\nDownloadFileNoHead.prototype._closeStreamAndRequest = function (callback) {\n  var self = this;\n  var timer;\n  var timerTimoutMS = 300;\n\n  function onClose() {\n    clearTimeout(timer);\n\n    if (self.fileStream) {\n      self.fileStream.destroy();\n      delete self.fileStream;\n    }\n\n    delete self._req;\n    callback();\n  }\n\n  if (this._req) {\n    this._req.removeAllListeners();\n  }\n\n  if (this.fileStream) {\n    this.fileStream.removeAllListeners();\n  }\n\n  if (this._req) {\n    this._req.abort();\n\n    if (this._req.timeoutTimer) {\n      clearTimeout(this._req.timeoutTimer);\n      this._req.timeoutTimer = null;\n    }\n  }\n\n  if (this.fileStream) {\n    timer = setTimeout(function () {\n      onClose();\n    }, timerTimoutMS);\n    this.fileStream.end();\n    this.fileStream.close(onClose);\n  } else {\n    delete this._req;\n    callback();\n  }\n};\n/**\n * starts download\n * @returns {void}\n */\n\n\nDownloadFileNoHead.prototype.start = function () {\n  var self = this;\n  var req_options = {\n    timeout: this._options.timeout,\n    url: this._url\n  };\n\n  if (this._options.noCache) {\n    req_options.headers = {\n      \'Cache-Control\': \'no-cache\'\n    };\n  }\n\n  self._createFileStream(function (err) {\n    if (err) {\n      self._retry(downloadFileUtil.errors.FILE_CREATING_ERROR, function (retried) {\n        if (!retried) {\n          self._closeStreamAndRequest(function () {\n            self.emit("error", {\n              message: downloadFileUtil.errors.FILE_CREATING_ERROR\n            });\n          });\n        }\n      });\n\n      return;\n    }\n\n    req_options.headers = req_options.headers || {};\n    self._req = net.request(req_options);\n\n    self._req.on(\'response\', function (response) {\n      response.on("error", function (error) {\n        console.error(\'ERROR (\' + self._url + \') :\' + error);\n\n        if (error.code === "ESOCKETTIMEDOUT" || error.code === "ENOTFOUND" || error.code === "ETIMEDOUT") {\n          self._retry(downloadFileUtil.errors.INTERNET, function (retried) {\n            if (!retried) {\n              self._closeStreamAndRequest(function () {\n                self.emit("error", {\n                  message: downloadFileUtil.errors.TIMEOUT,\n                  data: error\n                });\n              });\n            }\n          });\n        } else {\n          self._retry(downloadFileUtil.errors.INTERNET, function (retried) {\n            if (!retried) {\n              self._closeStreamAndRequest(function () {\n                self.emit("error", {\n                  message: downloadFileUtil.errors.CHUNK_ERROR,\n                  data: error\n                });\n              });\n            }\n          });\n        }\n      });\n\n      if (response && response.statusCode >= 400) {\n        self._retry(downloadFileUtil.errors.INTERNET, function (retried) {\n          if (!retried) {\n            self._closeStreamAndRequest(function () {\n              console.error("HTTP DOWNLOAD ERROR url: ".concat(self._url, ", statusCode: ").concat(response.statusCode));\n              self.emit("error", {\n                message: downloadFileUtil.errors.CHUNK_ERROR,\n                data: response\n              });\n            });\n          }\n        });\n      } else {\n        self._headers = response.headers;\n        self.file_size = Number(self._headers["content-length"]);\n        response.on("data", function (data) {\n          if (response.statusCode === 200 || response.statusCode === 206) {\n            self.available += data.length;\n            self.downloaded += data.length;\n          }\n        });\n        response.pipe(self.fileStream);\n      }\n    });\n\n    self._req.end();\n  });\n\n  return this._promise;\n};\n/**\n * stops download\n * @returns {void}\n */\n\n\nDownloadFileNoHead.prototype.stop = function () {\n  var self = this;\n\n  this._reset(function () {\n    self.emit("error", {\n      message: downloadFileUtil.errors.ABORTED\n    });\n  });\n};\n\nmodule.exports = DownloadFileNoHead;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL2Rvd25sb2FkLWZpbGUtbm8taGVhZC5qcz9iMmJlIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsIm5ldCIsIkV2ZW50RW1pdHRlciIsInV0aWwiLCJkb3dubG9hZEZpbGVVdGlsIiwiRG93bmxvYWRGaWxlTm9IZWFkIiwidXJsIiwiZGVzdEZpbGUiLCJvcHRpb25zIiwiX3VybCIsIl9kZXN0RmlsZSIsIl9vcHRpb25zIiwiX3Jlc2V0VmFsdWVzIiwiaW5oZXJpdHMiLCJwcm90b3R5cGUiLCJfcmVzZXQiLCJjYWxsYmFjayIsInNlbGYiLCJfY2xvc2VTdHJlYW1BbmRSZXF1ZXN0IiwiYXZhaWxhYmxlIiwiZG93bmxvYWRlZCIsImZpbGVfc2l6ZSIsIndyaXRlUHJvZ3Jlc3MiLCJfY3JlYXRlRmlsZVN0cmVhbSIsImZpbGVTdHJlYW0iLCJjcmVhdGVXcml0ZVN0cmVhbSIsImZsYWdzIiwib24iLCJyZW1vdmVMaXN0ZW5lciIsImVycm9yIiwiY29kZSIsImVtaXQiLCJtZXNzYWdlIiwiZXJyb3JzIiwiTk9fU1BBQ0VfTEVGVF9FUlJPUiIsImRhdGEiLCJfcmV0cnkiLCJGSUxFX1dSSVRJTkdfRVJST1IiLCJyZXRyaWVkIiwiaXNEb3dubG9hZGVkIiwiQ0hVTktfU0laRV9FUlJPUiIsImVycm9yVHlwZSIsIm1heERvd25sb2FkUmV0cnkiLCJfZXJyb3JzIiwiSU5URVJORVQiLCJtYXhEb3dubG9hZENodW5rSW50ZXJuZXRSZXRyeSIsIl90aW1lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzdGFydCIsInJldHJ5VGltZW91dCIsInRpbWVyIiwidGltZXJUaW1vdXRNUyIsIm9uQ2xvc2UiLCJkZXN0cm95IiwiX3JlcSIsInJlbW92ZUFsbExpc3RlbmVycyIsImFib3J0IiwidGltZW91dFRpbWVyIiwiZW5kIiwiY2xvc2UiLCJyZXFfb3B0aW9ucyIsInRpbWVvdXQiLCJub0NhY2hlIiwiaGVhZGVycyIsImVyciIsIkZJTEVfQ1JFQVRJTkdfRVJST1IiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJjb25zb2xlIiwiVElNRU9VVCIsIkNIVU5LX0VSUk9SIiwic3RhdHVzQ29kZSIsIl9oZWFkZXJzIiwiTnVtYmVyIiwibGVuZ3RoIiwicGlwZSIsIl9wcm9taXNlIiwic3RvcCIsIkFCT1JURUQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLElBQU1BLEVBQUUsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQWxCOztlQUNjQSxtQkFBTyxDQUFDLENBQUQsQztJQUFkQyxHLFlBQUFBLEc7O0FBQ1AsSUFBTUMsWUFBWSxHQUFHRixtQkFBTyxDQUFDLEVBQUQsQ0FBUCxDQUFrQkUsWUFBdkM7O0FBQ0EsSUFBTUMsSUFBSSxHQUFHSCxtQkFBTyxDQUFDLEVBQUQsQ0FBcEI7O0FBQ0EsSUFBTUksZ0JBQWdCLEdBQUdKLG1CQUFPLENBQUMsQ0FBRCxDQUFoQztBQUVBOzs7Ozs7Ozs7QUFPQSxTQUFTSyxrQkFBVCxDQUE2QkMsR0FBN0IsRUFBa0NDLFFBQWxDLEVBQTRDQyxPQUE1QyxFQUFxRDtBQUNuRCxPQUFLQyxJQUFMLEdBQVlILEdBQVo7QUFDQSxPQUFLSSxTQUFMLEdBQWlCSCxRQUFqQjtBQUNBLE9BQUtJLFFBQUwsR0FBZ0JILE9BQWhCOztBQUNBLE9BQUtJLFlBQUw7QUFDRDs7QUFFRFQsSUFBSSxDQUFDVSxRQUFMLENBQWNSLGtCQUFkLEVBQWtDSCxZQUFsQzs7QUFFQUcsa0JBQWtCLENBQUNTLFNBQW5CLENBQTZCQyxNQUE3QixHQUFzQyxVQUFVQyxRQUFWLEVBQW9CO0FBQ3hELE1BQU1DLElBQUksR0FBRyxJQUFiOztBQUNBRCxVQUFRLEdBQUdBLFFBQVEsSUFBSSxZQUFZLENBQUUsQ0FBckM7O0FBRUFDLE1BQUksQ0FBQ0Msc0JBQUwsQ0FBNEIsWUFBWTtBQUN0Q0QsUUFBSSxDQUFDTCxZQUFMOztBQUNBSSxZQUFRO0FBQ1QsR0FIRDtBQUlELENBUkQ7O0FBVUFYLGtCQUFrQixD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WUFBWTtBQUN0QkUsUUFBSSxDQUFDYyxJQUFMLENBQVUsT0FBVixFQUFtQjtBQUFDQyxhQUFPLEVBQUU1QixnQkFBZ0IsQ0FBQzZCLE1BQWpCLENBQXdCOEM7QUFBbEMsS0FBbkI7QUFDRCxHQUZEO0FBR0QsQ0FMRDs7QUFPQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCNUUsa0JBQWpCIiwiZmlsZSI6Ijg3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyplc2xpbnQgbm8tY29uc29sZTogW1wiZXJyb3JcIiwgeyBhbGxvdzogW1wid2FyblwiLCBcImVycm9yXCIsIFwiaW5mb1wiXSB9XSAqL1xuY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5jb25zdCB7bmV0fSA9IHJlcXVpcmUoJ2VsZWN0cm9uJyk7XG5jb25zdCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiZXZlbnRzXCIpLkV2ZW50RW1pdHRlcjtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IGRvd25sb2FkRmlsZVV0aWwgPSByZXF1aXJlKFwiLi9kb3dubG9hZC1maWxlLXV0aWxcIik7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSByZW1vdGUgdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdEZpbGUgLSBsb2NhbCB1cmxcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERvd25sb2FkRmlsZU5vSGVhZCAodXJsLCBkZXN0RmlsZSwgb3B0aW9ucykge1xuICB0aGlzLl91cmwgPSB1cmw7XG4gIHRoaXMuX2Rlc3RGaWxlID0gZGVzdEZpbGU7XG4gIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICB0aGlzLl9yZXNldFZhbHVlcygpO1xufVxuXG51dGlsLmluaGVyaXRzKERvd25sb2FkRmlsZU5vSGVhZCwgRXZlbnRFbWl0dGVyKTtcblxuRG93bmxvYWRGaWxlTm9IZWFkLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge307XG5cbiAgc2VsZi5fY2xvc2VTdHJlYW1BbmRSZXF1ZXN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9yZXNldFZhbHVlcygpO1xuICAgIGNhbGxiYWNrKCk7XG4gIH0pO1xufTtcblxuRG93bmxvYWRGaWxlTm9IZWFkLnByb3RvdHlwZS5fcmVzZXRWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuYXZhaWxhYmxlID0gMDtcbiAgdGhpcy5kb3dubG9hZGVkID0gMDtcbiAgdGhpcy5maWxlX3NpemUgPSAwO1xuICB0aGlzLndyaXRlUHJvZ3Jlc3MgPSAwO1xufTtcblxuRG93bmxvYWRGaWxlTm9IZWFkLnByb3RvdHlwZS5fY3JlYXRlRmlsZVN0cmVhbSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgaWYgKCF0aGlzLmZpbGVTdHJlYW0pIHtcbiAgICBsZXQgZGVzdEZpbGUgPSB0aGlzLl9kZXN0RmlsZTtcbiAgICBzZWxmLmZpbGVTdHJlYW0gPSBmcy5jcmVhdGVXcml0ZVN0cmVhbShkZXN0RmlsZSwge2ZsYWdzOiBcIndcIn0pO1xuICAgIHNlbGYuZmlsZVN0cmVhbS5vbihcImVycm9yXCIsIGNhbGxiYWNrKTtcbiAgICBzZWxmLmZpbGVTdHJlYW0ub24oXCJvcGVuXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIGZvciB1bmtub3duIHJlYXNvbiBmcm9tIHRpbWUgdG8gdGltZSB0aGUgZmlsZSBkZXNjcmlwdG9yIG9mIHNlbGYuZmlsZVN0cmVhbSBpcyBudWxsXG4gICAgICAvLyB3aGVuIGV2ZW50ICdvcGVuJyBpcyBmaXJlZCB0aGVuIHRoZSBmaWxlIGRlc2NyaXB0b3IgaXMgbm90IGEgbnVsbCBhbnltb3JlXG4gICAgICAvLyB0aGlzIHNob3VsZCBmaXggYSBwcm9ibGVtIHdpdGggRUJBREYgZXJyb3JcbiAgICAgIC8vIGEgYnVnIGluIGZzID9cbiAgICAgIHNlbGYuZmlsZVN0cmVhbSA9IHRoaXM7XG5cbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLCBjYWxsYmFjayk7XG4gICAgICB0aGlzLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIkVOT1NQQ1wiKSB7XG4gICAgICAgICAgLy8gbm8gc3BhY2UgbGVmdCBvbiBkaXNrLCBkbyBub3QgcmV0cnkgZG93bmxvYWRpbmdcbiAgICAgICAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCB7bWVzc2FnZTogZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuTk9fU1BBQ0VfTEVGVF9FUlJPUiwgZGF0YTogZXJyb3J9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLl9yZXRyeShkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5GSUxFX1dSSVRJTkdfRVJST1IsIGZ1bmN0aW9uIChyZXRyaWVkKSB7XG4gICAgICAgICAgICBpZiAoIXJldHJpZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwge21lc3NhZ2U6IGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLkZJTEVfV1JJVElOR19FUlJPUiwgZGF0YTogZXJyb3J9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKFwiZmluaXNoXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFzZWxmLmlzRG93bmxvYWRlZCgpKSB7XG4gICAgICAgICAgc2VsZi5fcmV0cnkoZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuQ0hVTktfU0laRV9FUlJPUiwgZnVuY3Rpb24gKHJldHJpZWQpIHtcbiAgICAgICAgICAgIGlmICghcmV0cmllZCkge1xuICAgICAgICAgICAgICBzZWxmLl9jbG9zZVN0cmVhbUFuZFJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIHttZXNzYWdlOiBkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5DSFVOS19TSVpFX0VSUk9SfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYud3JpdGVQcm9ncmVzcyA9IDE7XG4gICAgICAgICAgc2VsZi5lbWl0KFwiZW5kXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY2FsbGJhY2soKTtcbiAgfVxufTtcblxuRG93bmxvYWRGaWxlTm9IZWFkLnByb3RvdHlwZS5pc0Rvd25sb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmRvd25sb2FkZWQgPT09IHRoaXMuZmlsZV9zaXplO1xufTtcblxuRG93bmxvYWRGaWxlTm9IZWFkLnByb3RvdHlwZS5fcmV0cnkgPSBmdW5jdGlvbiAoZXJyb3JUeXBlLCBjYWxsYmFjaykge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgbGV0IG1heERvd25sb2FkUmV0cnk7XG4gIHRoaXMuX2Vycm9ycyA9IHRoaXMuX2Vycm9ycyB8fCB7fTtcbiAgdGhpcy5fZXJyb3JzW2Vycm9yVHlwZV0gPSB0aGlzLl9lcnJvcnNbZXJyb3JUeXBlXSB8fCAwO1xuICB0aGlzLl9lcnJvcnNbZXJyb3JUeXBlXSsrO1xuICBpZiAoZXJyb3JUeXBlID09PSBkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5JTlRFUk5FVCkge1xuICAgIG1heERvd25sb2FkUmV0cnkgPSB0aGlzLl9vcHRpb25zLm1heERvd25sb2FkQ2h1bmtJbnRlcm5ldFJldHJ5O1xuICB9IGVsc2Uge1xuICAgIG1heERvd25sb2FkUmV0cnkgPSB0aGlzLl9vcHRpb25zLm1heERvd25sb2FkUmV0cnk7XG4gIH1cbiAgaWYgKHRoaXMuX2Vycm9yc1tlcnJvclR5cGVdIDw9IG1heERvd25sb2FkUmV0cnkpIHtcbiAgICBpZiAoc2VsZi5fdGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dChzZWxmLl90aW1lcik7XG4gICAgfVxuICAgIGNhbGxiYWNrKHRydWUpO1xuICAgIHNlbGYuX3RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcInJldHJ5aW5nIGNodW5rXCIsIGVycm9yVHlwZSwgc2VsZi5kZXN0RmlsZSk7XG4gICAgICBzZWxmLl9yZXNldChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc3RhcnQoKTtcbiAgICAgIH0pO1xuICAgIH0sIHNlbGYuX29wdGlvbnMucmV0cnlUaW1lb3V0KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcIm5vdCByZXRyeWluZyBjaHVua1wiLCBlcnJvclR5cGUsIHNlbGYuX2Vycm9yc1tlcnJvclR5cGVdKTtcbiAgICBjYWxsYmFjayhmYWxzZSk7XG4gIH1cbn07XG5Eb3dubG9hZEZpbGVOb0hlYWQucHJvdG90eXBlLl9jbG9zZVN0cmVhbUFuZFJlcXVlc3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIGxldCB0aW1lcjtcbiAgY29uc3QgdGltZXJUaW1vdXRNUyA9IDMwMDtcblxuICBmdW5jdGlvbiBvbkNsb3NlICgpIHtcbiAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgIGlmIChzZWxmLmZpbGVTdHJlYW0pIHtcbiAgICAgIHNlbGYuZmlsZVN0cmVhbS5kZXN0cm95KCk7XG4gICAgICBkZWxldGUgc2VsZi5maWxlU3RyZWFtO1xuICAgIH1cbiAgICBkZWxldGUoc2VsZi5fcmVxKTtcbiAgICBjYWxsYmFjaygpO1xuICB9XG5cbiAgaWYgKHRoaXMuX3JlcSkge1xuICAgIHRoaXMuX3JlcS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfVxuICBpZiAodGhpcy5maWxlU3RyZWFtKSB7XG4gICAgdGhpcy5maWxlU3RyZWFtLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9XG4gIGlmICh0aGlzLl9yZXEpIHtcbiAgICB0aGlzLl9yZXEuYWJvcnQoKTtcbiAgICBpZiAodGhpcy5fcmVxLnRpbWVvdXRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3JlcS50aW1lb3V0VGltZXIpO1xuICAgICAgdGhpcy5fcmVxLnRpbWVvdXRUaW1lciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMuZmlsZVN0cmVhbSkge1xuICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBvbkNsb3NlKCk7XG4gICAgfSwgdGltZXJUaW1vdXRNUyk7XG4gICAgdGhpcy5maWxlU3RyZWFtLmVuZCgpO1xuICAgIHRoaXMuZmlsZVN0cmVhbS5jbG9zZShvbkNsb3NlKTtcbiAgfSBlbHNlIHtcbiAgICBkZWxldGUgdGhpcy5fcmVxO1xuICAgIGNhbGxiYWNrKCk7XG4gIH1cbn07XG5cbi8qKlxuICogc3RhcnRzIGRvd25sb2FkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRGaWxlTm9IZWFkLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIGxldCByZXFfb3B0aW9ucyA9IHtcbiAgICB0aW1lb3V0OiB0aGlzLl9vcHRpb25zLnRpbWVvdXQsXG4gICAgdXJsOiB0aGlzLl91cmwsXG4gIH07XG5cbiAgaWYgKHRoaXMuX29wdGlvbnMubm9DYWNoZSkge1xuICAgIHJlcV9vcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZSdcbiAgICB9XG4gIH1cblxuICBzZWxmLl9jcmVhdGVGaWxlU3RyZWFtKGZ1bmN0aW9uIChlcnIpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBzZWxmLl9yZXRyeShkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5GSUxFX0NSRUFUSU5HX0VSUk9SLCBmdW5jdGlvbiAocmV0cmllZCkge1xuICAgICAgICBpZiAoIXJldHJpZWQpIHtcbiAgICAgICAgICBzZWxmLl9jbG9zZVN0cmVhbUFuZFJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwge21lc3NhZ2U6IGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLkZJTEVfQ1JFQVRJTkdfRVJST1J9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcV9vcHRpb25zLmhlYWRlcnMgPSByZXFfb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xuXG4gICAgc2VsZi5fcmVxID0gbmV0LnJlcXVlc3QocmVxX29wdGlvbnMpO1xuXG4gICAgc2VsZi5fcmVxLm9uKCdyZXNwb25zZScsIChyZXNwb25zZSkgPT4ge1xuICAgICAgcmVzcG9uc2Uub24oXCJlcnJvclwiLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRVJST1IgKCcgKyBzZWxmLl91cmwgKyAnKSA6JyArIGVycm9yKVxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gXCJFU09DS0VUVElNRURPVVRcIiB8fCBlcnJvci5jb2RlID09PSBcIkVOT1RGT1VORFwiIHx8IGVycm9yLmNvZGUgPT09IFwiRVRJTUVET1VUXCIpIHtcbiAgICAgICAgICBzZWxmLl9yZXRyeShkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5JTlRFUk5FVCwgZnVuY3Rpb24gKHJldHJpZWQpIHtcbiAgICAgICAgICAgIGlmICghcmV0cmllZCkge1xuICAgICAgICAgICAgICBzZWxmLl9jbG9zZVN0cmVhbUFuZFJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIHttZXNzYWdlOiBkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5USU1FT1VULCBkYXRhOiBlcnJvcn0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLl9yZXRyeShkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5JTlRFUk5FVCwgZnVuY3Rpb24gKHJldHJpZWQpIHtcbiAgICAgICAgICAgIGlmICghcmV0cmllZCkge1xuICAgICAgICAgICAgICBzZWxmLl9jbG9zZVN0cmVhbUFuZFJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIHttZXNzYWdlOiBkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5DSFVOS19FUlJPUiwgZGF0YTogZXJyb3J9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgICAgc2VsZi5fcmV0cnkoZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuSU5URVJORVQsIGZ1bmN0aW9uIChyZXRyaWVkKSB7XG4gICAgICAgICAgaWYgKCFyZXRyaWVkKSB7XG4gICAgICAgICAgICBzZWxmLl9jbG9zZVN0cmVhbUFuZFJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBIVFRQIERPV05MT0FEIEVSUk9SIHVybDogJHtzZWxmLl91cmx9LCBzdGF0dXNDb2RlOiAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9YCk7XG4gICAgICAgICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIHttZXNzYWdlOiBkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5DSFVOS19FUlJPUiwgZGF0YTogcmVzcG9uc2V9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLl9oZWFkZXJzID0gcmVzcG9uc2UuaGVhZGVycztcbiAgICAgICAgc2VsZi5maWxlX3NpemUgPSBOdW1iZXIoc2VsZi5faGVhZGVyc1tcImNvbnRlbnQtbGVuZ3RoXCJdKTtcblxuICAgICAgICByZXNwb25zZS5vbihcImRhdGFcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDIwNikge1xuICAgICAgICAgICAgc2VsZi5hdmFpbGFibGUgKz0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICBzZWxmLmRvd25sb2FkZWQgKz0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzcG9uc2UucGlwZShzZWxmLmZpbGVTdHJlYW0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHNlbGYuX3JlcS5lbmQoKTtcbiAgfSk7XG4gIHJldHVybiB0aGlzLl9wcm9taXNlO1xufTtcblxuLyoqXG4gKiBzdG9wcyBkb3dubG9hZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2FkRmlsZU5vSGVhZC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHRoaXMuX3Jlc2V0KGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCB7bWVzc2FnZTogZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuQUJPUlRFRH0pO1xuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRG93bmxvYWRGaWxlTm9IZWFkO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///87\n')},function(module,exports,__webpack_require__){eval('var fs = __webpack_require__(3);\n\nvar _require = __webpack_require__(2),\n    net = _require.net;\n\nvar EventEmitter = __webpack_require__(14).EventEmitter;\n\nvar util = __webpack_require__(30);\n\nvar downloadFileUtil = __webpack_require__(7);\n\nvar DownloadFileChunk = __webpack_require__(89);\n/**\n *\n * @param {string} url - remote url\n * @param {string} destFile - local url\n * @param {object} options - options\n * @constructor\n */\n\n\nfunction DownloadFile(url, destFile, options) {\n  this._url = url;\n  this._destFile = destFile;\n  this._options = options;\n\n  this._resetValues();\n}\n\nutil.inherits(DownloadFile, EventEmitter);\n/**\n *\n * @param {number} size - size of file\n * @private\n * @returns {*} - number of chunks\n */\n\nDownloadFile.prototype._calculateChunksNumber = function (size) {\n  var MB = 1024 * 1024;\n\n  for (var i = 0, j = this._options.threads.length; i < j; i++) {\n    if (size < this._options.threads[i].size * MB) {\n      return this._options.threads[i].number;\n    }\n  }\n\n  return 1;\n};\n/**\n * @private\n * @returns {void}\n */\n\n\nDownloadFile.prototype._concatChunks = function () {\n  var self = this;\n  var intervalTime = 500;\n  self._chunks[0].writeProgress = 1;\n\n  function countWriteProgress() {\n    self.writeProgress = self._chunks.reduce(function (a, b) {\n      return a + b.writeProgress;\n    }, 0) / self._chunksNumber;\n    self.emit("data");\n  }\n\n  function getWriteStream() {\n    return fs.createWriteStream(self._chunks[0].destFile, {\n      flags: "a"\n    });\n  }\n\n  function onInterval(writeStream, currentStream) {\n    self._chunks[currentStream].writeProgress = writeStream.bytesWritten / self._chunks[currentStream].available;\n\n    if (self._chunks[currentStream].writeProgress > 1) {\n      self._chunks[currentStream].writeProgress = 1;\n    }\n\n    countWriteProgress();\n  }\n\n  function pipeStream(writeStream, nextStreamNumber) {\n    var chunk = self._chunks[nextStreamNumber];\n\n    if (chunk) {\n      var interval = setInterval(function () {\n        onInterval(writeStream, nextStreamNumber);\n      }, intervalTime);\n      var readStream = fs.createReadStream(chunk.destFile);\n      readStream.pipe(writeStream);\n      writeStream.on("close", function () {\n        clearInterval(interval);\n        onInterval(writeStream, nextStreamNumber);\n        writeStream.removeAllListeners();\n        readStream.unpipe(writeStream);\n        readStream.destroy();\n        fs.unlink(chunk.destFile, function (err) {\n          if (err) {\n            self.emit("error", err);\n          } else {\n            writeStream.destroy();\n            pipeStream(getWriteStream(), nextStreamNumber + 1);\n          }\n        });\n      });\n    } else {\n      countWriteProgress();\n      writeStream.removeAllListeners();\n      writeStream.destroy();\n      fs.rename(self._chunks[0].destFile, self._destFile, function (err) {\n        if (err) {\n          self.emit("error", err);\n        } else {\n          self.emit("end");\n        }\n      });\n    }\n  }\n\n  if (self._chunks.length > 1) {\n    pipeStream(getWriteStream(), 1);\n  } else {\n    countWriteProgress();\n    self.emit("end");\n  }\n};\n/**\n *\n * @param {number} chunkNumber - chunk number\n * @private\n * @returns {void}\n */\n\n\nDownloadFile.prototype._initChunk = function (chunkNumber) {\n  var options = {};\n  options.bytesRangeNotAvailable = this._bytesRangeNotAvailable;\n  options.destFile = this._destFile;\n  options.maxDownloadRetry = this._options.maxDownloadChunkRetry;\n  options.maxDownloadInternetRetry = this._options.maxDownloadChunkInternetRetry;\n  options.timeout = this._options.timeout;\n  options.retryTimeout = this._options.retryTimeout;\n  var size = this.file_size;\n\n  if (this._chunksNumber > 1) {\n    var chunkSize = parseInt(size / this._chunksNumber, 10);\n    options.startPosition = chunkNumber * chunkSize;\n    options.multiChunks = true;\n\n    if (chunkNumber === this._chunksNumber - 1) {\n      options.endPosition = size - 1;\n    } else {\n      options.endPosition = options.startPosition + chunkSize - 1;\n    }\n  } else {\n    options.startPosition = 0;\n    options.endPosition = size - 1;\n  }\n\n  var chunk = new DownloadFileChunk(this._url, options);\n  chunk.events.on("download", this._onChunkDownload.bind(this));\n\n  this._chunks.push(chunk);\n};\n/**\n *\n * @param {object} err - error\n * @param {boolean} aborted - if failure has been called because download was aborted\n * @private\n * @returns {void}\n */\n\n\nDownloadFile.prototype._onDownloadFailure = function (err, aborted) {\n  this._promises = null;\n\n  if (!aborted) {\n    this._errors = this._errors || 0;\n    this._errors++;\n\n    if (this._errors <= this._options.maxDownloadRetry) {\n      this._retryDownload();\n    } else {\n      this.emit("error", err);\n    }\n  } else {\n    var noSpaceLeft = false;\n\n    for (var i = 0, j = err.length; i < j; i++) {\n      if (err[i]) {\n        if (err[i] === downloadFileUtil.errors.NO_SPACE_LEFT_ERROR) {\n          noSpaceLeft = true;\n          break;\n        }\n      }\n    }\n\n    if (noSpaceLeft) {\n      err = {\n        message: downloadFileUtil.errors.NO_SPACE_LEFT_ERROR\n      };\n    }\n\n    this.emit("error", err);\n  }\n};\n/**\n *\n * @param {object} err - error\n * @private\n * @returns {void}\n */\n\n\nDownloadFile.prototype._onDownloadSuccess = function (err) {\n  var aborted, error;\n  this._promises = null;\n  err = err || [];\n\n  for (var i = 0, j = err.length; i < j; i++) {\n    if (err[i]) {\n      if (err[i] === downloadFileUtil.errors.ABORTED || err[i] === downloadFileUtil.errors.NO_SPACE_LEFT_ERROR) {\n        aborted = true;\n      }\n\n      error = true;\n    }\n  }\n\n  if (!error) {\n    this._concatChunks();\n  } else {\n    this._onDownloadFailure(err, aborted);\n  }\n};\n/**\n *\n * @param {number} downloaded - downloaded bytes\n * @private\n * @returns {void}\n */\n\n\nDownloadFile.prototype._onChunkDownload = function (downloaded) {\n  this.downloaded += downloaded;\n  this.available = this._chunks.reduce(function (a, b) {\n    return a + b.available;\n  }, 0);\n  this.emit("data");\n};\n\nDownloadFile.prototype._retryDownload = function () {\n  // console.log("retrying download", this._destFile);\n  this._resetValues();\n\n  this.start();\n};\n\nDownloadFile.prototype._resetValues = function () {\n  this.available = 0;\n  this.downloaded = 0;\n  this.progress = 0;\n  this.file_size = 0;\n  this.writeProgress = 0;\n  this._chunks = [];\n};\n/**\n * @private\n * @returns {void}\n */\n\n\nDownloadFile.prototype._startChunks = function () {\n  var promises = [];\n\n  for (var i = 0, j = this._chunks.length; i < j; i++) {\n    promises.push(this._chunks[i].start());\n  }\n\n  this._promises = promises;\n  Promise.all(this._promises).then(this._onDownloadSuccess.bind(this), this._onDownloadFailure.bind(this));\n};\n\nDownloadFile.prototype._startAllChunks = function () {\n  for (var i = 0, j = this._chunksNumber; i < j; i++) {\n    this._initChunk(i);\n  }\n\n  this._startChunks();\n};\n/**\n * starts download\n * @returns {void}\n */\n\n\nDownloadFile.prototype.start = function () {\n  var self = this;\n  var req_options = Object.assign({\n    url: this._url,\n    method: \'HEAD\'\n  }, downloadFileUtil.defaultOptions);\n\n  if (this._options.noCache) {\n    req_options.headers = req_options.headers || {};\n    req_options.headers[\'Cache-Control\'] = \'no-cache\';\n  }\n\n  var req = net.request(req_options);\n  req.on(\'response\', function (response) {\n    if (response && response.statusCode >= 400) {\n      var error = response.statusMessage;\n\n      if (error) {\n        self._onDownloadFailure(error, false);\n\n        return;\n      }\n    }\n\n    response.on("error", function (error) {\n      if (error) {\n        self._onDownloadFailure(error, false);\n      }\n    });\n    self._headers = response.headers;\n    self.file_size = Number(self._headers["content-length"]);\n    self._chunksNumber = self._calculateChunksNumber(self.file_size);\n    downloadFileUtil.checkForLocalFile(self._destFile, function (exists, fileSize) {\n      if (exists) {\n        if (fileSize === self.file_size) {\n          self.emit("end");\n        } else if (fileSize > self.file_size) {\n          fs.unlink(self._destFile, function (err) {\n            if (err) {\n              throw err;\n            }\n          });\n\n          self._startAllChunks();\n        } else if (fileSize < self.file_size && self._chunksNumber > 1) {\n          fs.unlink(self._destFile, function (err) {\n            if (err) {\n              throw err;\n            }\n          });\n\n          self._startAllChunks();\n        } else {\n          self._startAllChunks();\n        }\n      } else {\n        self._startAllChunks();\n      }\n    });\n  });\n  req.end();\n};\n/**\n * stops download\n * @returns {void}\n */\n\n\nDownloadFile.prototype.stop = function () {\n  var promises = [];\n\n  for (var i = 0, j = this._chunks.length; i < j; i++) {\n    this._chunks[i].stop();\n\n    if (this._chunks[i]._promise) {\n      promises.push(this._chunks[i]._promise);\n    }\n  }\n\n  function onStopped() {\n    this.emit("end", \'\');\n  }\n\n  if (!this._promises) {\n    Promise.all(promises).then(onStopped.bind(this), onStopped.bind(this));\n  }\n};\n\nmodule.exports = DownloadFile;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL2Rvd25sb2FkLWZpbGUuanM/MjEyOSJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJuZXQiLCJFdmVudEVtaXR0ZXIiLCJ1dGlsIiwiZG93bmxvYWRGaWxlVXRpbCIsIkRvd25sb2FkRmlsZUNodW5rIiwiRG93bmxvYWRGaWxlIiwidXJsIiwiZGVzdEZpbGUiLCJvcHRpb25zIiwiX3VybCIsIl9kZXN0RmlsZSIsIl9vcHRpb25zIiwiX3Jlc2V0VmFsdWVzIiwiaW5oZXJpdHMiLCJwcm90b3R5cGUiLCJfY2FsY3VsYXRlQ2h1bmtzTnVtYmVyIiwic2l6ZSIsIk1CIiwiaSIsImoiLCJ0aHJlYWRzIiwibGVuZ3RoIiwibnVtYmVyIiwiX2NvbmNhdENodW5rcyIsInNlbGYiLCJpbnRlcnZhbFRpbWUiLCJfY2h1bmtzIiwid3JpdGVQcm9ncmVzcyIsImNvdW50V3JpdGVQcm9ncmVzcyIsInJlZHVjZSIsImEiLCJiIiwiX2NodW5rc051bWJlciIsImVtaXQiLCJnZXRXcml0ZVN0cmVhbSIsImNyZWF0ZVdyaXRlU3RyZWFtIiwiZmxhZ3MiLCJvbkludGVydmFsIiwid3JpdGVTdHJlYW0iLCJjdXJyZW50U3RyZWFtIiwiYnl0ZXNXcml0dGVuIiwiYXZhaWxhYmxlIiwicGlwZVN0cmVhbSIsIm5leHRTdHJlYW1OdW1iZXIiLCJjaHVuayIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJyZWFkU3RyZWFtIiwiY3JlYXRlUmVhZFN0cmVhbSIsInBpcGUiLCJvbiIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJ1bnBpcGUiLCJkZXN0cm95IiwidW5saW5rIiwiZXJyIiwicmVuYW1lIiwiX2luaXRDaHVuayIsImNodW5rTnVtYmVyIiwiYnl0ZXNSYW5nZU5vdEF2YWlsYWJsZSIsIl9ieXRlc1JhbmdlTm90QXZhaWxhYmxlIiwibWF4RG93bmxvYWRSZXRyeSIsIm1heERvd25sb2FkQ2h1bmtSZXRyeSIsIm1heERvd25sb2FkSW50ZXJuZXRSZXRyeSIsIm1heERvd25sb2FkQ2h1bmtJbnRlcm5ldFJldHJ5IiwidGltZW91dCIsInJldHJ5VGltZW91dCIsImZpbGVfc2l6ZSIsImNodW5rU2l6ZSIsInBhcnNlSW50Iiwic3RhcnRQb3NpdGlvbiIsIm11bHRpQ2h1bmtzIiwiZW5kUG9zaXRpb24iLCJldmVudHMiLCJfb25DaHVua0Rvd25sb2FkIiwiYmluZCIsInB1c2giLCJfb25Eb3dubG9hZEZhaWx1cmUiLCJhYm9ydGVkIiwiX3Byb21pc2VzIiwiX2Vycm9ycyIsIl9yZXRyeURvd25sb2FkIiwibm9TcGFjZUxlZnQiLCJlcnJvcnMiLCJOT19TUEFDRV9MRUZUX0VSUk9SIiwibWVzc2FnZSIsIl9vbkRvd25sb2FkU3VjY2VzcyIsImVycm9yIiwiQUJPUlRFRCIsImRvd25sb2FkZWQiLCJzdGFydCIsInByb2dyZXNzIiwiX3N0YXJ0Q2h1bmtzIiwicHJvbWlzZXMiLCJQcm9taXNlIiwiYWxsIiwidGhlbiIsIl9zdGFydEFsbENodW5rcyIsInJlcV9vcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwibWV0aG9kIiwiZGVmYXVsdE9wdGlvbnMiLCJub0NhY2hlIiwiaGVhZGVycyIsInJlcSIsInJlcXVlc3QiLCJyZXNwb25zZSIsInN0YXR1c0NvZGUiLCJzdGF0dXNNZXNzYWdlIiwiX2hlYWRlcnMiLCJOdW1iZXIiLCJjaGVja0ZvckxvY2FsRmlsZSIsImV4aXN0cyIsImZpbGVTaXplIiwiZW5kIiwic3RvcCIsIl9wcm9taXNlIiwib25TdG9wcGVkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBTUEsRUFBRSxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBbEI7O2VBQ2NBLG1CQUFPLENBQUMsQ0FBRCxDO0lBQWRDLEcsWUFBQUEsRzs7QUFDUCxJQUFNQyxZQUFZLEdBQUdGLG1CQUFPLENBQUMsRUFBRCxDQUFQLENBQWtCRSxZQUF2Qzs7QUFDQSxJQUFNQyxJQUFJLEdBQUdILG1CQUFP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RixPQUFMLENBQWFSLENBQWIsRUFBZ0JvRyxRQUFwQixFQUE4QjtBQUM1QnhCLGNBQVEsQ0FBQ2pCLElBQVQsQ0FBYyxLQUFLbkQsT0FBTCxDQUFhUixDQUFiLEVBQWdCb0csUUFBOUI7QUFDRDtBQUNGOztBQUNELFdBQVNDLFNBQVQsR0FBc0I7QUFDcEIsU0FBS3RGLElBQUwsQ0FBVSxLQUFWLEVBQWlCLEVBQWpCO0FBQ0Q7O0FBQ0QsTUFBSSxDQUFDLEtBQUsrQyxTQUFWLEVBQXFCO0FBQ25CZSxXQUFPLENBQUNDLEdBQVIsQ0FBWUYsUUFBWixFQUFzQkcsSUFBdEIsQ0FBMkJzQixTQUFTLENBQUMzQyxJQUFWLENBQWUsSUFBZixDQUEzQixFQUFpRDJDLFNBQVMsQ0FBQzNDLElBQVYsQ0FBZSxJQUFmLENBQWpEO0FBQ0Q7QUFDRixDQWREOztBQWdCQTRDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnBILFlBQWpCIiwiZmlsZSI6Ijg4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5jb25zdCB7bmV0fSA9IHJlcXVpcmUoJ2VsZWN0cm9uJyk7XG5jb25zdCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiZXZlbnRzXCIpLkV2ZW50RW1pdHRlcjtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IGRvd25sb2FkRmlsZVV0aWwgPSByZXF1aXJlKFwiLi9kb3dubG9hZC1maWxlLXV0aWxcIik7XG5jb25zdCBEb3dubG9hZEZpbGVDaHVuayA9IHJlcXVpcmUoXCIuL2Rvd25sb2FkLWZpbGUtY2h1bmtcIik7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSByZW1vdGUgdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdEZpbGUgLSBsb2NhbCB1cmxcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERvd25sb2FkRmlsZSAodXJsLCBkZXN0RmlsZSwgb3B0aW9ucykge1xuICB0aGlzLl91cmwgPSB1cmw7XG4gIHRoaXMuX2Rlc3RGaWxlID0gZGVzdEZpbGU7XG4gIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICB0aGlzLl9yZXNldFZhbHVlcygpO1xufVxuXG51dGlsLmluaGVyaXRzKERvd25sb2FkRmlsZSwgRXZlbnRFbWl0dGVyKTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHNpemUgLSBzaXplIG9mIGZpbGVcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7Kn0gLSBudW1iZXIgb2YgY2h1bmtzXG4gKi9cbkRvd25sb2FkRmlsZS5wcm90b3R5cGUuX2NhbGN1bGF0ZUNodW5rc051bWJlciA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIGNvbnN0IE1CID0gMTAyNCAqIDEwMjQ7XG4gIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5fb3B0aW9ucy50aHJlYWRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGlmIChzaXplIDwgdGhpcy5fb3B0aW9ucy50aHJlYWRzW2ldLnNpemUgKiBNQikge1xuICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnMudGhyZWFkc1tpXS5udW1iZXJcbiAgICB9XG4gIH1cbiAgcmV0dXJuIDE7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRGaWxlLnByb3RvdHlwZS5fY29uY2F0Q2h1bmtzID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgY29uc3QgaW50ZXJ2YWxUaW1lID0gNTAwO1xuICBzZWxmLl9jaHVua3NbMF0ud3JpdGVQcm9ncmVzcyA9IDE7XG4gIGZ1bmN0aW9uIGNvdW50V3JpdGVQcm9ncmVzcyAoKSB7XG4gICAgc2VsZi53cml0ZVByb2dyZXNzID0gc2VsZi5fY2h1bmtzLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYSArIGIud3JpdGVQcm9ncmVzcztcbiAgICAgIH0sIDApIC8gc2VsZi5fY2h1bmtzTnVtYmVyO1xuICAgIHNlbGYuZW1pdChcImRhdGFcIik7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0V3JpdGVTdHJlYW0gKCkge1xuICAgIHJldHVybiBmcy5jcmVhdGVXcml0ZVN0cmVhbShzZWxmLl9jaHVua3NbMF0uZGVzdEZpbGUsIHtmbGFnczogXCJhXCJ9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uSW50ZXJ2YWwgKHdyaXRlU3RyZWFtLCBjdXJyZW50U3RyZWFtKSB7XG4gICAgc2VsZi5fY2h1bmtzW2N1cnJlbnRTdHJlYW1dLndyaXRlUHJvZ3Jlc3MgPSB3cml0ZVN0cmVhbS5ieXRlc1dyaXR0ZW4gLyBzZWxmLl9jaHVua3NbY3VycmVudFN0cmVhbV0uYXZhaWxhYmxlO1xuICAgIGlmIChzZWxmLl9jaHVua3NbY3VycmVudFN0cmVhbV0ud3JpdGVQcm9ncmVzcyA+IDEpIHtcbiAgICAgIHNlbGYuX2NodW5rc1tjdXJyZW50U3RyZWFtXS53cml0ZVByb2dyZXNzID0gMTtcbiAgICB9XG4gICAgY291bnRXcml0ZVByb2dyZXNzKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwaXBlU3RyZWFtICh3cml0ZVN0cmVhbSwgbmV4dFN0cmVhbU51bWJlcikge1xuICAgIGNvbnN0IGNodW5rID0gc2VsZi5fY2h1bmtzW25leHRTdHJlYW1OdW1iZXJdO1xuICAgIGlmIChjaHVuaykge1xuICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9uSW50ZXJ2YWwod3JpdGVTdHJlYW0sIG5leHRTdHJlYW1OdW1iZXIpO1xuICAgICAgfSwgaW50ZXJ2YWxUaW1lKTtcbiAgICAgIGNvbnN0IHJlYWRTdHJlYW0gPSBmcy5jcmVhdGVSZWFkU3RyZWFtKGNodW5rLmRlc3RGaWxlKTtcbiAgICAgIHJlYWRTdHJlYW0ucGlwZSh3cml0ZVN0cmVhbSk7XG4gICAgICB3cml0ZVN0cmVhbS5vbihcImNsb3NlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIG9uSW50ZXJ2YWwod3JpdGVTdHJlYW0sIG5leHRTdHJlYW1OdW1iZXIpO1xuXG4gICAgICAgIHdyaXRlU3RyZWFtLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXG4gICAgICAgIHJlYWRTdHJlYW0udW5waXBlKHdyaXRlU3RyZWFtKTtcbiAgICAgICAgcmVhZFN0cmVhbS5kZXN0cm95KCk7XG4gICAgICAgIGZzLnVubGluayhjaHVuay5kZXN0RmlsZSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdyaXRlU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHBpcGVTdHJlYW0oZ2V0V3JpdGVTdHJlYW0oKSwgbmV4dFN0cmVhbU51bWJlciArIDEpXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb3VudFdyaXRlUHJvZ3Jlc3MoKTtcbiAgICAgIHdyaXRlU3RyZWFtLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgd3JpdGVTdHJlYW0uZGVzdHJveSgpO1xuXG4gICAgICBmcy5yZW5hbWUoc2VsZi5fY2h1bmtzWzBdLmRlc3RGaWxlLCBzZWxmLl9kZXN0RmlsZSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmVtaXQoXCJlbmRcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzZWxmLl9jaHVua3MubGVuZ3RoID4gMSkge1xuICAgIHBpcGVTdHJlYW0oZ2V0V3JpdGVTdHJlYW0oKSwgMSk7XG4gIH0gZWxzZSB7XG4gICAgY291bnRXcml0ZVByb2dyZXNzKCk7XG4gICAgc2VsZi5lbWl0KFwiZW5kXCIpO1xuICB9XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gY2h1bmtOdW1iZXIgLSBjaHVuayBudW1iZXJcbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRGaWxlLnByb3RvdHlwZS5faW5pdENodW5rID0gZnVuY3Rpb24gKGNodW5rTnVtYmVyKSB7XG4gIGxldCBvcHRpb25zID0ge307XG4gIG9wdGlvbnMuYnl0ZXNSYW5nZU5vdEF2YWlsYWJsZSA9IHRoaXMuX2J5dGVzUmFuZ2VOb3RBdmFpbGFibGU7XG4gIG9wdGlvbnMuZGVzdEZpbGUgPSB0aGlzLl9kZXN0RmlsZTtcbiAgb3B0aW9ucy5tYXhEb3dubG9hZFJldHJ5ID0gdGhpcy5fb3B0aW9ucy5tYXhEb3dubG9hZENodW5rUmV0cnk7XG4gIG9wdGlvbnMubWF4RG93bmxvYWRJbnRlcm5ldFJldHJ5ID0gdGhpcy5fb3B0aW9ucy5tYXhEb3dubG9hZENodW5rSW50ZXJuZXRSZXRyeTtcbiAgb3B0aW9ucy50aW1lb3V0ID0gdGhpcy5fb3B0aW9ucy50aW1lb3V0O1xuICBvcHRpb25zLnJldHJ5VGltZW91dCA9IHRoaXMuX29wdGlvbnMucmV0cnlUaW1lb3V0O1xuXG4gIGNvbnN0IHNpemUgPSB0aGlzLmZpbGVfc2l6ZTtcbiAgaWYgKHRoaXMuX2NodW5rc051bWJlciA+IDEpIHtcbiAgICBjb25zdCBjaHVua1NpemUgPSBwYXJzZUludChzaXplIC8gdGhpcy5fY2h1bmtzTnVtYmVyLCAxMCk7XG4gICAgb3B0aW9ucy5zdGFydFBvc2l0aW9uID0gKGNodW5rTnVtYmVyKSAqIGNodW5rU2l6ZTtcbiAgICBvcHRpb25zLm11bHRpQ2h1bmtzID0gdHJ1ZTtcbiAgICBpZiAoY2h1bmtOdW1iZXIgPT09IHRoaXMuX2NodW5rc051bWJlciAtIDEpIHtcbiAgICAgIG9wdGlvbnMuZW5kUG9zaXRpb24gPSBzaXplIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucy5lbmRQb3NpdGlvbiA9IG9wdGlvbnMuc3RhcnRQb3NpdGlvbiArIGNodW5rU2l6ZSAtIDE7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMuc3RhcnRQb3NpdGlvbiA9IDA7XG4gICAgb3B0aW9ucy5lbmRQb3NpdGlvbiA9IHNpemUgLSAxO1xuICB9XG4gIGNvbnN0IGNodW5rID0gbmV3IERvd25sb2FkRmlsZUNodW5rKHRoaXMuX3VybCwgb3B0aW9ucyk7XG4gIGNodW5rLmV2ZW50cy5vbihcImRvd25sb2FkXCIsIHRoaXMuX29uQ2h1bmtEb3dubG9hZC5iaW5kKHRoaXMpKTtcbiAgdGhpcy5fY2h1bmtzLnB1c2goY2h1bmspO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGVyciAtIGVycm9yXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFib3J0ZWQgLSBpZiBmYWlsdXJlIGhhcyBiZWVuIGNhbGxlZCBiZWNhdXNlIGRvd25sb2FkIHdhcyBhYm9ydGVkXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2FkRmlsZS5wcm90b3R5cGUuX29uRG93bmxvYWRGYWlsdXJlID0gZnVuY3Rpb24gKGVyciwgYWJvcnRlZCkge1xuICB0aGlzLl9wcm9taXNlcyA9IG51bGw7XG4gIGlmICghYWJvcnRlZCkge1xuICAgIHRoaXMuX2Vycm9ycyA9IHRoaXMuX2Vycm9ycyB8fCAwO1xuICAgIHRoaXMuX2Vycm9ycysrO1xuICAgIGlmICh0aGlzLl9lcnJvcnMgPD0gdGhpcy5fb3B0aW9ucy5tYXhEb3dubG9hZFJldHJ5KSB7XG4gICAgICB0aGlzLl9yZXRyeURvd25sb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBub1NwYWNlTGVmdCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gZXJyLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgaWYgKGVycltpXSkge1xuICAgICAgICBpZiAoZXJyW2ldID09PSBkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5OT19TUEFDRV9MRUZUX0VSUk9SKSB7XG4gICAgICAgICAgbm9TcGFjZUxlZnQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5vU3BhY2VMZWZ0KSB7XG4gICAgICBlcnIgPSB7XG4gICAgICAgIG1lc3NhZ2U6IGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLk5PX1NQQUNFX0xFRlRfRVJST1JcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycik7XG4gIH1cblxufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGVyciAtIGVycm9yXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2FkRmlsZS5wcm90b3R5cGUuX29uRG93bmxvYWRTdWNjZXNzID0gZnVuY3Rpb24gKGVycikge1xuICBsZXQgYWJvcnRlZCwgZXJyb3I7XG4gIHRoaXMuX3Byb21pc2VzID0gbnVsbDtcbiAgZXJyID0gZXJyIHx8IFtdO1xuICBmb3IgKGxldCBpID0gMCwgaiA9IGVyci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBpZiAoZXJyW2ldKSB7XG4gICAgICBpZiAoZXJyW2ldID09PSBkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5BQk9SVEVEIHx8XG4gICAgICAgICAgZXJyW2ldID09PSBkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5OT19TUEFDRV9MRUZUX0VSUk9SKSB7XG4gICAgICAgIGFib3J0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZXJyb3IgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBpZiAoIWVycm9yKSB7XG4gICAgdGhpcy5fY29uY2F0Q2h1bmtzKCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fb25Eb3dubG9hZEZhaWx1cmUoZXJyLCBhYm9ydGVkKTtcbiAgfVxufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGRvd25sb2FkZWQgLSBkb3dubG9hZGVkIGJ5dGVzXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2FkRmlsZS5wcm90b3R5cGUuX29uQ2h1bmtEb3dubG9hZCA9IGZ1bmN0aW9uIChkb3dubG9hZGVkKSB7XG4gIHRoaXMuZG93bmxvYWRlZCArPSBkb3dubG9hZGVkO1xuICB0aGlzLmF2YWlsYWJsZSA9IHRoaXMuX2NodW5rcy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYSArIGIuYXZhaWxhYmxlO1xuICB9LCAwKTtcbiAgdGhpcy5lbWl0KFwiZGF0YVwiKTtcbn07XG5cbkRvd25sb2FkRmlsZS5wcm90b3R5cGUuX3JldHJ5RG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIGNvbnNvbGUubG9nKFwicmV0cnlpbmcgZG93bmxvYWRcIiwgdGhpcy5fZGVzdEZpbGUpO1xuICB0aGlzLl9yZXNldFZhbHVlcygpO1xuICB0aGlzLnN0YXJ0KCk7XG59O1xuXG5Eb3dubG9hZEZpbGUucHJvdG90eXBlLl9yZXNldFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5hdmFpbGFibGUgPSAwO1xuICB0aGlzLmRvd25sb2FkZWQgPSAwO1xuICB0aGlzLnByb2dyZXNzID0gMDtcbiAgdGhpcy5maWxlX3NpemUgPSAwO1xuICB0aGlzLndyaXRlUHJvZ3Jlc3MgPSAwO1xuICB0aGlzLl9jaHVua3MgPSBbXTtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZEZpbGUucHJvdG90eXBlLl9zdGFydENodW5rcyA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IHByb21pc2VzID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5fY2h1bmtzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIHByb21pc2VzLnB1c2godGhpcy5fY2h1bmtzW2ldLnN0YXJ0KCkpO1xuICB9XG4gIHRoaXMuX3Byb21pc2VzID0gcHJvbWlzZXM7XG4gIFByb21pc2UuYWxsKHRoaXMuX3Byb21pc2VzKS50aGVuKHRoaXMuX29uRG93bmxvYWRTdWNjZXNzLmJpbmQodGhpcyksIHRoaXMuX29uRG93bmxvYWRGYWlsdXJlLmJpbmQodGhpcykpO1xufTtcblxuRG93bmxvYWRGaWxlLnByb3RvdHlwZS5fc3RhcnRBbGxDaHVua3MgPSBmdW5jdGlvbiAoKSB7XG4gIGZvciAobGV0IGkgPSAwLCBqID0gdGhpcy5fY2h1bmtzTnVtYmVyOyBpIDwgajsgaSsrKSB7XG4gICAgdGhpcy5faW5pdENodW5rKGkpXG4gIH1cbiAgdGhpcy5fc3RhcnRDaHVua3MoKTtcbn07XG5cbi8qKlxuICogc3RhcnRzIGRvd25sb2FkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRGaWxlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIGxldCByZXFfb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgdXJsOiB0aGlzLl91cmwsXG4gICAgICBtZXRob2Q6ICdIRUFEJ1xuICAgIH0sXG4gICAgZG93bmxvYWRGaWxlVXRpbC5kZWZhdWx0T3B0aW9uc1xuICApO1xuICBpZiAodGhpcy5fb3B0aW9ucy5ub0NhY2hlKSB7XG4gICAgcmVxX29wdGlvbnMuaGVhZGVycyA9IHJlcV9vcHRpb25zLmhlYWRlcnMgfHwge307XG4gICAgcmVxX29wdGlvbnMuaGVhZGVyc1snQ2FjaGUtQ29udHJvbCddID0gJ25vLWNhY2hlJztcbiAgfVxuXG4gIGxldCByZXEgPSBuZXQucmVxdWVzdChyZXFfb3B0aW9ucyk7XG5cbiAgcmVxLm9uKCdyZXNwb25zZScsIChyZXNwb25zZSkgPT4ge1xuICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXNDb2RlID49IDQwMCkge1xuICAgICAgbGV0IGVycm9yID0gcmVzcG9uc2Uuc3RhdHVzTWVzc2FnZTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBzZWxmLl9vbkRvd25sb2FkRmFpbHVyZShlcnJvciwgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3BvbnNlLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgc2VsZi5fb25Eb3dubG9hZEZhaWx1cmUoZXJyb3IsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHNlbGYuX2hlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzO1xuICAgIHNlbGYuZmlsZV9zaXplID0gTnVtYmVyKHNlbGYuX2hlYWRlcnNbXCJjb250ZW50LWxlbmd0aFwiXSk7XG4gICAgc2VsZi5fY2h1bmtzTnVtYmVyID0gc2VsZi5fY2FsY3VsYXRlQ2h1bmtzTnVtYmVyKHNlbGYuZmlsZV9zaXplKTtcblxuICAgIGRvd25sb2FkRmlsZVV0aWwuY2hlY2tGb3JMb2NhbEZpbGUoc2VsZi5fZGVzdEZpbGUsIGZ1bmN0aW9uIChleGlzdHMsIGZpbGVTaXplKSB7XG4gICAgICBpZiAoZXhpc3RzKSB7XG4gICAgICAgIGlmIChmaWxlU2l6ZSA9PT0gc2VsZi5maWxlX3NpemUpIHtcbiAgICAgICAgICBzZWxmLmVtaXQoXCJlbmRcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZVNpemUgPiBzZWxmLmZpbGVfc2l6ZSkge1xuICAgICAgICAgIGZzLnVubGluayhzZWxmLl9kZXN0RmlsZSwgKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2VsZi5fc3RhcnRBbGxDaHVua3MoKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlU2l6ZSA8IHNlbGYuZmlsZV9zaXplICYmIHNlbGYuX2NodW5rc051bWJlciA+IDEpIHtcbiAgICAgICAgICBmcy51bmxpbmsoc2VsZi5fZGVzdEZpbGUsIChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNlbGYuX3N0YXJ0QWxsQ2h1bmtzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5fc3RhcnRBbGxDaHVua3MoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5fc3RhcnRBbGxDaHVua3MoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHJlcS5lbmQoKTtcbn07XG5cbi8qKlxuICogc3RvcHMgZG93bmxvYWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZEZpbGUucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBwcm9taXNlcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMCwgaiA9IHRoaXMuX2NodW5rcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICB0aGlzLl9jaHVua3NbaV0uc3RvcCgpO1xuICAgIGlmICh0aGlzLl9jaHVua3NbaV0uX3Byb21pc2UpIHtcbiAgICAgIHByb21pc2VzLnB1c2godGhpcy5fY2h1bmtzW2ldLl9wcm9taXNlKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gb25TdG9wcGVkICgpIHtcbiAgICB0aGlzLmVtaXQoXCJlbmRcIiwgJycpO1xuICB9XG4gIGlmICghdGhpcy5fcHJvbWlzZXMpIHtcbiAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihvblN0b3BwZWQuYmluZCh0aGlzKSwgb25TdG9wcGVkLmJpbmQodGhpcykpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERvd25sb2FkRmlsZTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///88\n')},function(module,exports,__webpack_require__){eval('var downloadFileUtil = __webpack_require__(7);\n\nvar fs = __webpack_require__(3);\n\nvar _require = __webpack_require__(2),\n    net = _require.net;\n\nvar EventEmitter = __webpack_require__(14).EventEmitter;\n/**\n *\n * @param {string} url - url\n * @param {object} options - options\n * @returns {Chunk} - chunk object\n * @constructor\n */\n\n\nfunction Chunk(url, options) {\n  var self = this;\n  this.url = url;\n  this.options = options;\n  this.endPosition = options.endPosition;\n  this.startPosition = options.startPosition;\n  this.bytesRangeNotAvailable = options.bytesRangeNotAvailable;\n  this.reset();\n  this.events = new EventEmitter();\n  this._promise = new Promise(function (resolve, reject) {\n    self.resolve = resolve;\n    self.reject = reject;\n  });\n  return this;\n}\n\nChunk.prototype._retry = function (errorType, callback) {\n  var self = this;\n  var maxDownloadRetry;\n  this._errors = this._errors || {};\n  this._errors[errorType] = this._errors[errorType] || 0;\n  this._errors[errorType]++;\n\n  if (errorType === downloadFileUtil.errors.INTERNET) {\n    maxDownloadRetry = this.options.maxDownloadInternetRetry;\n  } else {\n    maxDownloadRetry = this.options.maxDownloadRetry;\n  }\n\n  if (this._errors[errorType] <= maxDownloadRetry) {\n    if (self._timer) {\n      clearTimeout(self._timer);\n    }\n\n    callback(true);\n    self._timer = setTimeout(function () {\n      // console.log("retrying chunk", errorType, self.destFile);\n      self.reset(function () {\n        self.start();\n      });\n    }, self.options.retryTimeout);\n  } else {\n    // console.log("not retrying chunk", errorType, self._errors[errorType]);\n    callback(false);\n  }\n};\n\nChunk.prototype.createFileStream = function (callback) {\n  var self = this;\n\n  if (!this.fileStream) {\n    var destFile = this.options.destFile;\n\n    if (this.options.multiChunks) {\n      destFile = destFile + "." + this.startPosition + "." + this.endPosition;\n    }\n\n    downloadFileUtil.checkForLocalFile(destFile, function (resumeFile, fileSize) {\n      self.destFile = destFile;\n\n      if (resumeFile) {\n        if (fileSize <= self.endPosition - self.startPosition) {\n          self.resumeFile = resumeFile;\n          self.available = fileSize;\n          self.offsetStartPosition = fileSize;\n        }\n      }\n\n      self.fileStream = fs.createWriteStream(destFile, {\n        flags: self.resumeFile ? "a" : "w"\n      });\n      self.fileStream.on("error", callback);\n      self.fileStream.on("open", function () {\n        // for unknown reason from time to time the file descriptor of self.fileStream is null\n        // when event \'open\' is fired then the file descriptor is not a null anymore\n        // this should fix a problem with EBADF error\n        // a bug in fs ?\n        self.fileStream = this;\n        this.removeListener("error", callback);\n        this.on("error", function (error) {\n          if (error.code === "ENOSPC") {\n            // no space left on disk, do not retry downloading\n            self.resolve(downloadFileUtil.errors.NO_SPACE_LEFT_ERROR, error);\n          } else {\n            self._retry(downloadFileUtil.errors.FILE_WRITING_ERROR, function (retried) {\n              if (!retried) {\n                self.resolve(downloadFileUtil.errors.FILE_WRITING_ERROR, error);\n              }\n            });\n          }\n        });\n        this.on("finish", function () {\n          if (!self.isDownloaded()) {\n            self._retry(downloadFileUtil.errors.CHUNK_SIZE_ERROR, function (retried) {\n              if (!retried) {\n                self.closeStreamAndRequest(function () {\n                  self.resolve(downloadFileUtil.errors.CHUNK_SIZE_ERROR);\n                });\n              }\n            });\n          } else {\n            self.closeStreamAndRequest(self.resolve);\n          }\n        });\n        callback();\n      });\n    });\n  } else {\n    callback();\n  }\n};\n\nChunk.prototype.isDownloaded = function () {\n  return this.endPosition - this.startPosition - this.offsetStartPosition + 1 === this.downloaded;\n};\n\nChunk.prototype.start = function () {\n  var self = this;\n  var req_options = {\n    timeout: this.options.timeout,\n    url: this.url\n  };\n  self.createFileStream(function (err) {\n    if (err) {\n      self._retry(downloadFileUtil.errors.FILE_CREATING_ERROR, function (retried) {\n        if (!retried) {\n          self.closeStreamAndRequest(function () {\n            self.resolve(downloadFileUtil.errors.FILE_CREATING_ERROR, err);\n          });\n        }\n      });\n\n      return;\n    }\n\n    req_options.headers = req_options.headers || {};\n\n    if (!self.bytesRangeNotAvailable) {\n      req_options.headers.range = "bytes=" + (self.startPosition + self.offsetStartPosition) + "-" + self.endPosition;\n    }\n\n    self._req = net.request(req_options);\n\n    self._req.on(\'response\', function (response) {\n      response.on("error", function (error) {\n        if (error.code === "ESOCKETTIMEDOUT" || error.code === "ENOTFOUND" || error.code === "ETIMEDOUT") {\n          self._retry(downloadFileUtil.errors.INTERNET, function (retried) {\n            if (!retried) {\n              self.closeStreamAndRequest(function () {\n                self.resolve(downloadFileUtil.errors.TIMEOUT, error);\n              });\n            }\n          });\n        } else {\n          self.closeStreamAndRequest(function () {\n            self.resolve(downloadFileUtil.errors.CHUNK_ERROR);\n          });\n        }\n      });\n      response.on("data", function (data) {\n        if (response.statusCode === 200 || response.statusCode === 206) {\n          self.available += data.length;\n          self.downloaded += data.length;\n          self.events.emit("download", data.length);\n        }\n      });\n      response.pipe(self.fileStream);\n    });\n\n    self._req.end();\n  });\n  return this._promise;\n};\n\nChunk.prototype.closeStreamAndRequest = function (callback) {\n  var self = this;\n  var timer;\n  var timerTimoutMS = 300;\n\n  function onClose() {\n    clearTimeout(timer);\n\n    if (self.fileStream) {\n      self.fileStream.destroy();\n      delete self.fileStream;\n    }\n\n    delete self._req;\n    callback();\n  }\n\n  if (this._req) {\n    this._req.removeAllListeners();\n  }\n\n  if (this.fileStream) {\n    this.fileStream.removeAllListeners();\n  }\n\n  if (this._req) {\n    this._req.abort();\n\n    if (this._req.timeoutTimer) {\n      clearTimeout(this._req.timeoutTimer);\n      this._req.timeoutTimer = null;\n    }\n  }\n\n  if (this.fileStream) {\n    timer = setTimeout(function () {\n      onClose();\n    }, timerTimoutMS);\n    this.fileStream.end();\n    this.fileStream.close(onClose);\n  } else {\n    delete this._req;\n    callback();\n  }\n};\n\nChunk.prototype.reset = function (callback) {\n  var self = this;\n\n  callback = callback || function () {};\n\n  self.closeStreamAndRequest(function () {\n    self.offsetStartPosition = 0;\n    self.available = 0;\n    self.downloaded = 0;\n    self.writeProgress = 0;\n    self.resumeFile = false;\n    callback();\n  });\n};\n\nChunk.prototype.stop = function () {\n  var self = this;\n  this.reset(function () {\n    self.resolve(downloadFileUtil.errors.ABORTED);\n  });\n};\n\nmodule.exports = Chunk;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL2Rvd25sb2FkLWZpbGUtY2h1bmsuanM/YjEwYSJdLCJuYW1lcyI6WyJkb3dubG9hZEZpbGVVdGlsIiwicmVxdWlyZSIsImZzIiwibmV0IiwiRXZlbnRFbWl0dGVyIiwiQ2h1bmsiLCJ1cmwiLCJvcHRpb25zIiwic2VsZiIsImVuZFBvc2l0aW9uIiwic3RhcnRQb3NpdGlvbiIsImJ5dGVzUmFuZ2VOb3RBdmFpbGFibGUiLCJyZXNldCIsImV2ZW50cyIsIl9wcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwcm90b3R5cGUiLCJfcmV0cnkiLCJlcnJvclR5cGUiLCJjYWxsYmFjayIsIm1heERvd25sb2FkUmV0cnkiLCJfZXJyb3JzIiwiZXJyb3JzIiwiSU5URVJORVQiLCJtYXhEb3dubG9hZEludGVybmV0UmV0cnkiLCJfdGltZXIiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic3RhcnQiLCJyZXRyeVRpbWVvdXQiLCJjcmVhdGVGaWxlU3RyZWFtIiwiZmlsZVN0cmVhbSIsImRlc3RGaWxlIiwibXVsdGlDaHVua3MiLCJjaGVja0ZvckxvY2FsRmlsZSIsInJlc3VtZUZpbGUiLCJmaWxlU2l6ZSIsImF2YWlsYWJsZSIsIm9mZnNldFN0YXJ0UG9zaXRpb24iLCJjcmVhdGVXcml0ZVN0cmVhbSIsImZsYWdzIiwib24iLCJyZW1vdmVMaXN0ZW5lciIsImVycm9yIiwiY29kZSIsIk5PX1NQQUNFX0xFRlRfRVJST1IiLCJGSUxFX1dSSVRJTkdfRVJST1IiLCJyZXRyaWVkIiwiaXNEb3dubG9hZGVkIiwiQ0hVTktfU0laRV9FUlJPUiIsImNsb3NlU3RyZWFtQW5kUmVxdWVzdCIsImRvd25sb2FkZWQiLCJyZXFfb3B0aW9ucyIsInRpbWVvdXQiLCJlcnIiLCJGSUxFX0NSRUFUSU5HX0VSUk9SIiwiaGVhZGVycyIsInJhbmdlIiwiX3JlcSIsInJlcXVlc3QiLCJyZXNwb25zZSIsIlRJTUVPVVQiLCJDSFVOS19FUlJPUiIsImRhdGEiLCJzdGF0dXNDb2RlIiwibGVuZ3RoIiwiZW1pdCIsInBpcGUiLCJlbmQiLCJ0aW1lciIsInRpbWVyVGltb3V0TVMiLCJvbkNsb3NlIiwiZGVzdHJveSIsInJlbW92ZUFsbExpc3RlbmVycyIsImFib3J0IiwidGltZW91dFRpbWVyIiwiY2xvc2UiLCJ3cml0ZVByb2dyZXNzIiwic3RvcCIsIkFCT1JURUQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxnQkFBZ0IsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQWhDOztBQUNBLElBQU1DLEVBQUUsR0FBR0QsbUJBQU8sQ0FBQyxDQUFELENBQWxCOztlQUNjQSxtQkFBTyxDQUFDLENBQUQsQztJQUFkRSxHLFlBQUFBLEc7O0FBQ1AsSUFBTUMsWUFBWSxHQUFHSCxtQkFBTyxDQUFDLEVBQUQsQ0FBUCxDQUFrQkcsWUFBdkM7QUFFQTs7Ozs7Ozs7O0FBT0EsU0FBU0MsS0FBVCxDQUFnQkMsR0FBaEIsRUFBcUJDLE9BQXJCLEVBQThCO0FBQzVCLE1BQU1DLElBQUksR0FBRyxJQUFiO0FBQ0EsT0FBS0YsR0FBTCxHQUFXQSxHQUFYO0FBQ0EsT0FBS0MsT0FBTCxHQUFlQSxPQUFmO0FBQ0EsT0FBS0UsV0FBTCxHQUFtQkYsT0FBTyxDQUFDRSxXQUEzQjtBQUNBLE9BQUtDLGFBQUwsR0FBcUJILE9BQU8sQ0FBQ0csYUFBN0I7QUFDQSxPQUFLQyxzQkFBTCxHQUE4QkosT0FBTyxDQUFDSSxzQkFBdEM7QUFDQSxPQUFLQyxLQUFMO0FBQ0EsT0FBS0MsTUFBTCxHQUFjLElBQUlULFlBQUosRUFBZDtBQUNBLE9BQUtVLFFBQUwsR0FBZ0IsSUFBSUMsT0FBSixDQUFZLFVBQVVDLE9BQVYsRUFBbUJDLE1BQW5CLEVBQTJCO0FBQ3JEVCxRQUFJLENBQUNRLE9BQUwsR0FBZUEsT0FBZjtBQUNBUixRQUFJLENBQUNTLE1BQUwsR0FBY0EsTUFBZDtBQUNELEdBSGUsQ0FBaEI7QUFJQSxTQUFPLElBQVA7QUFD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ZmlsZSI6Ijg5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZG93bmxvYWRGaWxlVXRpbCA9IHJlcXVpcmUoXCIuL2Rvd25sb2FkLWZpbGUtdXRpbFwiKTtcbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuY29uc3Qge25ldH0gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xuY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcImV2ZW50c1wiKS5FdmVudEVtaXR0ZXI7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSB1cmxcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gb3B0aW9uc1xuICogQHJldHVybnMge0NodW5rfSAtIGNodW5rIG9iamVjdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIENodW5rICh1cmwsIG9wdGlvbnMpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHRoaXMudXJsID0gdXJsO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB0aGlzLmVuZFBvc2l0aW9uID0gb3B0aW9ucy5lbmRQb3NpdGlvbjtcbiAgdGhpcy5zdGFydFBvc2l0aW9uID0gb3B0aW9ucy5zdGFydFBvc2l0aW9uO1xuICB0aGlzLmJ5dGVzUmFuZ2VOb3RBdmFpbGFibGUgPSBvcHRpb25zLmJ5dGVzUmFuZ2VOb3RBdmFpbGFibGU7XG4gIHRoaXMucmVzZXQoKTtcbiAgdGhpcy5ldmVudHMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgc2VsZi5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICBzZWxmLnJlamVjdCA9IHJlamVjdDtcbiAgfSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5DaHVuay5wcm90b3R5cGUuX3JldHJ5ID0gZnVuY3Rpb24gKGVycm9yVHlwZSwgY2FsbGJhY2spIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIGxldCBtYXhEb3dubG9hZFJldHJ5O1xuICB0aGlzLl9lcnJvcnMgPSB0aGlzLl9lcnJvcnMgfHwge307XG4gIHRoaXMuX2Vycm9yc1tlcnJvclR5cGVdID0gdGhpcy5fZXJyb3JzW2Vycm9yVHlwZV0gfHwgMDtcbiAgdGhpcy5fZXJyb3JzW2Vycm9yVHlwZV0rKztcbiAgaWYgKGVycm9yVHlwZSA9PT0gZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuSU5URVJORVQpIHtcbiAgICBtYXhEb3dubG9hZFJldHJ5ID0gdGhpcy5vcHRpb25zLm1heERvd25sb2FkSW50ZXJuZXRSZXRyeTtcbiAgfSBlbHNlIHtcbiAgICBtYXhEb3dubG9hZFJldHJ5ID0gdGhpcy5vcHRpb25zLm1heERvd25sb2FkUmV0cnk7XG4gIH1cbiAgaWYgKHRoaXMuX2Vycm9yc1tlcnJvclR5cGVdIDw9IG1heERvd25sb2FkUmV0cnkpIHtcbiAgICBpZiAoc2VsZi5fdGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dChzZWxmLl90aW1lcik7XG4gICAgfVxuICAgIGNhbGxiYWNrKHRydWUpO1xuICAgIHNlbGYuX3RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcInJldHJ5aW5nIGNodW5rXCIsIGVycm9yVHlwZSwgc2VsZi5kZXN0RmlsZSk7XG4gICAgICBzZWxmLnJlc2V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zdGFydCgpO1xuICAgICAgfSk7XG4gICAgfSwgc2VsZi5vcHRpb25zLnJldHJ5VGltZW91dCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJub3QgcmV0cnlpbmcgY2h1bmtcIiwgZXJyb3JUeXBlLCBzZWxmLl9lcnJvcnNbZXJyb3JUeXBlXSk7XG4gICAgY2FsbGJhY2soZmFsc2UpO1xuICB9XG59O1xuXG5DaHVuay5wcm90b3R5cGUuY3JlYXRlRmlsZVN0cmVhbSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgaWYgKCF0aGlzLmZpbGVTdHJlYW0pIHtcbiAgICBsZXQgZGVzdEZpbGUgPSB0aGlzLm9wdGlvbnMuZGVzdEZpbGU7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5tdWx0aUNodW5rcykge1xuICAgICAgZGVzdEZpbGUgPSBkZXN0RmlsZSArIFwiLlwiICsgdGhpcy5zdGFydFBvc2l0aW9uICsgXCIuXCIgKyB0aGlzLmVuZFBvc2l0aW9uO1xuICAgIH1cbiAgICBkb3dubG9hZEZpbGVVdGlsLmNoZWNrRm9yTG9jYWxGaWxlKGRlc3RGaWxlLCBmdW5jdGlvbiAocmVzdW1lRmlsZSwgZmlsZVNpemUpIHtcbiAgICAgIHNlbGYuZGVzdEZpbGUgPSBkZXN0RmlsZTtcbiAgICAgIGlmIChyZXN1bWVGaWxlKSB7XG4gICAgICAgIGlmIChmaWxlU2l6ZSA8PSBzZWxmLmVuZFBvc2l0aW9uIC0gc2VsZi5zdGFydFBvc2l0aW9uKSB7XG4gICAgICAgICAgc2VsZi5yZXN1bWVGaWxlID0gcmVzdW1lRmlsZTtcbiAgICAgICAgICBzZWxmLmF2YWlsYWJsZSA9IGZpbGVTaXplO1xuICAgICAgICAgIHNlbGYub2Zmc2V0U3RhcnRQb3NpdGlvbiA9IGZpbGVTaXplO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNlbGYuZmlsZVN0cmVhbSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGRlc3RGaWxlLCB7ZmxhZ3M6IHNlbGYucmVzdW1lRmlsZSA/IFwiYVwiIDogXCJ3XCJ9KTtcbiAgICAgIHNlbGYuZmlsZVN0cmVhbS5vbihcImVycm9yXCIsIGNhbGxiYWNrKTtcbiAgICAgIHNlbGYuZmlsZVN0cmVhbS5vbihcIm9wZW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBmb3IgdW5rbm93biByZWFzb24gZnJvbSB0aW1lIHRvIHRpbWUgdGhlIGZpbGUgZGVzY3JpcHRvciBvZiBzZWxmLmZpbGVTdHJlYW0gaXMgbnVsbFxuICAgICAgICAvLyB3aGVuIGV2ZW50ICdvcGVuJyBpcyBmaXJlZCB0aGVuIHRoZSBmaWxlIGRlc2NyaXB0b3IgaXMgbm90IGEgbnVsbCBhbnltb3JlXG4gICAgICAgIC8vIHRoaXMgc2hvdWxkIGZpeCBhIHByb2JsZW0gd2l0aCBFQkFERiBlcnJvclxuICAgICAgICAvLyBhIGJ1ZyBpbiBmcyA/XG4gICAgICAgIHNlbGYuZmlsZVN0cmVhbSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsIGNhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5vbihcImVycm9yXCIsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIkVOT1NQQ1wiKSB7XG4gICAgICAgICAgICAvLyBubyBzcGFjZSBsZWZ0IG9uIGRpc2ssIGRvIG5vdCByZXRyeSBkb3dubG9hZGluZ1xuICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLk5PX1NQQUNFX0xFRlRfRVJST1IsIGVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgIHNlbGYuX3JldHJ5KGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLkZJTEVfV1JJVElOR19FUlJPUiwgZnVuY3Rpb24gKHJldHJpZWQpIHtcbiAgICAgICAgICAgICAgIGlmICghcmV0cmllZCkge1xuICAgICAgICAgICAgICAgICBzZWxmLnJlc29sdmUoZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuRklMRV9XUklUSU5HX0VSUk9SLCBlcnJvcik7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfSk7XG4gICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub24oXCJmaW5pc2hcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghc2VsZi5pc0Rvd25sb2FkZWQoKSkge1xuICAgICAgICAgICAgc2VsZi5fcmV0cnkoZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuQ0hVTktfU0laRV9FUlJPUiwgZnVuY3Rpb24gKHJldHJpZWQpIHtcbiAgICAgICAgICAgICAgaWYgKCFyZXRyaWVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jbG9zZVN0cmVhbUFuZFJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLkNIVU5LX1NJWkVfRVJST1IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5jbG9zZVN0cmVhbUFuZFJlcXVlc3Qoc2VsZi5yZXNvbHZlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY2FsbGJhY2soKTtcbiAgfVxufTtcblxuQ2h1bmsucHJvdG90eXBlLmlzRG93bmxvYWRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZW5kUG9zaXRpb24gLSB0aGlzLnN0YXJ0UG9zaXRpb24gLSB0aGlzLm9mZnNldFN0YXJ0UG9zaXRpb24gKyAxID09PSB0aGlzLmRvd25sb2FkZWQ7XG59O1xuXG5DaHVuay5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gIGxldCByZXFfb3B0aW9ucyA9IHtcbiAgICB0aW1lb3V0OiB0aGlzLm9wdGlvbnMudGltZW91dCxcbiAgICB1cmw6IHRoaXMudXJsLFxuICB9O1xuXG4gIHNlbGYuY3JlYXRlRmlsZVN0cmVhbShmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgc2VsZi5fcmV0cnkoZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuRklMRV9DUkVBVElOR19FUlJPUiwgZnVuY3Rpb24gKHJldHJpZWQpIHtcbiAgICAgICAgaWYgKCFyZXRyaWVkKSB7XG4gICAgICAgICAgc2VsZi5jbG9zZVN0cmVhbUFuZFJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLkZJTEVfQ1JFQVRJTkdfRVJST1IsIGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXFfb3B0aW9ucy5oZWFkZXJzID0gcmVxX29wdGlvbnMuaGVhZGVycyB8fCB7fTtcblxuICAgIGlmICghc2VsZi5ieXRlc1JhbmdlTm90QXZhaWxhYmxlKSB7XG4gICAgICByZXFfb3B0aW9ucy5oZWFkZXJzLnJhbmdlID0gXCJieXRlcz1cIiArIChzZWxmLnN0YXJ0UG9zaXRpb24gKyBzZWxmLm9mZnNldFN0YXJ0UG9zaXRpb24pICsgXCItXCIgKyAoc2VsZi5lbmRQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgc2VsZi5fcmVxID0gbmV0LnJlcXVlc3QocmVxX29wdGlvbnMpO1xuXG4gICAgc2VsZi5fcmVxLm9uKCdyZXNwb25zZScsIChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXNwb25zZS5vbihcImVycm9yXCIsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IFwiRVNPQ0tFVFRJTUVET1VUXCIgfHwgZXJyb3IuY29kZSA9PT0gXCJFTk9URk9VTkRcIiB8fCBlcnJvci5jb2RlID09PSBcIkVUSU1FRE9VVFwiKSB7XG4gICAgICAgICAgICAgIHNlbGYuX3JldHJ5KGRvd25sb2FkRmlsZVV0aWwuZXJyb3JzLklOVEVSTkVULCBmdW5jdGlvbiAocmV0cmllZCkge1xuICAgICAgICAgICAgICAgIGlmICghcmV0cmllZCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZVN0cmVhbUFuZFJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc29sdmUoZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuVElNRU9VVCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNlbGYuY2xvc2VTdHJlYW1BbmRSZXF1ZXN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnJlc29sdmUoZG93bmxvYWRGaWxlVXRpbC5lcnJvcnMuQ0hVTktfRVJST1IpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXNwb25zZS5vbihcImRhdGFcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjA2KSB7XG4gICAgICAgICAgICAgIHNlbGYuYXZhaWxhYmxlICs9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICBzZWxmLmRvd25sb2FkZWQgKz0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgIHNlbGYuZXZlbnRzLmVtaXQoXCJkb3dubG9hZFwiLCBkYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVzcG9uc2UucGlwZShzZWxmLmZpbGVTdHJlYW0pO1xuICAgIH0pO1xuICAgIHNlbGYuX3JlcS5lbmQoKTtcbiAgfSk7XG4gIHJldHVybiB0aGlzLl9wcm9taXNlO1xufTtcblxuQ2h1bmsucHJvdG90eXBlLmNsb3NlU3RyZWFtQW5kUmVxdWVzdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgbGV0IHRpbWVyO1xuICBjb25zdCB0aW1lclRpbW91dE1TID0gMzAwO1xuXG4gIGZ1bmN0aW9uIG9uQ2xvc2UgKCkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgaWYgKHNlbGYuZmlsZVN0cmVhbSkge1xuICAgICAgc2VsZi5maWxlU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgIGRlbGV0ZSBzZWxmLmZpbGVTdHJlYW07XG4gICAgfVxuICAgIGRlbGV0ZShzZWxmLl9yZXEpO1xuICAgIGNhbGxiYWNrKCk7XG4gIH1cblxuICBpZiAodGhpcy5fcmVxKSB7XG4gICAgdGhpcy5fcmVxLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9XG4gIGlmICh0aGlzLmZpbGVTdHJlYW0pIHtcbiAgICB0aGlzLmZpbGVTdHJlYW0ucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIH1cbiAgaWYgKHRoaXMuX3JlcSkge1xuICAgIHRoaXMuX3JlcS5hYm9ydCgpO1xuICAgIGlmICh0aGlzLl9yZXEudGltZW91dFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fcmVxLnRpbWVvdXRUaW1lcik7XG4gICAgICB0aGlzLl9yZXEudGltZW91dFRpbWVyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5maWxlU3RyZWFtKSB7XG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uQ2xvc2UoKTtcbiAgICB9LCB0aW1lclRpbW91dE1TKTtcbiAgICB0aGlzLmZpbGVTdHJlYW0uZW5kKCk7XG4gICAgdGhpcy5maWxlU3RyZWFtLmNsb3NlKG9uQ2xvc2UpO1xuICB9IGVsc2Uge1xuICAgIGRlbGV0ZSB0aGlzLl9yZXE7XG4gICAgY2FsbGJhY2soKTtcbiAgfVxufTtcblxuQ2h1bmsucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9O1xuXG4gIHNlbGYuY2xvc2VTdHJlYW1BbmRSZXF1ZXN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLm9mZnNldFN0YXJ0UG9zaXRpb24gPSAwO1xuICAgIHNlbGYuYXZhaWxhYmxlID0gMDtcbiAgICBzZWxmLmRvd25sb2FkZWQgPSAwO1xuICAgIHNlbGYud3JpdGVQcm9ncmVzcyA9IDA7XG4gICAgc2VsZi5yZXN1bWVGaWxlID0gZmFsc2U7XG4gICAgY2FsbGJhY2soKTtcbiAgfSk7XG59O1xuXG5DaHVuay5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHRoaXMucmVzZXQoZnVuY3Rpb24gKCkge1xuICAgIHNlbGYucmVzb2x2ZShkb3dubG9hZEZpbGVVdGlsLmVycm9ycy5BQk9SVEVEKTtcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENodW5rO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///89\n')},function(module,exports,__webpack_require__){"use strict";eval('/*eslint no-console: ["error", { allow: ["warn", "error", "info"] }] */\n\n\nvar _ = __webpack_require__(5);\n\nvar appSettings = __webpack_require__(1);\n\nvar ArrayStorage = __webpack_require__(31);\n\nvar ArrayStorageBridge = __webpack_require__(91);\n\nvar FlushItem = __webpack_require__(12);\n\nvar Storage = __webpack_require__(33);\n\nvar StorageBridge = __webpack_require__(92);\n\nvar SyncItem = __webpack_require__(93);\n/**\n *\n * @constructor\n */\n\n\nfunction DownloadsStorageController() {\n  this.stores = appSettings.getSettings().stores;\n  this._items = {};\n  this._syncItems = [];\n  this._FLUSH_TIME = 50; //in miliseconds\n\n  this._flushThrottled = _.throttle(this._flush, this._FLUSH_TIME, {\n    leading: false\n  });\n\n  this._createDummyStorageBridge();\n}\n/**\n *\n * @private\n * @param {string} manifestId - manifest identifier\n * @param {string} key - key identifier\n * @returns {void}\n */\n\n\nDownloadsStorageController.prototype._createArrayStorage = function (manifestId, key) {\n  if (!this[key]) {\n    this._createArrayStorageBridge(key);\n  }\n\n  this._items[manifestId][key] = new ArrayStorage();\n};\n/**\n *\n * @private\n * @param {string} key - key identifier\n * @returns {void}\n */\n\n\nDownloadsStorageController.prototype._createArrayStorageBridge = function (key) {\n  this[key] = new ArrayStorageBridge(this, key);\n};\n\nDownloadsStorageController.prototype._createDummyStorageBridge = function () {\n  this._createArrayStorageBridge(this.stores.DOWNLOADS.LEFT);\n\n  this._createArrayStorageBridge(this.stores.DOWNLOADS.DOWNLOADED);\n\n  this._createStorageBridge(this.stores.DOWNLOADS.DOWNLOADING);\n\n  this._createArrayStorageBridge(this.stores.DOWNLOADS.ERRORS);\n\n  this._createStorageBridge(this.stores.PARAMS);\n\n  this._createStorageBridge(this.stores.MANIFEST);\n\n  this._createStorageBridge(this.stores.STATUS);\n};\n/**\n *\n * @private\n * @param {string} manifestId - manifest identifier\n * @param {string} key - key identifier\n * @returns {void}\n */\n\n\nDownloadsStorageController.prototype._createStorage = function (manifestId, key) {\n  if (!this[key]) {\n    this._createStorageBridge(key);\n  }\n\n  this._items[manifestId][key] = new Storage();\n};\n/**\n *\n * @private\n * @param {string} key - key identifier\n * @returns {void}\n */\n\n\nDownloadsStorageController.prototype._createStorageBridge = function (key) {\n  this[key] = new StorageBridge(this, key);\n};\n/**\n *\n * @private\n * @returns {void}\n */\n\n\nDownloadsStorageController.prototype._flush = function () {\n  var self = this;\n\n  var items = this._syncItems.splice(0, this._syncItems.length);\n\n  var flushItem, flushItems, i, item, j, k, l, manifestId, storageKey, storageKeys, storagesToFlush;\n  storagesToFlush = {};\n\n  function getItems(manifestId, storageKey) {\n    if (self._items[manifestId] && self._items[manifestId][storageKey]) {\n      return self._items[manifestId][storageKey].getItems();\n    } else {\n      return [];\n    }\n  } //collect information which storages needs to be saved\n\n\n  for (i = 0, j = items.length; i < j; i++) {\n    item = items[i];\n    storagesToFlush[item.manifestId] = storagesToFlush[item.manifestId] || {};\n\n    for (k = 0, l = item.storageKeys.length; k < l; k++) {\n      storagesToFlush[item.manifestId][item.storageKeys[k]] = true;\n    }\n  }\n\n  flushItems = []; //create flush items - promises that needs to be resolved together in parallel\n\n  for (manifestId in storagesToFlush) {\n    storageKeys = storagesToFlush[manifestId];\n\n    for (storageKey in storageKeys) {\n      try {\n        flushItem = new FlushItem(manifestId, storageKey, getItems(manifestId, storageKey));\n        flushItems.push(flushItem.save());\n      } catch (e) {\n        console.error("ERROR", storageKey);\n      }\n    }\n  }\n\n  Promise.all(flushItems).then(function () {\n    var i, j;\n\n    for (i = 0, j = items.length; i < j; i++) {\n      items[i].resolve();\n    }\n  }, function () {\n    var i, j;\n\n    for (i = 0, j = items.length; i < j; i++) {\n      items[i].reject();\n    }\n  });\n};\n/**\n *\n * @private\n * @param {Array} [storageKey] storage key\n * @returns {Array} keys for all storages\n */\n\n\nDownloadsStorageController.prototype._getAllStorageKeys = function (storageKey) {\n  var keys = [];\n  storageKey = storageKey || this.stores;\n\n  for (var key in storageKey) {\n    if (storageKey.hasOwnProperty(key)) {\n      if (typeof storageKey[key] === "string") {\n        //params don\'t need to be stored to disk\n        if (key !== this.stores.PARAMS) {\n          keys.push(storageKey[key]);\n        }\n      } else {\n        keys = keys.concat(this._getAllStorageKeys(storageKey[key]));\n      }\n    }\n  }\n\n  return keys;\n};\n/**\n *\n * @private\n * @param {string} storageKey storage key identifier\n * @param {string} bridgeMethodName method name to be called\n * @param {string} manifestId - manifest identifier\n * @returns {*} items\n */\n\n\nDownloadsStorageController.prototype._itemAction = function (storageKey, bridgeMethodName, manifestId) {\n  var args = [],\n      i,\n      j; //collect all other parameters except those already listed\n\n  for (i = 3, j = arguments.length; i < j; i++) {\n    args.push(arguments[i]);\n  }\n\n  if (this._items[manifestId] && this._items[manifestId][storageKey] && this._items[manifestId][storageKey][bridgeMethodName]) {\n    return this._items[manifestId][storageKey][bridgeMethodName].apply(this._items[manifestId][storageKey], args);\n  } else {\n    //if manifest still exists\n    if (this._items[manifestId]) {\n      console.error("ERROR", manifestId, storageKey, bridgeMethodName, args);\n    }\n\n    return undefined;\n  }\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Array} [storageKeys] storage keys that will be cleared\n * @returns {Promise} promise\n */\n\n\nDownloadsStorageController.prototype.clear = function (manifestId, storageKeys) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    storageKeys = storageKeys || self._getAllStorageKeys();\n\n    if (self._items[manifestId]) {\n      for (var i = 0, j = storageKeys.length; i < j; i++) {\n        var storage = self._items[manifestId][storageKeys[i]];\n\n        if (storage) {\n          storage.clear();\n        }\n      }\n    }\n\n    delete self._items[manifestId];\n    self.sync(manifestId, storageKeys).then(resolve, reject);\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {Promise} promise\n */\n\n\nDownloadsStorageController.prototype.create = function (manifestId) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    self._items[manifestId] = {};\n\n    self._createArrayStorage(manifestId, self.stores.DOWNLOADS.LEFT);\n\n    self._createArrayStorage(manifestId, self.stores.DOWNLOADS.DOWNLOADED);\n\n    self._createStorage(manifestId, self.stores.DOWNLOADS.DOWNLOADING);\n\n    self._createArrayStorage(manifestId, self.stores.DOWNLOADS.ERRORS);\n\n    self._createStorage(manifestId, self.stores.PARAMS);\n\n    self._createStorage(manifestId, self.stores.MANIFEST);\n\n    self._createStorage(manifestId, self.stores.STATUS);\n\n    self.sync(manifestId, [self.stores.DOWNLOADS.DOWNLOADED, self.stores.MANIFEST, self.stores.STATUS]).then(resolve, reject);\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {Promise} promise\n */\n\n\nDownloadsStorageController.prototype.createIfNotExists = function (manifestId) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    self.getItem(manifestId).then(function (result) {\n      if (result) {\n        resolve();\n      } else {\n        self.create(manifestId).then(resolve, reject);\n      }\n    }, reject);\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {Promise} promise\n */\n\n\nDownloadsStorageController.prototype.getItem = function (manifestId) {\n  var self = this;\n  return new Promise(function (resolve) {\n    resolve(self._items[manifestId]);\n  });\n};\n/**\n *\n * @returns {string[]} keys of all items\n */\n\n\nDownloadsStorageController.prototype.getKeys = function () {\n  return Object.keys(this._items);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {boolean} if certain manifest id exists\n */\n\n\nDownloadsStorageController.prototype.keyExists = function (manifestId) {\n  return !!this._items[manifestId];\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {Promise} promise\n */\n\n\nDownloadsStorageController.prototype.removeItem = function (manifestId) {\n  var self = this;\n  return new Promise(function (resolve) {\n    delete self._items[manifestId];\n    resolve();\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Array} [storageKeys] storage keys that will be synced\n * @returns {Promise} promise\n */\n\n\nDownloadsStorageController.prototype.sync = function (manifestId, storageKeys) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    if (typeof storageKeys === "undefined") {\n      reject("Storage key is missing");\n      return;\n    }\n\n    if (typeof storageKeys === "string") {\n      storageKeys = [storageKeys];\n    }\n\n    if (appSettings.getSettings().saveToDisk) {\n      self._syncItems.push(new SyncItem(resolve, reject, manifestId, storageKeys));\n\n      self._flushThrottled();\n    } else {\n      resolve();\n    }\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {Promise} promise\n */\n\n\nDownloadsStorageController.prototype.syncAll = function (manifestId) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    if (appSettings.getSettings().saveToDisk) {\n      var storageKeys = self._getAllStorageKeys();\n\n      self._syncItems.push(new SyncItem(resolve, reject, manifestId, storageKeys));\n\n      self._flushThrottled();\n    } else {\n      resolve();\n    }\n  });\n};\n\nmodule.exports = DownloadsStorageController;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvY29udHJvbGxlcnMvZG93bmxvYWRzLXN0b3JhZ2UtY29udHJvbGxlci5qcz82NTM3Il0sIm5hbWVzIjpbIl8iLCJyZXF1aXJlIiwiYXBwU2V0dGluZ3MiLCJBcnJheVN0b3JhZ2UiLCJBcnJheVN0b3JhZ2VCcmlkZ2UiLCJGbHVzaEl0ZW0iLCJTdG9yYWdlIiwiU3RvcmFnZUJyaWRnZSIsIlN5bmNJdGVtIiwiRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIiLCJzdG9yZXMiLCJnZXRTZXR0aW5ncyIsIl9pdGVtcyIsIl9zeW5jSXRlbXMiLCJfRkxVU0hfVElNRSIsIl9mbHVzaFRocm90dGxlZCIsInRocm90dGxlIiwiX2ZsdXNoIiwibGVhZGluZyIsIl9jcmVhdGVEdW1teVN0b3JhZ2VCcmlkZ2UiLCJwcm90b3R5cGUiLCJfY3JlYXRlQXJyYXlTdG9yYWdlIiwibWFuaWZlc3RJZCIsImtleSIsIl9jcmVhdGVBcnJheVN0b3JhZ2VCcmlkZ2UiLCJET1dOTE9BRFMiLCJMRUZUIiwiRE9XTkxPQURFRCIsIl9jcmVhdGVTdG9yYWdlQnJpZGdlIiwiRE9XTkxPQURJTkciLCJFUlJPUlMiLCJQQVJBTVMiLCJNQU5JRkVTVCIsIlNUQVRVUyIsIl9jcmVhdGVTdG9yYWdlIiwic2VsZiIsIml0ZW1zIiwic3BsaWNlIiwibGVuZ3RoIiwiZmx1c2hJdGVtIiwiZmx1c2hJdGVtcyIsImkiLCJpdGVtIiwiaiIsImsiLCJsIiwic3RvcmFnZUtleSIsInN0b3JhZ2VLZXlzIiwic3RvcmFnZXNUb0ZsdXNoIiwiZ2V0SXRlbXMiLCJwdXNoIiwic2F2ZSIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJQcm9taXNlIiwiYWxsIiwidGhlbiIsInJlc29sdmUiLCJyZWplY3QiLCJfZ2V0QWxsU3RvcmFnZUtleXMiLCJrZXlzIiwiaGFzT3duUHJvcGVydHkiLCJjb25jYXQiLCJfaXRlbUFjdGlvbiIsImJyaWRnZU1ldGhvZE5hbWUiLCJhcmdzIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJ1bmRlZmluZWQiLCJjbGVhciIsInN0b3JhZ2UiLCJzeW5jIiwiY3JlYXRlIiwiY3JlYXRlSWZOb3RFeGlzdHMiLCJnZXRJdGVtIiwicmVzdWx0IiwiZ2V0S2V5cyIsIk9iamVjdCIsImtleUV4aXN0cyIsInJlbW92ZUl0ZW0iLCJzYXZlVG9EaXNrIiwic3luY0FsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ2E7O0FBQ2IsSUFBTUEsQ0FBQyxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBakI7O0FBRUEsSUFBTUMsV0FBVyxHQUFHRCxtQkFBTyxDQUFDLENBQUQsQ0FBM0I7O0FBQ0EsSUFBTUUsWUFBWSxHQUFHRixtQkFBTyxDQUFDLEVBQUQsQ0FBNUI7O0FBQ0EsSUFBTUcsa0JBQWtCLEdBQUdILG1CQUFPLENBQUMsRUFBRCxDQUFsQzs7QUFDQSxJQUFNSSxTQUFTLEdBQUdKLG1CQUFPLENBQUMsRUFBRCxDQUF6Qjs7QUFDQSxJQUFNSyxPQUFPLEdBQUdMLG1CQUFPLENBQUMsRUFBRCxDQUF2Qjs7QUFDQSxJQUFNTSxhQUFhLEdBQUdOLG1CQUFPLENBQUMsRUFBRCxDQUE3Qjs7QUFDQSxJQUFNTyxRQUFRLEdBQUdQLG1CQUFPLENBQUMsRUFBRCxDQUF4QjtBQUVBOzs7Ozs7QUFJQSxTQUFTUSwwQkFBVCxHQUF1QztBQUNyQyxPQUFLQyxNQUFMLEdBQWNSLFdBQVcsQ0FBQ1MsV0FBWixHQUEwQkQsTUFBeEM7QUFDQSxPQUFLRSxNQUFMLEdBQWMsRUFBZDtBQUNBLE9BQUtDLFVBQUwsR0FBa0IsRUFBbEI7QUFDQSxPQUFLQyxXQUFMLEdBQW1CLEVBQW5CLENBSnFDLENBSWY7O0FBQ3RCLE9BQUtDLGVBQUwsR0FBdUJmLENBQUMsQ0FBQ2dCLFFBQUYsQ0FBVyxLQUFLQyxNQUFoQixFQUF3QixLQUFLSCxXQUE3QixFQUEwQztBQUFDSSxXQUFPLEVBQUU7QUFBVixHQUExQyxDQUF2Qjs7QUFDQSxPQUFLQyx5QkFBTDtBQUNEO0FBRUQ7Ozs7Ozs7OztB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VUcsT0FBVixFQUFtQkMsTUFBbkIsRUFBMkI7QUFDNUMsUUFBSXpELFdBQVcsQ0FBQ1MsV0FBWixHQUEwQnNFLFVBQTlCLEVBQTBDO0FBQ3hDLFVBQUlsQyxXQUFXLEdBQUdaLElBQUksQ0FBQ3lCLGtCQUFMLEVBQWxCOztBQUNBekIsVUFBSSxDQUFDdEIsVUFBTCxDQUFnQnFDLElBQWhCLENBQXFCLElBQUkxQyxRQUFKLENBQWFrRCxPQUFiLEVBQXNCQyxNQUF0QixFQUE4QnJDLFVBQTlCLEVBQTBDeUIsV0FBMUMsQ0FBckI7O0FBQ0FaLFVBQUksQ0FBQ3BCLGVBQUw7QUFDRCxLQUpELE1BSU87QUFDTDJDLGFBQU87QUFDUjtBQUNGLEdBUk0sQ0FBUDtBQVNELENBWEQ7O0FBYUF5QixNQUFNLENBQUNDLE9BQVAsR0FBaUIzRSwwQkFBakIiLCJmaWxlIjoiOTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmVzbGludCBuby1jb25zb2xlOiBbXCJlcnJvclwiLCB7IGFsbG93OiBbXCJ3YXJuXCIsIFwiZXJyb3JcIiwgXCJpbmZvXCJdIH1dICovXG5cInVzZSBzdHJpY3RcIjtcbmNvbnN0IF8gPSByZXF1aXJlKFwidW5kZXJzY29yZVwiKTtcblxuY29uc3QgYXBwU2V0dGluZ3MgPSByZXF1aXJlKCcuLi9hcHAtc2V0dGluZ3MnKTtcbmNvbnN0IEFycmF5U3RvcmFnZSA9IHJlcXVpcmUoXCIuLy4uL3V0aWwvYXJyYXktc3RvcmFnZVwiKTtcbmNvbnN0IEFycmF5U3RvcmFnZUJyaWRnZSA9IHJlcXVpcmUoXCIuLy4uL3V0aWwvYXJyYXktc3RvcmFnZS1icmlkZ2VcIik7XG5jb25zdCBGbHVzaEl0ZW0gPSByZXF1aXJlKFwiLi4vZG93bmxvYWRzL2ZsdXNoLWl0ZW1cIik7XG5jb25zdCBTdG9yYWdlID0gcmVxdWlyZShcIi4vLi4vdXRpbC9zdG9yYWdlXCIpO1xuY29uc3QgU3RvcmFnZUJyaWRnZSA9IHJlcXVpcmUoXCIuLy4uL3V0aWwvc3RvcmFnZS1icmlkZ2VcIik7XG5jb25zdCBTeW5jSXRlbSA9IHJlcXVpcmUoXCIuLi9kb3dubG9hZHMvc3luYy1pdGVtXCIpO1xuXG4vKipcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIgKCkge1xuICB0aGlzLnN0b3JlcyA9IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc3RvcmVzO1xuICB0aGlzLl9pdGVtcyA9IHt9O1xuICB0aGlzLl9zeW5jSXRlbXMgPSBbXTtcbiAgdGhpcy5fRkxVU0hfVElNRSA9IDUwOy8vaW4gbWlsaXNlY29uZHNcbiAgdGhpcy5fZmx1c2hUaHJvdHRsZWQgPSBfLnRocm90dGxlKHRoaXMuX2ZsdXNoLCB0aGlzLl9GTFVTSF9USU1FLCB7bGVhZGluZzogZmFsc2V9KTtcbiAgdGhpcy5fY3JlYXRlRHVtbXlTdG9yYWdlQnJpZGdlKCk7XG59XG5cbi8qKlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBrZXkgaWRlbnRpZmllclxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyLnByb3RvdHlwZS5fY3JlYXRlQXJyYXlTdG9yYWdlID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIGtleSkge1xuICBpZiAoIXRoaXNba2V5XSkge1xuICAgIHRoaXMuX2NyZWF0ZUFycmF5U3RvcmFnZUJyaWRnZShrZXkpO1xuICB9XG4gIHRoaXMuX2l0ZW1zW21hbmlmZXN0SWRdW2tleV0gPSBuZXcgQXJyYXlTdG9yYWdlKCk7XG59O1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIGtleSBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIucHJvdG90eXBlLl9jcmVhdGVBcnJheVN0b3JhZ2VCcmlkZ2UgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHRoaXNba2V5XSA9IG5ldyBBcnJheVN0b3JhZ2VCcmlkZ2UodGhpcywga2V5KTtcbn07XG5cbkRvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyLnByb3RvdHlwZS5fY3JlYXRlRHVtbXlTdG9yYWdlQnJpZGdlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9jcmVhdGVBcnJheVN0b3JhZ2VCcmlkZ2UodGhpcy5zdG9yZXMuRE9XTkxPQURTLkxFRlQpO1xuICB0aGlzLl9jcmVhdGVBcnJheVN0b3JhZ2VCcmlkZ2UodGhpcy5zdG9yZXMuRE9XTkxPQURTLkRPV05MT0FERUQpO1xuICB0aGlzLl9jcmVhdGVTdG9yYWdlQnJpZGdlKHRoaXMuc3RvcmVzLkRPV05MT0FEUy5ET1dOTE9BRElORyk7XG4gIHRoaXMuX2NyZWF0ZUFycmF5U3RvcmFnZUJyaWRnZSh0aGlzLnN0b3Jlcy5ET1dOTE9BRFMuRVJST1JTKTtcbiAgdGhpcy5fY3JlYXRlU3RvcmFnZUJyaWRnZSh0aGlzLnN0b3Jlcy5QQVJBTVMpO1xuICB0aGlzLl9jcmVhdGVTdG9yYWdlQnJpZGdlKHRoaXMuc3RvcmVzLk1BTklGRVNUKTtcbiAgdGhpcy5fY3JlYXRlU3RvcmFnZUJyaWRnZSh0aGlzLnN0b3Jlcy5TVEFUVVMpO1xufTtcblxuLyoqXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIGtleSBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIucHJvdG90eXBlLl9jcmVhdGVTdG9yYWdlID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIGtleSkge1xuICBpZiAoIXRoaXNba2V5XSkge1xuICAgIHRoaXMuX2NyZWF0ZVN0b3JhZ2VCcmlkZ2Uoa2V5KTtcbiAgfVxuICB0aGlzLl9pdGVtc1ttYW5pZmVzdElkXVtrZXldID0gbmV3IFN0b3JhZ2UoKTtcbn07XG5cbi8qKlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0ga2V5IGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5Eb3dubG9hZHNTdG9yYWdlQ29udHJvbGxlci5wcm90b3R5cGUuX2NyZWF0ZVN0b3JhZ2VCcmlkZ2UgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHRoaXNba2V5XSA9IG5ldyBTdG9yYWdlQnJpZGdlKHRoaXMsIGtleSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbkRvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyLnByb3RvdHlwZS5fZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBjb25zdCBpdGVtcyA9IHRoaXMuX3N5bmNJdGVtcy5zcGxpY2UoMCwgdGhpcy5fc3luY0l0ZW1zLmxlbmd0aCk7XG4gIGxldCBmbHVzaEl0ZW0sIGZsdXNoSXRlbXMsIGksIGl0ZW0sIGosIGssIGwsIG1hbmlmZXN0SWQsIHN0b3JhZ2VLZXksIHN0b3JhZ2VLZXlzLCBzdG9yYWdlc1RvRmx1c2g7XG4gIHN0b3JhZ2VzVG9GbHVzaCA9IHt9O1xuXG4gIGZ1bmN0aW9uIGdldEl0ZW1zIChtYW5pZmVzdElkLCBzdG9yYWdlS2V5KSB7XG4gICAgaWYgKHNlbGYuX2l0ZW1zW21hbmlmZXN0SWRdICYmIHNlbGYuX2l0ZW1zW21hbmlmZXN0SWRdW3N0b3JhZ2VLZXldKSB7XG4gICAgICByZXR1cm4gc2VsZi5faXRlbXNbbWFuaWZlc3RJZF1bc3RvcmFnZUtleV0uZ2V0SXRlbXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vY29sbGVjdCBpbmZvcm1hdGlvbiB3aGljaCBzdG9yYWdlcyBuZWVkcyB0byBiZSBzYXZlZFxuICBmb3IgKGkgPSAwLCBqID0gaXRlbXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIHN0b3JhZ2VzVG9GbHVzaFtpdGVtLm1hbmlmZXN0SWRdID0gc3RvcmFnZXNUb0ZsdXNoW2l0ZW0ubWFuaWZlc3RJZF0gfHwge307XG4gICAgZm9yIChrID0gMCwgbCA9IGl0ZW0uc3RvcmFnZUtleXMubGVuZ3RoOyBrIDwgbDsgaysrKSB7XG4gICAgICBzdG9yYWdlc1RvRmx1c2hbaXRlbS5tYW5pZmVzdElkXVtpdGVtLnN0b3JhZ2VLZXlzW2tdXSA9IHRydWU7XG4gICAgfVxuICB9XG4gIGZsdXNoSXRlbXMgPSBbXTtcblxuICAvL2NyZWF0ZSBmbHVzaCBpdGVtcyAtIHByb21pc2VzIHRoYXQgbmVlZHMgdG8gYmUgcmVzb2x2ZWQgdG9nZXRoZXIgaW4gcGFyYWxsZWxcbiAgZm9yIChtYW5pZmVzdElkIGluIHN0b3JhZ2VzVG9GbHVzaCkge1xuICAgIHN0b3JhZ2VLZXlzID0gc3RvcmFnZXNUb0ZsdXNoW21hbmlmZXN0SWRdO1xuICAgIGZvciAoc3RvcmFnZUtleSBpbiBzdG9yYWdlS2V5cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmx1c2hJdGVtID0gbmV3IEZsdXNoSXRlbShtYW5pZmVzdElkLCBzdG9yYWdlS2V5LCBnZXRJdGVtcyhtYW5pZmVzdElkLCBzdG9yYWdlS2V5KSk7XG4gICAgICAgIGZsdXNoSXRlbXMucHVzaChmbHVzaEl0ZW0uc2F2ZSgpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVSUk9SXCIsIHN0b3JhZ2VLZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIFByb21pc2UuYWxsKGZsdXNoSXRlbXMpXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBpLCBqO1xuICAgICAgICBmb3IgKGkgPSAwLCBqID0gaXRlbXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgaXRlbXNbaV0ucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBpLCBqO1xuICAgICAgICBmb3IgKGkgPSAwLCBqID0gaXRlbXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgaXRlbXNbaV0ucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG59O1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gW3N0b3JhZ2VLZXldIHN0b3JhZ2Uga2V5XG4gKiBAcmV0dXJucyB7QXJyYXl9IGtleXMgZm9yIGFsbCBzdG9yYWdlc1xuICovXG5Eb3dubG9hZHNTdG9yYWdlQ29udHJvbGxlci5wcm90b3R5cGUuX2dldEFsbFN0b3JhZ2VLZXlzID0gZnVuY3Rpb24gKHN0b3JhZ2VLZXkpIHtcbiAgbGV0IGtleXMgPSBbXTtcbiAgc3RvcmFnZUtleSA9IHN0b3JhZ2VLZXkgfHwgdGhpcy5zdG9yZXM7XG4gIGZvciAobGV0IGtleSBpbiBzdG9yYWdlS2V5KSB7XG4gICAgaWYgKHN0b3JhZ2VLZXkuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgaWYgKHR5cGVvZiBzdG9yYWdlS2V5W2tleV0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgLy9wYXJhbXMgZG9uJ3QgbmVlZCB0byBiZSBzdG9yZWQgdG8gZGlza1xuICAgICAgICBpZiAoa2V5ICE9PSB0aGlzLnN0b3Jlcy5QQVJBTVMpIHtcbiAgICAgICAgICBrZXlzLnB1c2goc3RvcmFnZUtleVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAga2V5cyA9IGtleXMuY29uY2F0KHRoaXMuX2dldEFsbFN0b3JhZ2VLZXlzKHN0b3JhZ2VLZXlba2V5XSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4ga2V5cztcbn07XG5cbi8qKlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RvcmFnZUtleSBzdG9yYWdlIGtleSBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gYnJpZGdlTWV0aG9kTmFtZSBtZXRob2QgbmFtZSB0byBiZSBjYWxsZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHJldHVybnMgeyp9IGl0ZW1zXG4gKi9cbkRvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyLnByb3RvdHlwZS5faXRlbUFjdGlvbiA9IGZ1bmN0aW9uIChzdG9yYWdlS2V5LCBicmlkZ2VNZXRob2ROYW1lLCBtYW5pZmVzdElkKSB7XG4gIGxldCBhcmdzID0gW10sIGksIGo7XG5cbiAgLy9jb2xsZWN0IGFsbCBvdGhlciBwYXJhbWV0ZXJzIGV4Y2VwdCB0aG9zZSBhbHJlYWR5IGxpc3RlZFxuICBmb3IgKGkgPSAzLCBqID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICB9XG4gIGlmICh0aGlzLl9pdGVtc1ttYW5pZmVzdElkXSAmJiB0aGlzLl9pdGVtc1ttYW5pZmVzdElkXVtzdG9yYWdlS2V5XSAmJiB0aGlzLl9pdGVtc1ttYW5pZmVzdElkXVtzdG9yYWdlS2V5XVticmlkZ2VNZXRob2ROYW1lXSkge1xuICAgIHJldHVybiB0aGlzLl9pdGVtc1ttYW5pZmVzdElkXVtzdG9yYWdlS2V5XVticmlkZ2VNZXRob2ROYW1lXS5hcHBseSh0aGlzLl9pdGVtc1ttYW5pZmVzdElkXVtzdG9yYWdlS2V5XSwgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgLy9pZiBtYW5pZmVzdCBzdGlsbCBleGlzdHNcbiAgICBpZiAodGhpcy5faXRlbXNbbWFuaWZlc3RJZF0pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUlwiLCBtYW5pZmVzdElkLCBzdG9yYWdlS2V5LCBicmlkZ2VNZXRob2ROYW1lLCBhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RvcmFnZUtleXNdIHN0b3JhZ2Uga2V5cyB0aGF0IHdpbGwgYmUgY2xlYXJlZFxuICogQHJldHVybnMge1Byb21pc2V9IHByb21pc2VcbiAqL1xuRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIHN0b3JhZ2VLZXlzKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHN0b3JhZ2VLZXlzID0gc3RvcmFnZUtleXMgfHwgc2VsZi5fZ2V0QWxsU3RvcmFnZUtleXMoKTtcbiAgICBpZiAoc2VsZi5faXRlbXNbbWFuaWZlc3RJZF0pIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gc3RvcmFnZUtleXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgIGxldCBzdG9yYWdlID0gc2VsZi5faXRlbXNbbWFuaWZlc3RJZF1bc3RvcmFnZUtleXNbaV1dO1xuICAgICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgIHN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkZWxldGUoc2VsZi5faXRlbXNbbWFuaWZlc3RJZF0pO1xuICAgIHNlbGYuc3luYyhtYW5pZmVzdElkLCBzdG9yYWdlS2V5cylcbiAgICAgICAgLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKi9cbkRvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCkge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBzZWxmLl9pdGVtc1ttYW5pZmVzdElkXSA9IHt9O1xuICAgIHNlbGYuX2NyZWF0ZUFycmF5U3RvcmFnZShtYW5pZmVzdElkLCBzZWxmLnN0b3Jlcy5ET1dOTE9BRFMuTEVGVCk7XG4gICAgc2VsZi5fY3JlYXRlQXJyYXlTdG9yYWdlKG1hbmlmZXN0SWQsIHNlbGYuc3RvcmVzLkRPV05MT0FEUy5ET1dOTE9BREVEKTtcbiAgICBzZWxmLl9jcmVhdGVTdG9yYWdlKG1hbmlmZXN0SWQsIHNlbGYuc3RvcmVzLkRPV05MT0FEUy5ET1dOTE9BRElORyk7XG4gICAgc2VsZi5fY3JlYXRlQXJyYXlTdG9yYWdlKG1hbmlmZXN0SWQsIHNlbGYuc3RvcmVzLkRPV05MT0FEUy5FUlJPUlMpO1xuICAgIHNlbGYuX2NyZWF0ZVN0b3JhZ2UobWFuaWZlc3RJZCwgc2VsZi5zdG9yZXMuUEFSQU1TKTtcbiAgICBzZWxmLl9jcmVhdGVTdG9yYWdlKG1hbmlmZXN0SWQsIHNlbGYuc3RvcmVzLk1BTklGRVNUKTtcbiAgICBzZWxmLl9jcmVhdGVTdG9yYWdlKG1hbmlmZXN0SWQsIHNlbGYuc3RvcmVzLlNUQVRVUyk7XG4gICAgc2VsZi5zeW5jKG1hbmlmZXN0SWQsIFtcbiAgICAgICAgICBzZWxmLnN0b3Jlcy5ET1dOTE9BRFMuRE9XTkxPQURFRCxcbiAgICAgICAgICBzZWxmLnN0b3Jlcy5NQU5JRkVTVCxcbiAgICAgICAgICBzZWxmLnN0b3Jlcy5TVEFUVVMsXG4gICAgICAgIF0pXG4gICAgICAgIC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gIH0pO1xufTtcbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHJldHVybnMge1Byb21pc2V9IHByb21pc2VcbiAqL1xuRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIucHJvdG90eXBlLmNyZWF0ZUlmTm90RXhpc3RzID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgc2VsZi5nZXRJdGVtKG1hbmlmZXN0SWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5jcmVhdGUobWFuaWZlc3RJZClcbiAgICAgICAgICAgICAgICAudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKi9cbkRvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXRJdGVtID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIHJlc29sdmUoc2VsZi5faXRlbXNbbWFuaWZlc3RJZF0pO1xuICB9KTtcbn07XG5cbi8qKlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmdbXX0ga2V5cyBvZiBhbGwgaXRlbXNcbiAqL1xuRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldEtleXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9pdGVtcyk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtib29sZWFufSBpZiBjZXJ0YWluIG1hbmlmZXN0IGlkIGV4aXN0c1xuICovXG5Eb3dubG9hZHNTdG9yYWdlQ29udHJvbGxlci5wcm90b3R5cGUua2V5RXhpc3RzID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgcmV0dXJuICEhdGhpcy5faXRlbXNbbWFuaWZlc3RJZF07XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKi9cbkRvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIGRlbGV0ZSBzZWxmLl9pdGVtc1ttYW5pZmVzdElkXTtcbiAgICByZXNvbHZlKCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RvcmFnZUtleXNdIHN0b3JhZ2Uga2V5cyB0aGF0IHdpbGwgYmUgc3luY2VkXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gcHJvbWlzZVxuICovXG5Eb3dubG9hZHNTdG9yYWdlQ29udHJvbGxlci5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uIChtYW5pZmVzdElkLCBzdG9yYWdlS2V5cykge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBpZiAodHlwZW9mIHN0b3JhZ2VLZXlzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZWplY3QoXCJTdG9yYWdlIGtleSBpcyBtaXNzaW5nXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHN0b3JhZ2VLZXlzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdG9yYWdlS2V5cyA9IFtzdG9yYWdlS2V5c107XG4gICAgfVxuICAgIGlmIChhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnNhdmVUb0Rpc2spIHtcbiAgICAgIHNlbGYuX3N5bmNJdGVtcy5wdXNoKG5ldyBTeW5jSXRlbShyZXNvbHZlLCByZWplY3QsIG1hbmlmZXN0SWQsIHN0b3JhZ2VLZXlzKSk7XG4gICAgICBzZWxmLl9mbHVzaFRocm90dGxlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHJldHVybnMge1Byb21pc2V9IHByb21pc2VcbiAqL1xuRG93bmxvYWRzU3RvcmFnZUNvbnRyb2xsZXIucHJvdG90eXBlLnN5bmNBbGwgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCkge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBpZiAoYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5zYXZlVG9EaXNrKSB7XG4gICAgICBsZXQgc3RvcmFnZUtleXMgPSBzZWxmLl9nZXRBbGxTdG9yYWdlS2V5cygpO1xuICAgICAgc2VsZi5fc3luY0l0ZW1zLnB1c2gobmV3IFN5bmNJdGVtKHJlc29sdmUsIHJlamVjdCwgbWFuaWZlc3RJZCwgc3RvcmFnZUtleXMpKTtcbiAgICAgIHNlbGYuX2ZsdXNoVGhyb3R0bGVkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEb3dubG9hZHNTdG9yYWdlQ29udHJvbGxlcjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///90\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar ArrayStorage = __webpack_require__(31);\n\nvar createBridgeMethods = __webpack_require__(32);\n/**\n * @param {DownloadsStorageController} parent - reference to parent object\n * @param {string} storageKey - storage key\n * @constructor\n */\n\n\nfunction ArrayStorageBridge(parent, storageKey) {\n  this._parent = parent;\n  this._storageKey = storageKey;\n  createBridgeMethods(this, ArrayStorage);\n}\n\nmodule.exports = ArrayStorageBridge;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9hcnJheS1zdG9yYWdlLWJyaWRnZS5qcz9jNzE2Il0sIm5hbWVzIjpbIkFycmF5U3RvcmFnZSIsInJlcXVpcmUiLCJjcmVhdGVCcmlkZ2VNZXRob2RzIiwiQXJyYXlTdG9yYWdlQnJpZGdlIiwicGFyZW50Iiwic3RvcmFnZUtleSIsIl9wYXJlbnQiLCJfc3RvcmFnZUtleSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLFlBQVksR0FBR0MsbUJBQU8sQ0FBQyxFQUFELENBQTVCOztBQUNBLElBQU1DLG1CQUFtQixHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBbkM7QUFFQTs7Ozs7OztBQUtBLFNBQVNFLGtCQUFULENBQTZCQyxNQUE3QixFQUFxQ0MsVUFBckMsRUFBaUQ7QUFDL0MsT0FBS0MsT0FBTCxHQUFlRixNQUFmO0FBQ0EsT0FBS0csV0FBTCxHQUFtQkYsVUFBbkI7QUFDQUgscUJBQW1CLENBQUMsSUFBRCxFQUFPRixZQUFQLENBQW5CO0FBQ0Q7O0FBRURRLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQk4sa0JBQWpCIiwiZmlsZSI6IjkxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBBcnJheVN0b3JhZ2UgPSByZXF1aXJlKFwiLi9hcnJheS1zdG9yYWdlXCIpO1xuY29uc3QgY3JlYXRlQnJpZGdlTWV0aG9kcyA9IHJlcXVpcmUoXCIuL2NyZWF0ZS1icmlkZ2UtbWV0aG9kc1wiKTtcblxuLyoqXG4gKiBAcGFyYW0ge0Rvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyfSBwYXJlbnQgLSByZWZlcmVuY2UgdG8gcGFyZW50IG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IHN0b3JhZ2VLZXkgLSBzdG9yYWdlIGtleVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEFycmF5U3RvcmFnZUJyaWRnZSAocGFyZW50LCBzdG9yYWdlS2V5KSB7XG4gIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5fc3RvcmFnZUtleSA9IHN0b3JhZ2VLZXk7XG4gIGNyZWF0ZUJyaWRnZU1ldGhvZHModGhpcywgQXJyYXlTdG9yYWdlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheVN0b3JhZ2VCcmlkZ2U7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///91\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar Storage = __webpack_require__(33);\n\nvar createBridgeMethods = __webpack_require__(32);\n/**\n * @param {DownloadsStorageController} parent - reference to parent object\n * @param {string} storageKey - storage key\n * @constructor\n */\n\n\nfunction StorageBridge(parent, storageKey) {\n  this._parent = parent;\n  this._storageKey = storageKey;\n  createBridgeMethods(this, Storage);\n}\n\nmodule.exports = StorageBridge;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9zdG9yYWdlLWJyaWRnZS5qcz81YTFkIl0sIm5hbWVzIjpbIlN0b3JhZ2UiLCJyZXF1aXJlIiwiY3JlYXRlQnJpZGdlTWV0aG9kcyIsIlN0b3JhZ2VCcmlkZ2UiLCJwYXJlbnQiLCJzdG9yYWdlS2V5IiwiX3BhcmVudCIsIl9zdG9yYWdlS2V5IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsT0FBTyxHQUFHQyxtQkFBTyxDQUFDLEVBQUQsQ0FBdkI7O0FBQ0EsSUFBTUMsbUJBQW1CLEdBQUdELG1CQUFPLENBQUMsRUFBRCxDQUFuQztBQUVBOzs7Ozs7O0FBS0EsU0FBU0UsYUFBVCxDQUF3QkMsTUFBeEIsRUFBZ0NDLFVBQWhDLEVBQTRDO0FBQzFDLE9BQUtDLE9BQUwsR0FBZUYsTUFBZjtBQUNBLE9BQUtHLFdBQUwsR0FBbUJGLFVBQW5CO0FBQ0FILHFCQUFtQixDQUFDLElBQUQsRUFBT0YsT0FBUCxDQUFuQjtBQUNEOztBQUVEUSxNQUFNLENBQUNDLE9BQVAsR0FBaUJOLGFBQWpCIiwiZmlsZSI6IjkyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBTdG9yYWdlID0gcmVxdWlyZShcIi4vc3RvcmFnZVwiKTtcbmNvbnN0IGNyZWF0ZUJyaWRnZU1ldGhvZHMgPSByZXF1aXJlKFwiLi9jcmVhdGUtYnJpZGdlLW1ldGhvZHNcIik7XG5cbi8qKlxuICogQHBhcmFtIHtEb3dubG9hZHNTdG9yYWdlQ29udHJvbGxlcn0gcGFyZW50IC0gcmVmZXJlbmNlIHRvIHBhcmVudCBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yYWdlS2V5IC0gc3RvcmFnZSBrZXlcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBTdG9yYWdlQnJpZGdlIChwYXJlbnQsIHN0b3JhZ2VLZXkpIHtcbiAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICB0aGlzLl9zdG9yYWdlS2V5ID0gc3RvcmFnZUtleTtcbiAgY3JlYXRlQnJpZGdlTWV0aG9kcyh0aGlzLCBTdG9yYWdlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdG9yYWdlQnJpZGdlOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///92\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nfunction SyncItem(resolve, reject, manifestId, storageKeys) {\n  this.resolve = resolve;\n  this.reject = reject;\n  this.manifestId = manifestId;\n  this.storageKeys = storageKeys;\n}\n\nmodule.exports = SyncItem;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvZG93bmxvYWRzL3N5bmMtaXRlbS5qcz84YjFjIl0sIm5hbWVzIjpbIlN5bmNJdGVtIiwicmVzb2x2ZSIsInJlamVjdCIsIm1hbmlmZXN0SWQiLCJzdG9yYWdlS2V5cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLFNBQVNBLFFBQVQsQ0FBbUJDLE9BQW5CLEVBQTRCQyxNQUE1QixFQUFvQ0MsVUFBcEMsRUFBZ0RDLFdBQWhELEVBQTZEO0FBQzNELE9BQUtILE9BQUwsR0FBZUEsT0FBZjtBQUNBLE9BQUtDLE1BQUwsR0FBY0EsTUFBZDtBQUNBLE9BQUtDLFVBQUwsR0FBa0JBLFVBQWxCO0FBQ0EsT0FBS0MsV0FBTCxHQUFtQkEsV0FBbkI7QUFDRDs7QUFFREMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCTixRQUFqQiIsImZpbGUiOiI5My5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBTeW5jSXRlbSAocmVzb2x2ZSwgcmVqZWN0LCBtYW5pZmVzdElkLCBzdG9yYWdlS2V5cykge1xuICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgdGhpcy5tYW5pZmVzdElkID0gbWFuaWZlc3RJZDtcbiAgdGhpcy5zdG9yYWdlS2V5cyA9IHN0b3JhZ2VLZXlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bmNJdGVtO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///93\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar constants = __webpack_require__(19);\n\nvar utilUrl = __webpack_require__(34);\n/**\n * @module\n * @namespace downloadUtil\n */\n\n\nvar downloadUtil = {};\n/**\n * @typedef {Link} Link\n * @property {string} id - identifier\n * @property {number} bandwidth - bandwidth\n * @property {string} contentType - content type [video, audio, text]\n * @property {string} remoteUrl - remote url\n * @property {string} localUrl - local url\n */\n\n/**\n * @typedef {Link} Link\n * @property {string} id - identifier\n * @property {number} bandwidth - bandwidth\n * @property {string} contentType - content type [video, audio, text]\n * @property {string} remoteUrl - remote url\n * @property {string} localUrl - local url\n */\n\n/**\n * @param {string} manifestId - manifest identifier\n * @param {string} localPath - local path\n * @param {string} remotePath - remote path\n * @param {Array} userRepresentations - representations chosen by a user\n * @param {Array} manifestRepresentations - all manifest representations\n * @param {object} downloadedHash - download unique identifier\n * @returns {Link[]} array of {@link Link}\n */\n\ndownloadUtil.getAllLinks = function getAllLinks(manifestId, localPath, remotePath, userRepresentations, manifestRepresentations) {\n  return downloadUtil.getDownloadLinks(manifestId, localPath, remotePath, userRepresentations, manifestRepresentations);\n};\n/**\n * @param {string} manifestId - manifest identifier\n * @param {string} localPath - local path\n * @param {string} remotePath - remote path\n * @param {Array} userRepresentations - representations chosen by a user\n * @param {Array} manifestRepresentations - all manifest representations\n * @param {object} downloadedHash - download unique identifier\n * @returns {Link[]} array of {@link Link}\n */\n\n\ndownloadUtil.getDownloadLinks = function getDownloadLinks(manifestId, localPath, remotePath, userRepresentations, manifestRepresentations, downloadedHash) {\n  var chosenRepresentations = downloadUtil.getChosenRepresentations(userRepresentations, manifestRepresentations);\n  var bandwidth, contentType, localUrl, i, id, j, k, l, links;\n  var mediaFile, mediaBaseUrl, mediaUrls, remoteUrl, segmentInformation;\n  links = [];\n  downloadedHash = downloadedHash || {};\n\n  for (i = 0, j = chosenRepresentations.length; i < j; i++) {\n    contentType = chosenRepresentations[i].attributeList.mimeType;\n    bandwidth = +chosenRepresentations[i].attributeList.bandwidth;\n\n    if (contentType.indexOf("video") === 0) {\n      contentType = "video";\n    } else if (contentType.indexOf("audio") === 0) {\n      contentType = "audio";\n    } else {\n      contentType = "text";\n    }\n\n    segmentInformation = chosenRepresentations[i].segmentInformation;\n    mediaUrls = segmentInformation.mediaUrls;\n    id = segmentInformation.representationID;\n\n    for (k = 0, l = mediaUrls.length; k < l; k++) {\n      mediaFile = mediaUrls[k].mediaFile;\n      mediaBaseUrl = mediaUrls[k].baseURL;\n      mediaBaseUrl = mediaBaseUrl.replace(/\\.\\.\\//g, "");\n      mediaBaseUrl = mediaBaseUrl.replace(/\\.\\./g, "");\n\n      if (mediaFile === mediaBaseUrl || remotePath === mediaBaseUrl) {\n        mediaBaseUrl = "";\n      } // remove http and https from mediaBaseUrl, this way it will create a correct folder structure\n\n\n      if (mediaBaseUrl.match(constants.regexpProtocolRemove)) {\n        remoteUrl = utilUrl.joinPathWithFile(mediaBaseUrl, mediaFile);\n        localUrl = utilUrl.joinPathWithFile(localPath, mediaBaseUrl.replace(constants.regexpProtocolRemove, ""), mediaFile);\n      } else {\n        remoteUrl = utilUrl.joinPathWithFile(remotePath, mediaBaseUrl, mediaFile);\n        localUrl = utilUrl.joinPathWithFile(localPath, mediaBaseUrl, mediaFile);\n      }\n\n      if (!downloadedHash[localUrl] || !downloadedHash[localUrl] && downloadedHash[localUrl].remoteUrl !== remoteUrl) {\n        links.push({\n          id: id,\n          bandwidth: bandwidth,\n          contentType: contentType,\n          remoteUrl: remoteUrl,\n          localUrl: localUrl,\n          index: k\n        });\n      }\n    }\n  } // sort links in order to allow playback before all links are downloaded (for ex: to switch from audio tracks)\n\n\n  links.sort(function (a, b) {\n    return a.index - b.index;\n  });\n  return links;\n};\n/**\n *\n * @param {array} userChosenRepr - array of chosen representations ids by user\n * @param {array} manifestRepr - array of all manifest representations\n * @returns {array} chosen representations from manifest\n */\n\n\ndownloadUtil.getChosenRepresentations = function getChosenRepresentations(userChosenRepr, manifestRepr) {\n  var chosenRepresentations = [];\n  var userChosenReprObj = {};\n  userChosenRepr = userChosenRepr || [];\n  manifestRepr = manifestRepr || [];\n\n  for (var i = 0, j = userChosenRepr.length; i < j; i++) {\n    userChosenReprObj[String(userChosenRepr[i])] = true;\n  }\n\n  for (var _i = 0, _j = manifestRepr.length; _i < _j; _i++) {\n    var items = manifestRepr[_i].representationColl;\n\n    for (var k = 0, l = items.length; k < l; k++) {\n      var item = items[k];\n\n      if (userChosenReprObj[String(item.attributeList.id)]) {\n        chosenRepresentations.push(item);\n      }\n    }\n  }\n\n  return chosenRepresentations;\n};\n\nmodule.exports = downloadUtil;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9kb3dubG9hZHMuanM/ZTM3OSJdLCJuYW1lcyI6WyJjb25zdGFudHMiLCJyZXF1aXJlIiwidXRpbFVybCIsImRvd25sb2FkVXRpbCIsImdldEFsbExpbmtzIiwibWFuaWZlc3RJZCIsImxvY2FsUGF0aCIsInJlbW90ZVBhdGgiLCJ1c2VyUmVwcmVzZW50YXRpb25zIiwibWFuaWZlc3RSZXByZXNlbnRhdGlvbnMiLCJnZXREb3dubG9hZExpbmtzIiwiZG93bmxvYWRlZEhhc2giLCJjaG9zZW5SZXByZXNlbnRhdGlvbnMiLCJnZXRDaG9zZW5SZXByZXNlbnRhdGlvbnMiLCJiYW5kd2lkdGgiLCJjb250ZW50VHlwZSIsImxvY2FsVXJsIiwiaSIsImlkIiwiaiIsImsiLCJsIiwibGlua3MiLCJtZWRpYUZpbGUiLCJtZWRpYUJhc2VVcmwiLCJtZWRpYVVybHMiLCJyZW1vdGVVcmwiLCJzZWdtZW50SW5mb3JtYXRpb24iLCJsZW5ndGgiLCJhdHRyaWJ1dGVMaXN0IiwibWltZVR5cGUiLCJpbmRleE9mIiwicmVwcmVzZW50YXRpb25JRCIsImJhc2VVUkwiLCJyZXBsYWNlIiwibWF0Y2giLCJyZWdleHBQcm90b2NvbFJlbW92ZSIsImpvaW5QYXRoV2l0aEZpbGUiLCJwdXNoIiwiaW5kZXgiLCJzb3J0IiwiYSIsImIiLCJ1c2VyQ2hvc2VuUmVwciIsIm1hbmlmZXN0UmVwciIsInVzZXJDaG9zZW5SZXByT2JqIiwiU3RyaW5nIiwiaXRlbXMiLCJyZXByZXNlbnRhdGlvbkNvbGwiLCJpdGVtIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsSUFBTUEsU0FBUyxHQUFHQyxtQkFBTyxDQUFDLEVBQUQsQ0FBekI7O0FBQ0EsSUFBTUMsT0FBTyxHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBdkI7QUFFQTs7Ozs7O0FBSUEsSUFBSUUsWUFBWSxHQUFHLEVBQW5CO0FBRUE7Ozs7Ozs7OztBQVNBOzs7Ozs7Ozs7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QUNDLE9BQVAsR0FBaUJoRCxZQUFqQiIsImZpbGUiOiI5NC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBjb25zdGFudHMgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xuY29uc3QgdXRpbFVybCA9IHJlcXVpcmUoXCIuL3VybFwiKTtcblxuLyoqXG4gKiBAbW9kdWxlXG4gKiBAbmFtZXNwYWNlIGRvd25sb2FkVXRpbFxuICovXG5sZXQgZG93bmxvYWRVdGlsID0ge307XG5cbi8qKlxuICogQHR5cGVkZWYge0xpbmt9IExpbmtcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZCAtIGlkZW50aWZpZXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBiYW5kd2lkdGggLSBiYW5kd2lkdGhcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb250ZW50VHlwZSAtIGNvbnRlbnQgdHlwZSBbdmlkZW8sIGF1ZGlvLCB0ZXh0XVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHJlbW90ZVVybCAtIHJlbW90ZSB1cmxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBsb2NhbFVybCAtIGxvY2FsIHVybFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge0xpbmt9IExpbmtcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZCAtIGlkZW50aWZpZXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBiYW5kd2lkdGggLSBiYW5kd2lkdGhcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb250ZW50VHlwZSAtIGNvbnRlbnQgdHlwZSBbdmlkZW8sIGF1ZGlvLCB0ZXh0XVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHJlbW90ZVVybCAtIHJlbW90ZSB1cmxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBsb2NhbFVybCAtIGxvY2FsIHVybFxuICovXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxQYXRoIC0gbG9jYWwgcGF0aFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbW90ZVBhdGggLSByZW1vdGUgcGF0aFxuICogQHBhcmFtIHtBcnJheX0gdXNlclJlcHJlc2VudGF0aW9ucyAtIHJlcHJlc2VudGF0aW9ucyBjaG9zZW4gYnkgYSB1c2VyXG4gKiBAcGFyYW0ge0FycmF5fSBtYW5pZmVzdFJlcHJlc2VudGF0aW9ucyAtIGFsbCBtYW5pZmVzdCByZXByZXNlbnRhdGlvbnNcbiAqIEBwYXJhbSB7b2JqZWN0fSBkb3dubG9hZGVkSGFzaCAtIGRvd25sb2FkIHVuaXF1ZSBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7TGlua1tdfSBhcnJheSBvZiB7QGxpbmsgTGlua31cbiAqL1xuZG93bmxvYWRVdGlsLmdldEFsbExpbmtzID0gZnVuY3Rpb24gZ2V0QWxsTGlua3MgKG1hbmlmZXN0SWQsIGxvY2FsUGF0aCwgcmVtb3RlUGF0aCwgdXNlclJlcHJlc2VudGF0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmlmZXN0UmVwcmVzZW50YXRpb25zKSB7XG4gIHJldHVybiBkb3dubG9hZFV0aWwuZ2V0RG93bmxvYWRMaW5rcyhtYW5pZmVzdElkLCBsb2NhbFBhdGgsIHJlbW90ZVBhdGgsIHVzZXJSZXByZXNlbnRhdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuaWZlc3RSZXByZXNlbnRhdGlvbnMpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbFBhdGggLSBsb2NhbCBwYXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVtb3RlUGF0aCAtIHJlbW90ZSBwYXRoXG4gKiBAcGFyYW0ge0FycmF5fSB1c2VyUmVwcmVzZW50YXRpb25zIC0gcmVwcmVzZW50YXRpb25zIGNob3NlbiBieSBhIHVzZXJcbiAqIEBwYXJhbSB7QXJyYXl9IG1hbmlmZXN0UmVwcmVzZW50YXRpb25zIC0gYWxsIG1hbmlmZXN0IHJlcHJlc2VudGF0aW9uc1xuICogQHBhcmFtIHtvYmplY3R9IGRvd25sb2FkZWRIYXNoIC0gZG93bmxvYWQgdW5pcXVlIGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtMaW5rW119IGFycmF5IG9mIHtAbGluayBMaW5rfVxuICovXG5kb3dubG9hZFV0aWwuZ2V0RG93bmxvYWRMaW5rcyA9IGZ1bmN0aW9uIGdldERvd25sb2FkTGlua3MgKG1hbmlmZXN0SWQsIGxvY2FsUGF0aCwgcmVtb3RlUGF0aCwgdXNlclJlcHJlc2VudGF0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuaWZlc3RSZXByZXNlbnRhdGlvbnMsIGRvd25sb2FkZWRIYXNoXG4pIHtcbiAgbGV0IGNob3NlblJlcHJlc2VudGF0aW9ucyA9IGRvd25sb2FkVXRpbC5nZXRDaG9zZW5SZXByZXNlbnRhdGlvbnModXNlclJlcHJlc2VudGF0aW9ucywgbWFuaWZlc3RSZXByZXNlbnRhdGlvbnMpO1xuICBsZXQgYmFuZHdpZHRoLCBjb250ZW50VHlwZSwgbG9jYWxVcmwsIGksIGlkLCBqLCBrLCBsLCBsaW5rcztcbiAgbGV0IG1lZGlhRmlsZSwgbWVkaWFCYXNlVXJsLCBtZWRpYVVybHMsIHJlbW90ZVVybCwgc2VnbWVudEluZm9ybWF0aW9uO1xuXG4gIGxpbmtzID0gW107XG4gIGRvd25sb2FkZWRIYXNoID0gZG93bmxvYWRlZEhhc2ggfHwge307XG4gIGZvciAoaSA9IDAsIGogPSBjaG9zZW5SZXByZXNlbnRhdGlvbnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgY29udGVudFR5cGUgPSBjaG9zZW5SZXByZXNlbnRhdGlvbnNbaV0uYXR0cmlidXRlTGlzdC5taW1lVHlwZTtcbiAgICBiYW5kd2lkdGggPSArY2hvc2VuUmVwcmVzZW50YXRpb25zW2ldLmF0dHJpYnV0ZUxpc3QuYmFuZHdpZHRoO1xuICAgIGlmIChjb250ZW50VHlwZS5pbmRleE9mKFwidmlkZW9cIikgPT09IDApIHtcbiAgICAgIGNvbnRlbnRUeXBlID0gXCJ2aWRlb1wiO1xuICAgIH0gZWxzZSBpZiAoY29udGVudFR5cGUuaW5kZXhPZihcImF1ZGlvXCIpID09PSAwKSB7XG4gICAgICBjb250ZW50VHlwZSA9IFwiYXVkaW9cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudFR5cGUgPSBcInRleHRcIjtcbiAgICB9XG4gICAgc2VnbWVudEluZm9ybWF0aW9uID0gY2hvc2VuUmVwcmVzZW50YXRpb25zW2ldLnNlZ21lbnRJbmZvcm1hdGlvbjtcbiAgICBtZWRpYVVybHMgPSBzZWdtZW50SW5mb3JtYXRpb24ubWVkaWFVcmxzO1xuICAgIGlkID0gc2VnbWVudEluZm9ybWF0aW9uLnJlcHJlc2VudGF0aW9uSUQ7XG4gICAgZm9yIChrID0gMCwgbCA9IG1lZGlhVXJscy5sZW5ndGg7IGsgPCBsOyBrKyspIHtcbiAgICAgIG1lZGlhRmlsZSA9IG1lZGlhVXJsc1trXS5tZWRpYUZpbGU7XG4gICAgICBtZWRpYUJhc2VVcmwgPSBtZWRpYVVybHNba10uYmFzZVVSTDtcbiAgICAgIG1lZGlhQmFzZVVybCA9IG1lZGlhQmFzZVVybC5yZXBsYWNlKC9cXC5cXC5cXC8vZywgXCJcIik7XG4gICAgICBtZWRpYUJhc2VVcmwgPSBtZWRpYUJhc2VVcmwucmVwbGFjZSgvXFwuXFwuL2csIFwiXCIpO1xuICAgICAgaWYgKG1lZGlhRmlsZSA9PT0gbWVkaWFCYXNlVXJsIHx8IHJlbW90ZVBhdGggPT09IG1lZGlhQmFzZVVybCkge1xuICAgICAgICBtZWRpYUJhc2VVcmwgPSBcIlwiO1xuICAgICAgfVxuICAgICAgLy8gcmVtb3ZlIGh0dHAgYW5kIGh0dHBzIGZyb20gbWVkaWFCYXNlVXJsLCB0aGlzIHdheSBpdCB3aWxsIGNyZWF0ZSBhIGNvcnJlY3QgZm9sZGVyIHN0cnVjdHVyZVxuICAgICAgaWYgKG1lZGlhQmFzZVVybC5tYXRjaChjb25zdGFudHMucmVnZXhwUHJvdG9jb2xSZW1vdmUpKSB7XG4gICAgICAgIHJlbW90ZVVybCA9IHV0aWxVcmwuam9pblBhdGhXaXRoRmlsZShtZWRpYUJhc2VVcmwsIG1lZGlhRmlsZSk7XG4gICAgICAgIGxvY2FsVXJsID0gdXRpbFVybC5qb2luUGF0aFdpdGhGaWxlKGxvY2FsUGF0aCwgbWVkaWFCYXNlVXJsLnJlcGxhY2UoY29uc3RhbnRzLnJlZ2V4cFByb3RvY29sUmVtb3ZlLCBcIlwiKSxcbiAgICAgICAgICBtZWRpYUZpbGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVtb3RlVXJsID0gdXRpbFVybC5qb2luUGF0aFdpdGhGaWxlKHJlbW90ZVBhdGgsIG1lZGlhQmFzZVVybCwgbWVkaWFGaWxlKTtcbiAgICAgICAgbG9jYWxVcmwgPSB1dGlsVXJsLmpvaW5QYXRoV2l0aEZpbGUobG9jYWxQYXRoLCBtZWRpYUJhc2VVcmwsIG1lZGlhRmlsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICgoIWRvd25sb2FkZWRIYXNoW2xvY2FsVXJsXSkgfHwgKCFkb3dubG9hZGVkSGFzaFtsb2NhbFVybF0gJiYgZG93bmxvYWRlZEhhc2hbbG9jYWxVcmxdLnJlbW90ZVVybCAhPT0gcmVtb3RlVXJsKSkge1xuICAgICAgICBsaW5rcy5wdXNoKHtcbiAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgYmFuZHdpZHRoOiBiYW5kd2lkdGgsXG4gICAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLFxuICAgICAgICAgIHJlbW90ZVVybDogcmVtb3RlVXJsLFxuICAgICAgICAgIGxvY2FsVXJsOiBsb2NhbFVybCxcbiAgICAgICAgICBpbmRleDoga1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gc29ydCBsaW5rcyBpbiBvcmRlciB0byBhbGxvdyBwbGF5YmFjayBiZWZvcmUgYWxsIGxpbmtzIGFyZSBkb3dubG9hZGVkIChmb3IgZXg6IHRvIHN3aXRjaCBmcm9tIGF1ZGlvIHRyYWNrcylcbiAgbGlua3Muc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuICByZXR1cm4gbGlua3M7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge2FycmF5fSB1c2VyQ2hvc2VuUmVwciAtIGFycmF5IG9mIGNob3NlbiByZXByZXNlbnRhdGlvbnMgaWRzIGJ5IHVzZXJcbiAqIEBwYXJhbSB7YXJyYXl9IG1hbmlmZXN0UmVwciAtIGFycmF5IG9mIGFsbCBtYW5pZmVzdCByZXByZXNlbnRhdGlvbnNcbiAqIEByZXR1cm5zIHthcnJheX0gY2hvc2VuIHJlcHJlc2VudGF0aW9ucyBmcm9tIG1hbmlmZXN0XG4gKi9cbmRvd25sb2FkVXRpbC5nZXRDaG9zZW5SZXByZXNlbnRhdGlvbnMgPSBmdW5jdGlvbiBnZXRDaG9zZW5SZXByZXNlbnRhdGlvbnMgKHVzZXJDaG9zZW5SZXByLCBtYW5pZmVzdFJlcHIpIHtcbiAgbGV0IGNob3NlblJlcHJlc2VudGF0aW9ucyA9IFtdO1xuICBsZXQgdXNlckNob3NlblJlcHJPYmogPSB7fTtcbiAgdXNlckNob3NlblJlcHIgPSB1c2VyQ2hvc2VuUmVwciB8fCBbXTtcbiAgbWFuaWZlc3RSZXByID0gbWFuaWZlc3RSZXByIHx8IFtdO1xuICBmb3IgKGxldCBpID0gMCwgaiA9IHVzZXJDaG9zZW5SZXByLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIHVzZXJDaG9zZW5SZXByT2JqW1N0cmluZyh1c2VyQ2hvc2VuUmVwcltpXSldID0gdHJ1ZTtcbiAgfVxuICBmb3IgKGxldCBpID0gMCwgaiA9IG1hbmlmZXN0UmVwci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBjb25zdCBpdGVtcyA9IG1hbmlmZXN0UmVwcltpXS5yZXByZXNlbnRhdGlvbkNvbGw7XG4gICAgZm9yIChsZXQgayA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGsgPCBsOyBrKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1trXTtcbiAgICAgIGlmICh1c2VyQ2hvc2VuUmVwck9ialtTdHJpbmcoaXRlbS5hdHRyaWJ1dGVMaXN0LmlkKV0pIHtcbiAgICAgICAgY2hvc2VuUmVwcmVzZW50YXRpb25zLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBjaG9zZW5SZXByZXNlbnRhdGlvbnM7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRvd25sb2FkVXRpbDtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///94\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar _ = __webpack_require__(5);\n/**\n * how much of progress should be connected with writing chunks to a hard drive (1 - 100%)\n * @type {number}\n */\n\n\nvar writeProgressUsage = 0.1;\n/**\n *\n * @param {DownloadsStorageController} storage - downloads storage controller\n * @constructor\n */\n\nfunction DownloadStats(storage) {\n  this._storage = storage;\n  this._stats = {};\n  this._statsPrevious = {};\n  this._STATS_TIME_GENERATION = 1000;\n\n  _.bindAll(this, "_generate");\n}\n/**\n * @param {number} value - bytes\n * @param {number} precision - precision for kilobytes\n * @param {number=} precision2 - precision for megabytes\n * @param {number=} precision3 - precision for gigabytes\n * @returns {string} converted bytes to kb or mb or gb\n * @private\n */\n\n\nDownloadStats.prototype._convertToBytes = function (value, precision, precision2, precision3) {\n  precision2 = typeof precision2 !== "undefined" ? precision2 : precision;\n  precision3 = typeof precision3 !== "undefined" ? precision3 : precision;\n\n  if (value < 100000) {\n    return this._convertToKB(value, precision);\n  } else if (value < 1024 * 1024 * 1024) {\n    return this._convertToMB(value, precision2);\n  } else {\n    return this._convertToGB(value, precision3);\n  }\n};\n/**\n *\n * @param {number} value - bytes\n * @param {number} precision - precision\n * @returns {string} kilobytes\n * @private\n */\n\n\nDownloadStats.prototype._convertToKB = function (value, precision) {\n  precision = typeof precision !== "undefined" ? precision : 0;\n  var a = Math.pow(10, precision);\n  var oneKB = 1024;\n  return Math.round(value * a / oneKB) / a + "kB";\n};\n/**\n * @param {number} value - bytes\n * @param {number} precision - precision\n * @returns {string} - megabytes\n * @private\n */\n\n\nDownloadStats.prototype._convertToMB = function (value, precision) {\n  precision = typeof precision !== "undefined" ? precision : 0;\n  var a = Math.pow(10, precision);\n  var oneMB = 1024 * 1024;\n  return Math.round(value * a / oneMB) / a + "MB";\n};\n/**\n * @param {number} value - bytes\n * @param {number} precision - precision\n * @returns {string} gigabytes\n * @private\n */\n\n\nDownloadStats.prototype._convertToGB = function (value, precision) {\n  precision = typeof precision !== "undefined" ? precision : 0;\n  var a = Math.pow(10, precision);\n  var oneGB = 1024 * 1024 * 1024;\n  return Math.round(value * a / oneGB) / a + "GB";\n};\n\nDownloadStats.prototype._clearSpeed = function () {\n  var allManifestIds = Object.keys(this._stats) || [];\n\n  for (var i = 0, j = allManifestIds.length; i < j; i++) {\n    var manifestId = allManifestIds[i];\n\n    if (!this._storage.keyExists(manifestId) && this._stats[manifestId] && this._stats[manifestId].speed) {\n      this._stats[manifestId].speed = 0;\n      this._stats[manifestId].speedBytes = this._convertToBytes(this._stats[manifestId].speed, 3, 2);\n    }\n  }\n};\n/**\n * @param {boolean} refresh - decides if stats should be only calculated without setting previous stats\n * this is useful when downloads finishes and stats are being calculated one more time\n * @returns {void}\n * @private\n */\n\n\nDownloadStats.prototype._generate = function (refresh) {\n  var allStats = {};\n\n  var manifests = this._storage.getKeys();\n\n  this._clearSpeed();\n\n  function countParts(items) {\n    var parts = 0;\n\n    for (var k = 0, l = items.length; k < l; k++) {\n      var item = items[k];\n      parts += item.bandwidth || 1;\n    }\n\n    return parts;\n  }\n\n  function countPartsObj(items, withDownloadedOnly) {\n    var parts = 0;\n\n    for (var key in items) {\n      if (items.hasOwnProperty(key)) {\n        var item = items[key];\n        parts += (withDownloadedOnly ? item.stats.available / (item.stats.file_size || 1) : 1) * (item.bandwidth || 1);\n      }\n    }\n\n    return parts;\n  }\n\n  function toArray(obj) {\n    var arr = [];\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        var item = obj[key];\n        arr.push(item);\n      }\n    }\n\n    return arr;\n  }\n\n  var stats = {\n    downloading: 0,\n    downloaded: 0,\n    available: 0,\n    left: 0,\n    downloadingAvailableBytes: 0,\n    downloading_file_size: 0,\n    downloadingBytes: 0,\n    downloadedBytes: 0,\n    availableBytes: 0,\n    writeProgress: 0,\n    writeProgressDownloading: 0,\n    writeProgressDownloaded: 0,\n    errors: 0,\n    progress: 0,\n    speed: 0,\n    status: \'\'\n  }; //availableBytes - bates that has been already downloaded\n  //downloadedBytes - bytes used to calculate the current speed\n  //if for any reason the connection is broken or user stopped, then after resuming the available bytes are\n  //always bigger then the actual downloaded bytes.\n  //once the file is finished both values are equal and have the same value as file_size\n\n  var now = new Date().getTime();\n\n  if (!this._statsTime) {\n    this._statsTime = now;\n  }\n\n  for (var i = 0, j = manifests.length; i < j; i++) {\n    var manifestId = manifests[i];\n    allStats[manifestId] = _.clone(stats);\n    allStats[manifestId].left = this._storage.left.count(manifestId);\n    allStats[manifestId].leftI = this._storage.left.getItems(manifestId);\n    allStats[manifestId].errors = this._storage.errors.count(manifestId);\n    allStats[manifestId].errorsI = this._storage.errors.getItems(manifestId);\n\n    var items = this._storage.downloading.getKeys(manifestId);\n\n    allStats[manifestId].downloading = items.length;\n    allStats[manifestId].downloadingI = this._storage.downloading.getItems(manifestId);\n    var writeProgressDownloadingItemsLength = items.length;\n\n    for (var k = 0, l = items.length; k < l; k++) {\n      var item = this._storage.downloading.getItem(manifestId, items[k]);\n\n      allStats[manifestId].downloadingBytes += item.stats.downloaded;\n      allStats[manifestId].downloading_file_size += item.stats.file_size;\n      allStats[manifestId].downloadingAvailableBytes += item.stats.available;\n      allStats[manifestId].writeProgressDownloading += item.stats.writeProgress;\n    }\n\n    items = this._storage.downloaded.getItems(manifestId);\n    allStats[manifestId].downloaded = items.length;\n    allStats[manifestId].downloadedI = items;\n    var writeProgressItemsDownloadedLength = items.length;\n\n    for (var _k = 0, _l = items.length; _k < _l; _k++) {\n      var _item = items[_k];\n      allStats[manifestId].downloadedBytes += _item.stats.downloaded;\n      allStats[manifestId].writeProgressDownloaded += _item.stats.writeProgress;\n    } //need to calculate what percentage of bytes that are going to be written to hard drive are according the the whole\n    // size for example 5 files are being downloaded, 4 smaller are 100mb and one large 1,9GB. When the large file is\n    // being saved the write progress is basically 1900/2000 = 95% of all written bytes.\n\n\n    allStats[manifestId].writeProgressDownloading = allStats[manifestId].writeProgressDownloading * (allStats[manifestId].downloadingAvailableBytes / (allStats[manifestId].downloadedBytes + allStats[manifestId].downloading_file_size) || 1);\n    allStats[manifestId].writeProgressDownloading = allStats[manifestId].writeProgressDownloading / (writeProgressDownloadingItemsLength || 1);\n    allStats[manifestId].writeProgressDownloaded = allStats[manifestId].writeProgressDownloaded * (allStats[manifestId].downloadedBytes / (allStats[manifestId].downloadedBytes + allStats[manifestId].downloading_file_size) || 1);\n    allStats[manifestId].writeProgressDownloaded = allStats[manifestId].writeProgressDownloaded / (writeProgressItemsDownloadedLength || 1);\n    allStats[manifestId].writeProgress = allStats[manifestId].writeProgressDownloading + allStats[manifestId].writeProgressDownloaded;\n\n    var speed = this._getDiff("downloadingBytes", manifestId, allStats, this._statsPrevious);\n\n    speed += this._getDiff("downloadedBytes", manifestId, allStats, this._statsPrevious);\n    speed = speed * 1000 / (now - this._statsTime || 1);\n    allStats[manifestId].speed = speed;\n    allStats[manifestId].status = this._storage.status.getItem(manifestId, "status");\n    allStats[manifestId].details = this._storage.status.getItem(manifestId, "details"); //progress for downloaded\n\n    var leftParts = countParts(allStats[manifestId].leftI);\n    var downloadedParts = countParts(allStats[manifestId].downloadedI);\n    var downloadingPartsSize = countPartsObj(allStats[manifestId].downloadingI);\n    var downloadingParts = countPartsObj(allStats[manifestId].downloadingI, true);\n    var errorParts = countPartsObj(allStats[manifestId].errorsI);\n    var allParts = leftParts + downloadedParts + downloadingPartsSize + errorParts;\n    allStats[manifestId].progress = (downloadedParts + downloadingParts) / (allParts || 1);\n    allStats[manifestId].progress = allStats[manifestId].progress * (1 - writeProgressUsage);\n    allStats[manifestId].progress += allStats[manifestId].writeProgress * writeProgressUsage;\n    allStats[manifestId].downloadedBytesTotal = Math.round(allStats[manifestId].progress * 10000) / 100;\n    allStats[manifestId].downloadedBytesTotal += "%"; // progress of each represention\n\n    var reduceFunc = function reduceFunc(map, obj) {\n      if (!map[obj.id]) {\n        map[obj.id] = [];\n      }\n\n      map[obj.id].push(obj);\n      return map;\n    };\n\n    var downloadedById = allStats[manifestId].downloadedI.reduce(reduceFunc, {});\n    var downloadingArray = toArray(allStats[manifestId].downloadingI);\n    var downloadingById = downloadingArray.reduce(reduceFunc, {});\n    var leftById = allStats[manifestId].leftI.reduce(reduceFunc, {});\n    var errorArray = toArray(allStats[manifestId].errorsI);\n    var errorsById = errorArray.reduce(reduceFunc, {});\n\n    var extend = function extend(obj, src) {\n      for (var key in src) {\n        if (src.hasOwnProperty(key)) {\n          if (!obj[key]) {\n            obj[key] = [];\n          }\n\n          obj[key] = obj[key].concat(src[key]);\n        }\n      }\n\n      return obj;\n    };\n\n    var allPartsById = {};\n    extend(allPartsById, downloadedById);\n    extend(allPartsById, downloadingById);\n    extend(allPartsById, leftById);\n    extend(allPartsById, errorsById); // compute progres for each id\n\n    var progressById = {};\n    var key = void 0;\n\n    for (key in allPartsById) {\n      if (allPartsById.hasOwnProperty(key)) {\n        progressById[key] = countPartsObj(downloadedById[key]) / (countPartsObj(allPartsById[key]) || 1);\n      }\n    }\n\n    var progressByIdPercent = {};\n\n    for (key in progressById) {\n      if (progressById.hasOwnProperty(key)) {\n        progressByIdPercent[key] = Math.round(progressById[key] * 10000) / 100 + "%";\n      }\n    }\n\n    allStats[manifestId].progressById = progressById;\n    allStats[manifestId].progressByIdPercent = progressByIdPercent;\n  }\n\n  var showStats = {};\n\n  for (var _i = 0, _j = manifests.length; _i < _j; _i++) {\n    var _manifestId = manifests[_i];\n    showStats[_manifestId] = {};\n    var downloadedBytesTotal = allStats[_manifestId].downloadedBytes + allStats[_manifestId].downloadingAvailableBytes;\n    showStats[_manifestId].progress = allStats[_manifestId].progress;\n    showStats[_manifestId].progressPercentage = allStats[_manifestId].downloadedBytesTotal;\n    showStats[_manifestId].progressById = allStats[_manifestId].progressById;\n    showStats[_manifestId].progressByIdPercent = allStats[_manifestId].progressByIdPercent;\n    showStats[_manifestId].downloadedBytesTotal = this._convertToBytes(downloadedBytesTotal, 1, 2, 2);\n    showStats[_manifestId].downloaded = allStats[_manifestId].downloaded;\n    showStats[_manifestId].left = allStats[_manifestId].left;\n    showStats[_manifestId].errors = allStats[_manifestId].errors;\n\n    if (allStats[_manifestId].speed < 0) {\n      allStats[_manifestId].speed = 0;\n    }\n\n    showStats[_manifestId].speed = allStats[_manifestId].speed;\n    showStats[_manifestId].speedBytes = this._convertToBytes(allStats[_manifestId].speed, 3, 2);\n    showStats[_manifestId].status = allStats[_manifestId].status;\n    showStats[_manifestId].details = allStats[_manifestId].details;\n  }\n\n  for (var _key in showStats) {\n    if (showStats.hasOwnProperty(_key)) {\n      this._stats[_key] = showStats[_key];\n    }\n  }\n\n  if (!refresh) {\n    this._statsTime = now;\n\n    for (var _key2 in allStats) {\n      if (allStats.hasOwnProperty(_key2)) {\n        this._statsPrevious[_key2] = allStats[_key2];\n      }\n    }\n  }\n};\n/**\n * @param {string} key - key stats identifier\n * @param {string} manifestId - manifest identifier\n * @param {number} current - current value\n * @param {number} previous - previous value\n * @returns {number} - difference between current and previous value\n * @private\n */\n\n\nDownloadStats.prototype._getDiff = function (key, manifestId, current, previous) {\n  var currentValue = current[manifestId] && current[manifestId][key] || 0;\n  var previousValue = previous[manifestId] && previous[manifestId][key] || 0;\n  return currentValue - previousValue;\n};\n/**\n *\n * @param {string|array} manifestIds - manifest identifier or array of manifests identifier\n * @returns {*} stats for certain download or array of stats for downloads\n */\n\n\nDownloadStats.prototype.getStats = function (manifestIds) {\n  var stats;\n\n  if (this._stats) {\n    if (typeof manifestIds === \'string\') {\n      stats = this._stats[manifestIds];\n    } else {\n      stats = [];\n\n      for (var i = 0, j = manifestIds.length; i < j; i++) {\n        var stat = this._stats[manifestIds[i]];\n\n        if (stat) {\n          stats.push(stat);\n        }\n      }\n    }\n  }\n\n  return stats;\n};\n\nDownloadStats.prototype.refresh = function () {\n  this._generate(true);\n};\n\nDownloadStats.prototype.start = function () {\n  if (!this._interval) {\n    this._interval = setInterval(this._generate, this._STATS_TIME_GENERATION);\n\n    this._generate();\n  }\n};\n\nDownloadStats.prototype.stop = function () {\n  clearInterval(this._interval);\n  this._interval = null;\n\n  this._generate();\n\n  this._statsPrevious = {};\n};\n\nmodule.exports = DownloadStats;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvc3RhdHMvZG93bmxvYWRfc3RhdHMuanM/ZmY0MyJdLCJuYW1lcyI6WyJfIiwicmVxdWlyZSIsIndyaXRlUHJvZ3Jlc3NVc2FnZSIsIkRvd25sb2FkU3RhdHMiLCJzdG9yYWdlIiwiX3N0b3JhZ2UiLCJfc3RhdHMiLCJfc3RhdHNQcmV2aW91cyIsIl9TVEFUU19USU1FX0dFTkVSQVRJT04iLCJiaW5kQWxsIiwicHJvdG90eXBlIiwiX2NvbnZlcnRUb0J5dGVzIiwidmFsdWUiLCJwcmVjaXNpb24iLCJwcmVjaXNpb24yIiwicHJlY2lzaW9uMyIsIl9jb252ZXJ0VG9LQiIsIl9jb252ZXJ0VG9NQiIsIl9jb252ZXJ0VG9HQiIsImEiLCJNYXRoIiwicG93Iiwib25lS0IiLCJyb3VuZCIsIm9uZU1CIiwib25lR0IiLCJfY2xlYXJTcGVlZCIsImFsbE1hbmlmZXN0SWRzIiwiT2JqZWN0Iiwia2V5cyIsImkiLCJqIiwibGVuZ3RoIiwibWFuaWZlc3RJZCIsImtleUV4aXN0cyIsInNwZWVkIiwic3BlZWRCeXRlcyIsIl9nZW5lcmF0ZSIsInJlZnJlc2giLCJhbGxTdGF0cyIsIm1hbmlmZXN0cyIsImdldEtleXMiLCJjb3VudFBhcnRzIiwiaXRlbXMiLCJwYXJ0cyIsImsiLCJsIiwiaXRlbSIsImJhbmR3aWR0aCIsImNvdW50UGFydHNPYmoiLCJ3aXRoRG93bmxvYWRlZE9ubHkiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsInN0YXRzIiwiYXZhaWxhYmxlIiwiZmlsZV9zaXplIiwidG9BcnJheSIsIm9iaiIsImFyciIsInB1c2giLCJkb3dubG9hZGluZyIsImRvd25sb2FkZWQiLCJsZWZ0IiwiZG93bmxvYWRpbmdBdmFpbGFibGVCeXRlcyIsImRvd25sb2FkaW5nX2ZpbGVfc2l6ZSIsImRvd25sb2FkaW5nQnl0ZXMiLCJkb3dubG9hZGVkQnl0ZXMiLCJhdmFpbGFibGVCeXRlcyIsIndyaXRlUHJvZ3Jlc3MiLCJ3cml0ZVByb2dyZXNzRG93bmxvYWRpbmciLCJ3cml0ZVByb2dyZXNzRG93bmxvYWRlZCIsImVycm9ycyIsInByb2dyZXNzIiwic3RhdHVzIiwibm93IiwiRGF0ZSIsImdldFRpbWUiLCJfc3RhdHNUaW1lIiwiY2xvbmUiLCJjb3VudCIsImxlZnRJIiwiZ2V0SXRlbXMiLCJlcnJvcnNJIiwiZG93bmxvYWRpbmdJIiwid3JpdGVQcm9ncmVzc0Rvd25sb2FkaW5nSXRlbXNMZW5ndGgiLCJnZXRJdGVtIiwiZG93bmxvYWRlZEkiLCJ3cml0ZVByb2dyZXNzSXRlbXNEb3dubG9hZGVkTGVuZ3RoIiwiX2dldERpZmYiLCJkZXRhaWxzIiwibGVmdFBhcnRzIiwiZG93bmxvYWRlZFBhcnRzIiwiZG93bmxvYWRpbmdQYXJ0c1NpemUiLCJkb3dubG9hZGluZ1BhcnRzIiwiZXJyb3JQYXJ0cyIsImFsbFBhcnRzIiwiZG93bmxvYWRlZEJ5dGVzVG90YWwiLCJyZWR1Y2VGdW5jIiwibWFwIiwiaWQiLCJkb3dubG9hZGVkQnlJZCIsInJlZHVjZSIsImRvd25sb2FkaW5nQXJyYXkiLCJkb3dubG9hZGluZ0J5SWQiLCJsZWZ0QnlJZCIsImVycm9yQXJyYXkiLCJlcnJvcnNCeUlkIiwiZXh0ZW5kIiwic3JjIiwiY29uY2F0IiwiYWxsUGFydHNCeUlkIiwicHJvZ3Jlc3NCeUlkIiwicHJvZ3Jlc3NCeUlkUGVyY2VudCIsInNob3dTdGF0cyIsInByb2dyZXNzUGVyY2VudGFnZSIsImN1cnJlbnQiLCJwcmV2aW91cyIsImN1cnJlbnRWYWx1ZSIsInByZXZpb3VzVmFsdWUiLCJnZXRTdGF0cyIsIm1hbmlmZXN0SWRzIiwic3RhdCIsInN0YXJ0IiwiX2ludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJzdG9wIiwiY2xlYXJJbnRlcnZhbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLENBQUMsR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQWpCO0FBRUE7Ozs7OztBQUlBLElBQU1DLGtCQUFrQixHQUFHLEdBQTNCO0FBRUE7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d0JnSCxLQUF4QixHQUFnQyxZQUFZO0FBQzFDLE1BQUksQ0FBQyxLQUFLQyxTQUFWLEVBQXFCO0FBQ25CLFNBQUtBLFNBQUwsR0FBaUJDLFdBQVcsQ0FBQyxLQUFLdkYsU0FBTixFQUFpQixLQUFLN0Isc0JBQXRCLENBQTVCOztBQUNBLFNBQUs2QixTQUFMO0FBQ0Q7QUFDRixDQUxEOztBQU9BbEMsYUFBYSxDQUFDTyxTQUFkLENBQXdCbUgsSUFBeEIsR0FBK0IsWUFBWTtBQUN6Q0MsZUFBYSxDQUFDLEtBQUtILFNBQU4sQ0FBYjtBQUNBLE9BQUtBLFNBQUwsR0FBaUIsSUFBakI7O0FBQ0EsT0FBS3RGLFNBQUw7O0FBQ0EsT0FBSzlCLGNBQUwsR0FBc0IsRUFBdEI7QUFDRCxDQUxEOztBQU9Bd0gsTUFBTSxDQUFDQyxPQUFQLEdBQWlCN0gsYUFBakIiLCJmaWxlIjoiOTUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IF8gPSByZXF1aXJlKFwidW5kZXJzY29yZVwiKTtcblxuLyoqXG4gKiBob3cgbXVjaCBvZiBwcm9ncmVzcyBzaG91bGQgYmUgY29ubmVjdGVkIHdpdGggd3JpdGluZyBjaHVua3MgdG8gYSBoYXJkIGRyaXZlICgxIC0gMTAwJSlcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmNvbnN0IHdyaXRlUHJvZ3Jlc3NVc2FnZSA9IDAuMTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtEb3dubG9hZHNTdG9yYWdlQ29udHJvbGxlcn0gc3RvcmFnZSAtIGRvd25sb2FkcyBzdG9yYWdlIGNvbnRyb2xsZXJcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEb3dubG9hZFN0YXRzIChzdG9yYWdlKSB7XG4gIHRoaXMuX3N0b3JhZ2UgPSBzdG9yYWdlO1xuICB0aGlzLl9zdGF0cyA9IHt9O1xuICB0aGlzLl9zdGF0c1ByZXZpb3VzID0ge307XG4gIHRoaXMuX1NUQVRTX1RJTUVfR0VORVJBVElPTiA9IDEwMDA7XG4gIF8uYmluZEFsbCh0aGlzLCBcIl9nZW5lcmF0ZVwiKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBieXRlc1xuICogQHBhcmFtIHtudW1iZXJ9IHByZWNpc2lvbiAtIHByZWNpc2lvbiBmb3Iga2lsb2J5dGVzXG4gKiBAcGFyYW0ge251bWJlcj19IHByZWNpc2lvbjIgLSBwcmVjaXNpb24gZm9yIG1lZ2FieXRlc1xuICogQHBhcmFtIHtudW1iZXI9fSBwcmVjaXNpb24zIC0gcHJlY2lzaW9uIGZvciBnaWdhYnl0ZXNcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbnZlcnRlZCBieXRlcyB0byBrYiBvciBtYiBvciBnYlxuICogQHByaXZhdGVcbiAqL1xuRG93bmxvYWRTdGF0cy5wcm90b3R5cGUuX2NvbnZlcnRUb0J5dGVzID0gZnVuY3Rpb24gKHZhbHVlLCBwcmVjaXNpb24sIHByZWNpc2lvbjIsIHByZWNpc2lvbjMpIHtcbiAgcHJlY2lzaW9uMiA9IHR5cGVvZiBwcmVjaXNpb24yICE9PSBcInVuZGVmaW5lZFwiID8gcHJlY2lzaW9uMiA6IHByZWNpc2lvbjtcbiAgcHJlY2lzaW9uMyA9IHR5cGVvZiBwcmVjaXNpb24zICE9PSBcInVuZGVmaW5lZFwiID8gcHJlY2lzaW9uMyA6IHByZWNpc2lvbjtcbiAgaWYgKHZhbHVlIDwgMTAwMDAwKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRUb0tCKHZhbHVlLCBwcmVjaXNpb24pXG4gIH0gZWxzZSBpZiAodmFsdWUgPCAxMDI0ICogMTAyNCAqIDEwMjQpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udmVydFRvTUIodmFsdWUsIHByZWNpc2lvbjIpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRUb0dCKHZhbHVlLCBwcmVjaXNpb24zKVxuICB9XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBieXRlc1xuICogQHBhcmFtIHtudW1iZXJ9IHByZWNpc2lvbiAtIHByZWNpc2lvblxuICogQHJldHVybnMge3N0cmluZ30ga2lsb2J5dGVzXG4gKiBAcHJpdmF0ZVxuICovXG5Eb3dubG9hZFN0YXRzLnByb3RvdHlwZS5fY29udmVydFRvS0IgPSBmdW5jdGlvbiAodmFsdWUsIHByZWNpc2lvbikge1xuICBwcmVjaXNpb24gPSB0eXBlb2YgcHJlY2lzaW9uICE9PSBcInVuZGVmaW5lZFwiID8gcHJlY2lzaW9uIDogMDtcbiAgY29uc3QgYSA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xuICBjb25zdCBvbmVLQiA9IDEwMjQ7XG4gIHJldHVybiAoTWF0aC5yb3VuZCgodmFsdWUgKiBhKSAvIG9uZUtCKSAvIGEpICsgXCJrQlwiO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBieXRlc1xuICogQHBhcmFtIHtudW1iZXJ9IHByZWNpc2lvbiAtIHByZWNpc2lvblxuICogQHJldHVybnMge3N0cmluZ30gLSBtZWdhYnl0ZXNcbiAqIEBwcml2YXRlXG4gKi9cbkRvd25sb2FkU3RhdHMucHJvdG90eXBlLl9jb252ZXJ0VG9NQiA9IGZ1bmN0aW9uICh2YWx1ZSwgcHJlY2lzaW9uKSB7XG4gIHByZWNpc2lvbiA9IHR5cGVvZiBwcmVjaXNpb24gIT09IFwidW5kZWZpbmVkXCIgPyBwcmVjaXNpb24gOiAwO1xuICBjb25zdCBhID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7XG4gIGNvbnN0IG9uZU1CID0gMTAyNCAqIDEwMjQ7XG4gIHJldHVybiAoTWF0aC5yb3VuZCgodmFsdWUgKiBhKSAvIG9uZU1CKSAvIGEpICsgXCJNQlwiO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBieXRlc1xuICogQHBhcmFtIHtudW1iZXJ9IHByZWNpc2lvbiAtIHByZWNpc2lvblxuICogQHJldHVybnMge3N0cmluZ30gZ2lnYWJ5dGVzXG4gKiBAcHJpdmF0ZVxuICovXG5Eb3dubG9hZFN0YXRzLnByb3RvdHlwZS5fY29udmVydFRvR0IgPSBmdW5jdGlvbiAodmFsdWUsIHByZWNpc2lvbikge1xuICBwcmVjaXNpb24gPSB0eXBlb2YgcHJlY2lzaW9uICE9PSBcInVuZGVmaW5lZFwiID8gcHJlY2lzaW9uIDogMDtcbiAgY29uc3QgYSA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xuICBjb25zdCBvbmVHQiA9IDEwMjQgKiAxMDI0ICogMTAyNDtcbiAgcmV0dXJuIChNYXRoLnJvdW5kKCh2YWx1ZSAqIGEpIC8gb25lR0IpIC8gYSkgKyBcIkdCXCI7XG59O1xuXG5Eb3dubG9hZFN0YXRzLnByb3RvdHlwZS5fY2xlYXJTcGVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgYWxsTWFuaWZlc3RJZHMgPSBPYmplY3Qua2V5cyh0aGlzLl9zdGF0cykgfHwgW107XG4gIGZvciAobGV0IGkgPSAwLCBqID0gYWxsTWFuaWZlc3RJZHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgbGV0IG1hbmlmZXN0SWQgPSBhbGxNYW5pZmVzdElkc1tpXTtcbiAgICBpZiAoIXRoaXMuX3N0b3JhZ2Uua2V5RXhpc3RzKG1hbmlmZXN0SWQpICYmIHRoaXMuX3N0YXRzW21hbmlmZXN0SWRdICYmIHRoaXMuX3N0YXRzW21hbmlmZXN0SWRdLnNwZWVkKSAge1xuICAgICAgdGhpcy5fc3RhdHNbbWFuaWZlc3RJZF0uc3BlZWQgPSAwO1xuICAgICAgdGhpcy5fc3RhdHNbbWFuaWZlc3RJZF0uc3BlZWRCeXRlcyA9IHRoaXMuX2NvbnZlcnRUb0J5dGVzKHRoaXMuX3N0YXRzW21hbmlmZXN0SWRdLnNwZWVkLCAzLCAyKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtib29sZWFufSByZWZyZXNoIC0gZGVjaWRlcyBpZiBzdGF0cyBzaG91bGQgYmUgb25seSBjYWxjdWxhdGVkIHdpdGhvdXQgc2V0dGluZyBwcmV2aW91cyBzdGF0c1xuICogdGhpcyBpcyB1c2VmdWwgd2hlbiBkb3dubG9hZHMgZmluaXNoZXMgYW5kIHN0YXRzIGFyZSBiZWluZyBjYWxjdWxhdGVkIG9uZSBtb3JlIHRpbWVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuRG93bmxvYWRTdGF0cy5wcm90b3R5cGUuX2dlbmVyYXRlID0gZnVuY3Rpb24gKHJlZnJlc2gpIHtcbiAgbGV0IGFsbFN0YXRzID0ge307XG5cbiAgbGV0IG1hbmlmZXN0cyA9IHRoaXMuX3N0b3JhZ2UuZ2V0S2V5cygpO1xuXG4gIHRoaXMuX2NsZWFyU3BlZWQoKTtcblxuICBmdW5jdGlvbiBjb3VudFBhcnRzIChpdGVtcykge1xuICAgIGxldCBwYXJ0cyA9IDA7XG4gICAgZm9yIChsZXQgayA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGsgPCBsOyBrKyspIHtcbiAgICAgIGxldCBpdGVtID0gaXRlbXNba107XG4gICAgICBwYXJ0cyArPSBpdGVtLmJhbmR3aWR0aCB8fCAxO1xuICAgIH1cbiAgICByZXR1cm4gcGFydHM7XG4gIH1cblxuICBmdW5jdGlvbiBjb3VudFBhcnRzT2JqIChpdGVtcywgd2l0aERvd25sb2FkZWRPbmx5KSB7XG4gICAgbGV0IHBhcnRzID0gMDtcbiAgICBmb3IgKGxldCBrZXkgaW4gaXRlbXMpIHtcbiAgICAgIGlmIChpdGVtcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGxldCBpdGVtID0gaXRlbXNba2V5XTtcbiAgICAgICAgcGFydHMgKz0gKHdpdGhEb3dubG9hZGVkT25seSA/IChpdGVtLnN0YXRzLmF2YWlsYWJsZSAvIChpdGVtLnN0YXRzLmZpbGVfc2l6ZSB8fCAxKSkgOiAxKSAqIChpdGVtLmJhbmR3aWR0aCB8fCAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9BcnJheSAob2JqKSB7XG4gICAgbGV0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBsZXQgaXRlbSA9IG9ialtrZXldO1xuICAgICAgICBhcnIucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIGNvbnN0IHN0YXRzID0ge1xuICAgIGRvd25sb2FkaW5nOiAwLFxuICAgIGRvd25sb2FkZWQ6IDAsXG4gICAgYXZhaWxhYmxlOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgZG93bmxvYWRpbmdBdmFpbGFibGVCeXRlczogMCxcbiAgICBkb3dubG9hZGluZ19maWxlX3NpemU6IDAsXG4gICAgZG93bmxvYWRpbmdCeXRlczogMCxcbiAgICBkb3dubG9hZGVkQnl0ZXM6IDAsXG4gICAgYXZhaWxhYmxlQnl0ZXM6IDAsXG4gICAgd3JpdGVQcm9ncmVzczogMCxcbiAgICB3cml0ZVByb2dyZXNzRG93bmxvYWRpbmc6IDAsXG4gICAgd3JpdGVQcm9ncmVzc0Rvd25sb2FkZWQ6IDAsXG4gICAgZXJyb3JzOiAwLFxuICAgIHByb2dyZXNzOiAwLFxuICAgIHNwZWVkOiAwLFxuICAgIHN0YXR1czogJydcbiAgfTtcblxuICAvL2F2YWlsYWJsZUJ5dGVzIC0gYmF0ZXMgdGhhdCBoYXMgYmVlbiBhbHJlYWR5IGRvd25sb2FkZWRcbiAgLy9kb3dubG9hZGVkQnl0ZXMgLSBieXRlcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgY3VycmVudCBzcGVlZFxuICAvL2lmIGZvciBhbnkgcmVhc29uIHRoZSBjb25uZWN0aW9uIGlzIGJyb2tlbiBvciB1c2VyIHN0b3BwZWQsIHRoZW4gYWZ0ZXIgcmVzdW1pbmcgdGhlIGF2YWlsYWJsZSBieXRlcyBhcmVcbiAgLy9hbHdheXMgYmlnZ2VyIHRoZW4gdGhlIGFjdHVhbCBkb3dubG9hZGVkIGJ5dGVzLlxuICAvL29uY2UgdGhlIGZpbGUgaXMgZmluaXNoZWQgYm90aCB2YWx1ZXMgYXJlIGVxdWFsIGFuZCBoYXZlIHRoZSBzYW1lIHZhbHVlIGFzIGZpbGVfc2l6ZVxuXG4gIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgaWYgKCF0aGlzLl9zdGF0c1RpbWUpIHtcbiAgICB0aGlzLl9zdGF0c1RpbWUgPSBub3c7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDAsIGogPSBtYW5pZmVzdHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgbGV0IG1hbmlmZXN0SWQgPSBtYW5pZmVzdHNbaV07XG4gICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0gPSBfLmNsb25lKHN0YXRzKTtcbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5sZWZ0ID0gdGhpcy5fc3RvcmFnZS5sZWZ0LmNvdW50KG1hbmlmZXN0SWQpO1xuICAgIGFsbFN0YXRzW21hbmlmZXN0SWRdLmxlZnRJID0gdGhpcy5fc3RvcmFnZS5sZWZ0LmdldEl0ZW1zKG1hbmlmZXN0SWQpO1xuXG4gICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0uZXJyb3JzID0gdGhpcy5fc3RvcmFnZS5lcnJvcnMuY291bnQobWFuaWZlc3RJZCk7XG4gICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0uZXJyb3JzSSA9IHRoaXMuX3N0b3JhZ2UuZXJyb3JzLmdldEl0ZW1zKG1hbmlmZXN0SWQpO1xuICAgIGxldCBpdGVtcyA9IHRoaXMuX3N0b3JhZ2UuZG93bmxvYWRpbmcuZ2V0S2V5cyhtYW5pZmVzdElkKTtcbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGluZyA9IGl0ZW1zLmxlbmd0aDtcbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGluZ0kgPSB0aGlzLl9zdG9yYWdlLmRvd25sb2FkaW5nLmdldEl0ZW1zKG1hbmlmZXN0SWQpO1xuICAgIGxldCB3cml0ZVByb2dyZXNzRG93bmxvYWRpbmdJdGVtc0xlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgICBmb3IgKGxldCBrID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgayA8IGw7IGsrKykge1xuICAgICAgbGV0IGl0ZW0gPSB0aGlzLl9zdG9yYWdlLmRvd25sb2FkaW5nLmdldEl0ZW0obWFuaWZlc3RJZCwgaXRlbXNba10pO1xuICAgICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRpbmdCeXRlcyArPSBpdGVtLnN0YXRzLmRvd25sb2FkZWQ7XG4gICAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGluZ19maWxlX3NpemUgKz0gaXRlbS5zdGF0cy5maWxlX3NpemU7XG4gICAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGluZ0F2YWlsYWJsZUJ5dGVzICs9IGl0ZW0uc3RhdHMuYXZhaWxhYmxlO1xuICAgICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0ud3JpdGVQcm9ncmVzc0Rvd25sb2FkaW5nICs9IGl0ZW0uc3RhdHMud3JpdGVQcm9ncmVzcztcbiAgICB9XG4gICAgaXRlbXMgPSB0aGlzLl9zdG9yYWdlLmRvd25sb2FkZWQuZ2V0SXRlbXMobWFuaWZlc3RJZCk7XG4gICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRlZCA9IGl0ZW1zLmxlbmd0aDtcbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGVkSSA9IGl0ZW1zO1xuICAgIGxldCB3cml0ZVByb2dyZXNzSXRlbXNEb3dubG9hZGVkTGVuZ3RoID0gaXRlbXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGsgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBrIDwgbDsgaysrKSB7XG4gICAgICBsZXQgaXRlbSA9IGl0ZW1zW2tdO1xuICAgICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRlZEJ5dGVzICs9IGl0ZW0uc3RhdHMuZG93bmxvYWRlZDtcbiAgICAgIGFsbFN0YXRzW21hbmlmZXN0SWRdLndyaXRlUHJvZ3Jlc3NEb3dubG9hZGVkICs9IGl0ZW0uc3RhdHMud3JpdGVQcm9ncmVzcztcbiAgICB9XG5cbiAgICAvL25lZWQgdG8gY2FsY3VsYXRlIHdoYXQgcGVyY2VudGFnZSBvZiBieXRlcyB0aGF0IGFyZSBnb2luZyB0byBiZSB3cml0dGVuIHRvIGhhcmQgZHJpdmUgYXJlIGFjY29yZGluZyB0aGUgdGhlIHdob2xlXG4gICAgLy8gc2l6ZSBmb3IgZXhhbXBsZSA1IGZpbGVzIGFyZSBiZWluZyBkb3dubG9hZGVkLCA0IHNtYWxsZXIgYXJlIDEwMG1iIGFuZCBvbmUgbGFyZ2UgMSw5R0IuIFdoZW4gdGhlIGxhcmdlIGZpbGUgaXNcbiAgICAvLyBiZWluZyBzYXZlZCB0aGUgd3JpdGUgcHJvZ3Jlc3MgaXMgYmFzaWNhbGx5IDE5MDAvMjAwMCA9IDk1JSBvZiBhbGwgd3JpdHRlbiBieXRlcy5cbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS53cml0ZVByb2dyZXNzRG93bmxvYWRpbmcgPSBhbGxTdGF0c1ttYW5pZmVzdElkXS53cml0ZVByb2dyZXNzRG93bmxvYWRpbmcgKlxuICAgICAgKGFsbFN0YXRzW21hbmlmZXN0SWRdLmRvd25sb2FkaW5nQXZhaWxhYmxlQnl0ZXMgLyAoYWxsU3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRlZEJ5dGVzICsgYWxsU3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRpbmdfZmlsZV9zaXplKSB8fCAxKTtcbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS53cml0ZVByb2dyZXNzRG93bmxvYWRpbmcgPSBhbGxTdGF0c1ttYW5pZmVzdElkXS53cml0ZVByb2dyZXNzRG93bmxvYWRpbmcgLyAod3JpdGVQcm9ncmVzc0Rvd25sb2FkaW5nSXRlbXNMZW5ndGggfHwgMSk7XG5cbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS53cml0ZVByb2dyZXNzRG93bmxvYWRlZCA9IGFsbFN0YXRzW21hbmlmZXN0SWRdLndyaXRlUHJvZ3Jlc3NEb3dubG9hZGVkICpcbiAgICAgIChhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGVkQnl0ZXMgLyAoYWxsU3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRlZEJ5dGVzICsgYWxsU3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRpbmdfZmlsZV9zaXplKSB8fCAxKTtcbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS53cml0ZVByb2dyZXNzRG93bmxvYWRlZCA9IGFsbFN0YXRzW21hbmlmZXN0SWRdLndyaXRlUHJvZ3Jlc3NEb3dubG9hZGVkIC8gKHdyaXRlUHJvZ3Jlc3NJdGVtc0Rvd25sb2FkZWRMZW5ndGggfHwgMSk7XG5cbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS53cml0ZVByb2dyZXNzID0gYWxsU3RhdHNbbWFuaWZlc3RJZF0ud3JpdGVQcm9ncmVzc0Rvd25sb2FkaW5nICsgYWxsU3RhdHNbbWFuaWZlc3RJZF0ud3JpdGVQcm9ncmVzc0Rvd25sb2FkZWQ7XG5cbiAgICBsZXQgc3BlZWQgPSB0aGlzLl9nZXREaWZmKFwiZG93bmxvYWRpbmdCeXRlc1wiLCBtYW5pZmVzdElkLCBhbGxTdGF0cywgdGhpcy5fc3RhdHNQcmV2aW91cyk7XG4gICAgc3BlZWQgKz0gdGhpcy5fZ2V0RGlmZihcImRvd25sb2FkZWRCeXRlc1wiLCBtYW5pZmVzdElkLCBhbGxTdGF0cywgdGhpcy5fc3RhdHNQcmV2aW91cyk7XG4gICAgc3BlZWQgPSAoc3BlZWQgKiAxMDAwKSAvICgobm93IC0gdGhpcy5fc3RhdHNUaW1lKSB8fCAxICApO1xuICAgIGFsbFN0YXRzW21hbmlmZXN0SWRdLnNwZWVkID0gc3BlZWQ7XG4gICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0uc3RhdHVzID0gdGhpcy5fc3RvcmFnZS5zdGF0dXMuZ2V0SXRlbShtYW5pZmVzdElkLCBcInN0YXR1c1wiKTtcbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5kZXRhaWxzID0gdGhpcy5fc3RvcmFnZS5zdGF0dXMuZ2V0SXRlbShtYW5pZmVzdElkLCBcImRldGFpbHNcIik7XG4gICAgLy9wcm9ncmVzcyBmb3IgZG93bmxvYWRlZFxuICAgIGxldCBsZWZ0UGFydHMgPSBjb3VudFBhcnRzKGFsbFN0YXRzW21hbmlmZXN0SWRdLmxlZnRJKTtcbiAgICBsZXQgZG93bmxvYWRlZFBhcnRzID0gY291bnRQYXJ0cyhhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGVkSSk7XG4gICAgbGV0IGRvd25sb2FkaW5nUGFydHNTaXplID0gY291bnRQYXJ0c09iaihhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGluZ0kpO1xuICAgIGxldCBkb3dubG9hZGluZ1BhcnRzID0gY291bnRQYXJ0c09iaihhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGluZ0ksIHRydWUpO1xuICAgIGxldCBlcnJvclBhcnRzID0gY291bnRQYXJ0c09iaihhbGxTdGF0c1ttYW5pZmVzdElkXS5lcnJvcnNJKTtcbiAgICBsZXQgYWxsUGFydHMgPSBsZWZ0UGFydHMgKyBkb3dubG9hZGVkUGFydHMgKyBkb3dubG9hZGluZ1BhcnRzU2l6ZSArIGVycm9yUGFydHM7XG5cbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5wcm9ncmVzcyA9IChkb3dubG9hZGVkUGFydHMgKyBkb3dubG9hZGluZ1BhcnRzKSAvIChhbGxQYXJ0cyB8fCAxKTtcbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5wcm9ncmVzcyA9IGFsbFN0YXRzW21hbmlmZXN0SWRdLnByb2dyZXNzICogKDEgLSB3cml0ZVByb2dyZXNzVXNhZ2UpO1xuICAgIGFsbFN0YXRzW21hbmlmZXN0SWRdLnByb2dyZXNzICs9IGFsbFN0YXRzW21hbmlmZXN0SWRdLndyaXRlUHJvZ3Jlc3MgKiB3cml0ZVByb2dyZXNzVXNhZ2U7XG5cbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGVkQnl0ZXNUb3RhbCA9IE1hdGgucm91bmQoYWxsU3RhdHNbbWFuaWZlc3RJZF0ucHJvZ3Jlc3MgKiAxMDAwMCkgLyAxMDA7XG4gICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRlZEJ5dGVzVG90YWwgKz0gXCIlXCI7XG5cbiAgICAvLyBwcm9ncmVzcyBvZiBlYWNoIHJlcHJlc2VudGlvblxuICAgIGxldCByZWR1Y2VGdW5jID0gZnVuY3Rpb24gKG1hcCwgb2JqKSB7XG4gICAgICBpZiAoICFtYXBbb2JqLmlkXSApICB7XG4gICAgICAgIG1hcFtvYmouaWRdID0gW11cbiAgICAgIH1cbiAgICAgIG1hcFtvYmouaWRdLnB1c2gob2JqKTtcbiAgICAgIHJldHVybiBtYXA7XG4gICAgfVxuICAgIGxldCBkb3dubG9hZGVkQnlJZCA9IGFsbFN0YXRzW21hbmlmZXN0SWRdLmRvd25sb2FkZWRJLnJlZHVjZShyZWR1Y2VGdW5jLCB7fSk7XG4gICAgbGV0IGRvd25sb2FkaW5nQXJyYXkgPSB0b0FycmF5KGFsbFN0YXRzW21hbmlmZXN0SWRdLmRvd25sb2FkaW5nSSk7XG4gICAgbGV0IGRvd25sb2FkaW5nQnlJZCA9IGRvd25sb2FkaW5nQXJyYXkucmVkdWNlKHJlZHVjZUZ1bmMsIHt9KTtcbiAgICBsZXQgbGVmdEJ5SWQgPSBhbGxTdGF0c1ttYW5pZmVzdElkXS5sZWZ0SS5yZWR1Y2UocmVkdWNlRnVuYywge30pO1xuICAgIGxldCBlcnJvckFycmF5ID0gdG9BcnJheShhbGxTdGF0c1ttYW5pZmVzdElkXS5lcnJvcnNJKTtcbiAgICBsZXQgZXJyb3JzQnlJZCA9IGVycm9yQXJyYXkucmVkdWNlKHJlZHVjZUZ1bmMsIHt9KTtcblxuICAgIGxldCBleHRlbmQgPSBmdW5jdGlvbiAob2JqLCBzcmMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICAgICAgaWYgKHNyYy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgaWYgKCFvYmpba2V5XSkge1xuICAgICAgICAgICAgb2JqW2tleV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb2JqW2tleV0gPSBvYmpba2V5XS5jb25jYXQoc3JjW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICBsZXQgYWxsUGFydHNCeUlkID0ge307XG4gICAgZXh0ZW5kKGFsbFBhcnRzQnlJZCwgZG93bmxvYWRlZEJ5SWQpO1xuICAgIGV4dGVuZChhbGxQYXJ0c0J5SWQsIGRvd25sb2FkaW5nQnlJZCk7XG4gICAgZXh0ZW5kKGFsbFBhcnRzQnlJZCwgbGVmdEJ5SWQpO1xuICAgIGV4dGVuZChhbGxQYXJ0c0J5SWQsIGVycm9yc0J5SWQpO1xuXG4gICAgLy8gY29tcHV0ZSBwcm9ncmVzIGZvciBlYWNoIGlkXG4gICAgbGV0IHByb2dyZXNzQnlJZCA9IHt9O1xuICAgIGxldCBrZXk7XG4gICAgZm9yIChrZXkgaW4gYWxsUGFydHNCeUlkKSB7XG4gICAgICBpZiAoYWxsUGFydHNCeUlkLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgcHJvZ3Jlc3NCeUlkW2tleV0gPSAoY291bnRQYXJ0c09iaihkb3dubG9hZGVkQnlJZFtrZXldKSkgLyAoY291bnRQYXJ0c09iaihhbGxQYXJ0c0J5SWRba2V5XSkgfHwgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBwcm9ncmVzc0J5SWRQZXJjZW50ID0ge307XG4gICAgZm9yIChrZXkgaW4gcHJvZ3Jlc3NCeUlkKSB7XG4gICAgICBpZiAocHJvZ3Jlc3NCeUlkLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgcHJvZ3Jlc3NCeUlkUGVyY2VudFtrZXldID0gTWF0aC5yb3VuZChwcm9ncmVzc0J5SWRba2V5XSAqIDEwMDAwKSAvIDEwMCArIFwiJVwiO1xuICAgICAgfVxuICAgIH1cbiAgICBhbGxTdGF0c1ttYW5pZmVzdElkXS5wcm9ncmVzc0J5SWQgPSBwcm9ncmVzc0J5SWQ7XG4gICAgYWxsU3RhdHNbbWFuaWZlc3RJZF0ucHJvZ3Jlc3NCeUlkUGVyY2VudCA9IHByb2dyZXNzQnlJZFBlcmNlbnQ7XG4gIH1cbiAgbGV0IHNob3dTdGF0cyA9IHt9O1xuICBmb3IgKGxldCBpID0gMCwgaiA9IG1hbmlmZXN0cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBsZXQgbWFuaWZlc3RJZCA9IG1hbmlmZXN0c1tpXTtcbiAgICBzaG93U3RhdHNbbWFuaWZlc3RJZF0gPSB7fTtcbiAgICBsZXQgZG93bmxvYWRlZEJ5dGVzVG90YWwgPSBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGVkQnl0ZXMgKyBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGluZ0F2YWlsYWJsZUJ5dGVzO1xuICAgIHNob3dTdGF0c1ttYW5pZmVzdElkXS5wcm9ncmVzcyA9IGFsbFN0YXRzW21hbmlmZXN0SWRdLnByb2dyZXNzO1xuICAgIHNob3dTdGF0c1ttYW5pZmVzdElkXS5wcm9ncmVzc1BlcmNlbnRhZ2UgPSBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGVkQnl0ZXNUb3RhbDtcbiAgICBzaG93U3RhdHNbbWFuaWZlc3RJZF0ucHJvZ3Jlc3NCeUlkID0gYWxsU3RhdHNbbWFuaWZlc3RJZF0ucHJvZ3Jlc3NCeUlkO1xuICAgIHNob3dTdGF0c1ttYW5pZmVzdElkXS5wcm9ncmVzc0J5SWRQZXJjZW50ID0gYWxsU3RhdHNbbWFuaWZlc3RJZF0ucHJvZ3Jlc3NCeUlkUGVyY2VudDtcbiAgICBzaG93U3RhdHNbbWFuaWZlc3RJZF0uZG93bmxvYWRlZEJ5dGVzVG90YWwgPSB0aGlzLl9jb252ZXJ0VG9CeXRlcyhkb3dubG9hZGVkQnl0ZXNUb3RhbCwgMSwgMiwgMik7XG4gICAgc2hvd1N0YXRzW21hbmlmZXN0SWRdLmRvd25sb2FkZWQgPSBhbGxTdGF0c1ttYW5pZmVzdElkXS5kb3dubG9hZGVkO1xuICAgIHNob3dTdGF0c1ttYW5pZmVzdElkXS5sZWZ0ID0gYWxsU3RhdHNbbWFuaWZlc3RJZF0ubGVmdDtcbiAgICBzaG93U3RhdHNbbWFuaWZlc3RJZF0uZXJyb3JzID0gYWxsU3RhdHNbbWFuaWZlc3RJZF0uZXJyb3JzO1xuICAgIGlmIChhbGxTdGF0c1ttYW5pZmVzdElkXS5zcGVlZCA8IDApIHtcbiAgICAgIGFsbFN0YXRzW21hbmlmZXN0SWRdLnNwZWVkID0gMDtcbiAgICB9XG4gICAgc2hvd1N0YXRzW21hbmlmZXN0SWRdLnNwZWVkID0gYWxsU3RhdHNbbWFuaWZlc3RJZF0uc3BlZWQ7XG4gICAgc2hvd1N0YXRzW21hbmlmZXN0SWRdLnNwZWVkQnl0ZXMgPSB0aGlzLl9jb252ZXJ0VG9CeXRlcyhhbGxTdGF0c1ttYW5pZmVzdElkXS5zcGVlZCwgMywgMik7XG4gICAgc2hvd1N0YXRzW21hbmlmZXN0SWRdLnN0YXR1cyA9IGFsbFN0YXRzW21hbmlmZXN0SWRdLnN0YXR1cztcbiAgICBzaG93U3RhdHNbbWFuaWZlc3RJZF0uZGV0YWlscyA9IGFsbFN0YXRzW21hbmlmZXN0SWRdLmRldGFpbHM7XG4gIH1cbiAgZm9yIChsZXQga2V5IGluIHNob3dTdGF0cykge1xuICAgIGlmIChzaG93U3RhdHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdGhpcy5fc3RhdHNba2V5XSA9IHNob3dTdGF0c1trZXldO1xuICAgIH1cbiAgfVxuICBpZiAoIXJlZnJlc2gpIHtcbiAgICB0aGlzLl9zdGF0c1RpbWUgPSBub3c7XG4gICAgZm9yIChsZXQga2V5IGluIGFsbFN0YXRzKSB7XG4gICAgICBpZiAoYWxsU3RhdHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICB0aGlzLl9zdGF0c1ByZXZpb3VzW2tleV0gPSBhbGxTdGF0c1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0ga2V5IHN0YXRzIGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnQgLSBjdXJyZW50IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gcHJldmlvdXMgLSBwcmV2aW91cyB2YWx1ZVxuICogQHJldHVybnMge251bWJlcn0gLSBkaWZmZXJlbmNlIGJldHdlZW4gY3VycmVudCBhbmQgcHJldmlvdXMgdmFsdWVcbiAqIEBwcml2YXRlXG4gKi9cbkRvd25sb2FkU3RhdHMucHJvdG90eXBlLl9nZXREaWZmID0gZnVuY3Rpb24gKGtleSwgbWFuaWZlc3RJZCwgY3VycmVudCwgcHJldmlvdXMpIHtcbiAgY29uc3QgY3VycmVudFZhbHVlID0gY3VycmVudFttYW5pZmVzdElkXSAmJiBjdXJyZW50W21hbmlmZXN0SWRdW2tleV0gfHwgMDtcbiAgY29uc3QgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzW21hbmlmZXN0SWRdICYmIHByZXZpb3VzW21hbmlmZXN0SWRdW2tleV0gfHwgMDtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZSAtIHByZXZpb3VzVmFsdWU7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xhcnJheX0gbWFuaWZlc3RJZHMgLSBtYW5pZmVzdCBpZGVudGlmaWVyIG9yIGFycmF5IG9mIG1hbmlmZXN0cyBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7Kn0gc3RhdHMgZm9yIGNlcnRhaW4gZG93bmxvYWQgb3IgYXJyYXkgb2Ygc3RhdHMgZm9yIGRvd25sb2Fkc1xuICovXG5Eb3dubG9hZFN0YXRzLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIChtYW5pZmVzdElkcykge1xuICBsZXQgc3RhdHM7XG4gIGlmICh0aGlzLl9zdGF0cykge1xuICAgIGlmICh0eXBlb2YgbWFuaWZlc3RJZHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzdGF0cyA9IHRoaXMuX3N0YXRzW21hbmlmZXN0SWRzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdHMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gbWFuaWZlc3RJZHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgIGxldCBzdGF0ID0gdGhpcy5fc3RhdHNbbWFuaWZlc3RJZHNbaV1dO1xuICAgICAgICBpZiAoc3RhdCkge1xuICAgICAgICAgIHN0YXRzLnB1c2goc3RhdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0YXRzO1xufTtcblxuRG93bmxvYWRTdGF0cy5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fZ2VuZXJhdGUodHJ1ZSk7XG59O1xuXG5Eb3dubG9hZFN0YXRzLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLl9pbnRlcnZhbCkge1xuICAgIHRoaXMuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5fZ2VuZXJhdGUsIHRoaXMuX1NUQVRTX1RJTUVfR0VORVJBVElPTik7XG4gICAgdGhpcy5fZ2VuZXJhdGUoKTtcbiAgfVxufTtcblxuRG93bmxvYWRTdGF0cy5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgdGhpcy5fZ2VuZXJhdGUoKTtcbiAgdGhpcy5fc3RhdHNQcmV2aW91cyA9IHt9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEb3dubG9hZFN0YXRzO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///95\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar XMLSerializer = __webpack_require__(10).XMLSerializer;\n\nvar appSettings = __webpack_require__(1);\n\nvar parseManifestWithChoosenRepresentations = __webpack_require__(97);\n\nvar downloadFileUtil = __webpack_require__(7);\n\nvar saveFile = __webpack_require__(98);\n\nvar translation = __webpack_require__(0);\n/**\n *\n * @constructor\n */\n\n\nfunction ManifestController() {\n  this._manifests = {};\n}\n/**\n *\n * @param {object} manifest manifest object\n * @returns {void}\n */\n\n\nManifestController.prototype.cacheManifest = function (manifest) {\n  this._manifests[manifest.id] = manifest;\n};\n/**\n *\n * @param {Array|number|string} [manifestIds] manifests identifiers\n * @returns {*} manifests\n */\n\n\nManifestController.prototype.getManifests = function (manifestIds) {\n  var selectedManifests;\n\n  if (typeof manifestIds === "undefined") {\n    selectedManifests = this._manifests;\n  } else if (typeof manifestIds === "number" || typeof manifestIds === "string") {\n    selectedManifests = [this._manifests[String(manifestIds)]];\n  } else {\n    selectedManifests = [];\n\n    for (var i = 0, j = manifestIds.length; i < j; i++) {\n      if (this._manifests[manifestIds[i]]) {\n        selectedManifests.push(this._manifests[manifestIds[i]]);\n      }\n    }\n  }\n\n  return selectedManifests;\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {*} manifest\n */\n\n\nManifestController.prototype.getManifestById = function (manifestId) {\n  if (typeof manifestId === "number" || typeof manifestId === "string") {\n    return this._manifests[String(manifestId)];\n  }\n};\n/**\n *\n * @param {Array|number|string} [manifestIds] manifests identifiers\n * @returns {Array} manifests infomrations\n */\n\n\nManifestController.prototype.getManifestsInfo = function (manifestIds) {\n  var manifests = [];\n  var selectedManifests = this.getManifests(manifestIds);\n\n  for (var i = 0, j = selectedManifests.length; i < j; i++) {\n    manifests.push(selectedManifests[i].getJsonInfo());\n  }\n\n  return manifests;\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {string} local path for manifest files\n */\n\n\nManifestController.prototype.getOriginalManifestLocalPath = function (manifestId) {\n  return appSettings.getSettings().settingsFolder + manifestId + "/";\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {*} manifest info\n */\n\n\nManifestController.prototype.getManifestInfoById = function (manifestId) {\n  var manifest = this.getManifestById(manifestId);\n\n  if (manifest) {\n    return manifest.getJsonInfo();\n  }\n};\n/**\n *\n * @param {Array|number|string} [manifestIds] manifests identifiers\n * @returns {void}\n */\n\n\nManifestController.prototype.removeFromCache = function (manifestIds) {\n  if (typeof manifestIds === "number" || typeof manifestIds === "string") {\n    manifestIds = [String(manifestIds)];\n  }\n\n  manifestIds = manifestIds || [];\n\n  for (var i = 0, j = manifestIds.length; i < j; i++) {\n    delete this._manifests[manifestIds[i]];\n  }\n};\n\nManifestController.prototype.removeFromCacheAll = function () {\n  this._manifests = [];\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {Promise} promise\n */\n\n\nManifestController.prototype.saveOriginalManifestOnceOnly = function (manifestId) {\n  var localPath = this.getOriginalManifestLocalPath(manifestId);\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    var manifest = self.getManifestById(manifestId);\n\n    if (!manifest) {\n      reject(translation.getError(translation.e.manifests.NOT_FOUND, manifestId));\n      return;\n    }\n\n    downloadFileUtil.checkForLocalFile(localPath + manifest.getManifestName(), function (exists) {\n      if (exists) {\n        resolve();\n      } else {\n        var xmlSerializer = new XMLSerializer();\n        var manifestString;\n\n        try {\n          manifestString = xmlSerializer.serializeToString(manifest.getManifestXML());\n        } catch (err) {\n          reject(err);\n          return;\n        }\n\n        saveFile(localPath, manifest.getManifestName(), manifestString, function (err) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve();\n          }\n        });\n      }\n    });\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {object} representations representations to be saved\n * @param {string} downloadFolder - folder where all fragments are downloaded\n * @returns {Promise} promise\n */\n\n\nManifestController.prototype.saveManifestWithChosenRepresentations = function (manifestId, representations, downloadFolder) {\n  var localPath = downloadFolder;\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    var manifest = self.getManifestById(manifestId);\n\n    if (!manifest) {\n      reject(translation.getError(translation.e.manifests.NOT_FOUND, manifestId));\n      return;\n    }\n\n    var manifestString;\n\n    try {\n      manifestString = parseManifestWithChoosenRepresentations(manifest, representations);\n    } catch (err) {\n      reject(err);\n      return;\n    }\n\n    saveFile(localPath, manifest.getManifestName(), manifestString, function (err) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve();\n      }\n    });\n  });\n};\n\nmodule.exports = ManifestController;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvY29udHJvbGxlcnMvbWFuaWZlc3QtY29udHJvbGxlci5qcz9jZDIzIl0sIm5hbWVzIjpbIlhNTFNlcmlhbGl6ZXIiLCJyZXF1aXJlIiwiYXBwU2V0dGluZ3MiLCJwYXJzZU1hbmlmZXN0V2l0aENob29zZW5SZXByZXNlbnRhdGlvbnMiLCJkb3dubG9hZEZpbGVVdGlsIiwic2F2ZUZpbGUiLCJ0cmFuc2xhdGlvbiIsIk1hbmlmZXN0Q29udHJvbGxlciIsIl9tYW5pZmVzdHMiLCJwcm90b3R5cGUiLCJjYWNoZU1hbmlmZXN0IiwibWFuaWZlc3QiLCJpZCIsImdldE1hbmlmZXN0cyIsIm1hbmlmZXN0SWRzIiwic2VsZWN0ZWRNYW5pZmVzdHMiLCJTdHJpbmciLCJpIiwiaiIsImxlbmd0aCIsInB1c2giLCJnZXRNYW5pZmVzdEJ5SWQiLCJtYW5pZmVzdElkIiwiZ2V0TWFuaWZlc3RzSW5mbyIsIm1hbmlmZXN0cyIsImdldEpzb25JbmZvIiwiZ2V0T3JpZ2luYWxNYW5pZmVzdExvY2FsUGF0aCIsImdldFNldHRpbmdzIiwic2V0dGluZ3NGb2xkZXIiLCJnZXRNYW5pZmVzdEluZm9CeUlkIiwicmVtb3ZlRnJvbUNhY2hlIiwicmVtb3ZlRnJvbUNhY2hlQWxsIiwic2F2ZU9yaWdpbmFsTWFuaWZlc3RPbmNlT25seSIsImxvY2FsUGF0aCIsInNlbGYiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImdldEVycm9yIiwiZSIsIk5PVF9GT1VORCIsImNoZWNrRm9yTG9jYWxGaWxlIiwiZ2V0TWFuaWZlc3ROYW1lIiwiZXhpc3RzIiwieG1sU2VyaWFsaXplciIsIm1hbmlmZXN0U3RyaW5nIiwic2VyaWFsaXplVG9TdHJpbmciLCJnZXRNYW5pZmVzdFhNTCIsImVyciIsInNhdmVNYW5pZmVzdFdpdGhDaG9zZW5SZXByZXNlbnRhdGlvbnMiLCJyZXByZXNlbnRhdGlvbnMiLCJkb3dubG9hZEZvbGRlciIsIm1vZHVsZSIsImV4cG9ydHMi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QWlDQTs7Ozs7Ozs7O0FBT0E3QixrQkFBa0IsQ0FBQ0UsU0FBbkIsQ0FBNkJ3QyxxQ0FBN0IsR0FBcUUsVUFBVTNCLFVBQVYsRUFBc0I0QixlQUF0QixFQUF1Q0MsY0FBdkMsRUFBdUQ7QUFDMUgsTUFBTWxCLFNBQVMsR0FBR2tCLGNBQWxCO0FBQ0EsTUFBTWpCLElBQUksR0FBRyxJQUFiO0FBQ0EsU0FBTyxJQUFJQyxPQUFKLENBQVksVUFBVUMsT0FBVixFQUFtQkMsTUFBbkIsRUFBMkI7QUFDNUMsUUFBTTFCLFFBQVEsR0FBR3VCLElBQUksQ0FBQ2IsZUFBTCxDQUFxQkMsVUFBckIsQ0FBakI7O0FBQ0EsUUFBSSxDQUFDWCxRQUFMLEVBQWU7QUFDYjBCLFlBQU0sQ0FBQy9CLFdBQVcsQ0FBQ2dDLFFBQVosQ0FBcUJoQyxXQUFXLENBQUNpQyxDQUFaLENBQWNmLFNBQWQsQ0FBd0JnQixTQUE3QyxFQUF3RGxCLFVBQXhELENBQUQsQ0FBTjtBQUNBO0FBQ0Q7O0FBQ0QsUUFBSXVCLGNBQUo7O0FBQ0EsUUFBSTtBQUNGQSxvQkFBYyxHQUFHMUMsdUNBQXVDLENBQUNRLFFBQUQsRUFBV3VDLGVBQVgsQ0FBeEQ7QUFDRCxLQUZELENBRUUsT0FBT0YsR0FBUCxFQUFZO0FBQ1pYLFlBQU0sQ0FBQ1csR0FBRCxDQUFOO0FBQ0E7QUFDRDs7QUFDRDNDLFlBQVEsQ0FBQzRCLFNBQUQsRUFBWXRCLFFBQVEsQ0FBQytCLGVBQVQsRUFBWixFQUF3Q0csY0FBeEMsRUFBd0QsVUFBVUcsR0FBVixFQUFlO0FBQzdFLFVBQUlBLEdBQUosRUFBUztBQUNQWCxjQUFNLENBQUNXLEdBQUQsQ0FBTjtBQUNELE9BRkQsTUFFTztBQUNMWixlQUFPO0FBQ1I7QUFDRixLQU5PLENBQVI7QUFPRCxHQXBCTSxDQUFQO0FBcUJELENBeEJEOztBQTBCQWdCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjlDLGtCQUFqQiIsImZpbGUiOiI5Ni5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBYTUxTZXJpYWxpemVyID0gcmVxdWlyZSgneG1sZG9tJykuWE1MU2VyaWFsaXplcjtcbmNvbnN0IGFwcFNldHRpbmdzID0gcmVxdWlyZShcIi4uL2FwcC1zZXR0aW5nc1wiKTtcbmNvbnN0IHBhcnNlTWFuaWZlc3RXaXRoQ2hvb3NlblJlcHJlc2VudGF0aW9ucyA9IHJlcXVpcmUoXCIuLi91dGlsL3BhcnNlLW1hbmlmZXN0LXdpdGgtY2hvb3Nlbi1yZXByZXNlbnRhdGlvbnNcIik7XG5jb25zdCBkb3dubG9hZEZpbGVVdGlsID0gcmVxdWlyZShcIi4uL2Rvd25sb2Fkcy9kb3dubG9hZC1maWxlLXV0aWxcIik7XG5jb25zdCBzYXZlRmlsZSA9IHJlcXVpcmUoXCIuLi91dGlsL3NhdmUtZmlsZVwiKTtcbmNvbnN0IHRyYW5zbGF0aW9uID0gcmVxdWlyZSgnLi4vdHJhbnNsYXRpb24vaW5kZXgnKTtcblxuLyoqXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIE1hbmlmZXN0Q29udHJvbGxlciAoKSB7XG4gIHRoaXMuX21hbmlmZXN0cyA9IHt9O1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gbWFuaWZlc3QgbWFuaWZlc3Qgb2JqZWN0XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuTWFuaWZlc3RDb250cm9sbGVyLnByb3RvdHlwZS5jYWNoZU1hbmlmZXN0ID0gZnVuY3Rpb24gKG1hbmlmZXN0KSB7XG4gIHRoaXMuX21hbmlmZXN0c1ttYW5pZmVzdC5pZF0gPSBtYW5pZmVzdDtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8bnVtYmVyfHN0cmluZ30gW21hbmlmZXN0SWRzXSBtYW5pZmVzdHMgaWRlbnRpZmllcnNcbiAqIEByZXR1cm5zIHsqfSBtYW5pZmVzdHNcbiAqL1xuTWFuaWZlc3RDb250cm9sbGVyLnByb3RvdHlwZS5nZXRNYW5pZmVzdHMgPSBmdW5jdGlvbiAobWFuaWZlc3RJZHMpIHtcbiAgbGV0IHNlbGVjdGVkTWFuaWZlc3RzO1xuICBpZiAodHlwZW9mIG1hbmlmZXN0SWRzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgc2VsZWN0ZWRNYW5pZmVzdHMgPSB0aGlzLl9tYW5pZmVzdHM7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1hbmlmZXN0SWRzID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBtYW5pZmVzdElkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgIHNlbGVjdGVkTWFuaWZlc3RzID0gW3RoaXMuX21hbmlmZXN0c1tTdHJpbmcobWFuaWZlc3RJZHMpXV07XG4gIH0gZWxzZSB7XG4gICAgc2VsZWN0ZWRNYW5pZmVzdHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IG1hbmlmZXN0SWRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX21hbmlmZXN0c1ttYW5pZmVzdElkc1tpXV0pIHtcbiAgICAgICAgc2VsZWN0ZWRNYW5pZmVzdHMucHVzaCh0aGlzLl9tYW5pZmVzdHNbbWFuaWZlc3RJZHNbaV1dKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNlbGVjdGVkTWFuaWZlc3RzO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7Kn0gbWFuaWZlc3RcbiAqL1xuTWFuaWZlc3RDb250cm9sbGVyLnByb3RvdHlwZS5nZXRNYW5pZmVzdEJ5SWQgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCkge1xuICBpZiAodHlwZW9mIG1hbmlmZXN0SWQgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIG1hbmlmZXN0SWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFuaWZlc3RzW1N0cmluZyhtYW5pZmVzdElkKV07XG4gIH1cbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8bnVtYmVyfHN0cmluZ30gW21hbmlmZXN0SWRzXSBtYW5pZmVzdHMgaWRlbnRpZmllcnNcbiAqIEByZXR1cm5zIHtBcnJheX0gbWFuaWZlc3RzIGluZm9tcmF0aW9uc1xuICovXG5NYW5pZmVzdENvbnRyb2xsZXIucHJvdG90eXBlLmdldE1hbmlmZXN0c0luZm8gPSBmdW5jdGlvbiAobWFuaWZlc3RJZHMpIHtcbiAgbGV0IG1hbmlmZXN0cyA9IFtdO1xuICBjb25zdCBzZWxlY3RlZE1hbmlmZXN0cyA9IHRoaXMuZ2V0TWFuaWZlc3RzKG1hbmlmZXN0SWRzKTtcbiAgZm9yIChsZXQgaSA9IDAsIGogPSBzZWxlY3RlZE1hbmlmZXN0cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBtYW5pZmVzdHMucHVzaChzZWxlY3RlZE1hbmlmZXN0c1tpXS5nZXRKc29uSW5mbygpKTtcbiAgfVxuICByZXR1cm4gbWFuaWZlc3RzO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBsb2NhbCBwYXRoIGZvciBtYW5pZmVzdCBmaWxlc1xuICovXG5NYW5pZmVzdENvbnRyb2xsZXIucHJvdG90eXBlLmdldE9yaWdpbmFsTWFuaWZlc3RMb2NhbFBhdGggPSBmdW5jdGlvbiAobWFuaWZlc3RJZCkge1xuICByZXR1cm4gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5zZXR0aW5nc0ZvbGRlciArIG1hbmlmZXN0SWQgKyBcIi9cIjtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHJldHVybnMgeyp9IG1hbmlmZXN0IGluZm9cbiAqL1xuTWFuaWZlc3RDb250cm9sbGVyLnByb3RvdHlwZS5nZXRNYW5pZmVzdEluZm9CeUlkID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgY29uc3QgbWFuaWZlc3QgPSB0aGlzLmdldE1hbmlmZXN0QnlJZChtYW5pZmVzdElkKTtcbiAgaWYgKG1hbmlmZXN0KSB7XG4gICAgcmV0dXJuIG1hbmlmZXN0LmdldEpzb25JbmZvKCk7XG4gIH1cbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8bnVtYmVyfHN0cmluZ30gW21hbmlmZXN0SWRzXSBtYW5pZmVzdHMgaWRlbnRpZmllcnNcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5NYW5pZmVzdENvbnRyb2xsZXIucHJvdG90eXBlLnJlbW92ZUZyb21DYWNoZSA9IGZ1bmN0aW9uIChtYW5pZmVzdElkcykge1xuICBpZiAodHlwZW9mIG1hbmlmZXN0SWRzID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBtYW5pZmVzdElkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgIG1hbmlmZXN0SWRzID0gW1N0cmluZyhtYW5pZmVzdElkcyldO1xuICB9XG5cbiAgbWFuaWZlc3RJZHMgPSBtYW5pZmVzdElkcyB8fCBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGogPSBtYW5pZmVzdElkcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBkZWxldGUodGhpcy5fbWFuaWZlc3RzW21hbmlmZXN0SWRzW2ldXSk7XG4gIH1cbn07XG5cbk1hbmlmZXN0Q29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlRnJvbUNhY2hlQWxsID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9tYW5pZmVzdHMgPSBbXTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHJldHVybnMge1Byb21pc2V9IHByb21pc2VcbiAqL1xuTWFuaWZlc3RDb250cm9sbGVyLnByb3RvdHlwZS5zYXZlT3JpZ2luYWxNYW5pZmVzdE9uY2VPbmx5ID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQpIHtcbiAgY29uc3QgbG9jYWxQYXRoID0gdGhpcy5nZXRPcmlnaW5hbE1hbmlmZXN0TG9jYWxQYXRoKG1hbmlmZXN0SWQpO1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBtYW5pZmVzdCA9IHNlbGYuZ2V0TWFuaWZlc3RCeUlkKG1hbmlmZXN0SWQpO1xuICAgIGlmICghbWFuaWZlc3QpIHtcbiAgICAgIHJlamVjdCh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5OT1RfRk9VTkQsIG1hbmlmZXN0SWQpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZG93bmxvYWRGaWxlVXRpbC5jaGVja0ZvckxvY2FsRmlsZSgobG9jYWxQYXRoICsgbWFuaWZlc3QuZ2V0TWFuaWZlc3ROYW1lKCkpLCBmdW5jdGlvbiAoZXhpc3RzKSB7XG4gICAgICBpZiAoZXhpc3RzKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHhtbFNlcmlhbGl6ZXIgPSBuZXcgWE1MU2VyaWFsaXplcigpO1xuICAgICAgICBsZXQgbWFuaWZlc3RTdHJpbmc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWFuaWZlc3RTdHJpbmcgPSB4bWxTZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKG1hbmlmZXN0LmdldE1hbmlmZXN0WE1MKCkpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2F2ZUZpbGUobG9jYWxQYXRoLCBtYW5pZmVzdC5nZXRNYW5pZmVzdE5hbWUoKSwgbWFuaWZlc3RTdHJpbmcsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge29iamVjdH0gcmVwcmVzZW50YXRpb25zIHJlcHJlc2VudGF0aW9ucyB0byBiZSBzYXZlZFxuICogQHBhcmFtIHtzdHJpbmd9IGRvd25sb2FkRm9sZGVyIC0gZm9sZGVyIHdoZXJlIGFsbCBmcmFnbWVudHMgYXJlIGRvd25sb2FkZWRcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKi9cbk1hbmlmZXN0Q29udHJvbGxlci5wcm90b3R5cGUuc2F2ZU1hbmlmZXN0V2l0aENob3NlblJlcHJlc2VudGF0aW9ucyA9IGZ1bmN0aW9uIChtYW5pZmVzdElkLCByZXByZXNlbnRhdGlvbnMsIGRvd25sb2FkRm9sZGVyKSB7XG4gIGNvbnN0IGxvY2FsUGF0aCA9IGRvd25sb2FkRm9sZGVyO1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBtYW5pZmVzdCA9IHNlbGYuZ2V0TWFuaWZlc3RCeUlkKG1hbmlmZXN0SWQpO1xuICAgIGlmICghbWFuaWZlc3QpIHtcbiAgICAgIHJlamVjdCh0cmFuc2xhdGlvbi5nZXRFcnJvcih0cmFuc2xhdGlvbi5lLm1hbmlmZXN0cy5OT1RfRk9VTkQsIG1hbmlmZXN0SWQpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG1hbmlmZXN0U3RyaW5nO1xuICAgIHRyeSB7XG4gICAgICBtYW5pZmVzdFN0cmluZyA9IHBhcnNlTWFuaWZlc3RXaXRoQ2hvb3NlblJlcHJlc2VudGF0aW9ucyhtYW5pZmVzdCwgcmVwcmVzZW50YXRpb25zKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlamVjdChlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzYXZlRmlsZShsb2NhbFBhdGgsIG1hbmlmZXN0LmdldE1hbmlmZXN0TmFtZSgpLCBtYW5pZmVzdFN0cmluZywgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hbmlmZXN0Q29udHJvbGxlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///96\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar constants = __webpack_require__(19);\n\nvar Manifest = __webpack_require__(15).Manifest;\n\nvar XMLSerializer = __webpack_require__(10).XMLSerializer;\n\nfunction getMimeType(value) {\n  if (value.indexOf("video") !== -1) {\n    return "video";\n  } else if (value.indexOf("audio") !== -1) {\n    return "audio";\n  } else {\n    return "text";\n  }\n}\n\nfunction parseManifestWithChoosenRepresentations(manifest, representations) {\n  var manifestId = manifest.id;\n  var xmlSerializer = new XMLSerializer();\n  var manifestUrl = manifest.getManifestUrl();\n  var manifestString = xmlSerializer.serializeToString(manifest.getManifestXML());\n  manifest = new Manifest(manifestId);\n  manifest.loadFromStr(manifestString, manifestUrl);\n  var video = representations.video;\n  var audio = representations.audio;\n  var text = representations.text;\n  var chosenRepresentations = {};\n  chosenRepresentations["video"] = {};\n\n  for (var i = 0, j = video.length; i < j; i++) {\n    chosenRepresentations["video"][video[i]] = true;\n  }\n\n  chosenRepresentations["audio"] = {};\n\n  for (var _i = 0, _j = audio.length; _i < _j; _i++) {\n    chosenRepresentations["audio"][audio[_i]] = true;\n  }\n\n  chosenRepresentations["text"] = {};\n\n  for (var _i2 = 0, _j2 = text.length; _i2 < _j2; _i2++) {\n    chosenRepresentations["text"][text[_i2]] = true;\n  }\n\n  function markNodeForDownload(repr) {\n    for (var _i3 = 0, _j3 = repr.length; _i3 < _j3; _i3++) {\n      for (var k = 0, l = repr[_i3].representationColl.length; k < l; k++) {\n        var id = repr[_i3].representationColl[k].attributeList.id;\n        var mimeType = getMimeType(repr[_i3].representationColl[k].attributeList.mimeType);\n\n        if (chosenRepresentations[mimeType][id]) {\n          repr[_i3].representationColl[k].markNodeForDownload(true);\n        }\n      }\n    }\n  } // fix the baseURL by removing http and https the same is done when saving a file\n  // see api/util/downloads.js -> getDownloadLinks\n\n\n  function fixBaseURL(repr) {\n    for (var _i4 = 0, _j4 = repr.length; _i4 < _j4; _i4++) {\n      var baseURL = repr[_i4].currentNode.getElementsByTagName("BaseURL")[0];\n\n      if (baseURL && baseURL.textContent.match(constants.regexpProtocolRemove)) {\n        baseURL.textContent = baseURL.textContent.replace(constants.regexpProtocolRemove, "");\n      }\n    }\n  }\n\n  markNodeForDownload(manifest.getVideoRepresentations());\n  markNodeForDownload(manifest.getAudioRepresentations());\n  markNodeForDownload(manifest.getTextRepresentations());\n  fixBaseURL(manifest.getVideoRepresentations());\n  fixBaseURL(manifest.getAudioRepresentations());\n  fixBaseURL(manifest.getTextRepresentations());\n  manifest.removeNode();\n  return xmlSerializer.serializeToString(manifest.getManifestXML());\n}\n\nmodule.exports = parseManifestWithChoosenRepresentations;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9wYXJzZS1tYW5pZmVzdC13aXRoLWNob29zZW4tcmVwcmVzZW50YXRpb25zLmpzPzg1OGIiXSwibmFtZXMiOlsiY29uc3RhbnRzIiwicmVxdWlyZSIsIk1hbmlmZXN0IiwiWE1MU2VyaWFsaXplciIsImdldE1pbWVUeXBlIiwidmFsdWUiLCJpbmRleE9mIiwicGFyc2VNYW5pZmVzdFdpdGhDaG9vc2VuUmVwcmVzZW50YXRpb25zIiwibWFuaWZlc3QiLCJyZXByZXNlbnRhdGlvbnMiLCJtYW5pZmVzdElkIiwiaWQiLCJ4bWxTZXJpYWxpemVyIiwibWFuaWZlc3RVcmwiLCJnZXRNYW5pZmVzdFVybCIsIm1hbmlmZXN0U3RyaW5nIiwic2VyaWFsaXplVG9TdHJpbmciLCJnZXRNYW5pZmVzdFhNTCIsImxvYWRGcm9tU3RyIiwidmlkZW8iLCJhdWRpbyIsInRleHQiLCJjaG9zZW5SZXByZXNlbnRhdGlvbnMiLCJpIiwiaiIsImxlbmd0aCIsIm1hcmtOb2RlRm9yRG93bmxvYWQiLCJyZXByIiwiayIsImwiLCJyZXByZXNlbnRhdGlvbkNvbGwiLCJhdHRyaWJ1dGVMaXN0IiwibWltZVR5cGUiLCJmaXhCYXNlVVJMIiwiYmFzZVVSTCIsImN1cnJlbnROb2RlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0ZXh0Q29udGVudCIsIm1hdGNoIiwicmVnZXhwUHJvdG9jb2xSZW1vdmUiLCJyZXBsYWNlIiwiZ2V0VmlkZW9SZXByZXNlbnRhdGlvbnMiLCJnZXRBdWRpb1JlcHJlc2VudGF0aW9ucyIsImdldFRleHRSZXByZXNlbnRhdGlvbnMiLCJyZW1vdmVOb2RlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsU0FBUyxHQUFHQyxtQkFBTyxDQUFDLEVBQUQsQ0FBekI7O0FBRUEsSUFBTUMsUUFBUSxHQUFHRCxtQkFBTyxDQUFDLEVBQUQsQ0FBUCxDQUF1Q0MsUUFBeEQ7O0FBRUEsSUFBTUMs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QUFuQjtBQUNBaEIscUJBQW1CLENBQUNsQixRQUFRLENBQUNtQyxzQkFBVCxFQUFELENBQW5CO0FBRUFWLFlBQVUsQ0FBQ3pCLFFBQVEsQ0FBQ2lDLHVCQUFULEVBQUQsQ0FBVjtBQUNBUixZQUFVLENBQUN6QixRQUFRLENBQUNrQyx1QkFBVCxFQUFELENBQVY7QUFDQVQsWUFBVSxDQUFDekIsUUFBUSxDQUFDbUMsc0JBQVQsRUFBRCxDQUFWO0FBRUFuQyxVQUFRLENBQUNvQyxVQUFUO0FBRUEsU0FBT2hDLGFBQWEsQ0FBQ0ksaUJBQWQsQ0FBZ0NSLFFBQVEsQ0FBQ1MsY0FBVCxFQUFoQyxDQUFQO0FBQ0Q7O0FBRUQ0QixNQUFNLENBQUNDLE9BQVAsR0FBaUJ2Qyx1Q0FBakIiLCJmaWxlIjoiOTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IGNvbnN0YW50cyA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5cbmNvbnN0IE1hbmlmZXN0ID0gcmVxdWlyZShcIi4uL21hbmlmZXN0L2xvYWRlci9tYW5pZmVzdFwiKS5NYW5pZmVzdDtcblxuY29uc3QgWE1MU2VyaWFsaXplciA9IHJlcXVpcmUoXCJ4bWxkb21cIikuWE1MU2VyaWFsaXplcjtcblxuZnVuY3Rpb24gZ2V0TWltZVR5cGUgKHZhbHVlKSB7XG4gIGlmICh2YWx1ZS5pbmRleE9mKFwidmlkZW9cIikgIT09IC0xKSB7XG4gICAgcmV0dXJuIFwidmlkZW9cIjtcbiAgfSBlbHNlIGlmICh2YWx1ZS5pbmRleE9mKFwiYXVkaW9cIikgIT09IC0xKSB7XG4gICAgcmV0dXJuIFwiYXVkaW9cIjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gXCJ0ZXh0XCI7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VNYW5pZmVzdFdpdGhDaG9vc2VuUmVwcmVzZW50YXRpb25zIChtYW5pZmVzdCwgcmVwcmVzZW50YXRpb25zKSB7XG4gIGNvbnN0IG1hbmlmZXN0SWQgPSBtYW5pZmVzdC5pZDtcbiAgY29uc3QgeG1sU2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG4gIGNvbnN0IG1hbmlmZXN0VXJsID0gbWFuaWZlc3QuZ2V0TWFuaWZlc3RVcmwoKTtcbiAgY29uc3QgbWFuaWZlc3RTdHJpbmcgPSB4bWxTZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKG1hbmlmZXN0LmdldE1hbmlmZXN0WE1MKCkpO1xuXG4gIG1hbmlmZXN0ID0gbmV3IE1hbmlmZXN0KG1hbmlmZXN0SWQpO1xuICBtYW5pZmVzdC5sb2FkRnJvbVN0cihtYW5pZmVzdFN0cmluZywgbWFuaWZlc3RVcmwpO1xuXG4gIGNvbnN0IHZpZGVvID0gcmVwcmVzZW50YXRpb25zLnZpZGVvO1xuICBjb25zdCBhdWRpbyA9IHJlcHJlc2VudGF0aW9ucy5hdWRpbztcbiAgY29uc3QgdGV4dCA9IHJlcHJlc2VudGF0aW9ucy50ZXh0O1xuXG4gIGxldCBjaG9zZW5SZXByZXNlbnRhdGlvbnMgPSB7fTtcbiAgY2hvc2VuUmVwcmVzZW50YXRpb25zW1widmlkZW9cIl0gPSB7fTtcbiAgZm9yIChsZXQgaSA9IDAsIGogPSB2aWRlby5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBjaG9zZW5SZXByZXNlbnRhdGlvbnNbXCJ2aWRlb1wiXVt2aWRlb1tpXV0gPSB0cnVlO1xuICB9XG4gIGNob3NlblJlcHJlc2VudGF0aW9uc1tcImF1ZGlvXCJdID0ge307XG4gIGZvciAobGV0IGkgPSAwLCBqID0gYXVkaW8ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgY2hvc2VuUmVwcmVzZW50YXRpb25zW1wiYXVkaW9cIl1bYXVkaW9baV1dID0gdHJ1ZTtcbiAgfVxuICBjaG9zZW5SZXByZXNlbnRhdGlvbnNbXCJ0ZXh0XCJdID0ge307XG4gIGZvciAobGV0IGkgPSAwLCBqID0gdGV4dC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBjaG9zZW5SZXByZXNlbnRhdGlvbnNbXCJ0ZXh0XCJdW3RleHRbaV1dID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hcmtOb2RlRm9yRG93bmxvYWQgKHJlcHIpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IHJlcHIubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBrID0gMCwgbCA9IHJlcHJbaV0ucmVwcmVzZW50YXRpb25Db2xsLmxlbmd0aDsgayA8IGw7IGsrKykge1xuICAgICAgICBsZXQgaWQgPSByZXByW2ldLnJlcHJlc2VudGF0aW9uQ29sbFtrXS5hdHRyaWJ1dGVMaXN0LmlkO1xuICAgICAgICBsZXQgbWltZVR5cGUgPSBnZXRNaW1lVHlwZShyZXByW2ldLnJlcHJlc2VudGF0aW9uQ29sbFtrXS5hdHRyaWJ1dGVMaXN0Lm1pbWVUeXBlKTtcbiAgICAgICAgaWYgKGNob3NlblJlcHJlc2VudGF0aW9uc1ttaW1lVHlwZV1baWRdKSB7XG4gICAgICAgICAgcmVwcltpXS5yZXByZXNlbnRhdGlvbkNvbGxba10ubWFya05vZGVGb3JEb3dubG9hZCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIGZpeCB0aGUgYmFzZVVSTCBieSByZW1vdmluZyBodHRwIGFuZCBodHRwcyB0aGUgc2FtZSBpcyBkb25lIHdoZW4gc2F2aW5nIGEgZmlsZVxuICAvLyBzZWUgYXBpL3V0aWwvZG93bmxvYWRzLmpzIC0+IGdldERvd25sb2FkTGlua3NcbiAgZnVuY3Rpb24gZml4QmFzZVVSTCAocmVwcikge1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gcmVwci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGxldCBiYXNlVVJMID0gcmVwcltpXS5jdXJyZW50Tm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIkJhc2VVUkxcIilbMF07XG4gICAgICBpZiAoYmFzZVVSTCAmJiBiYXNlVVJMLnRleHRDb250ZW50Lm1hdGNoKGNvbnN0YW50cy5yZWdleHBQcm90b2NvbFJlbW92ZSkpIHtcbiAgICAgICAgYmFzZVVSTC50ZXh0Q29udGVudCA9IGJhc2VVUkwudGV4dENvbnRlbnQucmVwbGFjZShjb25zdGFudHMucmVnZXhwUHJvdG9jb2xSZW1vdmUsIFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG1hcmtOb2RlRm9yRG93bmxvYWQobWFuaWZlc3QuZ2V0VmlkZW9SZXByZXNlbnRhdGlvbnMoKSk7XG4gIG1hcmtOb2RlRm9yRG93bmxvYWQobWFuaWZlc3QuZ2V0QXVkaW9SZXByZXNlbnRhdGlvbnMoKSk7XG4gIG1hcmtOb2RlRm9yRG93bmxvYWQobWFuaWZlc3QuZ2V0VGV4dFJlcHJlc2VudGF0aW9ucygpKTtcblxuICBmaXhCYXNlVVJMKG1hbmlmZXN0LmdldFZpZGVvUmVwcmVzZW50YXRpb25zKCkpO1xuICBmaXhCYXNlVVJMKG1hbmlmZXN0LmdldEF1ZGlvUmVwcmVzZW50YXRpb25zKCkpO1xuICBmaXhCYXNlVVJMKG1hbmlmZXN0LmdldFRleHRSZXByZXNlbnRhdGlvbnMoKSk7XG5cbiAgbWFuaWZlc3QucmVtb3ZlTm9kZSgpO1xuXG4gIHJldHVybiB4bWxTZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKG1hbmlmZXN0LmdldE1hbmlmZXN0WE1MKCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlTWFuaWZlc3RXaXRoQ2hvb3NlblJlcHJlc2VudGF0aW9ucztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///97\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar mkdirp = __webpack_require__(13);\n\nvar fs = __webpack_require__(3);\n\nvar path = __webpack_require__(4);\n\nfunction saveFile(filePath, fileName, value, callback) {\n  mkdirp(filePath, function (err) {\n    if (err) {\n      callback(err);\n    } else {\n      var fileUrl = path.resolve(filePath + "/" + fileName);\n      fs.writeFile(fileUrl, value, "utf-8", callback);\n    }\n  });\n}\n\nmodule.exports = saveFile;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9zYXZlLWZpbGUuanM/Yzk1ZiJdLCJuYW1lcyI6WyJta2RpcnAiLCJyZXF1aXJlIiwiZnMiLCJwYXRoIiwic2F2ZUZpbGUiLCJmaWxlUGF0aCIsImZpbGVOYW1lIiwidmFsdWUiLCJjYWxsYmFjayIsImVyciIsImZpbGVVcmwiLCJyZXNvbHZlIiwid3JpdGVGaWxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsTUFBTSxHQUFHQyxtQkFBTyxDQUFDLEVBQUQsQ0FBdEI7O0FBQ0EsSUFBTUMsRUFBRSxHQUFHRCxtQkFBTyxDQUFDLENBQUQsQ0FBbEI7O0FBQ0EsSUFBTUUsSUFBSSxHQUFHRixtQkFBTyxDQUFDLENBQUQsQ0FBcEI7O0FBRUEsU0FBU0csUUFBVCxDQUFtQkMsUUFBbkIsRUFBNkJDLFFBQTdCLEVBQXVDQyxLQUF2QyxFQUE4Q0MsUUFBOUMsRUFBd0Q7QUFDdERSLFFBQU0sQ0FBQ0ssUUFBRCxFQUFXLFVBQVVJLEdBQVYsRUFBZTtBQUM5QixRQUFJQSxHQUFKLEVBQVM7QUFDUEQsY0FBUSxDQUFDQyxHQUFELENBQVI7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFNQyxPQUFPLEdBQUdQLElBQUksQ0FBQ1EsT0FBTCxDQUFhTixRQUFRLEdBQUcsR0FBWCxHQUFpQkMsUUFBOUIsQ0FBaEI7QUFDQUosUUFBRSxDQUFDVSxTQUFILENBQWFGLE9BQWIsRUFBc0JILEtBQXRCLEVBQTZCLE9BQTdCLEVBQXNDQyxRQUF0QztBQUNEO0FBQ0YsR0FQSyxDQUFOO0FBUUQ7O0FBRURLLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlYsUUFBakIiLCJmaWxlIjoiOTguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IG1rZGlycCA9IHJlcXVpcmUoXCJta2RpcnBcIik7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcblxuZnVuY3Rpb24gc2F2ZUZpbGUgKGZpbGVQYXRoLCBmaWxlTmFtZSwgdmFsdWUsIGNhbGxiYWNrKSB7XG4gIG1rZGlycChmaWxlUGF0aCwgZnVuY3Rpb24gKGVycikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZpbGVVcmwgPSBwYXRoLnJlc29sdmUoZmlsZVBhdGggKyBcIi9cIiArIGZpbGVOYW1lKTtcbiAgICAgIGZzLndyaXRlRmlsZShmaWxlVXJsLCB2YWx1ZSwgXCJ1dGYtOFwiLCBjYWxsYmFjayk7XG4gICAgfVxuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzYXZlRmlsZTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///98\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar path = __webpack_require__(4);\n\nvar getSize = __webpack_require__(100);\n\nvar rmdir = __webpack_require__(28);\n\nvar appSettings = __webpack_require__(1);\n\nvar ReadItem = __webpack_require__(35);\n\nvar dirList = __webpack_require__(101);\n\nvar Manifest = __webpack_require__(15).Manifest;\n\nvar STATUSES = __webpack_require__(8);\n/**\n *\n * @param {ManifestController} manifestController - reference to existing manifest controller\n * @constructor\n */\n\n\nfunction OfflineController(manifestController) {\n  this._manifestController = manifestController;\n}\n/**\n *\n * @param {Function} callback - function to be called when list is ready\n * @returns {void}\n */\n\n\nOfflineController.prototype.getManifestsList = function (callback) {\n  dirList(appSettings.getSettings().settingsFolder, true, false).then(function (settingsFolderList) {\n    var manifestList = [];\n\n    for (var i = 0, j = settingsFolderList.length; i < j; i++) {\n      manifestList.push(settingsFolderList[i]);\n    }\n\n    callback(null, manifestList);\n  }, function (err) {\n    callback(err);\n  });\n};\n/**\n *\n * @param {Function} callback - function to be called when list with info is ready\n * @param {Boolean} full - if downloaded info should contain all items or only the length\n * @returns {void}\n */\n\n\nOfflineController.prototype.getManifestsListWithInfo = function (callback, full) {\n  var self = this;\n  this.getManifestsList(function (err, list) {\n    if (err) {\n      callback(err);\n    } else {\n      var infoP = [];\n\n      for (var i = 0, j = list.length; i < j; i++) {\n        infoP.push(self.getManifestInfoPromise(list[i], full));\n      }\n\n      Promise.all(infoP).then(function (results) {\n        var newResults = [];\n\n        for (var _i = 0, _j = results.length; _i < _j; _i++) {\n          if (results[_i]) {\n            newResults.push(results[_i]);\n          }\n        }\n\n        callback(null, newResults);\n      }, function (err) {\n        callback(err);\n      });\n    }\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Function} callback - function to be called when info for manifest is ready\n * @param {Boolean} full - if downloaded info should contain all items or only the length\n * @returns {void}\n */\n\n\nOfflineController.prototype.getManifestInfo = function (manifestId, callback, full) {\n  var self = this;\n\n  function addManifestInfoAndContinue(info) {\n    var manifestName = info.manifest.name;\n    var manifestUrl = info.manifest.url;\n    var manifestLocalUrl = path.resolve(appSettings.getSettings().settingsFolder + "/" + manifestId + "/" + manifestName);\n\n    var manifest = self._manifestController.getManifestById(manifestId);\n\n    if (manifest) {\n      info.manifestInfo = manifest.getJsonInfo();\n      callback(null, info);\n    } else {\n      manifest = new Manifest(manifestId);\n      manifest.loadFromLocal(manifestLocalUrl, manifestUrl).then(function () {\n        self._manifestController.cacheManifest(manifest);\n\n        info.manifestInfo = manifest.getJsonInfo();\n        callback(null, info);\n      }, function (err) {\n        if (err && err.code === "ENOENT") {\n          callback();\n        } else {\n          callback(err);\n        }\n      });\n    }\n  }\n\n  Promise.all([new ReadItem(manifestId, appSettings.getSettings().stores.MANIFEST), new ReadItem(manifestId, appSettings.getSettings().stores.DOWNLOADS.DOWNLOADED), new ReadItem(manifestId, appSettings.getSettings().stores.STATUS), new ReadItem(manifestId, appSettings.getSettings().stores.PERSISTENT), new ReadItem(manifestId, appSettings.getSettings().stores.DATA)]).then(function (results) {\n    var info = {};\n    var manifestSettings = results[0] || {};\n    var downloaded = results[1] || [];\n    var status = results[2] || {};\n    var persistent = results[3] || \'\';\n    var data = results[4] || \'\';\n    info.status = status.status || STATUSES.BROKEN;\n    info.details = status.details || undefined;\n\n    if (!self.downloadStorage.keyExists(manifestId) && info.status === STATUSES.STARTED) {\n      info.status = STATUSES.BROKEN;\n    }\n\n    info.manifest = manifestSettings;\n\n    if (info.manifest.files) {\n      info.manifest.totalFiles = info.manifest.files.length;\n\n      if (full === false) {\n        delete info.manifest.files;\n      }\n    }\n\n    info.left = status.left || 0;\n    info.persistent = persistent;\n    info.downloaded = downloaded.length;\n\n    if (full) {\n      info.downloadedFiles = downloaded;\n    }\n\n    info.data = data;\n    addManifestInfoAndContinue(info);\n  }, callback);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Function} callback - function to be called when info for manifest is ready\n * @returns {void}\n */\n\n\nOfflineController.prototype.getManifestFolderInfo = function (manifestId, callback) {\n  Promise.all([new ReadItem(manifestId, appSettings.getSettings().stores.MANIFEST)]).then(function (results) {\n    var info = {};\n    var manifestSettings = results[0] || {};\n    var downloadFolder = manifestSettings.folder;\n\n    if (!downloadFolder) {\n      // try to serve from default download folder\n      downloadFolder = appSettings.getSettings().downloadsFolderPath;\n    }\n\n    var videoFolder = path.join(downloadFolder, manifestId);\n    info.folder = videoFolder; // get size of folder\n\n    getSize(videoFolder, function (err, size) {\n      if (err) {\n        info.size = 0;\n      } else {\n        info.size = size;\n      }\n\n      callback(null, info);\n    });\n  }, callback);\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Boolean} full - if downloaded info should contain all items or only the length\n * @returns {Promise} - promise\n */\n\n\nOfflineController.prototype.getManifestInfoPromise = function (manifestId, full) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    self.getManifestInfo(manifestId, function (err, result) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(result);\n      }\n    }, full);\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Function} callback - callback with resolved info data about manifest - if such exists\n * @returns {void}\n */\n\n\nOfflineController.prototype.getManifestDataFile = function (manifestId, callback) {\n  new ReadItem(manifestId, appSettings.getSettings().stores.MANIFEST).then(function (data) {\n    callback(data);\n  }, function () {\n    callback();\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Function} onSuccess - callback to be invoked when remove has been successfully\n * @param {Function} onFailure - callback to be invoked when remove failed\n * @returns {void}\n */\n\n\nOfflineController.prototype.remove = function (manifestId, onSuccess, onFailure) {\n  var settingsFolder = appSettings.getSettings().settingsFolder + manifestId;\n  this.getManifestDataFile(manifestId, function (info) {\n    if (!info) {\n      // no manifest data found for manifest, the download has not been started => just remove settings\n      rmdir(settingsFolder, function (err) {\n        if (err && err.code !== "ENOENT") {\n          onFailure(err);\n        } else {\n          onSuccess();\n        }\n      });\n    } else {\n      var folder = info.folder;\n\n      if (!folder) {\n        // use default download folder path\n        folder = path.resolve(appSettings.getSettings().downloadsFolderPath);\n      }\n\n      var downloadsFolder = folder + \'/\' + manifestId;\n      rmdir(downloadsFolder, function (err) {\n        if (err && err.code !== "ENOENT") {\n          onFailure(err);\n        } else {\n          rmdir(settingsFolder, function (err) {\n            if (err && err.code !== "ENOENT") {\n              onFailure(err);\n            } else {\n              onSuccess();\n            }\n          });\n        }\n      });\n    }\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @returns {Promise} - promise\n */\n\n\nOfflineController.prototype.removePromise = function (manifestId) {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    self.remove(manifestId, resolve, reject);\n  });\n};\n/**\n *\n * @returns {Promise} - promise\n */\n\n\nOfflineController.prototype.removeAllPromise = function () {\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    var settingsFolder = appSettings.getSettings().settingsFolder;\n    self.getManifestsList(function (err, list) {\n      if (err) {\n        reject(err);\n      } else {\n        var removeP = [];\n\n        for (var i = 0, j = list.length; i < j; i++) {\n          removeP.push(self.removePromise(list[i]));\n        }\n\n        Promise.all(removeP).then(function () {\n          rmdir(settingsFolder, function (err) {\n            if (err && err.code !== "ENOENT") {\n              reject(err);\n            } else {\n              resolve();\n            }\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    });\n  });\n};\n/**\n *\n * @param {string} manifestId - manifest identifier\n * @param {Function} onSuccess - callback to be invoked when restore has been successfully\n * @param {Function} onFailure - callback to be invoked when restore failed\n * @returns {void}\n */\n\n\nOfflineController.prototype.restoreLocalManifest = function (manifestId, onSuccess, onFailure) {\n  var self = this;\n  this.getManifestInfo(manifestId, function (err, info) {\n    var representations = {};\n    representations.video = info.manifest.video;\n    representations.audio = info.manifest.audio;\n    representations.text = info.manifest.text;\n\n    self._manifestController.saveManifestWithChosenRepresentations(manifestId, representations).then(onSuccess, onFailure);\n  });\n};\n/**\n *\n * @param {DownloadsStorageController} storage - downloads storage controller\n * @returns {void}\n */\n\n\nOfflineController.prototype.setDownloadStorage = function (storage) {\n  this.downloadStorage = storage;\n};\n\nmodule.exports = OfflineController;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvY29udHJvbGxlcnMvb2ZmbGluZS1jb250cm9sbGVyLmpzP2U2YmYiXSwibmFtZXMiOlsicGF0aCIsInJlcXVpcmUiLCJnZXRTaXplIiwicm1kaXIiLCJhcHBTZXR0aW5ncyIsIlJlYWRJdGVtIiwiZGlyTGlzdCIsIk1hbmlmZXN0IiwiU1RBVFVTRVMiLCJPZmZsaW5lQ29udHJvbGxlciIsIm1hbmlmZXN0Q29udHJvbGxlciIsIl9tYW5pZmVzdENvbnRyb2xsZXIiLCJwcm90b3R5cGUiLCJnZXRNYW5pZmVzdHNMaXN0IiwiY2FsbGJhY2siLCJnZXRTZXR0aW5ncyIsInNldHRpbmdzRm9sZGVyIiwidGhlbiIsInNldHRpbmdzRm9sZGVyTGlzdCIsIm1hbmlmZXN0TGlzdCIsImkiLCJqIiwibGVuZ3RoIiwicHVzaCIsImVyciIsImdldE1hbmlmZXN0c0xpc3RXaXRoSW5mbyIsImZ1bGwiLCJzZWxmIiwibGlzdCIsImluZm9QIiwiZ2V0TWFuaWZlc3RJbmZvUHJvbWlzZSIsIlByb21pc2UiLCJhbGwiLCJyZXN1bHRzIiwibmV3UmVzdWx0cyIsImdldE1hbmlmZXN0SW5mbyIsIm1hbmlmZXN0SWQiLCJhZGRNYW5pZmVzdEluZm9BbmRDb250aW51ZSIsImluZm8iLCJtYW5pZmVzdE5hbWUiLCJtYW5pZmVzdCIsIm5hbWUiLCJtYW5pZmVzdFVybCIsInVybCIsIm1hbmlmZXN0TG9jYWxVcmwiLCJyZXNvbHZlIiwiZ2V0TWFuaWZlc3RCeUlkIiwibWFuaWZlc3RJbmZvIiwiZ2V0SnNvbkluZm8iLCJsb2FkRnJvbUxvY2FsIiwiY2FjaGVNYW5pZmVzdCIsImNvZGUiLCJzdG9yZXMiLCJNQU5JRkVTVCIsIkRPV05MT0FEUyIsIkRPV05MT0FERUQiLCJTVEFUVVMiLCJQRVJTSVNURU5UIiwiREFUQSIsIm1hbmlmZXN0U2V0dGluZ3MiLCJkb3dubG9hZGVkIiwic3RhdHVzIiwicGVyc2lzdGVudCIsImRhdGEiLCJCUk9LRU4iLCJkZXRhaWxzIiwidW5kZWZpbmVkIiwiZG93bmxvYWRTdG9yYWdlIiwia2V5RXhpc3RzIiwiU1RBUlRFRCIsImZpbGVzIiwidG90YWxGaWxlcyIsImxlZnQiLCJkb3dubG9hZGVkRmlsZXMiLCJnZXRNYW5pZmVzdEZvbGRlckluZm8iLCJkb3dubG9hZEZvbGRlciIsImZvbGRlciIsImRvd25sb2Fkc0ZvbGRlclBhdGgiLCJ2aWRlb0ZvbGRlciIsImpvaW4iLCJzaXplIiwicmVqZWN0IiwicmVzdWx0IiwiZ2V0TWFuaWZlc3REYXRhRmlsZSIsInJlbW92ZSIsIm9uU3VjY2VzcyIsIm9uRmFpbHVyZSIsImRvd25sb2Fkc0ZvbGRlciIsInJlbW92ZVByb21pc2UiLCJyZW1vdmVBbGxQcm9taXNlIiwicmVtb3ZlUCIsInJlc3RvcmVMb2NhbE1hbmlmZXN0IiwicmVwcmVzZW50YXRpb25zIiwidmlkZW8iLCJhdWRpbyIsInRleHQiLCJzYXZlTWFuaWZlc3RXaXRoQ2hvc2VuUmVwcmVzZW50YXRpb25zIiwic2V0RG93bmxvYWRTdG9yYWdlIiwic3RvcmFnZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhOztBQUNiLElBQU1BLElBQUksR0FBR0MsbUJBQU8sQ0FBQyxDQUFELENBQXBCOztBQUNBLElBQU1DLE9BQU8sR0FBR0QsbUJBQU8sQ0FBQyxHQUFELENBQXZCOztBQUNBLElBQU1FLEtBQUssR0FBR0YsbUJBQU8sQ0FBQyxFQUFELENBQXJCOztBQUVBLElBQU1HLFdBQVcsR0FBR0gsbUJBQU8sQ0FBQyxDQUFELENBQTNCOztBQUNBLElBQU1JLFFBQVEsR0FBR0osbUJBQU8sQ0FBQyxFQUFELENBQXhCOztBQUNBLElBQU1LLE9BQU8sR0FBR0wsbUJBQU8sQ0FBQyxHQUFELENBQXZCOztBQUNBLElBQU1NLFFBQVEsR0FBR04sbUJBQU8sQ0FBQyxFQUFELENBQVAsQ0FBdUNNLFFBQXhEOztBQUNBLElBQU1DLFFBQVEsR0FBR1AsbUJBQU8sQ0FBQyxDQUFELENBQXhCO0FBRUE7Ozs7Ozs7QUFLQSxTQUFT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LEVBQWlDLFVBQVVaLEdBQVYsRUFBZWMsSUFBZixFQUFxQjtBQUNwRCxRQUFJc0QsZUFBZSxHQUFHLEVBQXRCO0FBQ0FBLG1CQUFlLENBQUNDLEtBQWhCLEdBQXdCdkQsSUFBSSxDQUFDRSxRQUFMLENBQWNxRCxLQUF0QztBQUNBRCxtQkFBZSxDQUFDRSxLQUFoQixHQUF3QnhELElBQUksQ0FBQ0UsUUFBTCxDQUFjc0QsS0FBdEM7QUFDQUYsbUJBQWUsQ0FBQ0csSUFBaEIsR0FBdUJ6RCxJQUFJLENBQUNFLFFBQUwsQ0FBY3VELElBQXJDOztBQUNBcEUsUUFBSSxDQUFDaEIsbUJBQUwsQ0FBeUJxRixxQ0FBekIsQ0FBK0Q1RCxVQUEvRCxFQUEyRXdELGVBQTNFLEVBQ0szRSxJQURMLENBQ1VvRSxTQURWLEVBQ3FCQyxTQURyQjtBQUVELEdBUEQ7QUFRRCxDQVZEO0FBWUE7Ozs7Ozs7QUFLQTdFLGlCQUFpQixDQUFDRyxTQUFsQixDQUE0QnFGLGtCQUE1QixHQUFpRCxVQUFVQyxPQUFWLEVBQW1CO0FBQ2xFLE9BQUsvQixlQUFMLEdBQXVCK0IsT0FBdkI7QUFDRCxDQUZEOztBQUlBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIzRixpQkFBakIiLCJmaWxlIjoiOTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcbmNvbnN0IGdldFNpemUgPSByZXF1aXJlKFwiZ2V0LWZvbGRlci1zaXplXCIpO1xuY29uc3Qgcm1kaXIgPSByZXF1aXJlKFwiLi4vdXRpbC9yZW1vdmUtZGlyXCIpO1xuXG5jb25zdCBhcHBTZXR0aW5ncyA9IHJlcXVpcmUoXCIuLi9hcHAtc2V0dGluZ3NcIik7XG5jb25zdCBSZWFkSXRlbSA9IHJlcXVpcmUoXCIuLi9kb3dubG9hZHMvcmVhZC1pdGVtXCIpO1xuY29uc3QgZGlyTGlzdCA9IHJlcXVpcmUoXCIuLi91dGlsL2Rpci1saXN0XCIpO1xuY29uc3QgTWFuaWZlc3QgPSByZXF1aXJlKFwiLi4vbWFuaWZlc3QvbG9hZGVyL21hbmlmZXN0XCIpLk1hbmlmZXN0O1xuY29uc3QgU1RBVFVTRVMgPSByZXF1aXJlKFwiLi4vZG93bmxvYWRzL3N0YXR1c2VzXCIpO1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge01hbmlmZXN0Q29udHJvbGxlcn0gbWFuaWZlc3RDb250cm9sbGVyIC0gcmVmZXJlbmNlIHRvIGV4aXN0aW5nIG1hbmlmZXN0IGNvbnRyb2xsZXJcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBPZmZsaW5lQ29udHJvbGxlciAobWFuaWZlc3RDb250cm9sbGVyKSB7XG4gIHRoaXMuX21hbmlmZXN0Q29udHJvbGxlciA9IG1hbmlmZXN0Q29udHJvbGxlcjtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBsaXN0IGlzIHJlYWR5XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuT2ZmbGluZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldE1hbmlmZXN0c0xpc3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgZGlyTGlzdChhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnNldHRpbmdzRm9sZGVyLCB0cnVlLCBmYWxzZSlcbiAgICAudGhlbihmdW5jdGlvbiAoc2V0dGluZ3NGb2xkZXJMaXN0KSB7XG4gICAgbGV0IG1hbmlmZXN0TGlzdCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gc2V0dGluZ3NGb2xkZXJMaXN0Lmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgbWFuaWZlc3RMaXN0LnB1c2goc2V0dGluZ3NGb2xkZXJMaXN0W2ldKTtcbiAgICB9XG4gICAgY2FsbGJhY2sobnVsbCwgbWFuaWZlc3RMaXN0KTtcbiAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgIGNhbGxiYWNrKGVycilcbiAgfSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGxpc3Qgd2l0aCBpbmZvIGlzIHJlYWR5XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGZ1bGwgLSBpZiBkb3dubG9hZGVkIGluZm8gc2hvdWxkIGNvbnRhaW4gYWxsIGl0ZW1zIG9yIG9ubHkgdGhlIGxlbmd0aFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbk9mZmxpbmVDb250cm9sbGVyLnByb3RvdHlwZS5nZXRNYW5pZmVzdHNMaXN0V2l0aEluZm8gPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGZ1bGwpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHRoaXMuZ2V0TWFuaWZlc3RzTGlzdChmdW5jdGlvbiAoZXJyLCBsaXN0KSB7XG4gICAgaWYgKGVycikge1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGluZm9QID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMCwgaiA9IGxpc3QubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgIGluZm9QLnB1c2goc2VsZi5nZXRNYW5pZmVzdEluZm9Qcm9taXNlKGxpc3RbaV0sIGZ1bGwpKVxuICAgICAgfVxuICAgICAgUHJvbWlzZS5hbGwoaW5mb1ApLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgbGV0IG5ld1Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSByZXN1bHRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgIGlmIChyZXN1bHRzW2ldKSB7XG4gICAgICAgICAgICBuZXdSZXN1bHRzLnB1c2gocmVzdWx0c1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIG5ld1Jlc3VsdHMpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBpbmZvIGZvciBtYW5pZmVzdCBpcyByZWFkeVxuICogQHBhcmFtIHtCb29sZWFufSBmdWxsIC0gaWYgZG93bmxvYWRlZCBpbmZvIHNob3VsZCBjb250YWluIGFsbCBpdGVtcyBvciBvbmx5IHRoZSBsZW5ndGhcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5PZmZsaW5lQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0TWFuaWZlc3RJbmZvID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIGNhbGxiYWNrLCBmdWxsKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gIGZ1bmN0aW9uIGFkZE1hbmlmZXN0SW5mb0FuZENvbnRpbnVlIChpbmZvKSB7XG4gICAgY29uc3QgbWFuaWZlc3ROYW1lID0gaW5mby5tYW5pZmVzdC5uYW1lO1xuICAgIGNvbnN0IG1hbmlmZXN0VXJsID0gaW5mby5tYW5pZmVzdC51cmw7XG4gICAgY29uc3QgbWFuaWZlc3RMb2NhbFVybCA9IHBhdGgucmVzb2x2ZShhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnNldHRpbmdzRm9sZGVyICsgXCIvXCIgKyBtYW5pZmVzdElkICsgXCIvXCIgKyBtYW5pZmVzdE5hbWUpO1xuXG4gICAgbGV0IG1hbmlmZXN0ID0gc2VsZi5fbWFuaWZlc3RDb250cm9sbGVyLmdldE1hbmlmZXN0QnlJZChtYW5pZmVzdElkKTtcbiAgICBpZiAobWFuaWZlc3QpIHtcbiAgICAgIGluZm8ubWFuaWZlc3RJbmZvID0gbWFuaWZlc3QuZ2V0SnNvbkluZm8oKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIGluZm8pO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYW5pZmVzdCA9IG5ldyBNYW5pZmVzdChtYW5pZmVzdElkKTtcbiAgICAgIG1hbmlmZXN0LmxvYWRGcm9tTG9jYWwobWFuaWZlc3RMb2NhbFVybCwgbWFuaWZlc3RVcmwpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLl9tYW5pZmVzdENvbnRyb2xsZXIuY2FjaGVNYW5pZmVzdChtYW5pZmVzdCk7XG4gICAgICAgIGluZm8ubWFuaWZlc3RJbmZvID0gbWFuaWZlc3QuZ2V0SnNvbkluZm8oKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgaW5mbyk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgPT09IFwiRU5PRU5UXCIpIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIFByb21pc2UuYWxsKFtcbiAgICBuZXcgUmVhZEl0ZW0obWFuaWZlc3RJZCwgYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5zdG9yZXMuTUFOSUZFU1QpLFxuICAgIG5ldyBSZWFkSXRlbShtYW5pZmVzdElkLCBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnN0b3Jlcy5ET1dOTE9BRFMuRE9XTkxPQURFRCksXG4gICAgbmV3IFJlYWRJdGVtKG1hbmlmZXN0SWQsIGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc3RvcmVzLlNUQVRVUyksXG4gICAgbmV3IFJlYWRJdGVtKG1hbmlmZXN0SWQsIGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuc3RvcmVzLlBFUlNJU1RFTlQpLFxuICAgIG5ldyBSZWFkSXRlbShtYW5pZmVzdElkLCBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnN0b3Jlcy5EQVRBKSxcbiAgXSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuICAgIGxldCBpbmZvID0ge307XG4gICAgY29uc3QgbWFuaWZlc3RTZXR0aW5ncyA9IHJlc3VsdHNbMF0gfHwge307XG5cbiAgICBjb25zdCBkb3dubG9hZGVkID0gcmVzdWx0c1sxXSB8fCBbXTtcbiAgICBjb25zdCBzdGF0dXMgPSByZXN1bHRzWzJdIHx8IHt9O1xuICAgIGNvbnN0IHBlcnNpc3RlbnQgPSByZXN1bHRzWzNdIHx8ICcnO1xuICAgIGNvbnN0IGRhdGEgPSByZXN1bHRzWzRdIHx8ICcnO1xuXG4gICAgaW5mby5zdGF0dXMgPSBzdGF0dXMuc3RhdHVzIHx8IFNUQVRVU0VTLkJST0tFTjtcbiAgICBpbmZvLmRldGFpbHMgPSBzdGF0dXMuZGV0YWlscyB8fCB1bmRlZmluZWQ7XG4gICAgaWYgKCFzZWxmLmRvd25sb2FkU3RvcmFnZS5rZXlFeGlzdHMobWFuaWZlc3RJZCkgJiYgaW5mby5zdGF0dXMgPT09IFNUQVRVU0VTLlNUQVJURUQpIHtcbiAgICAgIGluZm8uc3RhdHVzID0gU1RBVFVTRVMuQlJPS0VOO1xuICAgIH1cbiAgICBpbmZvLm1hbmlmZXN0ID0gbWFuaWZlc3RTZXR0aW5ncztcbiAgICBpZiAoaW5mby5tYW5pZmVzdC5maWxlcykge1xuICAgICAgaW5mby5tYW5pZmVzdC50b3RhbEZpbGVzID0gaW5mby5tYW5pZmVzdC5maWxlcy5sZW5ndGg7XG4gICAgICBpZiAoZnVsbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgZGVsZXRlIGluZm8ubWFuaWZlc3QuZmlsZXM7XG4gICAgICB9XG4gICAgfVxuICAgIGluZm8ubGVmdCA9IHN0YXR1cy5sZWZ0IHx8IDA7XG4gICAgaW5mby5wZXJzaXN0ZW50ID0gcGVyc2lzdGVudDtcbiAgICBpbmZvLmRvd25sb2FkZWQgPSBkb3dubG9hZGVkLmxlbmd0aDtcbiAgICBpZiAoZnVsbCkge1xuICAgICAgaW5mby5kb3dubG9hZGVkRmlsZXMgPSBkb3dubG9hZGVkO1xuICAgIH1cbiAgICBpbmZvLmRhdGEgPSBkYXRhO1xuICAgIGFkZE1hbmlmZXN0SW5mb0FuZENvbnRpbnVlKGluZm8pO1xuXG4gIH0sIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBpbmZvIGZvciBtYW5pZmVzdCBpcyByZWFkeVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbk9mZmxpbmVDb250cm9sbGVyLnByb3RvdHlwZS5nZXRNYW5pZmVzdEZvbGRlckluZm8gPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgY2FsbGJhY2spIHtcbiAgUHJvbWlzZS5hbGwoW1xuICAgIG5ldyBSZWFkSXRlbShtYW5pZmVzdElkLCBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnN0b3Jlcy5NQU5JRkVTVCksXG4gIF0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICBsZXQgaW5mbyA9IHt9O1xuICAgIGNvbnN0IG1hbmlmZXN0U2V0dGluZ3MgPSByZXN1bHRzWzBdIHx8IHt9O1xuXG4gICAgbGV0IGRvd25sb2FkRm9sZGVyID0gbWFuaWZlc3RTZXR0aW5ncy5mb2xkZXI7XG4gICAgaWYgKCFkb3dubG9hZEZvbGRlcikge1xuICAgICAgLy8gdHJ5IHRvIHNlcnZlIGZyb20gZGVmYXVsdCBkb3dubG9hZCBmb2xkZXJcbiAgICAgIGRvd25sb2FkRm9sZGVyID0gYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5kb3dubG9hZHNGb2xkZXJQYXRoXG4gICAgfVxuICAgIGxldCB2aWRlb0ZvbGRlciA9IHBhdGguam9pbihkb3dubG9hZEZvbGRlciwgbWFuaWZlc3RJZCk7XG5cbiAgICBpbmZvLmZvbGRlciA9IHZpZGVvRm9sZGVyO1xuXG4gICAgLy8gZ2V0IHNpemUgb2YgZm9sZGVyXG4gICAgZ2V0U2l6ZSh2aWRlb0ZvbGRlciwgKGVyciwgc2l6ZSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBpbmZvLnNpemUgPSAwXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmZvLnNpemUgPSBzaXplO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2sobnVsbCwgaW5mbyk7XG4gICAgfSk7XG5cbiAgfSwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGZ1bGwgLSBpZiBkb3dubG9hZGVkIGluZm8gc2hvdWxkIGNvbnRhaW4gYWxsIGl0ZW1zIG9yIG9ubHkgdGhlIGxlbmd0aFxuICogQHJldHVybnMge1Byb21pc2V9IC0gcHJvbWlzZVxuICovXG5PZmZsaW5lQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0TWFuaWZlc3RJbmZvUHJvbWlzZSA9IGZ1bmN0aW9uIChtYW5pZmVzdElkLCBmdWxsKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHNlbGYuZ2V0TWFuaWZlc3RJbmZvKG1hbmlmZXN0SWQsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZWplY3QoZXJyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfVxuICAgIH0sIGZ1bGwpXG4gIH0pO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hbmlmZXN0SWQgLSBtYW5pZmVzdCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIGNhbGxiYWNrIHdpdGggcmVzb2x2ZWQgaW5mbyBkYXRhIGFib3V0IG1hbmlmZXN0IC0gaWYgc3VjaCBleGlzdHNcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5PZmZsaW5lQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0TWFuaWZlc3REYXRhRmlsZSA9IGZ1bmN0aW9uIChtYW5pZmVzdElkLCBjYWxsYmFjaykge1xuICBuZXcgUmVhZEl0ZW0obWFuaWZlc3RJZCwgYXBwU2V0dGluZ3MuZ2V0U2V0dGluZ3MoKS5zdG9yZXMuTUFOSUZFU1QpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBjYWxsYmFjayhkYXRhKTtcbiAgfSwgZnVuY3Rpb24gKCkge1xuICAgIGNhbGxiYWNrKCk7XG4gIH0pXG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9uU3VjY2VzcyAtIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbiByZW1vdmUgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZhaWx1cmUgLSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gcmVtb3ZlIGZhaWxlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbk9mZmxpbmVDb250cm9sbGVyLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAobWFuaWZlc3RJZCwgb25TdWNjZXNzLCBvbkZhaWx1cmUpIHtcbiAgY29uc3Qgc2V0dGluZ3NGb2xkZXIgPSBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnNldHRpbmdzRm9sZGVyICsgbWFuaWZlc3RJZDtcbiAgdGhpcy5nZXRNYW5pZmVzdERhdGFGaWxlKCBtYW5pZmVzdElkLCBmdW5jdGlvbiAoaW5mbykge1xuICAgIGlmICghaW5mbykge1xuICAgICAgLy8gbm8gbWFuaWZlc3QgZGF0YSBmb3VuZCBmb3IgbWFuaWZlc3QsIHRoZSBkb3dubG9hZCBoYXMgbm90IGJlZW4gc3RhcnRlZCA9PiBqdXN0IHJlbW92ZSBzZXR0aW5nc1xuICAgICAgcm1kaXIoc2V0dGluZ3NGb2xkZXIsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gXCJFTk9FTlRcIikge1xuICAgICAgICAgIG9uRmFpbHVyZShlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZm9sZGVyID0gaW5mby5mb2xkZXI7XG4gICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICAvLyB1c2UgZGVmYXVsdCBkb3dubG9hZCBmb2xkZXIgcGF0aFxuICAgICAgICBmb2xkZXIgPSAgcGF0aC5yZXNvbHZlKGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuZG93bmxvYWRzRm9sZGVyUGF0aCk7XG4gICAgICB9XG4gICAgICBjb25zdCBkb3dubG9hZHNGb2xkZXIgPSBmb2xkZXIgKyAnLycgKyBtYW5pZmVzdElkO1xuICAgICAgcm1kaXIoZG93bmxvYWRzRm9sZGVyLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgIT09IFwiRU5PRU5UXCIpIHtcbiAgICAgICAgICBvbkZhaWx1cmUoZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBybWRpcihzZXR0aW5nc0ZvbGRlciwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gXCJFTk9FTlRcIikge1xuICAgICAgICAgICAgICBvbkZhaWx1cmUoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSlcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYW5pZmVzdElkIC0gbWFuaWZlc3QgaWRlbnRpZmllclxuICogQHJldHVybnMge1Byb21pc2V9IC0gcHJvbWlzZVxuICovXG5PZmZsaW5lQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlUHJvbWlzZSA9IGZ1bmN0aW9uIChtYW5pZmVzdElkKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHNlbGYucmVtb3ZlKG1hbmlmZXN0SWQsIHJlc29sdmUsIHJlamVjdCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKlxuICogQHJldHVybnMge1Byb21pc2V9IC0gcHJvbWlzZVxuICovXG5PZmZsaW5lQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlQWxsUHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgY29uc3Qgc2V0dGluZ3NGb2xkZXIgPSBhcHBTZXR0aW5ncy5nZXRTZXR0aW5ncygpLnNldHRpbmdzRm9sZGVyO1xuXG4gICAgc2VsZi5nZXRNYW5pZmVzdHNMaXN0KGZ1bmN0aW9uIChlcnIsIGxpc3QpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcmVtb3ZlUCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaiA9IGxpc3QubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgcmVtb3ZlUC5wdXNoKHNlbGYucmVtb3ZlUHJvbWlzZShsaXN0W2ldKSlcbiAgICAgICAgfVxuICAgICAgICBQcm9taXNlLmFsbChyZW1vdmVQKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBybWRpcihzZXR0aW5nc0ZvbGRlciwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gXCJFTk9FTlRcIikge1xuICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFuaWZlc3RJZCAtIG1hbmlmZXN0IGlkZW50aWZpZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9uU3VjY2VzcyAtIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbiByZXN0b3JlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogQHBhcmFtIHtGdW5jdGlvbn0gb25GYWlsdXJlIC0gY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHJlc3RvcmUgZmFpbGVkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuT2ZmbGluZUNvbnRyb2xsZXIucHJvdG90eXBlLnJlc3RvcmVMb2NhbE1hbmlmZXN0ID0gZnVuY3Rpb24gKG1hbmlmZXN0SWQsIG9uU3VjY2Vzcywgb25GYWlsdXJlKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICB0aGlzLmdldE1hbmlmZXN0SW5mbyhtYW5pZmVzdElkLCBmdW5jdGlvbiAoZXJyLCBpbmZvKSB7XG4gICAgbGV0IHJlcHJlc2VudGF0aW9ucyA9IHt9O1xuICAgIHJlcHJlc2VudGF0aW9ucy52aWRlbyA9IGluZm8ubWFuaWZlc3QudmlkZW87XG4gICAgcmVwcmVzZW50YXRpb25zLmF1ZGlvID0gaW5mby5tYW5pZmVzdC5hdWRpbztcbiAgICByZXByZXNlbnRhdGlvbnMudGV4dCA9IGluZm8ubWFuaWZlc3QudGV4dDtcbiAgICBzZWxmLl9tYW5pZmVzdENvbnRyb2xsZXIuc2F2ZU1hbmlmZXN0V2l0aENob3NlblJlcHJlc2VudGF0aW9ucyhtYW5pZmVzdElkLCByZXByZXNlbnRhdGlvbnMpXG4gICAgICAgIC50aGVuKG9uU3VjY2Vzcywgb25GYWlsdXJlKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0Rvd25sb2Fkc1N0b3JhZ2VDb250cm9sbGVyfSBzdG9yYWdlIC0gZG93bmxvYWRzIHN0b3JhZ2UgY29udHJvbGxlclxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbk9mZmxpbmVDb250cm9sbGVyLnByb3RvdHlwZS5zZXREb3dubG9hZFN0b3JhZ2UgPSBmdW5jdGlvbiAoc3RvcmFnZSkge1xuICB0aGlzLmRvd25sb2FkU3RvcmFnZSA9IHN0b3JhZ2U7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9mZmxpbmVDb250cm9sbGVyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///99\n')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__100__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJnZXQtZm9sZGVyLXNpemVcIj85NzU2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEwMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTAwX187Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///100\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar fs = __webpack_require__(3);\n\nvar path = __webpack_require__(4);\n/**\n * @param {string} dir - folder path\n * @param {string} itemName - folder or file name\n * @param {boolean} includeFolders - if folders should be included\n * @param {boolean} includeFiles - if files should be included\n * @returns {Promise} promise\n */\n\n\nfunction filterDirItem(dir, itemName, includeFolders, includeFiles) {\n  var folderPath = path.resolve(dir + "/" + itemName);\n  return new Promise(function (resolve, reject) {\n    fs.stat(folderPath, function (err, stat) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      if (stat.isDirectory()) {\n        if (!includeFolders) {\n          itemName = undefined;\n        }\n\n        resolve(itemName);\n      } else {\n        if (!includeFiles) {\n          itemName = undefined;\n        }\n\n        resolve(itemName);\n      }\n    });\n  });\n}\n/**\n * @param {string} dir - folder path\n * @param {boolean} includeFolders - if folders should be included\n * @param {boolean} includeFiles - if files should be included\n * @returns {Promise} promise\n */\n\n\nfunction dirList(dir, includeFolders, includeFiles) {\n  if (typeof includeFolders === "undefined") {\n    includeFolders = true;\n  }\n\n  if (typeof includeFiles === "undefined") {\n    includeFiles = true;\n  }\n\n  return new Promise(function (resolve, reject) {\n    fs.readdir(dir, function (err, folders) {\n      if (err) {\n        //not found return empty list, there was another error ENOTDIR but it seems like this is not a valid case anyway\n        if (err.code === "ENOENT" || err.code === "ENOTDIR") {\n          resolve([]);\n        } else {\n          reject(err.message);\n        }\n      } else {\n        var foldersPromises = [];\n\n        for (var i = 0, j = folders.length; i < j; i++) {\n          foldersPromises.push(filterDirItem(dir, folders[i], includeFolders, includeFiles));\n        }\n\n        Promise.all(foldersPromises).then(function (results) {\n          resolve(results.filter(function (folderName) {\n            return typeof folderName !== "undefined";\n          }));\n        }, function (err) {\n          reject(err);\n        });\n      }\n    });\n  });\n}\n\nmodule.exports = dirList;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9kaXItbGlzdC5qcz8yZjFmIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsInBhdGgiLCJmaWx0ZXJEaXJJdGVtIiwiZGlyIiwiaXRlbU5hbWUiLCJpbmNsdWRlRm9sZGVycyIsImluY2x1ZGVGaWxlcyIsImZvbGRlclBhdGgiLCJyZXNvbHZlIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXQiLCJlcnIiLCJpc0RpcmVjdG9yeSIsInVuZGVmaW5lZCIsImRpckxpc3QiLCJyZWFkZGlyIiwiZm9sZGVycyIsImNvZGUiLCJtZXNzYWdlIiwiZm9sZGVyc1Byb21pc2VzIiwiaSIsImoiLCJsZW5ndGgiLCJwdXNoIiwiYWxsIiwidGhlbiIsInJlc3VsdHMiLCJmaWx0ZXIiLCJmb2xkZXJOYW1lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQWE7O0FBQ2IsSUFBTUEsRUFBRSxHQUFHQyxtQkFBTyxDQUFDLENBQUQsQ0FBbEI7O0FBQ0EsSUFBTUMsSUFBSSxHQUFHRCxtQkFBTyxDQUFDLENBQUQsQ0FBcEI7QUFDQTs7Ozs7Ozs7O0FBT0EsU0FBU0UsYUFBVCxDQUF3QkMsR0FBeEIsRUFBNkJDLFFBQTdCLEVBQXVDQyxjQUF2QyxFQUF1REMsWUFBdkQsRUFBcUU7QUFDbkUsTUFBTUMsVUFBVSxHQUFHTixJQUFJLENBQUNPLE9BQUwsQ0FBYUwsR0FBRyxHQUFHLEdBQU4sR0FBWUMsUUFBekIsQ0FBbkI7QUFDQSxTQUFPLElBQUlLLE9BQUosQ0FBWSxVQUFVRCxPQUFWLEVBQW1CRSxNQUFuQixFQUEyQjtBQUM1Q1gsTUFBRSxDQUFDWSxJQUFILENBQVFKLFVBQVIsRUFBb0IsVUFBVUssR0FBVixFQUFlRCxJQUFmLEVBQXFCO0FBQ3ZDLFVBQUlDLEdBQUosRUFBUztBQUNQRixjQUFNLENBQUNFLEdBQUQsQ0FBTjtBQUNBO0FBQ0Q7O0FBQ0QsVUFBSUQsSUFBSSxDQUFDRSxXQUFMLEVBQUosRUFBd0I7QUFDdEIsWUFBSSxDQUFDUixjQUFMLEVBQXFCO0FBQ25CRCxrQkFBUSxHQUFHVSxTQUFYO0FBQ0Q7O0FBQ0ROLGVBQU8sQ0FBQ0osUUFBRCxDQUFQO0FBQ0QsT0FMRCxNQUtPO0FBQ0wsWUFBSSxDQUFDRSxZQUFMLEVBQW1CO0FBQ2pCRixrQkFBUSxHQUFHVSxTQUFYO0FBQ0Q7O0FBQ0ROLGVBQU8sQ0FBQ0osUUFBRCxDQUFQO0FBQ0Q7QUFDRixLQWhCRDtBQWlCRCxHQWxCTSxDQUFQO0FBbUJEO0FBRUQ7Ozs7Ozs7O0FBTUEsU0FBU1csT0FBVCxDQUFrQlosR0FBbEIsRUFBdUJFLGNBQXZCLEVBQXVDQyxZQUF2QyxFQUFxRDtBQUNuRCxNQUFJLE9BQU9ELGNBQVAsS0FBMEIsV0FBOUIsRUFBMkM7QUFDekNBLGtCQUFjLEdBQUcsSUFBakI7QUFDRDs7QUFDRCxNQUFJLE9BQU9DLFlBQVAsS0FBd0IsV0FBNUIsRUFBeUM7QUFDdkNBLGdCQUFZLEdBQUcsSUFBZjtBQUNEOztBQUNELFNBQU8sSUFBSUcsT0FBSixDQUFZLFVBQVVELE9BQVYsRUFBbUJFLE1BQW5CLEVBQTJCO0FBQzVDWCxNQUFFLENBQUNpQixPQUFILENBQVdiLEdBQVgsRUFBZ0IsVUFBVVMsR0FBVixFQUFlSyxPQUFmLEVBQXdCO0FBQ3RDLFVBQUlMLEdBQUosRUFBUztBQUNQO0FBQ0EsWUFBSUEsR0FBRyxDQUFDTSxJQUFKLEtBQWEsUUFBYixJQUF5Qk4sR0FBRyxDQUFDTSxJQUFKLEtBQWEsU0FBMUMsRUFBcUQ7QUFDbkRWLGlCQUFPLENBQUMsRUFBRCxDQUFQO0FBQ0QsU0FGRCxNQUVPO0FBQ0xFLGdCQUFNLENBQUNFLEdBQUcsQ0FBQ08sT0FBTCxDQUFOO0FBQ0Q7QUFDRixPQVBELE1BT087QUFDTCxZQUFJQyxlQUFlLEdBQUcsRUFBdEI7O0FBQ0EsYUFBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBUixFQUFXQyxDQUFDLEdBQUdMLE9BQU8sQ0FBQ00sTUFBNUIsRUFBb0NGLENBQUMsR0FBR0MsQ0FBeEMsRUFBMkNELENBQUMsRUFBNUMsRUFBZ0Q7QUFDOUNELHlCQUFlLENBQUNJLElBQWhCLENBQXFCdEIsYUFBYSxDQUFDQyxHQUFELEVBQU1jLE9BQU8sQ0FBQ0ksQ0FBRCxDQUFiLEVBQWtCaEIsY0FBbEIsRUFBa0NDLFlBQWxDLENBQWxDO0FBQ0Q7O0FBQ0RHLGVBQU8sQ0FBQ2dCLEdBQVIsQ0FBWUwsZUFBWixFQUE2Qk0sSUFBN0IsQ0FBa0MsVUFBVUMsT0FBVixFQUFtQjtBQUNuRG5CLGlCQUFPLENBQUNtQixPQUFPLENBQUNDLE1BQVIsQ0FBZSxVQUFVQyxVQUFWLEVBQXNCO0FBQzNDLG1CQUFPLE9BQU9BLFVBQVAsS0FBc0IsV0FBN0I7QUFDRCxXQUZPLENBQUQsQ0FBUDtBQUdELFNBSkQsRUFJRyxVQUFVakIsR0FBVixFQUFlO0FBQ2hCRixnQkFBTSxDQUFDRSxHQUFELENBQU47QUFDRCxTQU5EO0FBT0Q7QUFDRixLQXJCRDtBQXNCRCxHQXZCTSxDQUFQO0FBd0JEOztBQUVEa0IsTUFBTSxDQUFDQyxPQUFQLEdBQWlCaEIsT0FBakIiLCJmaWxlIjoiMTAxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGRpciAtIGZvbGRlciBwYXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gaXRlbU5hbWUgLSBmb2xkZXIgb3IgZmlsZSBuYW1lXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVGb2xkZXJzIC0gaWYgZm9sZGVycyBzaG91bGQgYmUgaW5jbHVkZWRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZUZpbGVzIC0gaWYgZmlsZXMgc2hvdWxkIGJlIGluY2x1ZGVkXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gcHJvbWlzZVxuICovXG5mdW5jdGlvbiBmaWx0ZXJEaXJJdGVtIChkaXIsIGl0ZW1OYW1lLCBpbmNsdWRlRm9sZGVycywgaW5jbHVkZUZpbGVzKSB7XG4gIGNvbnN0IGZvbGRlclBhdGggPSBwYXRoLnJlc29sdmUoZGlyICsgXCIvXCIgKyBpdGVtTmFtZSk7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnMuc3RhdChmb2xkZXJQYXRoLCBmdW5jdGlvbiAoZXJyLCBzdGF0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc3RhdC5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIGlmICghaW5jbHVkZUZvbGRlcnMpIHtcbiAgICAgICAgICBpdGVtTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKGl0ZW1OYW1lKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFpbmNsdWRlRmlsZXMpIHtcbiAgICAgICAgICBpdGVtTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKGl0ZW1OYW1lKVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlyIC0gZm9sZGVyIHBhdGhcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZUZvbGRlcnMgLSBpZiBmb2xkZXJzIHNob3VsZCBiZSBpbmNsdWRlZFxuICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlRmlsZXMgLSBpZiBmaWxlcyBzaG91bGQgYmUgaW5jbHVkZWRcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKi9cbmZ1bmN0aW9uIGRpckxpc3QgKGRpciwgaW5jbHVkZUZvbGRlcnMsIGluY2x1ZGVGaWxlcykge1xuICBpZiAodHlwZW9mIGluY2x1ZGVGb2xkZXJzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgaW5jbHVkZUZvbGRlcnMgPSB0cnVlO1xuICB9XG4gIGlmICh0eXBlb2YgaW5jbHVkZUZpbGVzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgaW5jbHVkZUZpbGVzID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGZzLnJlYWRkaXIoZGlyLCBmdW5jdGlvbiAoZXJyLCBmb2xkZXJzKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIC8vbm90IGZvdW5kIHJldHVybiBlbXB0eSBsaXN0LCB0aGVyZSB3YXMgYW5vdGhlciBlcnJvciBFTk9URElSIGJ1dCBpdCBzZWVtcyBsaWtlIHRoaXMgaXMgbm90IGEgdmFsaWQgY2FzZSBhbnl3YXlcbiAgICAgICAgaWYgKGVyci5jb2RlID09PSBcIkVOT0VOVFwiIHx8IGVyci5jb2RlID09PSBcIkVOT1RESVJcIikge1xuICAgICAgICAgIHJlc29sdmUoW10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdChlcnIubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBmb2xkZXJzUHJvbWlzZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSBmb2xkZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgIGZvbGRlcnNQcm9taXNlcy5wdXNoKGZpbHRlckRpckl0ZW0oZGlyLCBmb2xkZXJzW2ldLCBpbmNsdWRlRm9sZGVycywgaW5jbHVkZUZpbGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgUHJvbWlzZS5hbGwoZm9sZGVyc1Byb21pc2VzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHRzLmZpbHRlcihmdW5jdGlvbiAoZm9sZGVyTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBmb2xkZXJOYW1lICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkaXJMaXN0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///101\n')},function(module,exports,__webpack_require__){"use strict";eval('\n/**\n *\n * @constructor\n */\n\nfunction SubscribersController() {\n  this._subscribers = {};\n}\n/**\n *\n * @param {Subscriber} subscriber - subscriber\n * @returns {void}\n */\n\n\nSubscribersController.prototype.addSubscriber = function (subscriber) {\n  var id = subscriber.getId();\n  this._subscribers[id] = subscriber;\n  return id;\n};\n/**\n *\n * @param {Array|String} subscribersId - subscriber identifier\n * @returns {void}\n */\n\n\nSubscribersController.prototype.removeSubscribersById = function (subscribersId) {\n  if (typeof subscribersId === "string") {\n    subscribersId = [subscribersId];\n  }\n\n  for (var i = 0, j = subscribersId.length; i < j; i++) {\n    if (this._subscribers[subscribersId[i]]) {\n      this._subscribers[subscribersId[i]].remove();\n\n      delete this._subscribers[subscribersId[i]];\n    }\n  }\n};\n/**\n *\n * Remove all subscribers for certain manifest based on any subscriberId that belongs to this manifest\n * @param {Array|String} subscriberId - subscriber identifier\n * @returns {void}\n */\n\n\nSubscribersController.prototype.removeAllManifestSubscribersById = function (subscriberId) {\n  var subscriber = subscriberId && this._subscribers[subscriberId];\n\n  if (subscriber) {\n    this.unsubscribe(subscriber.getManifestId());\n  }\n};\n/**\n *\n * @param {Array|String} manifestIds - manifest or manifests identifier\n * @returns {void}\n */\n\n\nSubscribersController.prototype.unsubscribe = function (manifestIds) {\n  var subscribersId = [];\n  var manifestIdsHash = {};\n\n  if (typeof manifestIds === "string") {\n    manifestIds = [manifestIds];\n  }\n\n  manifestIds = manifestIds || [];\n\n  for (var i = 0, j = manifestIds.length; i < j; i++) {\n    manifestIdsHash[manifestIds[i]] = true;\n  }\n\n  for (var key in this._subscribers) {\n    if (this._subscribers.hasOwnProperty(key)) {\n      if (manifestIdsHash[this._subscribers[key].getManifestId()]) {\n        subscribersId.push(key);\n      }\n    }\n  }\n\n  this.removeSubscribersById(subscribersId);\n};\n/**\n * @returns {void}\n */\n\n\nSubscribersController.prototype.unsubscribeAll = function () {\n  for (var key in this._subscribers) {\n    if (this._subscribers.hasOwnProperty(key)) {\n      this._subscribers[key].remove();\n    }\n  }\n\n  this._subscribers = {};\n};\n\nmodule.exports = SubscribersController;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvY29udHJvbGxlcnMvc3Vic2NyaWJlcnMtY29udHJvbGxlci5qcz9hODQ4Il0sIm5hbWVzIjpbIlN1YnNjcmliZXJzQ29udHJvbGxlciIsIl9zdWJzY3JpYmVycyIsInByb3RvdHlwZSIsImFkZFN1YnNjcmliZXIiLCJzdWJzY3JpYmVyIiwiaWQiLCJnZXRJZCIsInJlbW92ZVN1YnNjcmliZXJzQnlJZCIsInN1YnNjcmliZXJzSWQiLCJpIiwiaiIsImxlbmd0aCIsInJlbW92ZSIsInJlbW92ZUFsbE1hbmlmZXN0U3Vic2NyaWJlcnNCeUlkIiwic3Vic2NyaWJlcklkIiwidW5zdWJzY3JpYmUiLCJnZXRNYW5pZmVzdElkIiwibWFuaWZlc3RJZHMiLCJtYW5pZmVzdElkc0hhc2giLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsInB1c2giLCJ1bnN1YnNjcmliZUFsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7Ozs7O0FBSUEsU0FBU0EscUJBQVQsR0FBa0M7QUFDaEMsT0FBS0MsWUFBTCxHQUFvQixFQUFwQjtBQUNEO0FBRUQ7Ozs7Ozs7QUFLQUQscUJBQXFCLENBQUNFLFNBQXRCLENBQWdDQyxhQUFoQyxHQUFnRCxVQUFVQyxVQUFWLEVBQXNCO0FBQ3BFLE1BQU1DLEVBQUUsR0FBR0QsVUFBVSxDQUFDRSxLQUFYLEVBQVg7QUFDQSxPQUFLTCxZQUFMLENBQWtCSSxFQUFsQixJQUF3QkQsVUFBeEI7QUFDQSxTQUFPQyxFQUFQO0FBQ0QsQ0FKRDtBQU1BOzs7Ozs7O0FBS0FMLHFCQUFxQixDQUFDRSxTQUF0QixDQUFnQ0sscUJBQWhDLEdBQXdELFVBQVVDLGFBQVYsRUFBeUI7QUFDL0UsTUFBSSxPQUFPQSxhQUFQLEtBQXlCLFFBQTdCLEVBQXVDO0FBQ3JDQSxpQkFBYSxHQUFHLENBQUNBLGFBQUQsQ0FBaEI7QUFDRDs7QUFDRCxPQUFLLElBQUlDLENBQUMsR0FBRyxDQUFSLEVBQVdDLENBQUMsR0FBR0YsYUFBYSxDQUFDRyxNQUFsQyxFQUEwQ0YsQ0FBQyxHQUFHQyxDQUE5QyxFQUFpREQsQ0FBQyxFQUFsRCxFQUFzRDtBQUNwRCxRQUFJLEtBQUtSLFlBQUwsQ0FBa0JPLGFBQWEsQ0FBQ0MsQ0FBRCxDQUEvQixDQUFKLEVBQXlDO0FBQ3ZDLFdBQUtSLFlBQUwsQ0FBa0JPLGFBQWEsQ0FBQ0MsQ0FBRCxDQUEvQixFQUFvQ0csTUFBcEM7O0FBQ0EsYUFBTyxLQUFLWCxZQUFMLENBQWtCTyxhQUFhLENBQUNDLENBQUQsQ0FBL0IsQ0FBUDtBQUNEO0FBQ0Y7QUFDRixDQVZEO0FBWUE7Ozs7Ozs7O0FBTUFULHFCQUFxQixDQUFDRSxTQUF0QixDQUFnQ1csZ0NBQWhDLEdBQW1FLFVBQVVDLFlBQVYsRUFBd0I7QUFDekYsTUFBSVYsVUFBVSxHQUFHVSxZQUFZLElBQUksS0FBS2IsWUFBTCxDQUFrQmEsWUFBbEIsQ0FBakM7O0FBQ0EsTUFBSVYsVUFBSixFQUFnQjtBQUNkLFNBQUtXLFdBQUwsQ0FBaUJYLFVBQVUsQ0FBQ1ksYUFBWCxFQUFqQjtBQUNEO0FBQ0YsQ0FMRDtBQU9BOzs7Ozs7O0FBS0FoQixxQkFBcUIsQ0FBQ0UsU0FBdEIsQ0FBZ0NhLFdBQWhDLEdBQThDLFVBQVVFLFdBQVYsRUFBdUI7QUFDbkUsTUFBSVQsYUFBYSxHQUFHLEVBQXBCO0FBQ0EsTUFBSVUsZUFBZSxHQUFHLEVBQXRCOztBQUNBLE1BQUksT0FBT0QsV0FBUCxLQUF1QixRQUEzQixFQUFxQztBQUNuQ0EsZUFBVyxHQUFHLENBQUNBLFdBQUQsQ0FBZDtBQUNEOztBQUNEQSxhQUFXLEdBQUdBLFdBQVcsSUFBSSxFQUE3Qjs7QUFDQSxPQUFLLElBQUlSLENBQUMsR0FBRyxDQUFSLEVBQVdDLENBQUMsR0FBR08sV0FBVyxDQUFDTixNQUFoQyxFQUF3Q0YsQ0FBQyxHQUFHQyxDQUE1QyxFQUErQ0QsQ0FBQyxFQUFoRCxFQUFvRDtBQUNsRFMsbUJBQWUsQ0FBQ0QsV0FBVyxDQUFDUixDQUFELENBQVosQ0FBZixHQUFrQyxJQUFsQztBQUNEOztBQUVELE9BQUssSUFBSVUsR0FBVCxJQUFnQixLQUFLbEIsWUFBckIsRUFBbUM7QUFDakMsUUFBSSxLQUFLQSxZQUFMLENBQWtCbUIsY0FBbEIsQ0FBaUNELEdBQWpDLENBQUosRUFBMkM7QUFDekMsVUFBSUQsZUFBZSxDQUFDLEtBQUtqQixZQUFMLENBQWtCa0IsR0FBbEIsRUFBdUJILGFBQXZCLEVBQUQsQ0FBbkIsRUFBNkQ7QUFDM0RSLHFCQUFhLENBQUNhLElBQWQsQ0FBbUJGLEdBQW5CO0FBQ0Q7QUFDRjtBQUNGOztBQUVELE9BQUtaLHFCQUFMLENBQTJCQyxhQUEzQjtBQUNELENBcEJEO0FBc0JBOzs7OztBQUdBUixxQkFBcUIsQ0FBQ0UsU0FBdEIsQ0FBZ0NvQixjQUFoQyxHQUFpRCxZQUFZO0FBQzNELE9BQUssSUFBSUgsR0FBVCxJQUFnQixLQUFLbEIsWUFBckIsRUFBbUM7QUFDakMsUUFBSSxLQUFLQSxZQUFMLENBQWtCbUIsY0FBbEIsQ0FBaUNELEdBQWpDLENBQUosRUFBMkM7QUFDekMsV0FBS2xCLFlBQUwsQ0FBa0JrQixHQUFsQixFQUF1QlAsTUFBdkI7QUFDRDtBQUNGOztBQUNELE9BQUtYLFlBQUwsR0FBb0IsRUFBcEI7QUFDRCxDQVBEOztBQVNBc0IsTUFBTSxDQUFDQyxPQUFQLEdBQWlCeEIscUJBQWpCIiwiZmlsZSI6IjEwMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFN1YnNjcmliZXJzQ29udHJvbGxlciAoKSB7XG4gIHRoaXMuX3N1YnNjcmliZXJzID0ge307XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7U3Vic2NyaWJlcn0gc3Vic2NyaWJlciAtIHN1YnNjcmliZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5TdWJzY3JpYmVyc0NvbnRyb2xsZXIucHJvdG90eXBlLmFkZFN1YnNjcmliZXIgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICBjb25zdCBpZCA9IHN1YnNjcmliZXIuZ2V0SWQoKTtcbiAgdGhpcy5fc3Vic2NyaWJlcnNbaWRdID0gc3Vic2NyaWJlcjtcbiAgcmV0dXJuIGlkO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IHN1YnNjcmliZXJzSWQgLSBzdWJzY3JpYmVyIGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5TdWJzY3JpYmVyc0NvbnRyb2xsZXIucHJvdG90eXBlLnJlbW92ZVN1YnNjcmliZXJzQnlJZCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyc0lkKSB7XG4gIGlmICh0eXBlb2Ygc3Vic2NyaWJlcnNJZCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHN1YnNjcmliZXJzSWQgPSBbc3Vic2NyaWJlcnNJZF07XG4gIH1cbiAgZm9yIChsZXQgaSA9IDAsIGogPSBzdWJzY3JpYmVyc0lkLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGlmICh0aGlzLl9zdWJzY3JpYmVyc1tzdWJzY3JpYmVyc0lkW2ldXSkge1xuICAgICAgdGhpcy5fc3Vic2NyaWJlcnNbc3Vic2NyaWJlcnNJZFtpXV0ucmVtb3ZlKCk7XG4gICAgICBkZWxldGUodGhpcy5fc3Vic2NyaWJlcnNbc3Vic2NyaWJlcnNJZFtpXV0pO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKlxuICogUmVtb3ZlIGFsbCBzdWJzY3JpYmVycyBmb3IgY2VydGFpbiBtYW5pZmVzdCBiYXNlZCBvbiBhbnkgc3Vic2NyaWJlcklkIHRoYXQgYmVsb25ncyB0byB0aGlzIG1hbmlmZXN0XG4gKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gc3Vic2NyaWJlcklkIC0gc3Vic2NyaWJlciBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuU3Vic2NyaWJlcnNDb250cm9sbGVyLnByb3RvdHlwZS5yZW1vdmVBbGxNYW5pZmVzdFN1YnNjcmliZXJzQnlJZCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVySWQpIHtcbiAgbGV0IHN1YnNjcmliZXIgPSBzdWJzY3JpYmVySWQgJiYgdGhpcy5fc3Vic2NyaWJlcnNbc3Vic2NyaWJlcklkXTtcbiAgaWYgKHN1YnNjcmliZXIpIHtcbiAgICB0aGlzLnVuc3Vic2NyaWJlKHN1YnNjcmliZXIuZ2V0TWFuaWZlc3RJZCgpKTtcbiAgfVxufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IG1hbmlmZXN0SWRzIC0gbWFuaWZlc3Qgb3IgbWFuaWZlc3RzIGlkZW50aWZpZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5TdWJzY3JpYmVyc0NvbnRyb2xsZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG1hbmlmZXN0SWRzKSB7XG4gIGxldCBzdWJzY3JpYmVyc0lkID0gW107XG4gIGxldCBtYW5pZmVzdElkc0hhc2ggPSB7fTtcbiAgaWYgKHR5cGVvZiBtYW5pZmVzdElkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgIG1hbmlmZXN0SWRzID0gW21hbmlmZXN0SWRzXTtcbiAgfVxuICBtYW5pZmVzdElkcyA9IG1hbmlmZXN0SWRzIHx8IFtdO1xuICBmb3IgKGxldCBpID0gMCwgaiA9IG1hbmlmZXN0SWRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIG1hbmlmZXN0SWRzSGFzaFttYW5pZmVzdElkc1tpXV0gPSB0cnVlO1xuICB9XG5cbiAgZm9yIChsZXQga2V5IGluIHRoaXMuX3N1YnNjcmliZXJzKSB7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmliZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGlmIChtYW5pZmVzdElkc0hhc2hbdGhpcy5fc3Vic2NyaWJlcnNba2V5XS5nZXRNYW5pZmVzdElkKCldKSB7XG4gICAgICAgIHN1YnNjcmliZXJzSWQucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRoaXMucmVtb3ZlU3Vic2NyaWJlcnNCeUlkKHN1YnNjcmliZXJzSWQpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuU3Vic2NyaWJlcnNDb250cm9sbGVyLnByb3RvdHlwZS51bnN1YnNjcmliZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgZm9yIChsZXQga2V5IGluIHRoaXMuX3N1YnNjcmliZXJzKSB7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmliZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmliZXJzW2tleV0ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG4gIHRoaXMuX3N1YnNjcmliZXJzID0ge307XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN1YnNjcmliZXJzQ29udHJvbGxlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///102\n')},function(module,exports,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(__dirname) {/*eslint no-console: [\"error\", { allow: [\"warn\", \"error\", \"info\", \"log\"] }] */\n\n/*eslint no-sync: [\"off\"]*/\n\n\nvar isPortTaken = __webpack_require__(104);\n\nvar path = __webpack_require__(4);\n\nvar fs = __webpack_require__(3);\n\nvar fork = __webpack_require__(106).fork;\n\nvar appSettings = __webpack_require__(1);\n\nvar _require = __webpack_require__(2),\n    app = _require.app;\n\nvar CHILD_SCRIPT_FILENAME = 'startServer.js';\n/**\n * Offline content server\n * @param {object} offlineController : offline controller\n * @param {object} downloadController : download controller\n * @param {string} maxOfflineContentPortRange - max range for offline port to on which content can be served\n * @param {string} offlineContentPort - on which port offline content should be served, default is 3010\n * @constructor\n */\n\nfunction OfflineContentServer(offlineController, downloadController, maxOfflineContentPortRange, offlineContentPort) {\n  this._offlineController = offlineController;\n  this._downloadController = downloadController;\n  this._maxOfflineContentPortRange = maxOfflineContentPortRange;\n  this._offlineContentPort = offlineContentPort;\n  this.childProcess = undefined;\n}\n/**\n * Start http server in a child_process\n * @param {object} port : on which port offline content should be served, default is 3010\n * @param {object} callback : a callback function to get listen port (if default is already taken)\n * @constructor\n */\n\n\nOfflineContentServer.prototype._startServer = function (port, callback) {\n  var self = this; // NOTE: this is so ugly FIXME\n\n  var serverPath = path.join(app.getAppPath(), 'node_modules/downstream-electron');\n\n  if (!fs.existsSync(path.join(serverPath, CHILD_SCRIPT_FILENAME))) {\n    serverPath = path.join(app.getAppPath(), 'node_modules/downstream-electron/api/server');\n\n    if (!fs.existsSync(path.join(serverPath, CHILD_SCRIPT_FILENAME))) {\n      serverPath = app.getAppPath();\n\n      if (!fs.existsSync(path.join(serverPath, CHILD_SCRIPT_FILENAME))) {\n        serverPath = __dirname;\n      }\n    }\n  }\n\n  console.log('Server Path:', serverPath);\n  var script = path.join(serverPath, CHILD_SCRIPT_FILENAME);\n  console.log('Script for server:', script); //  FOR DEBUG PURPOSE self.childProcess = fork(script ,[],{execArgv:['--inspect=5860']});\n\n  self.childProcess = fork(script, []);\n  var routeName = appSettings.getSettings().downloadsName; // send init data for http server\n\n  var data = {\n    cmd: 'init',\n    routeName: routeName,\n    port: port\n  };\n  self.childProcess.send(data);\n  self.childProcess.on('error', function (err) {\n    console.error(err);\n  }); // handles message from child process\n\n  self.childProcess.on('message', function (data) {\n    if (data.cmd === 'log') {\n      // http server wants to log some data\n      console.log(data.log);\n    }\n\n    if (data.cmd === 'listening_port') {\n      // http server is listening => notify application for listen port\n      callback(data.port);\n    }\n\n    if (data.cmd === 'get_info') {\n      var requestId = data.requestId; // http server asks data folder for manifest id\n\n      var manifestId = data.args.manifest;\n\n      self._offlineController.getManifestInfo(manifestId, function (err, info) {\n        if (err) {\n          return self.childProcess.send({\n            error: err,\n            requestId: requestId\n          });\n        }\n\n        var downloadFolder = info.manifest.folder;\n\n        if (!downloadFolder) {\n          // try to serve from default download folder\n          downloadFolder = appSettings.getSettings().downloadsFolderPath;\n        } // send response back\n\n\n        return self.childProcess.send({\n          status: 'OK',\n          requestId: requestId,\n          result: {\n            folder: downloadFolder,\n            status: info.status\n          }\n        });\n      });\n    }\n\n    if (data.cmd === 'is_downloading') {\n      var _requestId = data.requestId;\n      var _manifestId = data.args.manifest;\n      var file = data.args.file;\n\n      var download = self._downloadController.getDownloading(_manifestId, file);\n\n      var downloadedCallback = function downloadedCallback(err) {\n        if (err) {\n          return self.childProcess.send({\n            error: err,\n            requestId: _requestId\n          });\n        }\n\n        return self.childProcess.send({\n          status: 'OK',\n          requestId: _requestId\n        });\n      };\n\n      if (download) {\n        // file is created but being downloading => wait for download before sending result\n        self._downloadController.waitForDownload(download, downloadedCallback);\n      } else {\n        return downloadedCallback();\n      }\n    }\n\n    if (data.cmd === 'perform_seek') {\n      var _requestId2 = data.requestId;\n      var _manifestId2 = data.args.manifest;\n      var _file = data.args.file;\n\n      var _downloadedCallback = function _downloadedCallback(err) {\n        if (err) {\n          return self.childProcess.send({\n            error: err,\n            requestId: _requestId2\n          });\n        }\n\n        return self.childProcess.send({\n          status: 'OK',\n          requestId: _requestId2\n        });\n      };\n\n      self._downloadController.performSeek(_manifestId2, _file, _downloadedCallback);\n    }\n  });\n  self.childProcess.on('close', function (code, signal) {\n    // child has closed\n    if (code == null) {\n      console.log('Child process closed with signal:', signal);\n    } else {\n      console.log('Child process closed with code:', code);\n    }\n  });\n};\n/**\n * @param {Function} callback - a callback function to get listen port (if default is taken)\n * @constructor\n */\n\n\nOfflineContentServer.prototype.serveOfflineContent = function (callback) {\n  var self = this;\n\n  function startOnPort(port) {\n    if (port > self._maxOfflineContentPortRange) {\n      return;\n    }\n\n    isPortTaken(port, function (err) {\n      if (err) {\n        port++;\n        startOnPort(port);\n      } else {\n        console.log('Port found:', port);\n\n        self._startServer(port, function () {\n          self._offlineContentPort = port;\n          callback(self._offlineContentPort);\n          console.info('Offline content served on port:', port);\n        });\n      }\n    });\n  }\n\n  startOnPort(this._offlineContentPort);\n};\n/*\n * Stop server process\n * @returns\n */\n\n\nOfflineContentServer.prototype.stop = function () {\n  this.childProcess.kill('SIGTERM');\n};\n\nmodule.exports = OfflineContentServer;\n/* WEBPACK VAR INJECTION */}.call(this, \"/\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvc2VydmVyL3NlcnZlci5qcz82MzQ0Il0sIm5hbWVzIjpbImlzUG9ydFRha2VuIiwicmVxdWlyZSIsInBhdGgiLCJmcyIsImZvcmsiLCJhcHBTZXR0aW5ncyIsImFwcCIsIkNISUxEX1NDUklQVF9GSUxFTkFNRSIsIk9mZmxpbmVDb250ZW50U2VydmVyIiwib2ZmbGluZUNvbnRyb2xsZXIiLCJkb3dubG9hZENvbnRyb2xsZXIiLCJtYXhPZmZsaW5lQ29udGVudFBvcnRSYW5nZSIsIm9mZmxpbmVDb250ZW50UG9ydCIsIl9vZmZsaW5lQ29udHJvbGxlciIsIl9kb3dubG9hZENvbnRyb2xsZXIiLCJfbWF4T2ZmbGluZUNvbnRlbnRQb3J0UmFuZ2UiLCJfb2ZmbGluZUNvbnRlbnRQb3J0IiwiY2hpbGRQcm9jZXNzIiwidW5kZWZpbmVkIiwicHJvdG90eXBlIiwiX3N0YXJ0U2VydmVyIiwicG9ydCIsImNhbGxiYWNrIiwic2VsZiIsInNlcnZlclBhdGgiLCJqb2luIiwiZ2V0QXBwUGF0aCIsImV4aXN0c1N5bmMiLCJfX2Rpcm5hbWUiLCJjb25zb2xlIiwibG9nIiwic2NyaXB0Iiwicm91dGVOYW1lIiwiZ2V0U2V0dGluZ3MiLCJkb3dubG9hZHNOYW1lIiwiZGF0YSIsImNtZCIsInNlbmQiLCJvbiIsImVyciIsImVycm9yIiwicmVxdWVzdElkIiwibWFuaWZlc3RJZCIsImFyZ3MiLCJtYW5pZmVzdCIsImdldE1hbmlmZXN0SW5mbyIsImluZm8iLCJkb3dubG9hZEZvbGRlciIsImZvbGRlciIsImRvd25sb2Fkc0ZvbGRlclBhdGgiLCJzdGF0dXMiLCJyZXN1bHQiLCJmaWxlIiwiZG93bmxvYWQiLCJnZXREb3dubG9hZGluZyIsImRvd25sb2FkZWRDYWxsYmFjayIsIndhaXRGb3JEb3dubG9hZCIsInBlcmZvcm1TZWVrIiwiY29kZSIsInNpZ25hbCIsInNlcnZlT2ZmbGluZUNvbnRlbnQiLCJzdGFydE9uUG9ydCIsInN0b3AiLCJraWxs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QUFWLEVBQW9CO0FBQ3ZFLE1BQU1DLElBQUksR0FBRyxJQUFiOztBQUVBLFdBQVNzQyxXQUFULENBQXNCeEMsSUFBdEIsRUFBNEI7QUFDMUIsUUFBSUEsSUFBSSxHQUFHRSxJQUFJLENBQUNSLDJCQUFoQixFQUE2QztBQUMzQztBQUNEOztBQUNEZixlQUFXLENBQUNxQixJQUFELEVBQU8sVUFBVWtCLEdBQVYsRUFBZTtBQUMvQixVQUFJQSxHQUFKLEVBQVM7QUFDUGxCLFlBQUk7QUFDSndDLG1CQUFXLENBQUN4QyxJQUFELENBQVg7QUFDRCxPQUhELE1BR087QUFDTFEsZUFBTyxDQUFDQyxHQUFSLENBQVksYUFBWixFQUEyQlQsSUFBM0I7O0FBQ0FFLFlBQUksQ0FBQ0gsWUFBTCxDQUFrQkMsSUFBbEIsRUFBd0IsWUFBWTtBQUNsQ0UsY0FBSSxDQUFDUCxtQkFBTCxHQUEyQkssSUFBM0I7QUFDQUMsa0JBQVEsQ0FBQ0MsSUFBSSxDQUFDUCxtQkFBTixDQUFSO0FBQ0FhLGlCQUFPLENBQUNpQixJQUFSLENBQWEsaUNBQWIsRUFBZ0R6QixJQUFoRDtBQUNELFNBSkQ7QUFLRDtBQUNGLEtBWlUsQ0FBWDtBQWFEOztBQUVEd0MsYUFBVyxDQUFDLEtBQUs3QyxtQkFBTixDQUFYO0FBQ0QsQ0F2QkQ7QUF5QkE7Ozs7OztBQUlBUixvQkFBb0IsQ0FBQ1csU0FBckIsQ0FBK0IyQyxJQUEvQixHQUFzQyxZQUFZO0FBQ2hELE9BQUs3QyxZQUFMLENBQWtCOEMsSUFBbEIsQ0FBdUIsU0FBdkI7QUFDRCxDQUZEOztBQUlBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJ6RCxvQkFBakIsQyIsImZpbGUiOiIxMDMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmVzbGludCBuby1jb25zb2xlOiBbXCJlcnJvclwiLCB7IGFsbG93OiBbXCJ3YXJuXCIsIFwiZXJyb3JcIiwgXCJpbmZvXCIsIFwibG9nXCJdIH1dICovXG4vKmVzbGludCBuby1zeW5jOiBbXCJvZmZcIl0qL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IGlzUG9ydFRha2VuID0gcmVxdWlyZSgnLi4vdXRpbC9pcy1wb3J0LXRha2VuJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIGZvcmsgPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJykuZm9yaztcbmNvbnN0IGFwcFNldHRpbmdzID0gcmVxdWlyZShcIi4uL2FwcC1zZXR0aW5nc1wiKTtcbmNvbnN0IHthcHB9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKTtcblxuY29uc3QgQ0hJTERfU0NSSVBUX0ZJTEVOQU1FID0gJ3N0YXJ0U2VydmVyLmpzJztcblxuLyoqXG4gKiBPZmZsaW5lIGNvbnRlbnQgc2VydmVyXG4gKiBAcGFyYW0ge29iamVjdH0gb2ZmbGluZUNvbnRyb2xsZXIgOiBvZmZsaW5lIGNvbnRyb2xsZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkb3dubG9hZENvbnRyb2xsZXIgOiBkb3dubG9hZCBjb250cm9sbGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gbWF4T2ZmbGluZUNvbnRlbnRQb3J0UmFuZ2UgLSBtYXggcmFuZ2UgZm9yIG9mZmxpbmUgcG9ydCB0byBvbiB3aGljaCBjb250ZW50IGNhbiBiZSBzZXJ2ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBvZmZsaW5lQ29udGVudFBvcnQgLSBvbiB3aGljaCBwb3J0IG9mZmxpbmUgY29udGVudCBzaG91bGQgYmUgc2VydmVkLCBkZWZhdWx0IGlzIDMwMTBcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBPZmZsaW5lQ29udGVudFNlcnZlciAob2ZmbGluZUNvbnRyb2xsZXIsIGRvd25sb2FkQ29udHJvbGxlciwgbWF4T2ZmbGluZUNvbnRlbnRQb3J0UmFuZ2UsIG9mZmxpbmVDb250ZW50UG9ydCkge1xuICB0aGlzLl9vZmZsaW5lQ29udHJvbGxlciA9IG9mZmxpbmVDb250cm9sbGVyO1xuICB0aGlzLl9kb3dubG9hZENvbnRyb2xsZXIgPSBkb3dubG9hZENvbnRyb2xsZXI7XG4gIHRoaXMuX21heE9mZmxpbmVDb250ZW50UG9ydFJhbmdlID0gbWF4T2ZmbGluZUNvbnRlbnRQb3J0UmFuZ2U7XG4gIHRoaXMuX29mZmxpbmVDb250ZW50UG9ydCA9IG9mZmxpbmVDb250ZW50UG9ydDtcbiAgdGhpcy5jaGlsZFByb2Nlc3MgPSB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogU3RhcnQgaHR0cCBzZXJ2ZXIgaW4gYSBjaGlsZF9wcm9jZXNzXG4gKiBAcGFyYW0ge29iamVjdH0gcG9ydCA6IG9uIHdoaWNoIHBvcnQgb2ZmbGluZSBjb250ZW50IHNob3VsZCBiZSBzZXJ2ZWQsIGRlZmF1bHQgaXMgMzAxMFxuICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIDogYSBjYWxsYmFjayBmdW5jdGlvbiB0byBnZXQgbGlzdGVuIHBvcnQgKGlmIGRlZmF1bHQgaXMgYWxyZWFkeSB0YWtlbilcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5PZmZsaW5lQ29udGVudFNlcnZlci5wcm90b3R5cGUuX3N0YXJ0U2VydmVyID0gZnVuY3Rpb24gKHBvcnQsIGNhbGxiYWNrKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICAvLyBOT1RFOiB0aGlzIGlzIHNvIHVnbHkgRklYTUVcbiAgbGV0IHNlcnZlclBhdGggPSBwYXRoLmpvaW4oYXBwLmdldEFwcFBhdGgoKSwgJ25vZGVfbW9kdWxlcy9kb3duc3RyZWFtLWVsZWN0cm9uJyk7XG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oc2VydmVyUGF0aCwgQ0hJTERfU0NSSVBUX0ZJTEVOQU1FKSkpIHtcbiAgICBzZXJ2ZXJQYXRoID0gcGF0aC5qb2luKGFwcC5nZXRBcHBQYXRoKCksICdub2RlX21vZHVsZXMvZG93bnN0cmVhbS1lbGVjdHJvbi9hcGkvc2VydmVyJyk7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGguam9pbihzZXJ2ZXJQYXRoLCBDSElMRF9TQ1JJUFRfRklMRU5BTUUpKSkge1xuICAgICAgc2VydmVyUGF0aCA9IGFwcC5nZXRBcHBQYXRoKCk7XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHNlcnZlclBhdGgsIENISUxEX1NDUklQVF9GSUxFTkFNRSkpKSB7XG4gICAgICAgIHNlcnZlclBhdGggPSBfX2Rpcm5hbWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ1NlcnZlciBQYXRoOicsIHNlcnZlclBhdGgpO1xuICBsZXQgc2NyaXB0ID0gcGF0aC5qb2luKHNlcnZlclBhdGgsIENISUxEX1NDUklQVF9GSUxFTkFNRSk7XG4gIGNvbnNvbGUubG9nKCdTY3JpcHQgZm9yIHNlcnZlcjonLCBzY3JpcHQpO1xuXG4gIC8vICBGT1IgREVCVUcgUFVSUE9TRSBzZWxmLmNoaWxkUHJvY2VzcyA9IGZvcmsoc2NyaXB0ICxbXSx7ZXhlY0FyZ3Y6WyctLWluc3BlY3Q9NTg2MCddfSk7XG4gIHNlbGYuY2hpbGRQcm9jZXNzID0gZm9yayhzY3JpcHQsIFtdKTtcbiAgbGV0IHJvdXRlTmFtZSA9IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuZG93bmxvYWRzTmFtZTtcblxuICAvLyBzZW5kIGluaXQgZGF0YSBmb3IgaHR0cCBzZXJ2ZXJcbiAgbGV0IGRhdGEgPSB7XG4gICAgY21kOiAnaW5pdCcsXG4gICAgcm91dGVOYW1lOiByb3V0ZU5hbWUsXG4gICAgcG9ydDogcG9ydFxuICB9O1xuICBzZWxmLmNoaWxkUHJvY2Vzcy5zZW5kKGRhdGEpXG5cbiAgc2VsZi5jaGlsZFByb2Nlc3Mub24oJ2Vycm9yJywgZnVuY3Rpb24gKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSlcbiAgLy8gaGFuZGxlcyBtZXNzYWdlIGZyb20gY2hpbGQgcHJvY2Vzc1xuICBzZWxmLmNoaWxkUHJvY2Vzcy5vbignbWVzc2FnZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgaWYgKGRhdGEuY21kID09PSAnbG9nJykge1xuICAgICAgLy8gaHR0cCBzZXJ2ZXIgd2FudHMgdG8gbG9nIHNvbWUgZGF0YVxuICAgICAgY29uc29sZS5sb2coZGF0YS5sb2cpO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmNtZCA9PT0gJ2xpc3RlbmluZ19wb3J0Jykge1xuICAgICAgLy8gaHR0cCBzZXJ2ZXIgaXMgbGlzdGVuaW5nID0+IG5vdGlmeSBhcHBsaWNhdGlvbiBmb3IgbGlzdGVuIHBvcnRcbiAgICAgIGNhbGxiYWNrKGRhdGEucG9ydCk7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuY21kID09PSAnZ2V0X2luZm8nKSB7XG5cbiAgICAgIGxldCByZXF1ZXN0SWQgPSBkYXRhLnJlcXVlc3RJZDtcbiAgICAgIC8vIGh0dHAgc2VydmVyIGFza3MgZGF0YSBmb2xkZXIgZm9yIG1hbmlmZXN0IGlkXG4gICAgICBsZXQgbWFuaWZlc3RJZCA9IGRhdGEuYXJncy5tYW5pZmVzdDtcblxuICAgICAgc2VsZi5fb2ZmbGluZUNvbnRyb2xsZXIuZ2V0TWFuaWZlc3RJbmZvKG1hbmlmZXN0SWQsIGZ1bmN0aW9uIChlcnIsIGluZm8pIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiBzZWxmLmNoaWxkUHJvY2Vzcy5zZW5kKHtlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkb3dubG9hZEZvbGRlciA9IGluZm8ubWFuaWZlc3QuZm9sZGVyO1xuICAgICAgICBpZiAoIWRvd25sb2FkRm9sZGVyKSB7XG4gICAgICAgICAgLy8gdHJ5IHRvIHNlcnZlIGZyb20gZGVmYXVsdCBkb3dubG9hZCBmb2xkZXJcbiAgICAgICAgICBkb3dubG9hZEZvbGRlciA9IGFwcFNldHRpbmdzLmdldFNldHRpbmdzKCkuZG93bmxvYWRzRm9sZGVyUGF0aFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2VuZCByZXNwb25zZSBiYWNrXG4gICAgICAgIHJldHVybiBzZWxmLmNoaWxkUHJvY2Vzcy5zZW5kKHtzdGF0dXM6ICdPSycsIHJlcXVlc3RJZDogcmVxdWVzdElkLCByZXN1bHQ6IHtmb2xkZXI6IGRvd25sb2FkRm9sZGVyLCBzdGF0dXM6IGluZm8uc3RhdHVzfX0pO1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5jbWQgPT09ICdpc19kb3dubG9hZGluZycpIHtcbiAgICAgIGxldCByZXF1ZXN0SWQgPSBkYXRhLnJlcXVlc3RJZDtcbiAgICAgIGxldCBtYW5pZmVzdElkID0gZGF0YS5hcmdzLm1hbmlmZXN0O1xuICAgICAgbGV0IGZpbGUgPSBkYXRhLmFyZ3MuZmlsZTtcblxuICAgICAgbGV0IGRvd25sb2FkID0gc2VsZi5fZG93bmxvYWRDb250cm9sbGVyLmdldERvd25sb2FkaW5nKG1hbmlmZXN0SWQsIGZpbGUpO1xuICAgICAgbGV0IGRvd25sb2FkZWRDYWxsYmFjayA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiBzZWxmLmNoaWxkUHJvY2Vzcy5zZW5kKHtlcnJvcjogZXJyLCByZXF1ZXN0SWQ6IHJlcXVlc3RJZH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxmLmNoaWxkUHJvY2Vzcy5zZW5kKHtzdGF0dXM6ICdPSycsIHJlcXVlc3RJZDogcmVxdWVzdElkfSk7XG4gICAgICB9XG4gICAgICBpZiAoZG93bmxvYWQpIHtcbiAgICAgICAgLy8gZmlsZSBpcyBjcmVhdGVkIGJ1dCBiZWluZyBkb3dubG9hZGluZyA9PiB3YWl0IGZvciBkb3dubG9hZCBiZWZvcmUgc2VuZGluZyByZXN1bHRcbiAgICAgICAgc2VsZi5fZG93bmxvYWRDb250cm9sbGVyLndhaXRGb3JEb3dubG9hZChkb3dubG9hZCwgZG93bmxvYWRlZENhbGxiYWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkb3dubG9hZGVkQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5jbWQgPT09ICdwZXJmb3JtX3NlZWsnKSB7XG4gICAgICBsZXQgcmVxdWVzdElkID0gZGF0YS5yZXF1ZXN0SWQ7XG4gICAgICBsZXQgbWFuaWZlc3RJZCA9IGRhdGEuYXJncy5tYW5pZmVzdDtcbiAgICAgIGxldCBmaWxlID0gZGF0YS5hcmdzLmZpbGU7XG4gICAgICBsZXQgZG93bmxvYWRlZENhbGxiYWNrID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuY2hpbGRQcm9jZXNzLnNlbmQoe2Vycm9yOiBlcnIsIHJlcXVlc3RJZDogcmVxdWVzdElkfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbGYuY2hpbGRQcm9jZXNzLnNlbmQoe3N0YXR1czogJ09LJywgcmVxdWVzdElkOiByZXF1ZXN0SWR9KTtcbiAgICAgIH1cbiAgICAgIHNlbGYuX2Rvd25sb2FkQ29udHJvbGxlci5wZXJmb3JtU2VlayhtYW5pZmVzdElkLCBmaWxlLCBkb3dubG9hZGVkQ2FsbGJhY2spXG4gICAgfVxuICB9KTtcblxuICBzZWxmLmNoaWxkUHJvY2Vzcy5vbignY2xvc2UnLCBmdW5jdGlvbiAoY29kZSwgc2lnbmFsKSB7XG4gICAgLy8gY2hpbGQgaGFzIGNsb3NlZFxuICAgIGlmIChjb2RlID09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDaGlsZCBwcm9jZXNzIGNsb3NlZCB3aXRoIHNpZ25hbDonLCBzaWduYWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnQ2hpbGQgcHJvY2VzcyBjbG9zZWQgd2l0aCBjb2RlOicsIGNvZGUpO1xuICAgIH1cbiAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gYSBjYWxsYmFjayBmdW5jdGlvbiB0byBnZXQgbGlzdGVuIHBvcnQgKGlmIGRlZmF1bHQgaXMgdGFrZW4pXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuT2ZmbGluZUNvbnRlbnRTZXJ2ZXIucHJvdG90eXBlLnNlcnZlT2ZmbGluZUNvbnRlbnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gc3RhcnRPblBvcnQgKHBvcnQpIHtcbiAgICBpZiAocG9ydCA+IHNlbGYuX21heE9mZmxpbmVDb250ZW50UG9ydFJhbmdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlzUG9ydFRha2VuKHBvcnQsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcG9ydCsrO1xuICAgICAgICBzdGFydE9uUG9ydChwb3J0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQb3J0IGZvdW5kOicsIHBvcnQpXG4gICAgICAgIHNlbGYuX3N0YXJ0U2VydmVyKHBvcnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLl9vZmZsaW5lQ29udGVudFBvcnQgPSBwb3J0O1xuICAgICAgICAgIGNhbGxiYWNrKHNlbGYuX29mZmxpbmVDb250ZW50UG9ydCk7XG4gICAgICAgICAgY29uc29sZS5pbmZvKCdPZmZsaW5lIGNvbnRlbnQgc2VydmVkIG9uIHBvcnQ6JywgcG9ydCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgc3RhcnRPblBvcnQodGhpcy5fb2ZmbGluZUNvbnRlbnRQb3J0KTtcbn1cblxuLypcbiAqIFN0b3Agc2VydmVyIHByb2Nlc3NcbiAqIEByZXR1cm5zXG4gKi9cbk9mZmxpbmVDb250ZW50U2VydmVyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNoaWxkUHJvY2Vzcy5raWxsKCdTSUdURVJNJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gT2ZmbGluZUNvbnRlbnRTZXJ2ZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///103\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar net = __webpack_require__(105);\n\nmodule.exports = function (port, fn) {\n  var tester = net.createServer().once('error', function (err) {\n    if (err) {\n      return fn(err);\n    }\n\n    fn(null, true);\n  }).once('listening', function () {\n    tester.once('close', function () {\n      fn(null, false);\n    }).close();\n  }).listen(port);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvdXRpbC9pcy1wb3J0LXRha2VuLmpzP2NkYzciXSwibmFtZXMiOlsibmV0IiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJwb3J0IiwiZm4iLCJ0ZXN0ZXIiLCJjcmVhdGVTZXJ2ZXIiLCJvbmNlIiwiZXJyIiwiY2xvc2UiLCJsaXN0ZW4iXSwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQU1BLEdBQUcsR0FBR0MsbUJBQU8sQ0FBQyxHQUFELENBQW5COztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsSUFBVixFQUFnQkMsRUFBaEIsRUFBb0I7QUFDbkMsTUFBTUMsTUFBTSxHQUFHTixHQUFHLENBQUNPLFlBQUosR0FBbUJDLElBQW5CLENBQXdCLE9BQXhCLEVBQWlDLFVBQVVDLEdBQVYsRUFBZTtBQUM3RCxRQUFJQSxHQUFKLEVBQVM7QUFDUCxhQUFPSixFQUFFLENBQUNJLEdBQUQsQ0FBVDtBQUNEOztBQUNESixNQUFFLENBQUMsSUFBRCxFQUFPLElBQVAsQ0FBRjtBQUNELEdBTGMsRUFLWkcsSUFMWSxDQUtQLFdBTE8sRUFLTSxZQUFZO0FBQy9CRixVQUFNLENBQUNFLElBQVAsQ0FBWSxPQUFaLEVBQXFCLFlBQVk7QUFDL0JILFFBQUUsQ0FBQyxJQUFELEVBQU8sS0FBUCxDQUFGO0FBQ0QsS0FGRCxFQUVHSyxLQUZIO0FBR0QsR0FUYyxFQVNaQyxNQVRZLENBU0xQLElBVEssQ0FBZjtBQVVELENBWEQiLCJmaWxlIjoiMTA0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwb3J0LCBmbikge1xuICBjb25zdCB0ZXN0ZXIgPSBuZXQuY3JlYXRlU2VydmVyKCkub25jZSgnZXJyb3InLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmV0dXJuIGZuKGVycik7XG4gICAgfVxuICAgIGZuKG51bGwsIHRydWUpO1xuICB9KS5vbmNlKCdsaXN0ZW5pbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGVzdGVyLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgZm4obnVsbCwgZmFsc2UpO1xuICAgIH0pLmNsb3NlKCk7XG4gIH0pLmxpc3Rlbihwb3J0KTtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///104\n")},function(module,exports){eval('module.exports = require("net");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJuZXRcIj8yMWVkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEwNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5ldFwiKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///105\n')},function(module,exports){eval('module.exports = require("child_process");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjaGlsZF9wcm9jZXNzXCI/M2RhNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxMDYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjaGlsZF9wcm9jZXNzXCIpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///106\n')}],g={},h.m=f,h.c=g,h.d=function(Q,F,B){h.o(Q,F)||Object.defineProperty(Q,F,{enumerable:!0,get:B})},h.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},h.t=function(F,Q){if(1&Q&&(F=h(F)),8&Q)return F;if(4&Q&&"object"==typeof F&&F&&F.__esModule)return F;var B=Object.create(null);if(h.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:F}),2&Q&&"string"!=typeof F)for(var U in F)h.d(B,U,function(Q){return F[Q]}.bind(null,U));return B},h.n=function(Q){var F=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return h.d(F,"a",F),F},h.o=function(Q,F){return Object.prototype.hasOwnProperty.call(Q,F)},h.p="",h(h.s=38);function h(Q){if(g[Q])return g[Q].exports;var F=g[Q]={i:Q,l:!1,exports:{}};return f[Q].call(F.exports,F,F.exports,h),F.l=!0,F.exports}var f,g});